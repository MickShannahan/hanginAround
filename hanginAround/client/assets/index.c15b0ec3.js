function Zk(e,t){for(var i=0;i<t.length;i++){const n=t[i];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in e)){const s=Object.getOwnPropertyDescriptor(n,r);s&&Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();var zt="top",ci="bottom",ui="right",Jt="left",uc="auto",oo=[zt,ci,ui,Jt],Vr="start",Bs="end",hb="clippingParents",xh="viewport",bs="popper",fb="reference",pd=oo.reduce(function(e,t){return e.concat([t+"-"+Vr,t+"-"+Bs])},[]),Mh=[].concat(oo,[uc]).reduce(function(e,t){return e.concat([t,t+"-"+Vr,t+"-"+Bs])},[]),pb="beforeRead",mb="read",gb="afterRead",vb="beforeMain",yb="main",bb="afterMain",Eb="beforeWrite",Tb="write",_b="afterWrite",wb=[pb,mb,gb,vb,yb,bb,Eb,Tb,_b];function cn(e){return e?(e.nodeName||"").toLowerCase():null}function Ci(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Gr(e){var t=Ci(e).Element;return e instanceof t||e instanceof Element}function _i(e){var t=Ci(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function $h(e){if(typeof ShadowRoot>"u")return!1;var t=Ci(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Qk(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var n=t.styles[i]||{},r=t.attributes[i]||{},s=t.elements[i];!_i(s)||!cn(s)||(Object.assign(s.style,n),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function eC(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(n){var r=t.elements[n],s=t.attributes[n]||{},o=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:i[n]),a=o.reduce(function(l,c){return l[c]="",l},{});!_i(r)||!cn(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}const Uh={name:"applyStyles",enabled:!0,phase:"write",fn:Qk,effect:eC,requires:["computeStyles"]};function sn(e){return e.split("-")[0]}var $r=Math.max,Nl=Math.min,Fs=Math.round;function md(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Sb(){return!/^((?!chrome|android).)*safari/i.test(md())}function js(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var n=e.getBoundingClientRect(),r=1,s=1;t&&_i(e)&&(r=e.offsetWidth>0&&Fs(n.width)/e.offsetWidth||1,s=e.offsetHeight>0&&Fs(n.height)/e.offsetHeight||1);var o=Gr(e)?Ci(e):window,a=o.visualViewport,l=!Sb()&&i,c=(n.left+(l&&a?a.offsetLeft:0))/r,u=(n.top+(l&&a?a.offsetTop:0))/s,d=n.width/r,h=n.height/s;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function Bh(e){var t=js(e),i=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:n}}function kb(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&$h(i)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function On(e){return Ci(e).getComputedStyle(e)}function tC(e){return["table","td","th"].indexOf(cn(e))>=0}function fr(e){return((Gr(e)?e.ownerDocument:e.document)||window.document).documentElement}function dc(e){return cn(e)==="html"?e:e.assignedSlot||e.parentNode||($h(e)?e.host:null)||fr(e)}function um(e){return!_i(e)||On(e).position==="fixed"?null:e.offsetParent}function iC(e){var t=/firefox/i.test(md()),i=/Trident/i.test(md());if(i&&_i(e)){var n=On(e);if(n.position==="fixed")return null}var r=dc(e);for($h(r)&&(r=r.host);_i(r)&&["html","body"].indexOf(cn(r))<0;){var s=On(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function ya(e){for(var t=Ci(e),i=um(e);i&&tC(i)&&On(i).position==="static";)i=um(i);return i&&(cn(i)==="html"||cn(i)==="body"&&On(i).position==="static")?t:i||iC(e)||t}function Fh(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ko(e,t,i){return $r(e,Nl(t,i))}function nC(e,t,i){var n=Ko(e,t,i);return n>i?i:n}function Cb(){return{top:0,right:0,bottom:0,left:0}}function Ab(e){return Object.assign({},Cb(),e)}function Rb(e,t){return t.reduce(function(i,n){return i[n]=e,i},{})}var rC=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,Ab(typeof t!="number"?t:Rb(t,oo))};function sC(e){var t,i=e.state,n=e.name,r=e.options,s=i.elements.arrow,o=i.modifiersData.popperOffsets,a=sn(i.placement),l=Fh(a),c=[Jt,ui].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var d=rC(r.padding,i),h=Bh(s),m=l==="y"?zt:Jt,v=l==="y"?ci:ui,y=i.rects.reference[u]+i.rects.reference[l]-o[l]-i.rects.popper[u],T=o[l]-i.rects.reference[l],S=ya(s),R=S?l==="y"?S.clientHeight||0:S.clientWidth||0:0,O=y/2-T/2,x=d[m],B=R-h[u]-d[v],ie=R/2-h[u]/2+O,ee=Ko(x,ie,B),de=l;i.modifiersData[n]=(t={},t[de]=ee,t.centerOffset=ee-ie,t)}}function oC(e){var t=e.state,i=e.options,n=i.element,r=n===void 0?"[data-popper-arrow]":n;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||!kb(t.elements.popper,r)||(t.elements.arrow=r))}const Pb={name:"arrow",enabled:!0,phase:"main",fn:sC,effect:oC,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Vs(e){return e.split("-")[1]}var aC={top:"auto",right:"auto",bottom:"auto",left:"auto"};function lC(e){var t=e.x,i=e.y,n=window,r=n.devicePixelRatio||1;return{x:Fs(t*r)/r||0,y:Fs(i*r)/r||0}}function dm(e){var t,i=e.popper,n=e.popperRect,r=e.placement,s=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=o.x,m=h===void 0?0:h,v=o.y,y=v===void 0?0:v,T=typeof u=="function"?u({x:m,y}):{x:m,y};m=T.x,y=T.y;var S=o.hasOwnProperty("x"),R=o.hasOwnProperty("y"),O=Jt,x=zt,B=window;if(c){var ie=ya(i),ee="clientHeight",de="clientWidth";if(ie===Ci(i)&&(ie=fr(i),On(ie).position!=="static"&&a==="absolute"&&(ee="scrollHeight",de="scrollWidth")),ie=ie,r===zt||(r===Jt||r===ui)&&s===Bs){x=ci;var se=d&&ie===B&&B.visualViewport?B.visualViewport.height:ie[ee];y-=se-n.height,y*=l?1:-1}if(r===Jt||(r===zt||r===ci)&&s===Bs){O=ui;var ye=d&&ie===B&&B.visualViewport?B.visualViewport.width:ie[de];m-=ye-n.width,m*=l?1:-1}}var Ae=Object.assign({position:a},c&&aC),ke=u===!0?lC({x:m,y}):{x:m,y};if(m=ke.x,y=ke.y,l){var _e;return Object.assign({},Ae,(_e={},_e[x]=R?"0":"",_e[O]=S?"0":"",_e.transform=(B.devicePixelRatio||1)<=1?"translate("+m+"px, "+y+"px)":"translate3d("+m+"px, "+y+"px, 0)",_e))}return Object.assign({},Ae,(t={},t[x]=R?y+"px":"",t[O]=S?m+"px":"",t.transform="",t))}function cC(e){var t=e.state,i=e.options,n=i.gpuAcceleration,r=n===void 0?!0:n,s=i.adaptive,o=s===void 0?!0:s,a=i.roundOffsets,l=a===void 0?!0:a,c={placement:sn(t.placement),variation:Vs(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,dm(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,dm(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const jh={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:cC,data:{}};var Ba={passive:!0};function uC(e){var t=e.state,i=e.instance,n=e.options,r=n.scroll,s=r===void 0?!0:r,o=n.resize,a=o===void 0?!0:o,l=Ci(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",i.update,Ba)}),a&&l.addEventListener("resize",i.update,Ba),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",i.update,Ba)}),a&&l.removeEventListener("resize",i.update,Ba)}}const Vh={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:uC,data:{}};var dC={left:"right",right:"left",bottom:"top",top:"bottom"};function dl(e){return e.replace(/left|right|bottom|top/g,function(t){return dC[t]})}var hC={start:"end",end:"start"};function hm(e){return e.replace(/start|end/g,function(t){return hC[t]})}function Gh(e){var t=Ci(e),i=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:i,scrollTop:n}}function Hh(e){return js(fr(e)).left+Gh(e).scrollLeft}function fC(e,t){var i=Ci(e),n=fr(e),r=i.visualViewport,s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=Sb();(c||!c&&t==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+Hh(e),y:l}}function pC(e){var t,i=fr(e),n=Gh(e),r=(t=e.ownerDocument)==null?void 0:t.body,s=$r(i.scrollWidth,i.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=$r(i.scrollHeight,i.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-n.scrollLeft+Hh(e),l=-n.scrollTop;return On(r||i).direction==="rtl"&&(a+=$r(i.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function Kh(e){var t=On(e),i=t.overflow,n=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+r+n)}function Ib(e){return["html","body","#document"].indexOf(cn(e))>=0?e.ownerDocument.body:_i(e)&&Kh(e)?e:Ib(dc(e))}function Wo(e,t){var i;t===void 0&&(t=[]);var n=Ib(e),r=n===((i=e.ownerDocument)==null?void 0:i.body),s=Ci(n),o=r?[s].concat(s.visualViewport||[],Kh(n)?n:[]):n,a=t.concat(o);return r?a:a.concat(Wo(dc(o)))}function gd(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function mC(e,t){var i=js(e,!1,t==="fixed");return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}function fm(e,t,i){return t===xh?gd(fC(e,i)):Gr(t)?mC(t,i):gd(pC(fr(e)))}function gC(e){var t=Wo(dc(e)),i=["absolute","fixed"].indexOf(On(e).position)>=0,n=i&&_i(e)?ya(e):e;return Gr(n)?t.filter(function(r){return Gr(r)&&kb(r,n)&&cn(r)!=="body"}):[]}function vC(e,t,i,n){var r=t==="clippingParents"?gC(e):[].concat(t),s=[].concat(r,[i]),o=s[0],a=s.reduce(function(l,c){var u=fm(e,c,n);return l.top=$r(u.top,l.top),l.right=Nl(u.right,l.right),l.bottom=Nl(u.bottom,l.bottom),l.left=$r(u.left,l.left),l},fm(e,o,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Ob(e){var t=e.reference,i=e.element,n=e.placement,r=n?sn(n):null,s=n?Vs(n):null,o=t.x+t.width/2-i.width/2,a=t.y+t.height/2-i.height/2,l;switch(r){case zt:l={x:o,y:t.y-i.height};break;case ci:l={x:o,y:t.y+t.height};break;case ui:l={x:t.x+t.width,y:a};break;case Jt:l={x:t.x-i.width,y:a};break;default:l={x:t.x,y:t.y}}var c=r?Fh(r):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Vr:l[c]=l[c]-(t[u]/2-i[u]/2);break;case Bs:l[c]=l[c]+(t[u]/2-i[u]/2);break}}return l}function Gs(e,t){t===void 0&&(t={});var i=t,n=i.placement,r=n===void 0?e.placement:n,s=i.strategy,o=s===void 0?e.strategy:s,a=i.boundary,l=a===void 0?hb:a,c=i.rootBoundary,u=c===void 0?xh:c,d=i.elementContext,h=d===void 0?bs:d,m=i.altBoundary,v=m===void 0?!1:m,y=i.padding,T=y===void 0?0:y,S=Ab(typeof T!="number"?T:Rb(T,oo)),R=h===bs?fb:bs,O=e.rects.popper,x=e.elements[v?R:h],B=vC(Gr(x)?x:x.contextElement||fr(e.elements.popper),l,u,o),ie=js(e.elements.reference),ee=Ob({reference:ie,element:O,strategy:"absolute",placement:r}),de=gd(Object.assign({},O,ee)),se=h===bs?de:ie,ye={top:B.top-se.top+S.top,bottom:se.bottom-B.bottom+S.bottom,left:B.left-se.left+S.left,right:se.right-B.right+S.right},Ae=e.modifiersData.offset;if(h===bs&&Ae){var ke=Ae[r];Object.keys(ye).forEach(function(_e){var Ie=[ui,ci].indexOf(_e)>=0?1:-1,ge=[zt,ci].indexOf(_e)>=0?"y":"x";ye[_e]+=ke[ge]*Ie})}return ye}function yC(e,t){t===void 0&&(t={});var i=t,n=i.placement,r=i.boundary,s=i.rootBoundary,o=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,c=l===void 0?Mh:l,u=Vs(n),d=u?a?pd:pd.filter(function(v){return Vs(v)===u}):oo,h=d.filter(function(v){return c.indexOf(v)>=0});h.length===0&&(h=d);var m=h.reduce(function(v,y){return v[y]=Gs(e,{placement:y,boundary:r,rootBoundary:s,padding:o})[sn(y)],v},{});return Object.keys(m).sort(function(v,y){return m[v]-m[y]})}function bC(e){if(sn(e)===uc)return[];var t=dl(e);return[hm(e),t,hm(t)]}function EC(e){var t=e.state,i=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var r=i.mainAxis,s=r===void 0?!0:r,o=i.altAxis,a=o===void 0?!0:o,l=i.fallbackPlacements,c=i.padding,u=i.boundary,d=i.rootBoundary,h=i.altBoundary,m=i.flipVariations,v=m===void 0?!0:m,y=i.allowedAutoPlacements,T=t.options.placement,S=sn(T),R=S===T,O=l||(R||!v?[dl(T)]:bC(T)),x=[T].concat(O).reduce(function(H,A){return H.concat(sn(A)===uc?yC(t,{placement:A,boundary:u,rootBoundary:d,padding:c,flipVariations:v,allowedAutoPlacements:y}):A)},[]),B=t.rects.reference,ie=t.rects.popper,ee=new Map,de=!0,se=x[0],ye=0;ye<x.length;ye++){var Ae=x[ye],ke=sn(Ae),_e=Vs(Ae)===Vr,Ie=[zt,ci].indexOf(ke)>=0,ge=Ie?"width":"height",Oe=Gs(t,{placement:Ae,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),we=Ie?_e?ui:Jt:_e?ci:zt;B[ge]>ie[ge]&&(we=dl(we));var E=dl(we),C=[];if(s&&C.push(Oe[ke]<=0),a&&C.push(Oe[we]<=0,Oe[E]<=0),C.every(function(H){return H})){se=Ae,de=!1;break}ee.set(Ae,C)}if(de)for(var D=v?3:1,N=function(A){var L=x.find(function(I){var j=ee.get(I);if(j)return j.slice(0,A).every(function(pe){return pe})});if(L)return se=L,"break"},M=D;M>0;M--){var F=N(M);if(F==="break")break}t.placement!==se&&(t.modifiersData[n]._skip=!0,t.placement=se,t.reset=!0)}}const Db={name:"flip",enabled:!0,phase:"main",fn:EC,requiresIfExists:["offset"],data:{_skip:!1}};function pm(e,t,i){return i===void 0&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function mm(e){return[zt,ui,ci,Jt].some(function(t){return e[t]>=0})}function TC(e){var t=e.state,i=e.name,n=t.rects.reference,r=t.rects.popper,s=t.modifiersData.preventOverflow,o=Gs(t,{elementContext:"reference"}),a=Gs(t,{altBoundary:!0}),l=pm(o,n),c=pm(a,r,s),u=mm(l),d=mm(c);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const Nb={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:TC};function _C(e,t,i){var n=sn(e),r=[Jt,zt].indexOf(n)>=0?-1:1,s=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[Jt,ui].indexOf(n)>=0?{x:a,y:o}:{x:o,y:a}}function wC(e){var t=e.state,i=e.options,n=e.name,r=i.offset,s=r===void 0?[0,0]:r,o=Mh.reduce(function(u,d){return u[d]=_C(d,t.rects,s),u},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=o}const Lb={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:wC};function SC(e){var t=e.state,i=e.name;t.modifiersData[i]=Ob({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Wh={name:"popperOffsets",enabled:!0,phase:"read",fn:SC,data:{}};function kC(e){return e==="x"?"y":"x"}function CC(e){var t=e.state,i=e.options,n=e.name,r=i.mainAxis,s=r===void 0?!0:r,o=i.altAxis,a=o===void 0?!1:o,l=i.boundary,c=i.rootBoundary,u=i.altBoundary,d=i.padding,h=i.tether,m=h===void 0?!0:h,v=i.tetherOffset,y=v===void 0?0:v,T=Gs(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),S=sn(t.placement),R=Vs(t.placement),O=!R,x=Fh(S),B=kC(x),ie=t.modifiersData.popperOffsets,ee=t.rects.reference,de=t.rects.popper,se=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,ye=typeof se=="number"?{mainAxis:se,altAxis:se}:Object.assign({mainAxis:0,altAxis:0},se),Ae=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,ke={x:0,y:0};if(!!ie){if(s){var _e,Ie=x==="y"?zt:Jt,ge=x==="y"?ci:ui,Oe=x==="y"?"height":"width",we=ie[x],E=we+T[Ie],C=we-T[ge],D=m?-de[Oe]/2:0,N=R===Vr?ee[Oe]:de[Oe],M=R===Vr?-de[Oe]:-ee[Oe],F=t.elements.arrow,H=m&&F?Bh(F):{width:0,height:0},A=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Cb(),L=A[Ie],I=A[ge],j=Ko(0,ee[Oe],H[Oe]),pe=O?ee[Oe]/2-D-j-L-ye.mainAxis:N-j-L-ye.mainAxis,he=O?-ee[Oe]/2+D+j+I+ye.mainAxis:M+j+I+ye.mainAxis,ue=t.elements.arrow&&ya(t.elements.arrow),ne=ue?x==="y"?ue.clientTop||0:ue.clientLeft||0:0,w=(_e=Ae==null?void 0:Ae[x])!=null?_e:0,P=we+pe-w-ne,$=we+he-w,U=Ko(m?Nl(E,P):E,we,m?$r(C,$):C);ie[x]=U,ke[x]=U-we}if(a){var V,q=x==="x"?zt:Jt,Y=x==="x"?ci:ui,K=ie[B],z=B==="y"?"height":"width",W=K+T[q],me=K-T[Y],oe=[zt,Jt].indexOf(S)!==-1,X=(V=Ae==null?void 0:Ae[B])!=null?V:0,le=oe?W:K-ee[z]-de[z]-X+ye.altAxis,ae=oe?K+ee[z]+de[z]-X-ye.altAxis:me,Ee=m&&oe?nC(le,K,ae):Ko(m?le:W,K,m?ae:me);ie[B]=Ee,ke[B]=Ee-K}t.modifiersData[n]=ke}}const xb={name:"preventOverflow",enabled:!0,phase:"main",fn:CC,requiresIfExists:["offset"]};function AC(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function RC(e){return e===Ci(e)||!_i(e)?Gh(e):AC(e)}function PC(e){var t=e.getBoundingClientRect(),i=Fs(t.width)/e.offsetWidth||1,n=Fs(t.height)/e.offsetHeight||1;return i!==1||n!==1}function IC(e,t,i){i===void 0&&(i=!1);var n=_i(t),r=_i(t)&&PC(t),s=fr(t),o=js(e,r,i),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!i)&&((cn(t)!=="body"||Kh(s))&&(a=RC(t)),_i(t)?(l=js(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=Hh(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function OC(e){var t=new Map,i=new Set,n=[];e.forEach(function(s){t.set(s.name,s)});function r(s){i.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!i.has(a)){var l=t.get(a);l&&r(l)}}),n.push(s)}return e.forEach(function(s){i.has(s.name)||r(s)}),n}function DC(e){var t=OC(e);return wb.reduce(function(i,n){return i.concat(t.filter(function(r){return r.phase===n}))},[])}function NC(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function LC(e){var t=e.reduce(function(i,n){var r=i[n.name];return i[n.name]=r?Object.assign({},r,n,{options:Object.assign({},r.options,n.options),data:Object.assign({},r.data,n.data)}):n,i},{});return Object.keys(t).map(function(i){return t[i]})}var gm={placement:"bottom",modifiers:[],strategy:"absolute"};function vm(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function hc(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,n=i===void 0?[]:i,r=t.defaultOptions,s=r===void 0?gm:r;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},gm,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,m={state:u,setOptions:function(S){var R=typeof S=="function"?S(u.options):S;y(),u.options=Object.assign({},s,u.options,R),u.scrollParents={reference:Gr(a)?Wo(a):a.contextElement?Wo(a.contextElement):[],popper:Wo(l)};var O=DC(LC([].concat(n,u.options.modifiers)));return u.orderedModifiers=O.filter(function(x){return x.enabled}),v(),m.update()},forceUpdate:function(){if(!h){var S=u.elements,R=S.reference,O=S.popper;if(!!vm(R,O)){u.rects={reference:IC(R,ya(O),u.options.strategy==="fixed"),popper:Bh(O)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(ye){return u.modifiersData[ye.name]=Object.assign({},ye.data)});for(var x=0;x<u.orderedModifiers.length;x++){if(u.reset===!0){u.reset=!1,x=-1;continue}var B=u.orderedModifiers[x],ie=B.fn,ee=B.options,de=ee===void 0?{}:ee,se=B.name;typeof ie=="function"&&(u=ie({state:u,options:de,name:se,instance:m})||u)}}}},update:NC(function(){return new Promise(function(T){m.forceUpdate(),T(u)})}),destroy:function(){y(),h=!0}};if(!vm(a,l))return m;m.setOptions(c).then(function(T){!h&&c.onFirstUpdate&&c.onFirstUpdate(T)});function v(){u.orderedModifiers.forEach(function(T){var S=T.name,R=T.options,O=R===void 0?{}:R,x=T.effect;if(typeof x=="function"){var B=x({state:u,name:S,instance:m,options:O}),ie=function(){};d.push(B||ie)}})}function y(){d.forEach(function(T){return T()}),d=[]}return m}}var xC=hc(),MC=[Vh,Wh,jh,Uh],$C=hc({defaultModifiers:MC}),UC=[Vh,Wh,jh,Uh,Lb,Db,xb,Pb,Nb],qh=hc({defaultModifiers:UC});const Mb=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:hc,detectOverflow:Gs,createPopperBase:xC,createPopper:qh,createPopperLite:$C,top:zt,bottom:ci,right:ui,left:Jt,auto:uc,basePlacements:oo,start:Vr,end:Bs,clippingParents:hb,viewport:xh,popper:bs,reference:fb,variationPlacements:pd,placements:Mh,beforeRead:pb,read:mb,afterRead:gb,beforeMain:vb,main:yb,afterMain:bb,beforeWrite:Eb,write:Tb,afterWrite:_b,modifierPhases:wb,applyStyles:Uh,arrow:Pb,computeStyles:jh,eventListeners:Vh,flip:Db,hide:Nb,offset:Lb,popperOffsets:Wh,preventOverflow:xb},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.2.1 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const BC=1e6,FC=1e3,vd="transitionend",jC=e=>e==null?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),VC=e=>{do e+=Math.floor(Math.random()*BC);while(document.getElementById(e));return e},$b=e=>{let t=e.getAttribute("data-bs-target");if(!t||t==="#"){let i=e.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),t=i&&i!=="#"?i.trim():null}return t},Ub=e=>{const t=$b(e);return t&&document.querySelector(t)?t:null},kn=e=>{const t=$b(e);return t?document.querySelector(t):null},GC=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:i}=window.getComputedStyle(e);const n=Number.parseFloat(t),r=Number.parseFloat(i);return!n&&!r?0:(t=t.split(",")[0],i=i.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(i))*FC)},Bb=e=>{e.dispatchEvent(new Event(vd))},Cn=e=>!e||typeof e!="object"?!1:(typeof e.jquery<"u"&&(e=e[0]),typeof e.nodeType<"u"),ar=e=>Cn(e)?e.jquery?e[0]:e:typeof e=="string"&&e.length>0?document.querySelector(e):null,ao=e=>{if(!Cn(e)||e.getClientRects().length===0)return!1;const t=getComputedStyle(e).getPropertyValue("visibility")==="visible",i=e.closest("details:not([open])");if(!i)return t;if(i!==e){const n=e.closest("summary");if(n&&n.parentNode!==i||n===null)return!1}return t},lr=e=>!e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("disabled")?!0:typeof e.disabled<"u"?e.disabled:e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false",Fb=e=>{if(!document.documentElement.attachShadow)return null;if(typeof e.getRootNode=="function"){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?Fb(e.parentNode):null},Ll=()=>{},ba=e=>{e.offsetHeight},jb=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,iu=[],HC=e=>{document.readyState==="loading"?(iu.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of iu)t()}),iu.push(e)):e()},Si=()=>document.documentElement.dir==="rtl",Ai=e=>{HC(()=>{const t=jb();if(t){const i=e.NAME,n=t.fn[i];t.fn[i]=e.jQueryInterface,t.fn[i].Constructor=e,t.fn[i].noConflict=()=>(t.fn[i]=n,e.jQueryInterface)}})},Tn=e=>{typeof e=="function"&&e()},Vb=(e,t,i=!0)=>{if(!i){Tn(e);return}const n=5,r=GC(t)+n;let s=!1;const o=({target:a})=>{a===t&&(s=!0,t.removeEventListener(vd,o),Tn(e))};t.addEventListener(vd,o),setTimeout(()=>{s||Bb(t)},r)},zh=(e,t,i,n)=>{const r=e.length;let s=e.indexOf(t);return s===-1?!i&&n?e[r-1]:e[0]:(s+=i?1:-1,n&&(s=(s+r)%r),e[Math.max(0,Math.min(s,r-1))])},KC=/[^.]*(?=\..*)\.|.*/,WC=/\..*/,qC=/::\d+$/,nu={};let ym=1;const Gb={mouseenter:"mouseover",mouseleave:"mouseout"},zC=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Hb(e,t){return t&&`${t}::${ym++}`||e.uidEvent||ym++}function Kb(e){const t=Hb(e);return e.uidEvent=t,nu[t]=nu[t]||{},nu[t]}function JC(e,t){return function i(n){return Jh(n,{delegateTarget:e}),i.oneOff&&J.off(e,n.type,t),t.apply(e,[n])}}function YC(e,t,i){return function n(r){const s=e.querySelectorAll(t);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(const a of s)if(a===o)return Jh(r,{delegateTarget:o}),n.oneOff&&J.off(e,r.type,t,i),i.apply(o,[r])}}function Wb(e,t,i=null){return Object.values(e).find(n=>n.callable===t&&n.delegationSelector===i)}function qb(e,t,i){const n=typeof t=="string",r=n?i:t||i;let s=zb(e);return zC.has(s)||(s=e),[n,r,s]}function bm(e,t,i,n,r){if(typeof t!="string"||!e)return;let[s,o,a]=qb(t,i,n);t in Gb&&(o=(v=>function(y){if(!y.relatedTarget||y.relatedTarget!==y.delegateTarget&&!y.delegateTarget.contains(y.relatedTarget))return v.call(this,y)})(o));const l=Kb(e),c=l[a]||(l[a]={}),u=Wb(c,o,s?i:null);if(u){u.oneOff=u.oneOff&&r;return}const d=Hb(o,t.replace(KC,"")),h=s?YC(e,i,o):JC(e,o);h.delegationSelector=s?i:null,h.callable=o,h.oneOff=r,h.uidEvent=d,c[d]=h,e.addEventListener(a,h,s)}function yd(e,t,i,n,r){const s=Wb(t[i],n,r);!s||(e.removeEventListener(i,s,Boolean(r)),delete t[i][s.uidEvent])}function XC(e,t,i,n){const r=t[i]||{};for(const s of Object.keys(r))if(s.includes(n)){const o=r[s];yd(e,t,i,o.callable,o.delegationSelector)}}function zb(e){return e=e.replace(WC,""),Gb[e]||e}const J={on(e,t,i,n){bm(e,t,i,n,!1)},one(e,t,i,n){bm(e,t,i,n,!0)},off(e,t,i,n){if(typeof t!="string"||!e)return;const[r,s,o]=qb(t,i,n),a=o!==t,l=Kb(e),c=l[o]||{},u=t.startsWith(".");if(typeof s<"u"){if(!Object.keys(c).length)return;yd(e,l,o,s,r?i:null);return}if(u)for(const d of Object.keys(l))XC(e,l,d,t.slice(1));for(const d of Object.keys(c)){const h=d.replace(qC,"");if(!a||t.includes(h)){const m=c[d];yd(e,l,o,m.callable,m.delegationSelector)}}},trigger(e,t,i){if(typeof t!="string"||!e)return null;const n=jb(),r=zb(t),s=t!==r;let o=null,a=!0,l=!0,c=!1;s&&n&&(o=n.Event(t,i),n(e).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),c=o.isDefaultPrevented());let u=new Event(t,{bubbles:a,cancelable:!0});return u=Jh(u,i),c&&u.preventDefault(),l&&e.dispatchEvent(u),u.defaultPrevented&&o&&o.preventDefault(),u}};function Jh(e,t){for(const[i,n]of Object.entries(t||{}))try{e[i]=n}catch{Object.defineProperty(e,i,{configurable:!0,get(){return n}})}return e}const Bn=new Map,ru={set(e,t,i){Bn.has(e)||Bn.set(e,new Map);const n=Bn.get(e);if(!n.has(t)&&n.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`);return}n.set(t,i)},get(e,t){return Bn.has(e)&&Bn.get(e).get(t)||null},remove(e,t){if(!Bn.has(e))return;const i=Bn.get(e);i.delete(t),i.size===0&&Bn.delete(e)}};function Em(e){if(e==="true")return!0;if(e==="false")return!1;if(e===Number(e).toString())return Number(e);if(e===""||e==="null")return null;if(typeof e!="string")return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function su(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const An={setDataAttribute(e,t,i){e.setAttribute(`data-bs-${su(t)}`,i)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${su(t)}`)},getDataAttributes(e){if(!e)return{};const t={},i=Object.keys(e.dataset).filter(n=>n.startsWith("bs")&&!n.startsWith("bsConfig"));for(const n of i){let r=n.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),t[r]=Em(e.dataset[n])}return t},getDataAttribute(e,t){return Em(e.getAttribute(`data-bs-${su(t)}`))}};class Ea{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,i){const n=Cn(i)?An.getDataAttribute(i,"config"):{};return{...this.constructor.Default,...typeof n=="object"?n:{},...Cn(i)?An.getDataAttributes(i):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,i=this.constructor.DefaultType){for(const n of Object.keys(i)){const r=i[n],s=t[n],o=Cn(s)?"element":jC(s);if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${o}" but expected type "${r}".`)}}}const ZC="5.2.1";class Ki extends Ea{constructor(t,i){super(),t=ar(t),t&&(this._element=t,this._config=this._getConfig(i),ru.set(this._element,this.constructor.DATA_KEY,this))}dispose(){ru.remove(this._element,this.constructor.DATA_KEY),J.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,i,n=!0){Vb(t,i,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return ru.get(ar(t),this.DATA_KEY)}static getOrCreateInstance(t,i={}){return this.getInstance(t)||new this(t,typeof i=="object"?i:null)}static get VERSION(){return ZC}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const fc=(e,t="hide")=>{const i=`click.dismiss${e.EVENT_KEY}`,n=e.NAME;J.on(document,i,`[data-bs-dismiss="${n}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),lr(this))return;const s=kn(this)||this.closest(`.${n}`);e.getOrCreateInstance(s)[t]()})},QC="alert",eA="bs.alert",Jb=`.${eA}`,tA=`close${Jb}`,iA=`closed${Jb}`,nA="fade",rA="show";class pc extends Ki{static get NAME(){return QC}close(){if(J.trigger(this._element,tA).defaultPrevented)return;this._element.classList.remove(rA);const i=this._element.classList.contains(nA);this._queueCallback(()=>this._destroyElement(),this._element,i)}_destroyElement(){this._element.remove(),J.trigger(this._element,iA),this.dispose()}static jQueryInterface(t){return this.each(function(){const i=pc.getOrCreateInstance(this);if(typeof t=="string"){if(i[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);i[t](this)}})}}fc(pc,"close");Ai(pc);const sA="button",oA="bs.button",aA=`.${oA}`,lA=".data-api",cA="active",Tm='[data-bs-toggle="button"]',uA=`click${aA}${lA}`;class mc extends Ki{static get NAME(){return sA}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(cA))}static jQueryInterface(t){return this.each(function(){const i=mc.getOrCreateInstance(this);t==="toggle"&&i[t]()})}}J.on(document,uA,Tm,e=>{e.preventDefault();const t=e.target.closest(Tm);mc.getOrCreateInstance(t).toggle()});Ai(mc);const Ve={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(i=>i.matches(t))},parents(e,t){const i=[];let n=e.parentNode.closest(t);for(;n;)i.push(n),n=n.parentNode.closest(t);return i},prev(e,t){let i=e.previousElementSibling;for(;i;){if(i.matches(t))return[i];i=i.previousElementSibling}return[]},next(e,t){let i=e.nextElementSibling;for(;i;){if(i.matches(t))return[i];i=i.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(i=>`${i}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(i=>!lr(i)&&ao(i))}},dA="swipe",lo=".bs.swipe",hA=`touchstart${lo}`,fA=`touchmove${lo}`,pA=`touchend${lo}`,mA=`pointerdown${lo}`,gA=`pointerup${lo}`,vA="touch",yA="pen",bA="pointer-event",EA=40,TA={endCallback:null,leftCallback:null,rightCallback:null},_A={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class xl extends Ea{constructor(t,i){super(),this._element=t,!(!t||!xl.isSupported())&&(this._config=this._getConfig(i),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return TA}static get DefaultType(){return _A}static get NAME(){return dA}dispose(){J.off(this._element,lo)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Tn(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=EA)return;const i=t/this._deltaX;this._deltaX=0,i&&Tn(i>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(J.on(this._element,mA,t=>this._start(t)),J.on(this._element,gA,t=>this._end(t)),this._element.classList.add(bA)):(J.on(this._element,hA,t=>this._start(t)),J.on(this._element,fA,t=>this._move(t)),J.on(this._element,pA,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===yA||t.pointerType===vA)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const wA="carousel",SA="bs.carousel",pr=`.${SA}`,Yb=".data-api",kA="ArrowLeft",CA="ArrowRight",AA=500,Ao="next",ds="prev",Es="left",hl="right",RA=`slide${pr}`,ou=`slid${pr}`,PA=`keydown${pr}`,IA=`mouseenter${pr}`,OA=`mouseleave${pr}`,DA=`dragstart${pr}`,NA=`load${pr}${Yb}`,LA=`click${pr}${Yb}`,Xb="carousel",Fa="active",xA="slide",MA="carousel-item-end",$A="carousel-item-start",UA="carousel-item-next",BA="carousel-item-prev",Zb=".active",Qb=".carousel-item",FA=Zb+Qb,jA=".carousel-item img",VA=".carousel-indicators",GA="[data-bs-slide], [data-bs-slide-to]",HA='[data-bs-ride="carousel"]',KA={[kA]:hl,[CA]:Es},WA={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},qA={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ta extends Ki{constructor(t,i){super(t,i),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ve.findOne(VA,this._element),this._addEventListeners(),this._config.ride===Xb&&this.cycle()}static get Default(){return WA}static get DefaultType(){return qA}static get NAME(){return wA}next(){this._slide(Ao)}nextWhenVisible(){!document.hidden&&ao(this._element)&&this.next()}prev(){this._slide(ds)}pause(){this._isSliding&&Bb(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(!!this._config.ride){if(this._isSliding){J.one(this._element,ou,()=>this.cycle());return}this.cycle()}}to(t){const i=this._getItems();if(t>i.length-1||t<0)return;if(this._isSliding){J.one(this._element,ou,()=>this.to(t));return}const n=this._getItemIndex(this._getActive());if(n===t)return;const r=t>n?Ao:ds;this._slide(r,i[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&J.on(this._element,PA,t=>this._keydown(t)),this._config.pause==="hover"&&(J.on(this._element,IA,()=>this.pause()),J.on(this._element,OA,()=>this._maybeEnableCycle())),this._config.touch&&xl.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of Ve.find(jA,this._element))J.on(n,DA,r=>r.preventDefault());const i={leftCallback:()=>this._slide(this._directionToOrder(Es)),rightCallback:()=>this._slide(this._directionToOrder(hl)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),AA+this._config.interval))}};this._swipeHelper=new xl(this._element,i)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const i=KA[t.key];i&&(t.preventDefault(),this._slide(this._directionToOrder(i)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const i=Ve.findOne(Zb,this._indicatorsElement);i.classList.remove(Fa),i.removeAttribute("aria-current");const n=Ve.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(Fa),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const i=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=i||this._config.defaultInterval}_slide(t,i=null){if(this._isSliding)return;const n=this._getActive(),r=t===Ao,s=i||zh(this._getItems(),n,r,this._config.wrap);if(s===n)return;const o=this._getItemIndex(s),a=m=>J.trigger(this._element,m,{relatedTarget:s,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:o});if(a(RA).defaultPrevented||!n||!s)return;const c=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=s;const u=r?$A:MA,d=r?UA:BA;s.classList.add(d),ba(s),n.classList.add(u),s.classList.add(u);const h=()=>{s.classList.remove(u,d),s.classList.add(Fa),n.classList.remove(Fa,d,u),this._isSliding=!1,a(ou)};this._queueCallback(h,n,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains(xA)}_getActive(){return Ve.findOne(FA,this._element)}_getItems(){return Ve.find(Qb,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return Si()?t===Es?ds:Ao:t===Es?Ao:ds}_orderToDirection(t){return Si()?t===ds?Es:hl:t===ds?hl:Es}static jQueryInterface(t){return this.each(function(){const i=Ta.getOrCreateInstance(this,t);if(typeof t=="number"){i.to(t);return}if(typeof t=="string"){if(i[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);i[t]()}})}}J.on(document,LA,GA,function(e){const t=kn(this);if(!t||!t.classList.contains(Xb))return;e.preventDefault();const i=Ta.getOrCreateInstance(t),n=this.getAttribute("data-bs-slide-to");if(n){i.to(n),i._maybeEnableCycle();return}if(An.getDataAttribute(this,"slide")==="next"){i.next(),i._maybeEnableCycle();return}i.prev(),i._maybeEnableCycle()});J.on(window,NA,()=>{const e=Ve.find(HA);for(const t of e)Ta.getOrCreateInstance(t)});Ai(Ta);const zA="collapse",JA="bs.collapse",_a=`.${JA}`,YA=".data-api",XA=`show${_a}`,ZA=`shown${_a}`,QA=`hide${_a}`,eR=`hidden${_a}`,tR=`click${_a}${YA}`,au="show",Ss="collapse",ja="collapsing",iR="collapsed",nR=`:scope .${Ss} .${Ss}`,rR="collapse-horizontal",sR="width",oR="height",aR=".collapse.show, .collapse.collapsing",bd='[data-bs-toggle="collapse"]',lR={parent:null,toggle:!0},cR={parent:"(null|element)",toggle:"boolean"};class ta extends Ki{constructor(t,i){super(t,i),this._isTransitioning=!1,this._triggerArray=[];const n=Ve.find(bd);for(const r of n){const s=Ub(r),o=Ve.find(s).filter(a=>a===this._element);s!==null&&o.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return lR}static get DefaultType(){return cR}static get NAME(){return zA}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(aR).filter(a=>a!==this._element).map(a=>ta.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||J.trigger(this._element,XA).defaultPrevented)return;for(const a of t)a.hide();const n=this._getDimension();this._element.classList.remove(Ss),this._element.classList.add(ja),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(ja),this._element.classList.add(Ss,au),this._element.style[n]="",J.trigger(this._element,ZA)},o=`scroll${n[0].toUpperCase()+n.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[n]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||J.trigger(this._element,QA).defaultPrevented)return;const i=this._getDimension();this._element.style[i]=`${this._element.getBoundingClientRect()[i]}px`,ba(this._element),this._element.classList.add(ja),this._element.classList.remove(Ss,au);for(const r of this._triggerArray){const s=kn(r);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(ja),this._element.classList.add(Ss),J.trigger(this._element,eR)};this._element.style[i]="",this._queueCallback(n,this._element,!0)}_isShown(t=this._element){return t.classList.contains(au)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=ar(t.parent),t}_getDimension(){return this._element.classList.contains(rR)?sR:oR}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(bd);for(const i of t){const n=kn(i);n&&this._addAriaAndCollapsedClass([i],this._isShown(n))}}_getFirstLevelChildren(t){const i=Ve.find(nR,this._config.parent);return Ve.find(t,this._config.parent).filter(n=>!i.includes(n))}_addAriaAndCollapsedClass(t,i){if(!!t.length)for(const n of t)n.classList.toggle(iR,!i),n.setAttribute("aria-expanded",i)}static jQueryInterface(t){const i={};return typeof t=="string"&&/show|hide/.test(t)&&(i.toggle=!1),this.each(function(){const n=ta.getOrCreateInstance(this,i);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}J.on(document,tR,bd,function(e){(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A")&&e.preventDefault();const t=Ub(this),i=Ve.find(t);for(const n of i)ta.getOrCreateInstance(n,{toggle:!1}).toggle()});Ai(ta);const _m="dropdown",uR="bs.dropdown",Xr=`.${uR}`,Yh=".data-api",dR="Escape",wm="Tab",hR="ArrowUp",Sm="ArrowDown",fR=2,pR=`hide${Xr}`,mR=`hidden${Xr}`,gR=`show${Xr}`,vR=`shown${Xr}`,eE=`click${Xr}${Yh}`,tE=`keydown${Xr}${Yh}`,yR=`keyup${Xr}${Yh}`,Ts="show",bR="dropup",ER="dropend",TR="dropstart",_R="dropup-center",wR="dropdown-center",Rs='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',SR=`${Rs}.${Ts}`,Ed=".dropdown-menu",kR=".navbar",CR=".navbar-nav",AR=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",RR=Si()?"top-end":"top-start",PR=Si()?"top-start":"top-end",IR=Si()?"bottom-end":"bottom-start",OR=Si()?"bottom-start":"bottom-end",DR=Si()?"left-start":"right-start",NR=Si()?"right-start":"left-start",LR="top",xR="bottom",MR={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},$R={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class on extends Ki{constructor(t,i){super(t,i),this._popper=null,this._parent=this._element.parentNode,this._menu=Ve.next(this._element,Ed)[0]||Ve.prev(this._element,Ed)[0],this._inNavbar=this._detectNavbar()}static get Default(){return MR}static get DefaultType(){return $R}static get NAME(){return _m}toggle(){return this._isShown()?this.hide():this.show()}show(){if(lr(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!J.trigger(this._element,gR,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(CR))for(const n of[].concat(...document.body.children))J.on(n,"mouseover",Ll);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ts),this._element.classList.add(Ts),J.trigger(this._element,vR,t)}}hide(){if(lr(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!J.trigger(this._element,pR,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const n of[].concat(...document.body.children))J.off(n,"mouseover",Ll);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ts),this._element.classList.remove(Ts),this._element.setAttribute("aria-expanded","false"),An.removeDataAttribute(this._menu,"popper"),J.trigger(this._element,mR,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!Cn(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${_m.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof Mb>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:Cn(this._config.reference)?t=ar(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const i=this._getPopperConfig();this._popper=qh(t,this._menu,i)}_isShown(){return this._menu.classList.contains(Ts)}_getPlacement(){const t=this._parent;if(t.classList.contains(ER))return DR;if(t.classList.contains(TR))return NR;if(t.classList.contains(_R))return LR;if(t.classList.contains(wR))return xR;const i=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(bR)?i?PR:RR:i?OR:IR}_detectNavbar(){return this._element.closest(kR)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(i=>Number.parseInt(i,10)):typeof t=="function"?i=>t(i,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(An.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...typeof this._config.popperConfig=="function"?this._config.popperConfig(t):this._config.popperConfig}}_selectMenuItem({key:t,target:i}){const n=Ve.find(AR,this._menu).filter(r=>ao(r));!n.length||zh(n,i,t===Sm,!n.includes(i)).focus()}static jQueryInterface(t){return this.each(function(){const i=on.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t]()}})}static clearMenus(t){if(t.button===fR||t.type==="keyup"&&t.key!==wm)return;const i=Ve.find(SR);for(const n of i){const r=on.getInstance(n);if(!r||r._config.autoClose===!1)continue;const s=t.composedPath(),o=s.includes(r._menu);if(s.includes(r._element)||r._config.autoClose==="inside"&&!o||r._config.autoClose==="outside"&&o||r._menu.contains(t.target)&&(t.type==="keyup"&&t.key===wm||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const a={relatedTarget:r._element};t.type==="click"&&(a.clickEvent=t),r._completeHide(a)}}static dataApiKeydownHandler(t){const i=/input|textarea/i.test(t.target.tagName),n=t.key===dR,r=[hR,Sm].includes(t.key);if(!r&&!n||i&&!n)return;t.preventDefault();const s=this.matches(Rs)?this:Ve.prev(this,Rs)[0]||Ve.next(this,Rs)[0],o=on.getOrCreateInstance(s);if(r){t.stopPropagation(),o.show(),o._selectMenuItem(t);return}o._isShown()&&(t.stopPropagation(),o.hide(),s.focus())}}J.on(document,tE,Rs,on.dataApiKeydownHandler);J.on(document,tE,Ed,on.dataApiKeydownHandler);J.on(document,eE,on.clearMenus);J.on(document,yR,on.clearMenus);J.on(document,eE,Rs,function(e){e.preventDefault(),on.getOrCreateInstance(this).toggle()});Ai(on);const km=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Cm=".sticky-top",Va="padding-right",Am="margin-right";class Td{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Va,i=>i+t),this._setElementAttributes(km,Va,i=>i+t),this._setElementAttributes(Cm,Am,i=>i-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Va),this._resetElementAttributes(km,Va),this._resetElementAttributes(Cm,Am)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,i,n){const r=this.getWidth(),s=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+r)return;this._saveInitialAttribute(o,i);const a=window.getComputedStyle(o).getPropertyValue(i);o.style.setProperty(i,`${n(Number.parseFloat(a))}px`)};this._applyManipulationCallback(t,s)}_saveInitialAttribute(t,i){const n=t.style.getPropertyValue(i);n&&An.setDataAttribute(t,i,n)}_resetElementAttributes(t,i){const n=r=>{const s=An.getDataAttribute(r,i);if(s===null){r.style.removeProperty(i);return}An.removeDataAttribute(r,i),r.style.setProperty(i,s)};this._applyManipulationCallback(t,n)}_applyManipulationCallback(t,i){if(Cn(t)){i(t);return}for(const n of Ve.find(t,this._element))i(n)}}const iE="backdrop",UR="fade",Rm="show",Pm=`mousedown.bs.${iE}`,BR={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},FR={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class nE extends Ea{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return BR}static get DefaultType(){return FR}static get NAME(){return iE}show(t){if(!this._config.isVisible){Tn(t);return}this._append();const i=this._getElement();this._config.isAnimated&&ba(i),i.classList.add(Rm),this._emulateAnimation(()=>{Tn(t)})}hide(t){if(!this._config.isVisible){Tn(t);return}this._getElement().classList.remove(Rm),this._emulateAnimation(()=>{this.dispose(),Tn(t)})}dispose(){!this._isAppended||(J.off(this._element,Pm),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(UR),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=ar(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),J.on(t,Pm,()=>{Tn(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){Vb(t,this._getElement(),this._config.isAnimated)}}const jR="focustrap",VR="bs.focustrap",Ml=`.${VR}`,GR=`focusin${Ml}`,HR=`keydown.tab${Ml}`,KR="Tab",WR="forward",Im="backward",qR={autofocus:!0,trapElement:null},zR={autofocus:"boolean",trapElement:"element"};class rE extends Ea{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return qR}static get DefaultType(){return zR}static get NAME(){return jR}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),J.off(document,Ml),J.on(document,GR,t=>this._handleFocusin(t)),J.on(document,HR,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,J.off(document,Ml))}_handleFocusin(t){const{trapElement:i}=this._config;if(t.target===document||t.target===i||i.contains(t.target))return;const n=Ve.focusableChildren(i);n.length===0?i.focus():this._lastTabNavDirection===Im?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){t.key===KR&&(this._lastTabNavDirection=t.shiftKey?Im:WR)}}const JR="modal",YR="bs.modal",Wi=`.${YR}`,XR=".data-api",ZR="Escape",QR=`hide${Wi}`,eP=`hidePrevented${Wi}`,sE=`hidden${Wi}`,oE=`show${Wi}`,tP=`shown${Wi}`,iP=`resize${Wi}`,nP=`click.dismiss${Wi}`,rP=`mousedown.dismiss${Wi}`,sP=`keydown.dismiss${Wi}`,oP=`click${Wi}${XR}`,Om="modal-open",aP="fade",Dm="show",lu="modal-static",lP=".modal.show",cP=".modal-dialog",uP=".modal-body",dP='[data-bs-toggle="modal"]',hP={backdrop:!0,focus:!0,keyboard:!0},fP={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Hs extends Ki{constructor(t,i){super(t,i),this._dialog=Ve.findOne(cP,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Td,this._addEventListeners()}static get Default(){return hP}static get DefaultType(){return fP}static get NAME(){return JR}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||J.trigger(this._element,oE,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Om),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||J.trigger(this._element,QR).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Dm),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const t of[window,this._dialog])J.off(t,Wi);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new nE({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new rE({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const i=Ve.findOne(uP,this._dialog);i&&(i.scrollTop=0),ba(this._element),this._element.classList.add(Dm);const n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,J.trigger(this._element,tP,{relatedTarget:t})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){J.on(this._element,sP,t=>{if(t.key===ZR){if(this._config.keyboard){t.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),J.on(window,iP,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),J.on(this._element,rP,t=>{J.one(this._element,nP,i=>{if(!(this._dialog.contains(t.target)||this._dialog.contains(i.target))){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Om),this._resetAdjustments(),this._scrollBar.reset(),J.trigger(this._element,sE)})}_isAnimated(){return this._element.classList.contains(aP)}_triggerBackdropTransition(){if(J.trigger(this._element,eP).defaultPrevented)return;const i=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;n==="hidden"||this._element.classList.contains(lu)||(i||(this._element.style.overflowY="hidden"),this._element.classList.add(lu),this._queueCallback(()=>{this._element.classList.remove(lu),this._queueCallback(()=>{this._element.style.overflowY=n},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,i=this._scrollBar.getWidth(),n=i>0;if(n&&!t){const r=Si()?"paddingLeft":"paddingRight";this._element.style[r]=`${i}px`}if(!n&&t){const r=Si()?"paddingRight":"paddingLeft";this._element.style[r]=`${i}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,i){return this.each(function(){const n=Hs.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](i)}})}}J.on(document,oP,dP,function(e){const t=kn(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),J.one(t,oE,r=>{r.defaultPrevented||J.one(t,sE,()=>{ao(this)&&this.focus()})});const i=Ve.findOne(lP);i&&Hs.getInstance(i).hide(),Hs.getOrCreateInstance(t).toggle(this)});fc(Hs);Ai(Hs);const pP="offcanvas",mP="bs.offcanvas",$n=`.${mP}`,aE=".data-api",gP=`load${$n}${aE}`,vP="Escape",Nm="show",Lm="showing",xm="hiding",yP="offcanvas-backdrop",lE=".offcanvas.show",bP=`show${$n}`,EP=`shown${$n}`,TP=`hide${$n}`,Mm=`hidePrevented${$n}`,cE=`hidden${$n}`,_P=`resize${$n}`,wP=`click${$n}${aE}`,SP=`keydown.dismiss${$n}`,kP='[data-bs-toggle="offcanvas"]',CP={backdrop:!0,keyboard:!0,scroll:!1},AP={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class cr extends Ki{constructor(t,i){super(t,i),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return CP}static get DefaultType(){return AP}static get NAME(){return pP}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||J.trigger(this._element,bP,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Td().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Lm);const n=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Nm),this._element.classList.remove(Lm),J.trigger(this._element,EP,{relatedTarget:t})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown||J.trigger(this._element,TP).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(xm),this._backdrop.hide();const i=()=>{this._element.classList.remove(Nm,xm),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Td().reset(),J.trigger(this._element,cE)};this._queueCallback(i,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){J.trigger(this._element,Mm);return}this.hide()},i=Boolean(this._config.backdrop);return new nE({className:yP,isVisible:i,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:i?t:null})}_initializeFocusTrap(){return new rE({trapElement:this._element})}_addEventListeners(){J.on(this._element,SP,t=>{if(t.key===vP){if(!this._config.keyboard){J.trigger(this._element,Mm);return}this.hide()}})}static jQueryInterface(t){return this.each(function(){const i=cr.getOrCreateInstance(this,t);if(typeof t=="string"){if(i[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);i[t](this)}})}}J.on(document,wP,kP,function(e){const t=kn(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),lr(this))return;J.one(t,cE,()=>{ao(this)&&this.focus()});const i=Ve.findOne(lE);i&&i!==t&&cr.getInstance(i).hide(),cr.getOrCreateInstance(t).toggle(this)});J.on(window,gP,()=>{for(const e of Ve.find(lE))cr.getOrCreateInstance(e).show()});J.on(window,_P,()=>{for(const e of Ve.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(e).position!=="fixed"&&cr.getOrCreateInstance(e).hide()});fc(cr);Ai(cr);const RP=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),PP=/^aria-[\w-]*$/i,IP=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,OP=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,DP=(e,t)=>{const i=e.nodeName.toLowerCase();return t.includes(i)?RP.has(i)?Boolean(IP.test(e.nodeValue)||OP.test(e.nodeValue)):!0:t.filter(n=>n instanceof RegExp).some(n=>n.test(i))},uE={"*":["class","dir","id","lang","role",PP],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function NP(e,t,i){if(!e.length)return e;if(i&&typeof i=="function")return i(e);const r=new window.DOMParser().parseFromString(e,"text/html"),s=[].concat(...r.body.querySelectorAll("*"));for(const o of s){const a=o.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),c=[].concat(t["*"]||[],t[a]||[]);for(const u of l)DP(u,c)||o.removeAttribute(u.nodeName)}return r.body.innerHTML}const LP="TemplateFactory",xP={allowList:uE,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},MP={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},$P={entry:"(string|element|function|null)",selector:"(string|element)"};class UP extends Ea{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return xP}static get DefaultType(){return MP}static get NAME(){return LP}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[r,s]of Object.entries(this._config.content))this._setContent(t,s,r);const i=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&i.classList.add(...n.split(" ")),i}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[i,n]of Object.entries(t))super._typeCheckConfig({selector:i,entry:n},$P)}_setContent(t,i,n){const r=Ve.findOne(n,t);if(!!r){if(i=this._resolvePossibleFunction(i),!i){r.remove();return}if(Cn(i)){this._putElementInTemplate(ar(i),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(i);return}r.textContent=i}}_maybeSanitize(t){return this._config.sanitize?NP(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return typeof t=="function"?t(this):t}_putElementInTemplate(t,i){if(this._config.html){i.innerHTML="",i.append(t);return}i.textContent=t.textContent}}const BP="tooltip",FP=new Set(["sanitize","allowList","sanitizeFn"]),cu="fade",jP="modal",Ga="show",VP=".tooltip-inner",$m=`.${jP}`,Um="hide.bs.modal",Ro="hover",uu="focus",GP="click",HP="manual",KP="hide",WP="hidden",qP="show",zP="shown",JP="inserted",YP="click",XP="focusin",ZP="focusout",QP="mouseenter",eI="mouseleave",tI={AUTO:"auto",TOP:"top",RIGHT:Si()?"left":"right",BOTTOM:"bottom",LEFT:Si()?"right":"left"},iI={allowList:uE,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},nI={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class co extends Ki{constructor(t,i){if(typeof Mb>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,i),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners()}static get Default(){return iI}static get DefaultType(){return nI}static get NAME(){return BP}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(t){if(!!this._isEnabled){if(t){const i=this._initializeOnDelegatedTarget(t);i._activeTrigger.click=!i._activeTrigger.click,i._isWithActiveTrigger()?i._enter():i._leave();return}if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),J.off(this._element.closest($m),Um,this._hideModalHandler),this.tip&&this.tip.remove(),this._config.originalTitle&&this._element.setAttribute("title",this._config.originalTitle),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=J.trigger(this._element,this.constructor.eventName(qP)),n=(Fb(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!n)return;this.tip&&(this.tip.remove(),this.tip=null);const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(r),J.trigger(this._element,this.constructor.eventName(JP))),this._popper?this._popper.update():this._popper=this._createPopper(r),r.classList.add(Ga),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))J.on(a,"mouseover",Ll);const o=()=>{J.trigger(this._element,this.constructor.eventName(zP)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||J.trigger(this._element,this.constructor.eventName(KP)).defaultPrevented)return;const i=this._getTipElement();if(i.classList.remove(Ga),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))J.off(r,"mouseover",Ll);this._activeTrigger[GP]=!1,this._activeTrigger[uu]=!1,this._activeTrigger[Ro]=!1,this._isHovered=null;const n=()=>{this._isWithActiveTrigger()||(this._isHovered||i.remove(),this._element.removeAttribute("aria-describedby"),J.trigger(this._element,this.constructor.eventName(WP)),this._disposePopper())};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const i=this._getTemplateFactory(t).toHtml();if(!i)return null;i.classList.remove(cu,Ga),i.classList.add(`bs-${this.constructor.NAME}-auto`);const n=VC(this.constructor.NAME).toString();return i.setAttribute("id",n),this._isAnimated()&&i.classList.add(cu),i}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new UP({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[VP]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._config.originalTitle}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(cu)}_isShown(){return this.tip&&this.tip.classList.contains(Ga)}_createPopper(t){const i=typeof this._config.placement=="function"?this._config.placement.call(this,t,this._element):this._config.placement,n=tI[i.toUpperCase()];return qh(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(i=>Number.parseInt(i,10)):typeof t=="function"?i=>t(i,this._element):t}_resolvePossibleFunction(t){return typeof t=="function"?t.call(this._element):t}_getPopperConfig(t){const i={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:n=>{this._getTipElement().setAttribute("data-popper-placement",n.state.placement)}}]};return{...i,...typeof this._config.popperConfig=="function"?this._config.popperConfig(i):this._config.popperConfig}}_setListeners(){const t=this._config.trigger.split(" ");for(const i of t)if(i==="click")J.on(this._element,this.constructor.eventName(YP),this._config.selector,n=>this.toggle(n));else if(i!==HP){const n=i===Ro?this.constructor.eventName(QP):this.constructor.eventName(XP),r=i===Ro?this.constructor.eventName(eI):this.constructor.eventName(ZP);J.on(this._element,n,this._config.selector,s=>{const o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusin"?uu:Ro]=!0,o._enter()}),J.on(this._element,r,this._config.selector,s=>{const o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusout"?uu:Ro]=o._element.contains(s.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},J.on(this._element.closest($m),Um,this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const t=this._config.originalTitle;!t||(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,i){clearTimeout(this._timeout),this._timeout=setTimeout(t,i)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const i=An.getDataAttributes(this._element);for(const n of Object.keys(i))FP.has(n)&&delete i[n];return t={...i,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:ar(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t.originalTitle=this._element.getAttribute("title")||"",typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const i in this._config)this.constructor.Default[i]!==this._config[i]&&(t[i]=this._config[i]);return t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(t){return this.each(function(){const i=co.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t]()}})}}Ai(co);const rI="popover",sI=".popover-header",oI=".popover-body",aI={...co.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},lI={...co.DefaultType,content:"(null|string|element|function)"};class Xh extends co{static get Default(){return aI}static get DefaultType(){return lI}static get NAME(){return rI}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[sI]:this._getTitle(),[oI]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const i=Xh.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t]()}})}}Ai(Xh);const cI="scrollspy",uI="bs.scrollspy",Zh=`.${uI}`,dI=".data-api",hI=`activate${Zh}`,Bm=`click${Zh}`,fI=`load${Zh}${dI}`,pI="dropdown-item",hs="active",mI='[data-bs-spy="scroll"]',du="[href]",gI=".nav, .list-group",Fm=".nav-link",vI=".nav-item",yI=".list-group-item",bI=`${Fm}, ${vI} > ${Fm}, ${yI}`,EI=".dropdown",TI=".dropdown-toggle",_I={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},wI={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class gc extends Ki{constructor(t,i){super(t,i),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return _I}static get DefaultType(){return wI}static get NAME(){return cI}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=ar(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(i=>Number.parseFloat(i))),t}_maybeEnableSmoothScroll(){!this._config.smoothScroll||(J.off(this._config.target,Bm),J.on(this._config.target,Bm,du,t=>{const i=this._observableSections.get(t.target.hash);if(i){t.preventDefault();const n=this._rootElement||window,r=i.offsetTop-this._element.offsetTop;if(n.scrollTo){n.scrollTo({top:r,behavior:"smooth"});return}n.scrollTop=r}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(i=>this._observerCallback(i),t)}_observerCallback(t){const i=o=>this._targetLinks.get(`#${o.target.id}`),n=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(i(o))},r=(this._rootElement||document.documentElement).scrollTop,s=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(i(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&a){if(n(o),!r)return;continue}!s&&!a&&n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=Ve.find(du,this._config.target);for(const i of t){if(!i.hash||lr(i))continue;const n=Ve.findOne(i.hash,this._element);ao(n)&&(this._targetLinks.set(i.hash,i),this._observableSections.set(i.hash,n))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(hs),this._activateParents(t),J.trigger(this._element,hI,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(pI)){Ve.findOne(TI,t.closest(EI)).classList.add(hs);return}for(const i of Ve.parents(t,gI))for(const n of Ve.prev(i,bI))n.classList.add(hs)}_clearActiveClass(t){t.classList.remove(hs);const i=Ve.find(`${du}.${hs}`,t);for(const n of i)n.classList.remove(hs)}static jQueryInterface(t){return this.each(function(){const i=gc.getOrCreateInstance(this,t);if(typeof t=="string"){if(i[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);i[t]()}})}}J.on(window,fI,()=>{for(const e of Ve.find(mI))gc.getOrCreateInstance(e)});Ai(gc);const SI="tab",kI="bs.tab",Zr=`.${kI}`,CI=`hide${Zr}`,AI=`hidden${Zr}`,RI=`show${Zr}`,PI=`shown${Zr}`,II=`click${Zr}`,OI=`keydown${Zr}`,DI=`load${Zr}`,NI="ArrowLeft",jm="ArrowRight",LI="ArrowUp",Vm="ArrowDown",Xn="active",Gm="fade",hu="show",xI="dropdown",MI=".dropdown-toggle",$I=".dropdown-menu",UI=".dropdown-item",fu=":not(.dropdown-toggle)",BI='.list-group, .nav, [role="tablist"]',FI=".nav-item, .list-group-item",jI=`.nav-link${fu}, .list-group-item${fu}, [role="tab"]${fu}`,dE='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',pu=`${jI}, ${dE}`,VI=`.${Xn}[data-bs-toggle="tab"], .${Xn}[data-bs-toggle="pill"], .${Xn}[data-bs-toggle="list"]`;class Ks extends Ki{constructor(t){super(t),this._parent=this._element.closest(BI),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),J.on(this._element,OI,i=>this._keydown(i)))}static get NAME(){return SI}show(){const t=this._element;if(this._elemIsActive(t))return;const i=this._getActiveElem(),n=i?J.trigger(i,CI,{relatedTarget:t}):null;J.trigger(t,RI,{relatedTarget:i}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(i,t),this._activate(t,i))}_activate(t,i){if(!t)return;t.classList.add(Xn),this._activate(kn(t));const n=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(hu);return}t.focus(),t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),J.trigger(t,PI,{relatedTarget:i})};this._queueCallback(n,t,t.classList.contains(Gm))}_deactivate(t,i){if(!t)return;t.classList.remove(Xn),t.blur(),this._deactivate(kn(t));const n=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(hu);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),J.trigger(t,AI,{relatedTarget:i})};this._queueCallback(n,t,t.classList.contains(Gm))}_keydown(t){if(![NI,jm,LI,Vm].includes(t.key))return;t.stopPropagation(),t.preventDefault();const i=[jm,Vm].includes(t.key),n=zh(this._getChildren().filter(r=>!lr(r)),t.target,i,!0);n&&Ks.getOrCreateInstance(n).show()}_getChildren(){return Ve.find(pu,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,i){this._setAttributeIfNotExists(t,"role","tablist");for(const n of i)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const i=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",i),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),i||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const i=kn(t);!i||(this._setAttributeIfNotExists(i,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(i,"aria-labelledby",`#${t.id}`))}_toggleDropDown(t,i){const n=this._getOuterElement(t);if(!n.classList.contains(xI))return;const r=(s,o)=>{const a=Ve.findOne(s,n);a&&a.classList.toggle(o,i)};r(MI,Xn),r($I,hu),r(UI,Xn),n.setAttribute("aria-expanded",i)}_setAttributeIfNotExists(t,i,n){t.hasAttribute(i)||t.setAttribute(i,n)}_elemIsActive(t){return t.classList.contains(Xn)}_getInnerElement(t){return t.matches(pu)?t:Ve.findOne(pu,t)}_getOuterElement(t){return t.closest(FI)||t}static jQueryInterface(t){return this.each(function(){const i=Ks.getOrCreateInstance(this);if(typeof t=="string"){if(i[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);i[t]()}})}}J.on(document,II,dE,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),!lr(this)&&Ks.getOrCreateInstance(this).show()});J.on(window,DI,()=>{for(const e of Ve.find(VI))Ks.getOrCreateInstance(e)});Ai(Ks);const GI="toast",HI="bs.toast",mr=`.${HI}`,KI=`mouseover${mr}`,WI=`mouseout${mr}`,qI=`focusin${mr}`,zI=`focusout${mr}`,JI=`hide${mr}`,YI=`hidden${mr}`,XI=`show${mr}`,ZI=`shown${mr}`,QI="fade",Hm="hide",Ha="show",Ka="showing",eO={animation:"boolean",autohide:"boolean",delay:"number"},tO={animation:!0,autohide:!0,delay:5e3};class vc extends Ki{constructor(t,i){super(t,i),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return tO}static get DefaultType(){return eO}static get NAME(){return GI}show(){if(J.trigger(this._element,XI).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(QI);const i=()=>{this._element.classList.remove(Ka),J.trigger(this._element,ZI),this._maybeScheduleHide()};this._element.classList.remove(Hm),ba(this._element),this._element.classList.add(Ha,Ka),this._queueCallback(i,this._element,this._config.animation)}hide(){if(!this.isShown()||J.trigger(this._element,JI).defaultPrevented)return;const i=()=>{this._element.classList.add(Hm),this._element.classList.remove(Ka,Ha),J.trigger(this._element,YI)};this._element.classList.add(Ka),this._queueCallback(i,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ha),super.dispose()}isShown(){return this._element.classList.contains(Ha)}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(t,i){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=i;break;case"focusin":case"focusout":this._hasKeyboardInteraction=i;break}if(i){this._clearTimeout();return}const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){J.on(this._element,KI,t=>this._onInteraction(t,!0)),J.on(this._element,WI,t=>this._onInteraction(t,!1)),J.on(this._element,qI,t=>this._onInteraction(t,!0)),J.on(this._element,zI,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const i=vc.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t](this)}})}}fc(vc);Ai(vc);function Qh(e,t){const i=Object.create(null),n=e.split(",");for(let r=0;r<n.length;r++)i[n[r]]=!0;return t?r=>!!i[r.toLowerCase()]:r=>!!i[r]}const iO="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",nO=Qh(iO);function hE(e){return!!e||e===""}function ef(e){if(xe(e)){const t={};for(let i=0;i<e.length;i++){const n=e[i],r=Dt(n)?oO(n):ef(n);if(r)for(const s in r)t[s]=r[s]}return t}else{if(Dt(e))return e;if(ut(e))return e}}const rO=/;(?![^(]*\))/g,sO=/:(.+)/;function oO(e){const t={};return e.split(rO).forEach(i=>{if(i){const n=i.split(sO);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function tf(e){let t="";if(Dt(e))t=e;else if(xe(e))for(let i=0;i<e.length;i++){const n=tf(e[i]);n&&(t+=n+" ")}else if(ut(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const nf=e=>Dt(e)?e:e==null?"":xe(e)||ut(e)&&(e.toString===gE||!Be(e.toString))?JSON.stringify(e,fE,2):String(e),fE=(e,t)=>t&&t.__v_isRef?fE(e,t.value):Is(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[n,r])=>(i[`${n} =>`]=r,i),{})}:pE(t)?{[`Set(${t.size})`]:[...t.values()]}:ut(t)&&!xe(t)&&!vE(t)?String(t):t,ot={},Ps=[],Bi=()=>{},aO=()=>!1,lO=/^on[^a-z]/,yc=e=>lO.test(e),rf=e=>e.startsWith("onUpdate:"),Bt=Object.assign,sf=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},cO=Object.prototype.hasOwnProperty,Ke=(e,t)=>cO.call(e,t),xe=Array.isArray,Is=e=>bc(e)==="[object Map]",pE=e=>bc(e)==="[object Set]",Be=e=>typeof e=="function",Dt=e=>typeof e=="string",of=e=>typeof e=="symbol",ut=e=>e!==null&&typeof e=="object",mE=e=>ut(e)&&Be(e.then)&&Be(e.catch),gE=Object.prototype.toString,bc=e=>gE.call(e),uO=e=>bc(e).slice(8,-1),vE=e=>bc(e)==="[object Object]",af=e=>Dt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,fl=Qh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ec=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},dO=/-(\w)/g,un=Ec(e=>e.replace(dO,(t,i)=>i?i.toUpperCase():"")),hO=/\B([A-Z])/g,uo=Ec(e=>e.replace(hO,"-$1").toLowerCase()),Tc=Ec(e=>e.charAt(0).toUpperCase()+e.slice(1)),mu=Ec(e=>e?`on${Tc(e)}`:""),ia=(e,t)=>!Object.is(e,t),gu=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},$l=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},fO=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Km;const pO=()=>Km||(Km=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Xi;class mO{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Xi&&(this.parent=Xi,this.index=(Xi.scopes||(Xi.scopes=[])).push(this)-1)}run(t){if(this.active){const i=Xi;try{return Xi=this,t()}finally{Xi=i}}}on(){Xi=this}off(){Xi=this.parent}stop(t){if(this.active){let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}}}function gO(e,t=Xi){t&&t.active&&t.effects.push(e)}const lf=e=>{const t=new Set(e);return t.w=0,t.n=0,t},yE=e=>(e.w&ur)>0,bE=e=>(e.n&ur)>0,vO=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=ur},yO=e=>{const{deps:t}=e;if(t.length){let i=0;for(let n=0;n<t.length;n++){const r=t[n];yE(r)&&!bE(r)?r.delete(e):t[i++]=r,r.w&=~ur,r.n&=~ur}t.length=i}},_d=new WeakMap;let jo=0,ur=1;const wd=30;let Di;const Ur=Symbol(""),Sd=Symbol("");class cf{constructor(t,i=null,n){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,gO(this,n)}run(){if(!this.active)return this.fn();let t=Di,i=ir;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Di,Di=this,ir=!0,ur=1<<++jo,jo<=wd?vO(this):Wm(this),this.fn()}finally{jo<=wd&&yO(this),ur=1<<--jo,Di=this.parent,ir=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Di===this?this.deferStop=!0:this.active&&(Wm(this),this.onStop&&this.onStop(),this.active=!1)}}function Wm(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}let ir=!0;const EE=[];function ho(){EE.push(ir),ir=!1}function fo(){const e=EE.pop();ir=e===void 0?!0:e}function di(e,t,i){if(ir&&Di){let n=_d.get(e);n||_d.set(e,n=new Map);let r=n.get(i);r||n.set(i,r=lf()),TE(r)}}function TE(e,t){let i=!1;jo<=wd?bE(e)||(e.n|=ur,i=!yE(e)):i=!e.has(Di),i&&(e.add(Di),Di.deps.push(e))}function Dn(e,t,i,n,r,s){const o=_d.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(i==="length"&&xe(e))o.forEach((l,c)=>{(c==="length"||c>=n)&&a.push(l)});else switch(i!==void 0&&a.push(o.get(i)),t){case"add":xe(e)?af(i)&&a.push(o.get("length")):(a.push(o.get(Ur)),Is(e)&&a.push(o.get(Sd)));break;case"delete":xe(e)||(a.push(o.get(Ur)),Is(e)&&a.push(o.get(Sd)));break;case"set":Is(e)&&a.push(o.get(Ur));break}if(a.length===1)a[0]&&kd(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);kd(lf(l))}}function kd(e,t){const i=xe(e)?e:[...e];for(const n of i)n.computed&&qm(n);for(const n of i)n.computed||qm(n)}function qm(e,t){(e!==Di||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const bO=Qh("__proto__,__v_isRef,__isVue"),_E=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(of)),EO=uf(),TO=uf(!1,!0),_O=uf(!0),zm=wO();function wO(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const n=Xe(this);for(let s=0,o=this.length;s<o;s++)di(n,"get",s+"");const r=n[t](...i);return r===-1||r===!1?n[t](...i.map(Xe)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){ho();const n=Xe(this)[t].apply(this,i);return fo(),n}}),e}function uf(e=!1,t=!1){return function(n,r,s){if(r==="__v_isReactive")return!e;if(r==="__v_isReadonly")return e;if(r==="__v_isShallow")return t;if(r==="__v_raw"&&s===(e?t?BO:AE:t?CE:kE).get(n))return n;const o=xe(n);if(!e&&o&&Ke(zm,r))return Reflect.get(zm,r,s);const a=Reflect.get(n,r,s);return(of(r)?_E.has(r):bO(r))||(e||di(n,"get",r),t)?a:Ut(a)?o&&af(r)?a:a.value:ut(a)?e?RE(a):po(a):a}}const SO=wE(),kO=wE(!0);function wE(e=!1){return function(i,n,r,s){let o=i[n];if(Ws(o)&&Ut(o)&&!Ut(r))return!1;if(!e&&(!Ul(r)&&!Ws(r)&&(o=Xe(o),r=Xe(r)),!xe(i)&&Ut(o)&&!Ut(r)))return o.value=r,!0;const a=xe(i)&&af(n)?Number(n)<i.length:Ke(i,n),l=Reflect.set(i,n,r,s);return i===Xe(s)&&(a?ia(r,o)&&Dn(i,"set",n,r):Dn(i,"add",n,r)),l}}function CO(e,t){const i=Ke(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&i&&Dn(e,"delete",t,void 0),n}function AO(e,t){const i=Reflect.has(e,t);return(!of(t)||!_E.has(t))&&di(e,"has",t),i}function RO(e){return di(e,"iterate",xe(e)?"length":Ur),Reflect.ownKeys(e)}const SE={get:EO,set:SO,deleteProperty:CO,has:AO,ownKeys:RO},PO={get:_O,set(e,t){return!0},deleteProperty(e,t){return!0}},IO=Bt({},SE,{get:TO,set:kO}),df=e=>e,_c=e=>Reflect.getPrototypeOf(e);function Wa(e,t,i=!1,n=!1){e=e.__v_raw;const r=Xe(e),s=Xe(t);i||(t!==s&&di(r,"get",t),di(r,"get",s));const{has:o}=_c(r),a=n?df:i?pf:na;if(o.call(r,t))return a(e.get(t));if(o.call(r,s))return a(e.get(s));e!==r&&e.get(t)}function qa(e,t=!1){const i=this.__v_raw,n=Xe(i),r=Xe(e);return t||(e!==r&&di(n,"has",e),di(n,"has",r)),e===r?i.has(e):i.has(e)||i.has(r)}function za(e,t=!1){return e=e.__v_raw,!t&&di(Xe(e),"iterate",Ur),Reflect.get(e,"size",e)}function Jm(e){e=Xe(e);const t=Xe(this);return _c(t).has.call(t,e)||(t.add(e),Dn(t,"add",e,e)),this}function Ym(e,t){t=Xe(t);const i=Xe(this),{has:n,get:r}=_c(i);let s=n.call(i,e);s||(e=Xe(e),s=n.call(i,e));const o=r.call(i,e);return i.set(e,t),s?ia(t,o)&&Dn(i,"set",e,t):Dn(i,"add",e,t),this}function Xm(e){const t=Xe(this),{has:i,get:n}=_c(t);let r=i.call(t,e);r||(e=Xe(e),r=i.call(t,e)),n&&n.call(t,e);const s=t.delete(e);return r&&Dn(t,"delete",e,void 0),s}function Zm(){const e=Xe(this),t=e.size!==0,i=e.clear();return t&&Dn(e,"clear",void 0,void 0),i}function Ja(e,t){return function(n,r){const s=this,o=s.__v_raw,a=Xe(o),l=t?df:e?pf:na;return!e&&di(a,"iterate",Ur),o.forEach((c,u)=>n.call(r,l(c),l(u),s))}}function Ya(e,t,i){return function(...n){const r=this.__v_raw,s=Xe(r),o=Is(s),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=r[e](...n),u=i?df:t?pf:na;return!t&&di(s,"iterate",l?Sd:Ur),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function Fn(e){return function(...t){return e==="delete"?!1:this}}function OO(){const e={get(s){return Wa(this,s)},get size(){return za(this)},has:qa,add:Jm,set:Ym,delete:Xm,clear:Zm,forEach:Ja(!1,!1)},t={get(s){return Wa(this,s,!1,!0)},get size(){return za(this)},has:qa,add:Jm,set:Ym,delete:Xm,clear:Zm,forEach:Ja(!1,!0)},i={get(s){return Wa(this,s,!0)},get size(){return za(this,!0)},has(s){return qa.call(this,s,!0)},add:Fn("add"),set:Fn("set"),delete:Fn("delete"),clear:Fn("clear"),forEach:Ja(!0,!1)},n={get(s){return Wa(this,s,!0,!0)},get size(){return za(this,!0)},has(s){return qa.call(this,s,!0)},add:Fn("add"),set:Fn("set"),delete:Fn("delete"),clear:Fn("clear"),forEach:Ja(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=Ya(s,!1,!1),i[s]=Ya(s,!0,!1),t[s]=Ya(s,!1,!0),n[s]=Ya(s,!0,!0)}),[e,i,t,n]}const[DO,NO,LO,xO]=OO();function hf(e,t){const i=t?e?xO:LO:e?NO:DO;return(n,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?n:Reflect.get(Ke(i,r)&&r in n?i:n,r,s)}const MO={get:hf(!1,!1)},$O={get:hf(!1,!0)},UO={get:hf(!0,!1)},kE=new WeakMap,CE=new WeakMap,AE=new WeakMap,BO=new WeakMap;function FO(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function jO(e){return e.__v_skip||!Object.isExtensible(e)?0:FO(uO(e))}function po(e){return Ws(e)?e:ff(e,!1,SE,MO,kE)}function VO(e){return ff(e,!1,IO,$O,CE)}function RE(e){return ff(e,!0,PO,UO,AE)}function ff(e,t,i,n,r){if(!ut(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=r.get(e);if(s)return s;const o=jO(e);if(o===0)return e;const a=new Proxy(e,o===2?n:i);return r.set(e,a),a}function Os(e){return Ws(e)?Os(e.__v_raw):!!(e&&e.__v_isReactive)}function Ws(e){return!!(e&&e.__v_isReadonly)}function Ul(e){return!!(e&&e.__v_isShallow)}function PE(e){return Os(e)||Ws(e)}function Xe(e){const t=e&&e.__v_raw;return t?Xe(t):e}function IE(e){return $l(e,"__v_skip",!0),e}const na=e=>ut(e)?po(e):e,pf=e=>ut(e)?RE(e):e;function OE(e){ir&&Di&&(e=Xe(e),TE(e.dep||(e.dep=lf())))}function DE(e,t){e=Xe(e),e.dep&&kd(e.dep)}function Ut(e){return!!(e&&e.__v_isRef===!0)}function GO(e){return NE(e,!1)}function HO(e){return NE(e,!0)}function NE(e,t){return Ut(e)?e:new KO(e,t)}class KO{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:Xe(t),this._value=i?t:na(t)}get value(){return OE(this),this._value}set value(t){const i=this.__v_isShallow||Ul(t)||Ws(t);t=i?t:Xe(t),ia(t,this._rawValue)&&(this._rawValue=t,this._value=i?t:na(t),DE(this))}}function bi(e){return Ut(e)?e.value:e}const WO={get:(e,t,i)=>bi(Reflect.get(e,t,i)),set:(e,t,i,n)=>{const r=e[t];return Ut(r)&&!Ut(i)?(r.value=i,!0):Reflect.set(e,t,i,n)}};function LE(e){return Os(e)?e:new Proxy(e,WO)}var xE;class qO{constructor(t,i,n,r){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this[xE]=!1,this._dirty=!0,this.effect=new cf(t,()=>{this._dirty||(this._dirty=!0,DE(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=n}get value(){const t=Xe(this);return OE(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}xE="__v_isReadonly";function zO(e,t,i=!1){let n,r;const s=Be(e);return s?(n=e,r=Bi):(n=e.get,r=e.set),new qO(n,r,s||!r,i)}function nr(e,t,i,n){let r;try{r=n?e(...n):e()}catch(s){wc(s,t,i)}return r}function wi(e,t,i,n){if(Be(e)){const s=nr(e,t,i,n);return s&&mE(s)&&s.catch(o=>{wc(o,t,i)}),s}const r=[];for(let s=0;s<e.length;s++)r.push(wi(e[s],t,i,n));return r}function wc(e,t,i,n=!0){const r=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,a=i;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){nr(l,null,10,[e,o,a]);return}}JO(e,i,r,n)}function JO(e,t,i,n=!0){console.error(e)}let ra=!1,Cd=!1;const $t=[];let Qi=0;const Ds=[];let bn=null,Pr=0;const ME=Promise.resolve();let mf=null;function $E(e){const t=mf||ME;return e?t.then(this?e.bind(this):e):t}function YO(e){let t=Qi+1,i=$t.length;for(;t<i;){const n=t+i>>>1;sa($t[n])<e?t=n+1:i=n}return t}function gf(e){(!$t.length||!$t.includes(e,ra&&e.allowRecurse?Qi+1:Qi))&&(e.id==null?$t.push(e):$t.splice(YO(e.id),0,e),UE())}function UE(){!ra&&!Cd&&(Cd=!0,mf=ME.then(FE))}function XO(e){const t=$t.indexOf(e);t>Qi&&$t.splice(t,1)}function ZO(e){xe(e)?Ds.push(...e):(!bn||!bn.includes(e,e.allowRecurse?Pr+1:Pr))&&Ds.push(e),UE()}function Qm(e,t=ra?Qi+1:0){for(;t<$t.length;t++){const i=$t[t];i&&i.pre&&($t.splice(t,1),t--,i())}}function BE(e){if(Ds.length){const t=[...new Set(Ds)];if(Ds.length=0,bn){bn.push(...t);return}for(bn=t,bn.sort((i,n)=>sa(i)-sa(n)),Pr=0;Pr<bn.length;Pr++)bn[Pr]();bn=null,Pr=0}}const sa=e=>e.id==null?1/0:e.id,QO=(e,t)=>{const i=sa(e)-sa(t);if(i===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return i};function FE(e){Cd=!1,ra=!0,$t.sort(QO);const t=Bi;try{for(Qi=0;Qi<$t.length;Qi++){const i=$t[Qi];i&&i.active!==!1&&nr(i,null,14)}}finally{Qi=0,$t.length=0,BE(),ra=!1,mf=null,($t.length||Ds.length)&&FE()}}function e1(e,t,...i){if(e.isUnmounted)return;const n=e.vnode.props||ot;let r=i;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in n){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:h}=n[u]||ot;h&&(r=i.map(m=>m.trim())),d&&(r=i.map(fO))}let a,l=n[a=mu(t)]||n[a=mu(un(t))];!l&&s&&(l=n[a=mu(uo(t))]),l&&wi(l,e,6,r);const c=n[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,wi(c,e,6,r)}}function jE(e,t,i=!1){const n=t.emitsCache,r=n.get(e);if(r!==void 0)return r;const s=e.emits;let o={},a=!1;if(!Be(e)){const l=c=>{const u=jE(c,t,!0);u&&(a=!0,Bt(o,u))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(ut(e)&&n.set(e,null),null):(xe(s)?s.forEach(l=>o[l]=null):Bt(o,s),ut(e)&&n.set(e,o),o)}function Sc(e,t){return!e||!yc(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ke(e,t[0].toLowerCase()+t.slice(1))||Ke(e,uo(t))||Ke(e,t))}let xi=null,kc=null;function Bl(e){const t=xi;return xi=e,kc=e&&e.type.__scopeId||null,t}function VE(e){kc=e}function GE(){kc=null}function oa(e,t=xi,i){if(!t||e._n)return e;const n=(...r)=>{n._d&&ug(-1);const s=Bl(t),o=e(...r);return Bl(s),n._d&&ug(1),o};return n._n=!0,n._c=!0,n._d=!0,n}function vu(e){const{type:t,vnode:i,proxy:n,withProxy:r,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:d,data:h,setupState:m,ctx:v,inheritAttrs:y}=e;let T,S;const R=Bl(e);try{if(i.shapeFlag&4){const x=r||n;T=Zi(u.call(x,x,d,s,m,h,v)),S=l}else{const x=t;T=Zi(x.length>1?x(s,{attrs:l,slots:a,emit:c}):x(s,null)),S=t.props?l:t1(l)}}catch(x){zo.length=0,wc(x,e,1),T=bt(Fi)}let O=T;if(S&&y!==!1){const x=Object.keys(S),{shapeFlag:B}=O;x.length&&B&7&&(o&&x.some(rf)&&(S=i1(S,o)),O=dr(O,S))}return i.dirs&&(O=dr(O),O.dirs=O.dirs?O.dirs.concat(i.dirs):i.dirs),i.transition&&(O.transition=i.transition),T=O,Bl(R),T}const t1=e=>{let t;for(const i in e)(i==="class"||i==="style"||yc(i))&&((t||(t={}))[i]=e[i]);return t},i1=(e,t)=>{const i={};for(const n in e)(!rf(n)||!(n.slice(9)in t))&&(i[n]=e[n]);return i};function n1(e,t,i){const{props:n,children:r,component:s}=e,{props:o,children:a,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?eg(n,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(o[h]!==n[h]&&!Sc(c,h))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?eg(n,o,c):!0:!!o;return!1}function eg(e,t,i){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let r=0;r<n.length;r++){const s=n[r];if(t[s]!==e[s]&&!Sc(i,s))return!0}return!1}function r1({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const s1=e=>e.__isSuspense;function o1(e,t){t&&t.pendingBranch?xe(e)?t.effects.push(...e):t.effects.push(e):ZO(e)}function pl(e,t){if(At){let i=At.provides;const n=At.parent&&At.parent.provides;n===i&&(i=At.provides=Object.create(n)),i[e]=t}}function Rn(e,t,i=!1){const n=At||xi;if(n){const r=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(r&&e in r)return r[e];if(arguments.length>1)return i&&Be(t)?t.call(n.proxy):t}}const tg={};function qo(e,t,i){return HE(e,t,i)}function HE(e,t,{immediate:i,deep:n,flush:r,onTrack:s,onTrigger:o}=ot){const a=At;let l,c=!1,u=!1;if(Ut(e)?(l=()=>e.value,c=Ul(e)):Os(e)?(l=()=>e,n=!0):xe(e)?(u=!0,c=e.some(S=>Os(S)||Ul(S)),l=()=>e.map(S=>{if(Ut(S))return S.value;if(Os(S))return ks(S);if(Be(S))return nr(S,a,2)})):Be(e)?t?l=()=>nr(e,a,2):l=()=>{if(!(a&&a.isUnmounted))return d&&d(),wi(e,a,3,[h])}:l=Bi,t&&n){const S=l;l=()=>ks(S())}let d,h=S=>{d=T.onStop=()=>{nr(S,a,4)}};if(la)return h=Bi,t?i&&wi(t,a,3,[l(),u?[]:void 0,h]):l(),Bi;let m=u?[]:tg;const v=()=>{if(!!T.active)if(t){const S=T.run();(n||c||(u?S.some((R,O)=>ia(R,m[O])):ia(S,m)))&&(d&&d(),wi(t,a,3,[S,m===tg?void 0:m,h]),m=S)}else T.run()};v.allowRecurse=!!t;let y;r==="sync"?y=v:r==="post"?y=()=>ei(v,a&&a.suspense):(v.pre=!0,a&&(v.id=a.uid),y=()=>gf(v));const T=new cf(l,y);return t?i?v():m=T.run():r==="post"?ei(T.run.bind(T),a&&a.suspense):T.run(),()=>{T.stop(),a&&a.scope&&sf(a.scope.effects,T)}}function a1(e,t,i){const n=this.proxy,r=Dt(e)?e.includes(".")?KE(n,e):()=>n[e]:e.bind(n,n);let s;Be(t)?s=t:(s=t.handler,i=t);const o=At;zs(this);const a=HE(r,s.bind(n),i);return o?zs(o):Br(),a}function KE(e,t){const i=t.split(".");return()=>{let n=e;for(let r=0;r<i.length&&n;r++)n=n[i[r]];return n}}function ks(e,t){if(!ut(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Ut(e))ks(e.value,t);else if(xe(e))for(let i=0;i<e.length;i++)ks(e[i],t);else if(pE(e)||Is(e))e.forEach(i=>{ks(i,t)});else if(vE(e))for(const i in e)ks(e[i],t);return e}function l1(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return vf(()=>{e.isMounted=!0}),YE(()=>{e.isUnmounting=!0}),e}const gi=[Function,Array],c1={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:gi,onEnter:gi,onAfterEnter:gi,onEnterCancelled:gi,onBeforeLeave:gi,onLeave:gi,onAfterLeave:gi,onLeaveCancelled:gi,onBeforeAppear:gi,onAppear:gi,onAfterAppear:gi,onAppearCancelled:gi},setup(e,{slots:t}){const i=z1(),n=l1();let r;return()=>{const s=t.default&&qE(t.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const y of s)if(y.type!==Fi){o=y;break}}const a=Xe(e),{mode:l}=a;if(n.isLeaving)return yu(o);const c=ig(o);if(!c)return yu(o);const u=Ad(c,a,n,i);Rd(c,u);const d=i.subTree,h=d&&ig(d);let m=!1;const{getTransitionKey:v}=c.type;if(v){const y=v();r===void 0?r=y:y!==r&&(r=y,m=!0)}if(h&&h.type!==Fi&&(!Ir(c,h)||m)){const y=Ad(h,a,n,i);if(Rd(h,y),l==="out-in")return n.isLeaving=!0,y.afterLeave=()=>{n.isLeaving=!1,i.update()},yu(o);l==="in-out"&&c.type!==Fi&&(y.delayLeave=(T,S,R)=>{const O=WE(n,h);O[String(h.key)]=h,T._leaveCb=()=>{S(),T._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=R})}return o}}},u1=c1;function WE(e,t){const{leavingVNodes:i}=e;let n=i.get(t.type);return n||(n=Object.create(null),i.set(t.type,n)),n}function Ad(e,t,i,n){const{appear:r,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:h,onAfterLeave:m,onLeaveCancelled:v,onBeforeAppear:y,onAppear:T,onAfterAppear:S,onAppearCancelled:R}=t,O=String(e.key),x=WE(i,e),B=(de,se)=>{de&&wi(de,n,9,se)},ie=(de,se)=>{const ye=se[1];B(de,se),xe(de)?de.every(Ae=>Ae.length<=1)&&ye():de.length<=1&&ye()},ee={mode:s,persisted:o,beforeEnter(de){let se=a;if(!i.isMounted)if(r)se=y||a;else return;de._leaveCb&&de._leaveCb(!0);const ye=x[O];ye&&Ir(e,ye)&&ye.el._leaveCb&&ye.el._leaveCb(),B(se,[de])},enter(de){let se=l,ye=c,Ae=u;if(!i.isMounted)if(r)se=T||l,ye=S||c,Ae=R||u;else return;let ke=!1;const _e=de._enterCb=Ie=>{ke||(ke=!0,Ie?B(Ae,[de]):B(ye,[de]),ee.delayedLeave&&ee.delayedLeave(),de._enterCb=void 0)};se?ie(se,[de,_e]):_e()},leave(de,se){const ye=String(e.key);if(de._enterCb&&de._enterCb(!0),i.isUnmounting)return se();B(d,[de]);let Ae=!1;const ke=de._leaveCb=_e=>{Ae||(Ae=!0,se(),_e?B(v,[de]):B(m,[de]),de._leaveCb=void 0,x[ye]===e&&delete x[ye])};x[ye]=e,h?ie(h,[de,ke]):ke()},clone(de){return Ad(de,t,i,n)}};return ee}function yu(e){if(Cc(e))return e=dr(e),e.children=null,e}function ig(e){return Cc(e)?e.children?e.children[0]:void 0:e}function Rd(e,t){e.shapeFlag&6&&e.component?Rd(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function qE(e,t=!1,i){let n=[],r=0;for(let s=0;s<e.length;s++){let o=e[s];const a=i==null?o.key:String(i)+String(o.key!=null?o.key:s);o.type===Oi?(o.patchFlag&128&&r++,n=n.concat(qE(o.children,t,a))):(t||o.type!==Fi)&&n.push(a!=null?dr(o,{key:a}):o)}if(r>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}function zE(e){return Be(e)?{setup:e,name:e.name}:e}const ml=e=>!!e.type.__asyncLoader,Cc=e=>e.type.__isKeepAlive;function d1(e,t){JE(e,"a",t)}function h1(e,t){JE(e,"da",t)}function JE(e,t,i=At){const n=e.__wdc||(e.__wdc=()=>{let r=i;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Ac(t,n,i),i){let r=i.parent;for(;r&&r.parent;)Cc(r.parent.vnode)&&f1(n,t,i,r),r=r.parent}}function f1(e,t,i,n){const r=Ac(t,e,n,!0);XE(()=>{sf(n[t],r)},i)}function Ac(e,t,i=At,n=!1){if(i){const r=i[e]||(i[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(i.isUnmounted)return;ho(),zs(i);const a=wi(t,i,e,o);return Br(),fo(),a});return n?r.unshift(s):r.push(s),s}}const Un=e=>(t,i=At)=>(!la||e==="sp")&&Ac(e,t,i),p1=Un("bm"),vf=Un("m"),m1=Un("bu"),g1=Un("u"),YE=Un("bum"),XE=Un("um"),v1=Un("sp"),y1=Un("rtg"),b1=Un("rtc");function E1(e,t=At){Ac("ec",e,t)}function Tr(e,t,i,n){const r=e.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[n];l&&(ho(),wi(l,i,8,[e.el,a,e,t]),fo())}}const ZE="components";function qs(e,t){return _1(ZE,e,!0,t)||e}const T1=Symbol();function _1(e,t,i=!0,n=!1){const r=xi||At;if(r){const s=r.type;if(e===ZE){const a=Q1(s,!1);if(a&&(a===t||a===un(t)||a===Tc(un(t))))return s}const o=ng(r[e]||s[e],t)||ng(r.appContext[e],t);return!o&&n?s:o}}function ng(e,t){return e&&(e[t]||e[un(t)]||e[Tc(un(t))])}function Hj(e,t,i,n){let r;const s=i&&i[n];if(xe(e)||Dt(e)){r=new Array(e.length);for(let o=0,a=e.length;o<a;o++)r[o]=t(e[o],o,void 0,s&&s[o])}else if(typeof e=="number"){r=new Array(e);for(let o=0;o<e;o++)r[o]=t(o+1,o,void 0,s&&s[o])}else if(ut(e))if(e[Symbol.iterator])r=Array.from(e,(o,a)=>t(o,a,void 0,s&&s[a]));else{const o=Object.keys(e);r=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];r[a]=t(e[c],c,a,s&&s[a])}}else r=[];return i&&(i[n]=r),r}const Pd=e=>e?cT(e)?_f(e)||e.proxy:Pd(e.parent):null,Fl=Bt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Pd(e.parent),$root:e=>Pd(e.root),$emit:e=>e.emit,$options:e=>yf(e),$forceUpdate:e=>e.f||(e.f=()=>gf(e.update)),$nextTick:e=>e.n||(e.n=$E.bind(e.proxy)),$watch:e=>a1.bind(e)}),w1={get({_:e},t){const{ctx:i,setupState:n,data:r,props:s,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return n[t];case 2:return r[t];case 4:return i[t];case 3:return s[t]}else{if(n!==ot&&Ke(n,t))return o[t]=1,n[t];if(r!==ot&&Ke(r,t))return o[t]=2,r[t];if((c=e.propsOptions[0])&&Ke(c,t))return o[t]=3,s[t];if(i!==ot&&Ke(i,t))return o[t]=4,i[t];Id&&(o[t]=0)}}const u=Fl[t];let d,h;if(u)return t==="$attrs"&&di(e,"get",t),u(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(i!==ot&&Ke(i,t))return o[t]=4,i[t];if(h=l.config.globalProperties,Ke(h,t))return h[t]},set({_:e},t,i){const{data:n,setupState:r,ctx:s}=e;return r!==ot&&Ke(r,t)?(r[t]=i,!0):n!==ot&&Ke(n,t)?(n[t]=i,!0):Ke(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:n,appContext:r,propsOptions:s}},o){let a;return!!i[o]||e!==ot&&Ke(e,o)||t!==ot&&Ke(t,o)||(a=s[0])&&Ke(a,o)||Ke(n,o)||Ke(Fl,o)||Ke(r.config.globalProperties,o)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:Ke(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};let Id=!0;function S1(e){const t=yf(e),i=e.proxy,n=e.ctx;Id=!1,t.beforeCreate&&rg(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:m,updated:v,activated:y,deactivated:T,beforeDestroy:S,beforeUnmount:R,destroyed:O,unmounted:x,render:B,renderTracked:ie,renderTriggered:ee,errorCaptured:de,serverPrefetch:se,expose:ye,inheritAttrs:Ae,components:ke,directives:_e,filters:Ie}=t;if(c&&k1(c,n,null,e.appContext.config.unwrapInjectedRef),o)for(const we in o){const E=o[we];Be(E)&&(n[we]=E.bind(i))}if(r){const we=r.call(i,i);ut(we)&&(e.data=po(we))}if(Id=!0,s)for(const we in s){const E=s[we],C=Be(E)?E.bind(i,i):Be(E.get)?E.get.bind(i,i):Bi,D=!Be(E)&&Be(E.set)?E.set.bind(i):Bi,N=Rt({get:C,set:D});Object.defineProperty(n,we,{enumerable:!0,configurable:!0,get:()=>N.value,set:M=>N.value=M})}if(a)for(const we in a)QE(a[we],n,i,we);if(l){const we=Be(l)?l.call(i):l;Reflect.ownKeys(we).forEach(E=>{pl(E,we[E])})}u&&rg(u,e,"c");function Oe(we,E){xe(E)?E.forEach(C=>we(C.bind(i))):E&&we(E.bind(i))}if(Oe(p1,d),Oe(vf,h),Oe(m1,m),Oe(g1,v),Oe(d1,y),Oe(h1,T),Oe(E1,de),Oe(b1,ie),Oe(y1,ee),Oe(YE,R),Oe(XE,x),Oe(v1,se),xe(ye))if(ye.length){const we=e.exposed||(e.exposed={});ye.forEach(E=>{Object.defineProperty(we,E,{get:()=>i[E],set:C=>i[E]=C})})}else e.exposed||(e.exposed={});B&&e.render===Bi&&(e.render=B),Ae!=null&&(e.inheritAttrs=Ae),ke&&(e.components=ke),_e&&(e.directives=_e)}function k1(e,t,i=Bi,n=!1){xe(e)&&(e=Od(e));for(const r in e){const s=e[r];let o;ut(s)?"default"in s?o=Rn(s.from||r,s.default,!0):o=Rn(s.from||r):o=Rn(s),Ut(o)&&n?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):t[r]=o}}function rg(e,t,i){wi(xe(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,i)}function QE(e,t,i,n){const r=n.includes(".")?KE(i,n):()=>i[n];if(Dt(e)){const s=t[e];Be(s)&&qo(r,s)}else if(Be(e))qo(r,e.bind(i));else if(ut(e))if(xe(e))e.forEach(s=>QE(s,t,i,n));else{const s=Be(e.handler)?e.handler.bind(i):t[e.handler];Be(s)&&qo(r,s,e)}}function yf(e){const t=e.type,{mixins:i,extends:n}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:!r.length&&!i&&!n?l=t:(l={},r.length&&r.forEach(c=>jl(l,c,o,!0)),jl(l,t,o)),ut(t)&&s.set(t,l),l}function jl(e,t,i,n=!1){const{mixins:r,extends:s}=t;s&&jl(e,s,i,!0),r&&r.forEach(o=>jl(e,o,i,!0));for(const o in t)if(!(n&&o==="expose")){const a=C1[o]||i&&i[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const C1={data:sg,props:Cr,emits:Cr,methods:Cr,computed:Cr,beforeCreate:Ht,created:Ht,beforeMount:Ht,mounted:Ht,beforeUpdate:Ht,updated:Ht,beforeDestroy:Ht,beforeUnmount:Ht,destroyed:Ht,unmounted:Ht,activated:Ht,deactivated:Ht,errorCaptured:Ht,serverPrefetch:Ht,components:Cr,directives:Cr,watch:R1,provide:sg,inject:A1};function sg(e,t){return t?e?function(){return Bt(Be(e)?e.call(this,this):e,Be(t)?t.call(this,this):t)}:t:e}function A1(e,t){return Cr(Od(e),Od(t))}function Od(e){if(xe(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Ht(e,t){return e?[...new Set([].concat(e,t))]:t}function Cr(e,t){return e?Bt(Bt(Object.create(null),e),t):t}function R1(e,t){if(!e)return t;if(!t)return e;const i=Bt(Object.create(null),e);for(const n in t)i[n]=Ht(e[n],t[n]);return i}function P1(e,t,i,n=!1){const r={},s={};$l(s,Rc,1),e.propsDefaults=Object.create(null),eT(e,t,r,s);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);i?e.props=n?r:VO(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function I1(e,t,i,n){const{props:r,attrs:s,vnode:{patchFlag:o}}=e,a=Xe(r),[l]=e.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(Sc(e.emitsOptions,h))continue;const m=t[h];if(l)if(Ke(s,h))m!==s[h]&&(s[h]=m,c=!0);else{const v=un(h);r[v]=Dd(l,a,v,m,e,!1)}else m!==s[h]&&(s[h]=m,c=!0)}}}else{eT(e,t,r,s)&&(c=!0);let u;for(const d in a)(!t||!Ke(t,d)&&((u=uo(d))===d||!Ke(t,u)))&&(l?i&&(i[d]!==void 0||i[u]!==void 0)&&(r[d]=Dd(l,a,d,void 0,e,!0)):delete r[d]);if(s!==a)for(const d in s)(!t||!Ke(t,d)&&!0)&&(delete s[d],c=!0)}c&&Dn(e,"set","$attrs")}function eT(e,t,i,n){const[r,s]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(fl(l))continue;const c=t[l];let u;r&&Ke(r,u=un(l))?!s||!s.includes(u)?i[u]=c:(a||(a={}))[u]=c:Sc(e.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(s){const l=Xe(i),c=a||ot;for(let u=0;u<s.length;u++){const d=s[u];i[d]=Dd(r,l,d,c[d],e,!Ke(c,d))}}return o}function Dd(e,t,i,n,r,s){const o=e[i];if(o!=null){const a=Ke(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&Be(l)){const{propsDefaults:c}=r;i in c?n=c[i]:(zs(r),n=c[i]=l.call(null,t),Br())}else n=l}o[0]&&(s&&!a?n=!1:o[1]&&(n===""||n===uo(i))&&(n=!0))}return n}function tT(e,t,i=!1){const n=t.propsCache,r=n.get(e);if(r)return r;const s=e.props,o={},a=[];let l=!1;if(!Be(e)){const u=d=>{l=!0;const[h,m]=tT(d,t,!0);Bt(o,h),m&&a.push(...m)};!i&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!s&&!l)return ut(e)&&n.set(e,Ps),Ps;if(xe(s))for(let u=0;u<s.length;u++){const d=un(s[u]);og(d)&&(o[d]=ot)}else if(s)for(const u in s){const d=un(u);if(og(d)){const h=s[u],m=o[d]=xe(h)||Be(h)?{type:h}:h;if(m){const v=cg(Boolean,m.type),y=cg(String,m.type);m[0]=v>-1,m[1]=y<0||v<y,(v>-1||Ke(m,"default"))&&a.push(d)}}}const c=[o,a];return ut(e)&&n.set(e,c),c}function og(e){return e[0]!=="$"}function ag(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function lg(e,t){return ag(e)===ag(t)}function cg(e,t){return xe(t)?t.findIndex(i=>lg(i,e)):Be(t)&&lg(t,e)?0:-1}const iT=e=>e[0]==="_"||e==="$stable",bf=e=>xe(e)?e.map(Zi):[Zi(e)],O1=(e,t,i)=>{if(t._n)return t;const n=oa((...r)=>bf(t(...r)),i);return n._c=!1,n},nT=(e,t,i)=>{const n=e._ctx;for(const r in e){if(iT(r))continue;const s=e[r];if(Be(s))t[r]=O1(r,s,n);else if(s!=null){const o=bf(s);t[r]=()=>o}}},rT=(e,t)=>{const i=bf(t);e.slots.default=()=>i},D1=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=Xe(t),$l(t,"_",i)):nT(t,e.slots={})}else e.slots={},t&&rT(e,t);$l(e.slots,Rc,1)},N1=(e,t,i)=>{const{vnode:n,slots:r}=e;let s=!0,o=ot;if(n.shapeFlag&32){const a=t._;a?i&&a===1?s=!1:(Bt(r,t),!i&&a===1&&delete r._):(s=!t.$stable,nT(t,r)),o=t}else t&&(rT(e,t),o={default:1});if(s)for(const a in r)!iT(a)&&!(a in o)&&delete r[a]};function sT(){return{app:null,config:{isNativeTag:aO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let L1=0;function x1(e,t){return function(n,r=null){Be(n)||(n=Object.assign({},n)),r!=null&&!ut(r)&&(r=null);const s=sT(),o=new Set;let a=!1;const l=s.app={_uid:L1++,_component:n,_props:r,_container:null,_context:s,_instance:null,version:tD,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&Be(c.install)?(o.add(c),c.install(l,...u)):Be(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,d){if(!a){const h=bt(n,r);return h.appContext=s,u&&t?t(h,c):e(h,c,d),a=!0,l._container=c,c.__vue_app__=l,_f(h.component)||h.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l}};return l}}function Nd(e,t,i,n,r=!1){if(xe(e)){e.forEach((h,m)=>Nd(h,t&&(xe(t)?t[m]:t),i,n,r));return}if(ml(n)&&!r)return;const s=n.shapeFlag&4?_f(n.component)||n.component.proxy:n.el,o=r?null:s,{i:a,r:l}=e,c=t&&t.r,u=a.refs===ot?a.refs={}:a.refs,d=a.setupState;if(c!=null&&c!==l&&(Dt(c)?(u[c]=null,Ke(d,c)&&(d[c]=null)):Ut(c)&&(c.value=null)),Be(l))nr(l,a,12,[o,u]);else{const h=Dt(l),m=Ut(l);if(h||m){const v=()=>{if(e.f){const y=h?u[l]:l.value;r?xe(y)&&sf(y,s):xe(y)?y.includes(s)||y.push(s):h?(u[l]=[s],Ke(d,l)&&(d[l]=u[l])):(l.value=[s],e.k&&(u[e.k]=l.value))}else h?(u[l]=o,Ke(d,l)&&(d[l]=o)):m&&(l.value=o,e.k&&(u[e.k]=o))};o?(v.id=-1,ei(v,i)):v()}}}const ei=o1;function M1(e){return $1(e)}function $1(e,t){const i=pO();i.__VUE__=!0;const{insert:n,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:m=Bi,cloneNode:v,insertStaticContent:y}=e,T=(w,P,$,U=null,V=null,q=null,Y=!1,K=null,z=!!P.dynamicChildren)=>{if(w===P)return;w&&!Ir(w,P)&&(U=j(w),F(w,V,q,!0),w=null),P.patchFlag===-2&&(z=!1,P.dynamicChildren=null);const{type:W,ref:me,shapeFlag:oe}=P;switch(W){case Ef:S(w,P,$,U);break;case Fi:R(w,P,$,U);break;case bu:w==null&&O(P,$,U,Y);break;case Oi:_e(w,P,$,U,V,q,Y,K,z);break;default:oe&1?ie(w,P,$,U,V,q,Y,K,z):oe&6?Ie(w,P,$,U,V,q,Y,K,z):(oe&64||oe&128)&&W.process(w,P,$,U,V,q,Y,K,z,he)}me!=null&&V&&Nd(me,w&&w.ref,q,P||w,!P)},S=(w,P,$,U)=>{if(w==null)n(P.el=a(P.children),$,U);else{const V=P.el=w.el;P.children!==w.children&&c(V,P.children)}},R=(w,P,$,U)=>{w==null?n(P.el=l(P.children||""),$,U):P.el=w.el},O=(w,P,$,U)=>{[w.el,w.anchor]=y(w.children,P,$,U,w.el,w.anchor)},x=({el:w,anchor:P},$,U)=>{let V;for(;w&&w!==P;)V=h(w),n(w,$,U),w=V;n(P,$,U)},B=({el:w,anchor:P})=>{let $;for(;w&&w!==P;)$=h(w),r(w),w=$;r(P)},ie=(w,P,$,U,V,q,Y,K,z)=>{Y=Y||P.type==="svg",w==null?ee(P,$,U,V,q,Y,K,z):ye(w,P,V,q,Y,K,z)},ee=(w,P,$,U,V,q,Y,K)=>{let z,W;const{type:me,props:oe,shapeFlag:X,transition:le,patchFlag:ae,dirs:Ee}=w;if(w.el&&v!==void 0&&ae===-1)z=w.el=v(w.el);else{if(z=w.el=o(w.type,q,oe&&oe.is,oe),X&8?u(z,w.children):X&16&&se(w.children,z,null,U,V,q&&me!=="foreignObject",Y,K),Ee&&Tr(w,null,U,"created"),oe){for(const je in oe)je!=="value"&&!fl(je)&&s(z,je,null,oe[je],q,w.children,U,V,I);"value"in oe&&s(z,"value",null,oe.value),(W=oe.onVnodeBeforeMount)&&Yi(W,U,w)}de(z,w,w.scopeId,Y,U)}Ee&&Tr(w,null,U,"beforeMount");const Fe=(!V||V&&!V.pendingBranch)&&le&&!le.persisted;Fe&&le.beforeEnter(z),n(z,P,$),((W=oe&&oe.onVnodeMounted)||Fe||Ee)&&ei(()=>{W&&Yi(W,U,w),Fe&&le.enter(z),Ee&&Tr(w,null,U,"mounted")},V)},de=(w,P,$,U,V)=>{if($&&m(w,$),U)for(let q=0;q<U.length;q++)m(w,U[q]);if(V){let q=V.subTree;if(P===q){const Y=V.vnode;de(w,Y,Y.scopeId,Y.slotScopeIds,V.parent)}}},se=(w,P,$,U,V,q,Y,K,z=0)=>{for(let W=z;W<w.length;W++){const me=w[W]=K?Wn(w[W]):Zi(w[W]);T(null,me,P,$,U,V,q,Y,K)}},ye=(w,P,$,U,V,q,Y)=>{const K=P.el=w.el;let{patchFlag:z,dynamicChildren:W,dirs:me}=P;z|=w.patchFlag&16;const oe=w.props||ot,X=P.props||ot;let le;$&&_r($,!1),(le=X.onVnodeBeforeUpdate)&&Yi(le,$,P,w),me&&Tr(P,w,$,"beforeUpdate"),$&&_r($,!0);const ae=V&&P.type!=="foreignObject";if(W?Ae(w.dynamicChildren,W,K,$,U,ae,q):Y||C(w,P,K,null,$,U,ae,q,!1),z>0){if(z&16)ke(K,P,oe,X,$,U,V);else if(z&2&&oe.class!==X.class&&s(K,"class",null,X.class,V),z&4&&s(K,"style",oe.style,X.style,V),z&8){const Ee=P.dynamicProps;for(let Fe=0;Fe<Ee.length;Fe++){const je=Ee[Fe],ce=oe[je],Se=X[je];(Se!==ce||je==="value")&&s(K,je,ce,Se,V,w.children,$,U,I)}}z&1&&w.children!==P.children&&u(K,P.children)}else!Y&&W==null&&ke(K,P,oe,X,$,U,V);((le=X.onVnodeUpdated)||me)&&ei(()=>{le&&Yi(le,$,P,w),me&&Tr(P,w,$,"updated")},U)},Ae=(w,P,$,U,V,q,Y)=>{for(let K=0;K<P.length;K++){const z=w[K],W=P[K],me=z.el&&(z.type===Oi||!Ir(z,W)||z.shapeFlag&70)?d(z.el):$;T(z,W,me,null,U,V,q,Y,!0)}},ke=(w,P,$,U,V,q,Y)=>{if($!==U){for(const K in U){if(fl(K))continue;const z=U[K],W=$[K];z!==W&&K!=="value"&&s(w,K,W,z,Y,P.children,V,q,I)}if($!==ot)for(const K in $)!fl(K)&&!(K in U)&&s(w,K,$[K],null,Y,P.children,V,q,I);"value"in U&&s(w,"value",$.value,U.value)}},_e=(w,P,$,U,V,q,Y,K,z)=>{const W=P.el=w?w.el:a(""),me=P.anchor=w?w.anchor:a("");let{patchFlag:oe,dynamicChildren:X,slotScopeIds:le}=P;le&&(K=K?K.concat(le):le),w==null?(n(W,$,U),n(me,$,U),se(P.children,$,me,V,q,Y,K,z)):oe>0&&oe&64&&X&&w.dynamicChildren?(Ae(w.dynamicChildren,X,$,V,q,Y,K),(P.key!=null||V&&P===V.subTree)&&oT(w,P,!0)):C(w,P,$,me,V,q,Y,K,z)},Ie=(w,P,$,U,V,q,Y,K,z)=>{P.slotScopeIds=K,w==null?P.shapeFlag&512?V.ctx.activate(P,$,U,Y,z):ge(P,$,U,V,q,Y,z):Oe(w,P,z)},ge=(w,P,$,U,V,q,Y)=>{const K=w.component=q1(w,U,V);if(Cc(w)&&(K.ctx.renderer=he),J1(K),K.asyncDep){if(V&&V.registerDep(K,we),!w.el){const z=K.subTree=bt(Fi);R(null,z,P,$)}return}we(K,w,P,$,V,q,Y)},Oe=(w,P,$)=>{const U=P.component=w.component;if(n1(w,P,$))if(U.asyncDep&&!U.asyncResolved){E(U,P,$);return}else U.next=P,XO(U.update),U.update();else P.el=w.el,U.vnode=P},we=(w,P,$,U,V,q,Y)=>{const K=()=>{if(w.isMounted){let{next:me,bu:oe,u:X,parent:le,vnode:ae}=w,Ee=me,Fe;_r(w,!1),me?(me.el=ae.el,E(w,me,Y)):me=ae,oe&&gu(oe),(Fe=me.props&&me.props.onVnodeBeforeUpdate)&&Yi(Fe,le,me,ae),_r(w,!0);const je=vu(w),ce=w.subTree;w.subTree=je,T(ce,je,d(ce.el),j(ce),w,V,q),me.el=je.el,Ee===null&&r1(w,je.el),X&&ei(X,V),(Fe=me.props&&me.props.onVnodeUpdated)&&ei(()=>Yi(Fe,le,me,ae),V)}else{let me;const{el:oe,props:X}=P,{bm:le,m:ae,parent:Ee}=w,Fe=ml(P);if(_r(w,!1),le&&gu(le),!Fe&&(me=X&&X.onVnodeBeforeMount)&&Yi(me,Ee,P),_r(w,!0),oe&&ne){const je=()=>{w.subTree=vu(w),ne(oe,w.subTree,w,V,null)};Fe?P.type.__asyncLoader().then(()=>!w.isUnmounted&&je()):je()}else{const je=w.subTree=vu(w);T(null,je,$,U,w,V,q),P.el=je.el}if(ae&&ei(ae,V),!Fe&&(me=X&&X.onVnodeMounted)){const je=P;ei(()=>Yi(me,Ee,je),V)}(P.shapeFlag&256||Ee&&ml(Ee.vnode)&&Ee.vnode.shapeFlag&256)&&w.a&&ei(w.a,V),w.isMounted=!0,P=$=U=null}},z=w.effect=new cf(K,()=>gf(W),w.scope),W=w.update=()=>z.run();W.id=w.uid,_r(w,!0),W()},E=(w,P,$)=>{P.component=w;const U=w.vnode.props;w.vnode=P,w.next=null,I1(w,P.props,U,$),N1(w,P.children,$),ho(),Qm(),fo()},C=(w,P,$,U,V,q,Y,K,z=!1)=>{const W=w&&w.children,me=w?w.shapeFlag:0,oe=P.children,{patchFlag:X,shapeFlag:le}=P;if(X>0){if(X&128){N(W,oe,$,U,V,q,Y,K,z);return}else if(X&256){D(W,oe,$,U,V,q,Y,K,z);return}}le&8?(me&16&&I(W,V,q),oe!==W&&u($,oe)):me&16?le&16?N(W,oe,$,U,V,q,Y,K,z):I(W,V,q,!0):(me&8&&u($,""),le&16&&se(oe,$,U,V,q,Y,K,z))},D=(w,P,$,U,V,q,Y,K,z)=>{w=w||Ps,P=P||Ps;const W=w.length,me=P.length,oe=Math.min(W,me);let X;for(X=0;X<oe;X++){const le=P[X]=z?Wn(P[X]):Zi(P[X]);T(w[X],le,$,null,V,q,Y,K,z)}W>me?I(w,V,q,!0,!1,oe):se(P,$,U,V,q,Y,K,z,oe)},N=(w,P,$,U,V,q,Y,K,z)=>{let W=0;const me=P.length;let oe=w.length-1,X=me-1;for(;W<=oe&&W<=X;){const le=w[W],ae=P[W]=z?Wn(P[W]):Zi(P[W]);if(Ir(le,ae))T(le,ae,$,null,V,q,Y,K,z);else break;W++}for(;W<=oe&&W<=X;){const le=w[oe],ae=P[X]=z?Wn(P[X]):Zi(P[X]);if(Ir(le,ae))T(le,ae,$,null,V,q,Y,K,z);else break;oe--,X--}if(W>oe){if(W<=X){const le=X+1,ae=le<me?P[le].el:U;for(;W<=X;)T(null,P[W]=z?Wn(P[W]):Zi(P[W]),$,ae,V,q,Y,K,z),W++}}else if(W>X)for(;W<=oe;)F(w[W],V,q,!0),W++;else{const le=W,ae=W,Ee=new Map;for(W=ae;W<=X;W++){const Vt=P[W]=z?Wn(P[W]):Zi(P[W]);Vt.key!=null&&Ee.set(Vt.key,W)}let Fe,je=0;const ce=X-ae+1;let Se=!1,jt=0;const mi=new Array(ce);for(W=0;W<ce;W++)mi[W]=0;for(W=le;W<=oe;W++){const Vt=w[W];if(je>=ce){F(Vt,V,q,!0);continue}let kt;if(Vt.key!=null)kt=Ee.get(Vt.key);else for(Fe=ae;Fe<=X;Fe++)if(mi[Fe-ae]===0&&Ir(Vt,P[Fe])){kt=Fe;break}kt===void 0?F(Vt,V,q,!0):(mi[kt-ae]=W+1,kt>=jt?jt=kt:Se=!0,T(Vt,P[kt],$,null,V,q,Y,K,z),je++)}const br=Se?U1(mi):Ps;for(Fe=br.length-1,W=ce-1;W>=0;W--){const Vt=ae+W,kt=P[Vt],La=Vt+1<me?P[Vt+1].el:U;mi[W]===0?T(null,kt,$,La,V,q,Y,K,z):Se&&(Fe<0||W!==br[Fe]?M(kt,$,La,2):Fe--)}}},M=(w,P,$,U,V=null)=>{const{el:q,type:Y,transition:K,children:z,shapeFlag:W}=w;if(W&6){M(w.component.subTree,P,$,U);return}if(W&128){w.suspense.move(P,$,U);return}if(W&64){Y.move(w,P,$,he);return}if(Y===Oi){n(q,P,$);for(let oe=0;oe<z.length;oe++)M(z[oe],P,$,U);n(w.anchor,P,$);return}if(Y===bu){x(w,P,$);return}if(U!==2&&W&1&&K)if(U===0)K.beforeEnter(q),n(q,P,$),ei(()=>K.enter(q),V);else{const{leave:oe,delayLeave:X,afterLeave:le}=K,ae=()=>n(q,P,$),Ee=()=>{oe(q,()=>{ae(),le&&le()})};X?X(q,ae,Ee):Ee()}else n(q,P,$)},F=(w,P,$,U=!1,V=!1)=>{const{type:q,props:Y,ref:K,children:z,dynamicChildren:W,shapeFlag:me,patchFlag:oe,dirs:X}=w;if(K!=null&&Nd(K,null,$,w,!0),me&256){P.ctx.deactivate(w);return}const le=me&1&&X,ae=!ml(w);let Ee;if(ae&&(Ee=Y&&Y.onVnodeBeforeUnmount)&&Yi(Ee,P,w),me&6)L(w.component,$,U);else{if(me&128){w.suspense.unmount($,U);return}le&&Tr(w,null,P,"beforeUnmount"),me&64?w.type.remove(w,P,$,V,he,U):W&&(q!==Oi||oe>0&&oe&64)?I(W,P,$,!1,!0):(q===Oi&&oe&384||!V&&me&16)&&I(z,P,$),U&&H(w)}(ae&&(Ee=Y&&Y.onVnodeUnmounted)||le)&&ei(()=>{Ee&&Yi(Ee,P,w),le&&Tr(w,null,P,"unmounted")},$)},H=w=>{const{type:P,el:$,anchor:U,transition:V}=w;if(P===Oi){A($,U);return}if(P===bu){B(w);return}const q=()=>{r($),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(w.shapeFlag&1&&V&&!V.persisted){const{leave:Y,delayLeave:K}=V,z=()=>Y($,q);K?K(w.el,q,z):z()}else q()},A=(w,P)=>{let $;for(;w!==P;)$=h(w),r(w),w=$;r(P)},L=(w,P,$)=>{const{bum:U,scope:V,update:q,subTree:Y,um:K}=w;U&&gu(U),V.stop(),q&&(q.active=!1,F(Y,w,P,$)),K&&ei(K,P),ei(()=>{w.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},I=(w,P,$,U=!1,V=!1,q=0)=>{for(let Y=q;Y<w.length;Y++)F(w[Y],P,$,U,V)},j=w=>w.shapeFlag&6?j(w.component.subTree):w.shapeFlag&128?w.suspense.next():h(w.anchor||w.el),pe=(w,P,$)=>{w==null?P._vnode&&F(P._vnode,null,null,!0):T(P._vnode||null,w,P,null,null,null,$),Qm(),BE(),P._vnode=w},he={p:T,um:F,m:M,r:H,mt:ge,mc:se,pc:C,pbc:Ae,n:j,o:e};let ue,ne;return t&&([ue,ne]=t(he)),{render:pe,hydrate:ue,createApp:x1(pe,ue)}}function _r({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function oT(e,t,i=!1){const n=e.children,r=t.children;if(xe(n)&&xe(r))for(let s=0;s<n.length;s++){const o=n[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=Wn(r[s]),a.el=o.el),i||oT(o,a))}}function U1(e){const t=e.slice(),i=[0];let n,r,s,o,a;const l=e.length;for(n=0;n<l;n++){const c=e[n];if(c!==0){if(r=i[i.length-1],e[r]<c){t[n]=r,i.push(n);continue}for(s=0,o=i.length-1;s<o;)a=s+o>>1,e[i[a]]<c?s=a+1:o=a;c<e[i[s]]&&(s>0&&(t[n]=i[s-1]),i[s]=n)}}for(s=i.length,o=i[s-1];s-- >0;)i[s]=o,o=t[o];return i}const B1=e=>e.__isTeleport,Oi=Symbol(void 0),Ef=Symbol(void 0),Fi=Symbol(void 0),bu=Symbol(void 0),zo=[];let Mi=null;function Ei(e=!1){zo.push(Mi=e?null:[])}function F1(){zo.pop(),Mi=zo[zo.length-1]||null}let aa=1;function ug(e){aa+=e}function aT(e){return e.dynamicChildren=aa>0?Mi||Ps:null,F1(),aa>0&&Mi&&Mi.push(e),e}function $i(e,t,i,n,r,s){return aT(nt(e,t,i,n,r,s,!0))}function j1(e,t,i,n,r){return aT(bt(e,t,i,n,r,!0))}function Ld(e){return e?e.__v_isVNode===!0:!1}function Ir(e,t){return e.type===t.type&&e.key===t.key}const Rc="__vInternal",lT=({key:e})=>e!=null?e:null,gl=({ref:e,ref_key:t,ref_for:i})=>e!=null?Dt(e)||Ut(e)||Be(e)?{i:xi,r:e,k:t,f:!!i}:e:null;function nt(e,t=null,i=null,n=0,r=null,s=e===Oi?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&lT(t),ref:t&&gl(t),scopeId:kc,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(Tf(l,i),s&128&&e.normalize(l)):i&&(l.shapeFlag|=Dt(i)?8:16),aa>0&&!o&&Mi&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Mi.push(l),l}const bt=V1;function V1(e,t=null,i=null,n=0,r=null,s=!1){if((!e||e===T1)&&(e=Fi),Ld(e)){const a=dr(e,t,!0);return i&&Tf(a,i),aa>0&&!s&&Mi&&(a.shapeFlag&6?Mi[Mi.indexOf(e)]=a:Mi.push(a)),a.patchFlag|=-2,a}if(eD(e)&&(e=e.__vccOpts),t){t=G1(t);let{class:a,style:l}=t;a&&!Dt(a)&&(t.class=tf(a)),ut(l)&&(PE(l)&&!xe(l)&&(l=Bt({},l)),t.style=ef(l))}const o=Dt(e)?1:s1(e)?128:B1(e)?64:ut(e)?4:Be(e)?2:0;return nt(e,t,i,n,r,o,s,!0)}function G1(e){return e?PE(e)||Rc in e?Bt({},e):e:null}function dr(e,t,i=!1){const{props:n,ref:r,patchFlag:s,children:o}=e,a=t?H1(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&lT(a),ref:t&&t.ref?i&&r?xe(r)?r.concat(gl(t)):[r,gl(t)]:gl(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Oi?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&dr(e.ssContent),ssFallback:e.ssFallback&&dr(e.ssFallback),el:e.el,anchor:e.anchor}}function wa(e=" ",t=0){return bt(Ef,null,e,t)}function Pc(e="",t=!1){return t?(Ei(),j1(Fi,null,e)):bt(Fi,null,e)}function Zi(e){return e==null||typeof e=="boolean"?bt(Fi):xe(e)?bt(Oi,null,e.slice()):typeof e=="object"?Wn(e):bt(Ef,null,String(e))}function Wn(e){return e.el===null||e.memo?e:dr(e)}function Tf(e,t){let i=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(xe(t))i=16;else if(typeof t=="object")if(n&65){const r=t.default;r&&(r._c&&(r._d=!1),Tf(e,r()),r._c&&(r._d=!0));return}else{i=32;const r=t._;!r&&!(Rc in t)?t._ctx=xi:r===3&&xi&&(xi.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Be(t)?(t={default:t,_ctx:xi},i=32):(t=String(t),n&64?(i=16,t=[wa(t)]):i=8);e.children=t,e.shapeFlag|=i}function H1(...e){const t={};for(let i=0;i<e.length;i++){const n=e[i];for(const r in n)if(r==="class")t.class!==n.class&&(t.class=tf([t.class,n.class]));else if(r==="style")t.style=ef([t.style,n.style]);else if(yc(r)){const s=t[r],o=n[r];o&&s!==o&&!(xe(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=n[r])}return t}function Yi(e,t,i,n=null){wi(e,t,7,[i,n])}const K1=sT();let W1=0;function q1(e,t,i){const n=e.type,r=(t?t.appContext:e.appContext)||K1,s={uid:W1++,vnode:e,type:n,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new mO(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:tT(n,r),emitsOptions:jE(n,r),emit:null,emitted:null,propsDefaults:ot,inheritAttrs:n.inheritAttrs,ctx:ot,data:ot,props:ot,attrs:ot,slots:ot,refs:ot,setupState:ot,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=e1.bind(null,s),e.ce&&e.ce(s),s}let At=null;const z1=()=>At||xi,zs=e=>{At=e,e.scope.on()},Br=()=>{At&&At.scope.off(),At=null};function cT(e){return e.vnode.shapeFlag&4}let la=!1;function J1(e,t=!1){la=t;const{props:i,children:n}=e.vnode,r=cT(e);P1(e,i,r,t),D1(e,n);const s=r?Y1(e,t):void 0;return la=!1,s}function Y1(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=IE(new Proxy(e.ctx,w1));const{setup:n}=i;if(n){const r=e.setupContext=n.length>1?Z1(e):null;zs(e),ho();const s=nr(n,e,0,[e.props,r]);if(fo(),Br(),mE(s)){if(s.then(Br,Br),t)return s.then(o=>{dg(e,o,t)}).catch(o=>{wc(o,e,0)});e.asyncDep=s}else dg(e,s,t)}else uT(e,t)}function dg(e,t,i){Be(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ut(t)&&(e.setupState=LE(t)),uT(e,i)}let hg;function uT(e,t,i){const n=e.type;if(!e.render){if(!t&&hg&&!n.render){const r=n.template||yf(e).template;if(r){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=n,c=Bt(Bt({isCustomElement:s,delimiters:a},o),l);n.render=hg(r,c)}}e.render=n.render||Bi}zs(e),ho(),S1(e),fo(),Br()}function X1(e){return new Proxy(e.attrs,{get(t,i){return di(e,"get","$attrs"),t[i]}})}function Z1(e){const t=n=>{e.exposed=n||{}};let i;return{get attrs(){return i||(i=X1(e))},slots:e.slots,emit:e.emit,expose:t}}function _f(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(LE(IE(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in Fl)return Fl[i](e)}}))}function Q1(e,t=!0){return Be(e)?e.displayName||e.name:e.name||t&&e.__name}function eD(e){return Be(e)&&"__vccOpts"in e}const Rt=(e,t)=>zO(e,t,la);function dT(e,t,i){const n=arguments.length;return n===2?ut(t)&&!xe(t)?Ld(t)?bt(e,null,[t]):bt(e,t):bt(e,null,t):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&Ld(i)&&(i=[i]),bt(e,t,i))}const tD="3.2.39",iD="http://www.w3.org/2000/svg",Or=typeof document<"u"?document:null,fg=Or&&Or.createElement("template"),nD={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,n)=>{const r=t?Or.createElementNS(iD,e):Or.createElement(e,i?{is:i}:void 0);return e==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:e=>Or.createTextNode(e),createComment:e=>Or.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Or.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,i,n,r,s){const o=i?i.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),i),!(r===s||!(r=r.nextSibling)););else{fg.innerHTML=n?`<svg>${e}</svg>`:e;const a=fg.content;if(n){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function rD(e,t,i){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function sD(e,t,i){const n=e.style,r=Dt(i);if(i&&!r){for(const s in i)xd(n,s,i[s]);if(t&&!Dt(t))for(const s in t)i[s]==null&&xd(n,s,"")}else{const s=n.display;r?t!==i&&(n.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=s)}}const pg=/\s*!important$/;function xd(e,t,i){if(xe(i))i.forEach(n=>xd(e,t,n));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const n=oD(e,t);pg.test(i)?e.setProperty(uo(n),i.replace(pg,""),"important"):e[n]=i}}const mg=["Webkit","Moz","ms"],Eu={};function oD(e,t){const i=Eu[t];if(i)return i;let n=un(t);if(n!=="filter"&&n in e)return Eu[t]=n;n=Tc(n);for(let r=0;r<mg.length;r++){const s=mg[r]+n;if(s in e)return Eu[t]=s}return t}const gg="http://www.w3.org/1999/xlink";function aD(e,t,i,n,r){if(n&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(gg,t.slice(6,t.length)):e.setAttributeNS(gg,t,i);else{const s=nO(t);i==null||s&&!hE(i)?e.removeAttribute(t):e.setAttribute(t,s?"":i)}}function lD(e,t,i,n,r,s,o){if(t==="innerHTML"||t==="textContent"){n&&o(n,r,s),e[t]=i==null?"":i;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=i;const l=i==null?"":i;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),i==null&&e.removeAttribute(t);return}let a=!1;if(i===""||i==null){const l=typeof e[t];l==="boolean"?i=hE(i):i==null&&l==="string"?(i="",a=!0):l==="number"&&(i=0,a=!0)}try{e[t]=i}catch{}a&&e.removeAttribute(t)}const[hT,cD]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const i=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(i&&Number(i[1])<=53)}return[e,t]})();let Md=0;const uD=Promise.resolve(),dD=()=>{Md=0},hD=()=>Md||(uD.then(dD),Md=hT());function fD(e,t,i,n){e.addEventListener(t,i,n)}function pD(e,t,i,n){e.removeEventListener(t,i,n)}function mD(e,t,i,n,r=null){const s=e._vei||(e._vei={}),o=s[t];if(n&&o)o.value=n;else{const[a,l]=gD(t);if(n){const c=s[t]=vD(n,r);fD(e,a,c,l)}else o&&(pD(e,a,o,l),s[t]=void 0)}}const vg=/(?:Once|Passive|Capture)$/;function gD(e){let t;if(vg.test(e)){t={};let n;for(;n=e.match(vg);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):uo(e.slice(2)),t]}function vD(e,t){const i=n=>{const r=n.timeStamp||hT();(cD||r>=i.attached-1)&&wi(yD(n,i.value),t,5,[n])};return i.value=e,i.attached=hD(),i}function yD(e,t){if(xe(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(n=>r=>!r._stopped&&n&&n(r))}else return t}const yg=/^on[a-z]/,bD=(e,t,i,n,r=!1,s,o,a,l)=>{t==="class"?rD(e,n,r):t==="style"?sD(e,i,n):yc(t)?rf(t)||mD(e,t,i,n,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ED(e,t,n,r))?lD(e,t,n,s,o,a,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),aD(e,t,n,r))};function ED(e,t,i,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&yg.test(t)&&Be(i)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||yg.test(t)&&Dt(i)?!1:t in e}const TD={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};u1.props;const _D=["ctrl","shift","alt","meta"],wD={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>_D.some(i=>e[`${i}Key`]&&!t.includes(i))},SD=(e,t)=>(i,...n)=>{for(let r=0;r<t.length;r++){const s=wD[t[r]];if(s&&s(i,t))return}return e(i,...n)},kD=Bt({patchProp:bD},nD);let bg;function CD(){return bg||(bg=M1(kD))}const AD=(...e)=>{const t=CD().createApp(...e),{mount:i}=t;return t.mount=n=>{const r=RD(n);if(!r)return;const s=t._component;!Be(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=i(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function RD(e){return Dt(e)?document.querySelector(e):e}const ii=po({user:{},account:{},rooms:[],activeRoom:null,peers:[],activePeer:null});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $d=function(e,t){return $d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])},$d(e,t)};function Qr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}$d(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}var Me=function(){return Me=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Me.apply(this,arguments)};function Zt(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}function ze(e,t,i,n){return new(i||(i=Promise))(function(r,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function a(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){var u;c.done?r(c.value):(u=c.value,u instanceof i?u:new i(function(d){d(u)})).then(o,a)}l((n=n.apply(e,t||[])).next())})}function Je(e,t){var i,n,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(c){return function(u){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){o.label=u[1];break}if(u[0]===6&&o.label<r[1]){o.label=r[1],r=u;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(u);break}r[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(d){u=[6,d],n=0}finally{i=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([l,c])}}}function Js(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var n,r,s=i.call(e),o=[];try{for(;(t===void 0||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(a){r={error:a}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o}function Ud(e,t,i){if(i||arguments.length===2)for(var n,r=0,s=t.length;r<s;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}var nn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function mo(e,t){return e(t={exports:{}},t.exports),t.exports}var jn,vl,Xa=function(e){return e&&e.Math==Math&&e},ve=Xa(typeof globalThis=="object"&&globalThis)||Xa(typeof window=="object"&&window)||Xa(typeof self=="object"&&self)||Xa(typeof nn=="object"&&nn)||function(){return this}()||Function("return this")(),lt=function(e){try{return!!e()}catch{return!0}},at=!lt(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),Sa=!lt(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),Za=Function.prototype.call,qt=Sa?Za.bind(Za):function(){return Za.apply(Za,arguments)},Eg={}.propertyIsEnumerable,Tg=Object.getOwnPropertyDescriptor,PD=Tg&&!Eg.call({1:2},1)?function(e){var t=Tg(this,e);return!!t&&t.enumerable}:Eg,Sf={f:PD},Hr=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},fT=Function.prototype,ID=fT.bind,Bd=fT.call,OD=Sa&&ID.bind(Bd,Bd),He=Sa?function(e){return e&&OD(e)}:function(e){return e&&function(){return Bd.apply(e,arguments)}},DD=He({}.toString),ND=He("".slice),Pn=function(e){return ND(DD(e),8,-1)},Tu=ve.Object,LD=He("".split),pT=lt(function(){return!Tu("z").propertyIsEnumerable(0)})?function(e){return Pn(e)=="String"?LD(e,""):Tu(e)}:Tu,xD=ve.TypeError,ka=function(e){if(e==null)throw xD("Can't call method on "+e);return e},pn=function(e){return pT(ka(e))},ct=function(e){return typeof e=="function"},ft=function(e){return typeof e=="object"?e!==null:ct(e)},MD=function(e){return ct(e)?e:void 0},qi=function(e,t){return arguments.length<2?MD(ve[e]):ve[e]&&ve[e][t]},Kr=He({}.isPrototypeOf),_u=qi("navigator","userAgent")||"",_g=ve.process,wg=ve.Deno,Sg=_g&&_g.versions||wg&&wg.version,kg=Sg&&Sg.v8;kg&&(vl=(jn=kg.split("."))[0]>0&&jn[0]<4?1:+(jn[0]+jn[1])),!vl&&_u&&(!(jn=_u.match(/Edge\/(\d+)/))||jn[1]>=74)&&(jn=_u.match(/Chrome\/(\d+)/))&&(vl=+jn[1]);var Vl=vl,vi=!!Object.getOwnPropertySymbols&&!lt(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Vl&&Vl<41}),kf=vi&&!Symbol.sham&&typeof Symbol.iterator=="symbol",$D=ve.Object,Ys=kf?function(e){return typeof e=="symbol"}:function(e){var t=qi("Symbol");return ct(t)&&Kr(t.prototype,$D(e))},UD=ve.String,go=function(e){try{return UD(e)}catch{return"Object"}},BD=ve.TypeError,Cf=function(e){if(ct(e))return e;throw BD(go(e)+" is not a function")},Gl=function(e,t){var i=e[t];return i==null?void 0:Cf(i)},FD=ve.TypeError,jD=Object.defineProperty,Af=function(e,t){try{jD(ve,e,{value:t,configurable:!0,writable:!0})}catch{ve[e]=t}return t},rr=ve["__core-js_shared__"]||Af("__core-js_shared__",{}),gr=mo(function(e){(e.exports=function(t,i){return rr[t]||(rr[t]=i!==void 0?i:{})})("versions",[]).push({version:"3.22.4",mode:"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.4/LICENSE",source:"https://github.com/zloirock/core-js"})}),VD=ve.Object,vo=function(e){return VD(ka(e))},GD=He({}.hasOwnProperty),Pe=Object.hasOwn||function(e,t){return GD(vo(e),t)},HD=0,KD=Math.random(),WD=He(1 .toString),Wr=function(e){return"Symbol("+(e===void 0?"":e)+")_"+WD(++HD+KD,36)},Po=gr("wks"),Fr=ve.Symbol,Cg=Fr&&Fr.for,qD=kf?Fr:Fr&&Fr.withoutSetter||Wr,gt=function(e){if(!Pe(Po,e)||!vi&&typeof Po[e]!="string"){var t="Symbol."+e;vi&&Pe(Fr,e)?Po[e]=Fr[e]:Po[e]=kf&&Cg?Cg(t):qD(t)}return Po[e]},zD=ve.TypeError,JD=gt("toPrimitive"),YD=function(e,t){if(!ft(e)||Ys(e))return e;var i,n=Gl(e,JD);if(n){if(t===void 0&&(t="default"),i=qt(n,e,t),!ft(i)||Ys(i))return i;throw zD("Can't convert object to primitive value")}return t===void 0&&(t="number"),function(r,s){var o,a;if(s==="string"&&ct(o=r.toString)&&!ft(a=qt(o,r))||ct(o=r.valueOf)&&!ft(a=qt(o,r))||s!=="string"&&ct(o=r.toString)&&!ft(a=qt(o,r)))return a;throw FD("Can't convert object to primitive value")}(e,t)},qr=function(e){var t=YD(e,"string");return Ys(t)?t:t+""},Fd=ve.document,XD=ft(Fd)&&ft(Fd.createElement),mT=function(e){return XD?Fd.createElement(e):{}},gT=!at&&!lt(function(){return Object.defineProperty(mT("div"),"a",{get:function(){return 7}}).a!=7}),Ag=Object.getOwnPropertyDescriptor,Ca={f:at?Ag:function(e,t){if(e=pn(e),t=qr(t),gT)try{return Ag(e,t)}catch{}if(Pe(e,t))return Hr(!qt(Sf.f,e,t),e[t])}},vT=at&&lt(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),ZD=ve.String,QD=ve.TypeError,Pt=function(e){if(ft(e))return e;throw QD(ZD(e)+" is not an object")},eN=ve.TypeError,wu=Object.defineProperty,tN=Object.getOwnPropertyDescriptor,Ft={f:at?vT?function(e,t,i){if(Pt(e),t=qr(t),Pt(i),typeof e=="function"&&t==="prototype"&&"value"in i&&"writable"in i&&!i.writable){var n=tN(e,t);n&&n.writable&&(e[t]=i.value,i={configurable:"configurable"in i?i.configurable:n.configurable,enumerable:"enumerable"in i?i.enumerable:n.enumerable,writable:!1})}return wu(e,t,i)}:wu:function(e,t,i){if(Pt(e),t=qr(t),Pt(i),gT)try{return wu(e,t,i)}catch{}if("get"in i||"set"in i)throw eN("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},es=at?function(e,t,i){return Ft.f(e,t,Hr(1,i))}:function(e,t,i){return e[t]=i,e},yT=Function.prototype,iN=at&&Object.getOwnPropertyDescriptor,Su=Pe(yT,"name"),Rf={EXISTS:Su,PROPER:Su&&function(){}.name==="something",CONFIGURABLE:Su&&(!at||at&&iN(yT,"name").configurable)},nN=He(Function.toString);ct(rr.inspectSource)||(rr.inspectSource=function(e){return nN(e)});var Hl,Jo,Kl,Pf=rr.inspectSource,Rg=ve.WeakMap,rN=ct(Rg)&&/native code/.test(Pf(Rg)),Pg=gr("keys"),Ic=function(e){return Pg[e]||(Pg[e]=Wr(e))},yo={},jd=ve.TypeError,sN=ve.WeakMap;if(rN||rr.state){var wr=rr.state||(rr.state=new sN),oN=He(wr.get),Ig=He(wr.has),aN=He(wr.set);Hl=function(e,t){if(Ig(wr,e))throw new jd("Object already initialized");return t.facade=e,aN(wr,e,t),t},Jo=function(e){return oN(wr,e)||{}},Kl=function(e){return Ig(wr,e)}}else{var fs=Ic("state");yo[fs]=!0,Hl=function(e,t){if(Pe(e,fs))throw new jd("Object already initialized");return t.facade=e,es(e,fs,t),t},Jo=function(e){return Pe(e,fs)?e[fs]:{}},Kl=function(e){return Pe(e,fs)}}var dn={set:Hl,get:Jo,has:Kl,enforce:function(e){return Kl(e)?Jo(e):Hl(e,{})},getterFor:function(e){return function(t){var i;if(!ft(t)||(i=Jo(t)).type!==e)throw jd("Incompatible receiver, "+e+" required");return i}}},lN=mo(function(e){var t=Ft.f,i=Rf.CONFIGURABLE,n=dn.enforce,r=dn.get,s=!lt(function(){return t(function(){},"length",{value:8}).length!==8}),o=String(String).split("String"),a=e.exports=function(l,c,u){String(c).slice(0,7)==="Symbol("&&(c="["+String(c).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),u&&u.getter&&(c="get "+c),u&&u.setter&&(c="set "+c),(!Pe(l,"name")||i&&l.name!==c)&&t(l,"name",{value:c,configurable:!0}),s&&u&&Pe(u,"arity")&&l.length!==u.arity&&t(l,"length",{value:u.arity});var d=n(l);return Pe(d,"source")||(d.source=o.join(typeof c=="string"?c:"")),l};Function.prototype.toString=a(function(){return ct(this)&&r(this).source||Pf(this)},"toString")}),Yt=function(e,t,i,n){var r=!!n&&!!n.unsafe,s=!!n&&!!n.enumerable,o=!!n&&!!n.noTargetGet,a=n&&n.name!==void 0?n.name:t;return ct(i)&&lN(i,a,n),e===ve?(s?e[t]=i:Af(t,i),e):(r?!o&&e[t]&&(s=!0):delete e[t],s?e[t]=i:es(e,t,i),e)},cN=Math.ceil,uN=Math.floor,If=function(e){var t=+e;return t!=t||t===0?0:(t>0?uN:cN)(t)},dN=Math.max,hN=Math.min,Vd=function(e,t){var i=If(e);return i<0?dN(i+t,0):hN(i,t)},fN=Math.min,bT=function(e){return e>0?fN(If(e),9007199254740991):0},bo=function(e){return bT(e.length)},Og=function(e){return function(t,i,n){var r,s=pn(t),o=bo(s),a=Vd(n,o);if(e&&i!=i){for(;o>a;)if((r=s[a++])!=r)return!0}else for(;o>a;a++)if((e||a in s)&&s[a]===i)return e||a||0;return!e&&-1}},ET={includes:Og(!0),indexOf:Og(!1)},pN=ET.indexOf,Dg=He([].push),TT=function(e,t){var i,n=pn(e),r=0,s=[];for(i in n)!Pe(yo,i)&&Pe(n,i)&&Dg(s,i);for(;t.length>r;)Pe(n,i=t[r++])&&(~pN(s,i)||Dg(s,i));return s},Wl=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],mN=Wl.concat("length","prototype"),ca={f:Object.getOwnPropertyNames||function(e){return TT(e,mN)}},Oc={f:Object.getOwnPropertySymbols},gN=He([].concat),vN=qi("Reflect","ownKeys")||function(e){var t=ca.f(Pt(e)),i=Oc.f;return i?gN(t,i(e)):t},_T=function(e,t,i){for(var n=vN(t),r=Ft.f,s=Ca.f,o=0;o<n.length;o++){var a=n[o];Pe(e,a)||i&&Pe(i,a)||r(e,a,s(t,a))}},yN=/#|\.prototype\./,Aa=function(e,t){var i=EN[bN(e)];return i==_N||i!=TN&&(ct(t)?lt(t):!!t)},bN=Aa.normalize=function(e){return String(e).replace(yN,".").toLowerCase()},EN=Aa.data={},TN=Aa.NATIVE="N",_N=Aa.POLYFILL="P",Gd=Aa,wN=Ca.f,It=function(e,t){var i,n,r,s,o,a=e.target,l=e.global,c=e.stat;if(i=l?ve:c?ve[a]||Af(a,{}):(ve[a]||{}).prototype)for(n in t){if(s=t[n],r=e.noTargetGet?(o=wN(i,n))&&o.value:i[n],!Gd(l?n:a+(c?".":"#")+n,e.forced)&&r!==void 0){if(typeof s==typeof r)continue;_T(s,r)}(e.sham||r&&r.sham)&&es(s,"sham",!0),Yt(i,n,s,e)}},wT={};wT[gt("toStringTag")]="z";var ku,Of=String(wT)==="[object z]",SN=gt("toStringTag"),kN=ve.Object,CN=Pn(function(){return arguments}())=="Arguments",ts=Of?Pn:function(e){var t,i,n;return e===void 0?"Undefined":e===null?"Null":typeof(i=function(r,s){try{return r[s]}catch{}}(t=kN(e),SN))=="string"?i:CN?Pn(t):(n=Pn(t))=="Object"&&ct(t.callee)?"Arguments":n},AN=ve.String,Nn=function(e){if(ts(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return AN(e)},RN=gt("match"),PN=ve.TypeError,ST=function(e){if(function(t){var i;return ft(t)&&((i=t[RN])!==void 0?!!i:Pn(t)=="RegExp")}(e))throw PN("The method doesn't accept regular expressions");return e},IN=gt("match"),kT=function(e){var t=/./;try{"/./"[e](t)}catch{try{return t[IN]=!1,"/./"[e](t)}catch{}}return!1},ON=Ca.f,Ng=He("".startsWith),DN=He("".slice),NN=Math.min,CT=kT("startsWith"),LN=!(CT||(ku=ON(String.prototype,"startsWith"),!ku||ku.writable));It({target:"String",proto:!0,forced:!LN&&!CT},{startsWith:function(e){var t=Nn(ka(this));ST(e);var i=bT(NN(arguments.length>1?arguments[1]:void 0,t.length)),n=Nn(e);return Ng?Ng(t,n,i):DN(t,i,i+n.length)===n}});var Df=function(e,t){return He(ve[e].prototype[t])};Df("String","startsWith");var ql=Array.isArray||function(e){return Pn(e)=="Array"},ua=function(e,t,i){var n=qr(t);n in e?Ft.f(e,n,Hr(0,i)):e[n]=i},AT=function(){},xN=[],RT=qi("Reflect","construct"),Nf=/^\s*(?:class|function)\b/,MN=He(Nf.exec),$N=!Nf.exec(AT),Io=function(e){if(!ct(e))return!1;try{return RT(AT,xN,e),!0}catch{return!1}},PT=function(e){if(!ct(e))return!1;switch(ts(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return $N||!!MN(Nf,Pf(e))}catch{return!0}};PT.sham=!0;var Lg,Lf=!RT||lt(function(){var e;return Io(Io.call)||!Io(Object)||!Io(function(){e=!0})||e})?PT:Io,UN=gt("species"),xg=ve.Array,IT=function(e,t){return new(function(i){var n;return ql(i)&&(n=i.constructor,(Lf(n)&&(n===xg||ql(n.prototype))||ft(n)&&(n=n[UN])===null)&&(n=void 0)),n===void 0?xg:n}(e))(t===0?0:t)},BN=gt("species"),OT=gt("isConcatSpreadable"),Mg=ve.TypeError,FN=Vl>=51||!lt(function(){var e=[];return e[OT]=!1,e.concat()[0]!==e}),jN=(Lg="concat",Vl>=51||!lt(function(){var e=[];return(e.constructor={})[BN]=function(){return{foo:1}},e[Lg](Boolean).foo!==1})),VN=function(e){if(!ft(e))return!1;var t=e[OT];return t!==void 0?!!t:ql(e)};It({target:"Array",proto:!0,arity:1,forced:!FN||!jN},{concat:function(e){var t,i,n,r,s,o=vo(this),a=IT(o,0),l=0;for(t=-1,n=arguments.length;t<n;t++)if(VN(s=t===-1?o:arguments[t])){if(l+(r=bo(s))>9007199254740991)throw Mg("Maximum allowed index exceeded");for(i=0;i<r;i++,l++)i in s&&ua(a,l,s[i])}else{if(l>=9007199254740991)throw Mg("Maximum allowed index exceeded");ua(a,l++,s)}return a.length=l,a}});var GN=Of?{}.toString:function(){return"[object "+ts(this)+"]"};Of||Yt(Object.prototype,"toString",GN,{unsafe:!0});var Qa,xf=Object.keys||function(e){return TT(e,Wl)},HN=at&&!vT?Object.defineProperties:function(e,t){Pt(e);for(var i,n=pn(t),r=xf(t),s=r.length,o=0;s>o;)Ft.f(e,i=r[o++],n[i]);return e},DT={f:HN},KN=qi("document","documentElement"),NT=Ic("IE_PROTO"),Cu=function(){},LT=function(e){return"<script>"+e+"<\/script>"},$g=function(e){e.write(LT("")),e.close();var t=e.parentWindow.Object;return e=null,t},yl=function(){try{Qa=new ActiveXObject("htmlfile")}catch{}var e,t;yl=typeof document<"u"?document.domain&&Qa?$g(Qa):((t=mT("iframe")).style.display="none",KN.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(LT("document.F=Object")),e.close(),e.F):$g(Qa);for(var i=Wl.length;i--;)delete yl.prototype[Wl[i]];return yl()};yo[NT]=!0;var hr=Object.create||function(e,t){var i;return e!==null?(Cu.prototype=Pt(e),i=new Cu,Cu.prototype=null,i[NT]=e):i=yl(),t===void 0?i:DT.f(i,t)},WN=ve.Array,qN=Math.max,xT=ca.f,MT=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],zN=function(e){try{return xT(e)}catch{return function(i,n,r){for(var s=bo(i),o=Vd(n,s),a=Vd(r===void 0?s:r,s),l=WN(qN(a-o,0)),c=0;o<a;o++,c++)ua(l,c,i[o]);return l.length=c,l}(MT)}},Mf={f:function(e){return MT&&Pn(e)=="Window"?zN(e):xT(pn(e))}},$T={f:gt},da=ve,JN=Ft.f,Qt=function(e){var t=da.Symbol||(da.Symbol={});Pe(t,e)||JN(t,e,{value:$T.f(e)})},UT=function(){var e=qi("Symbol"),t=e&&e.prototype,i=t&&t.valueOf,n=gt("toPrimitive");t&&!t[n]&&Yt(t,n,function(r){return qt(i,this)},{arity:1})},YN=Ft.f,Ug=gt("toStringTag"),er=function(e,t,i){e&&!i&&(e=e.prototype),e&&!Pe(e,Ug)&&YN(e,Ug,{configurable:!0,value:t})},XN=He(He.bind),Dc=function(e,t){return Cf(e),t===void 0?e:Sa?XN(e,t):function(){return e.apply(t,arguments)}},Bg=He([].push),Vn=function(e){var t=e==1,i=e==2,n=e==3,r=e==4,s=e==6,o=e==7,a=e==5||s;return function(l,c,u,d){for(var h,m,v=vo(l),y=pT(v),T=Dc(c,u),S=bo(y),R=0,O=d||IT,x=t?O(l,S):i||o?O(l,0):void 0;S>R;R++)if((a||R in y)&&(m=T(h=y[R],R,v),e))if(t)x[R]=m;else if(m)switch(e){case 3:return!0;case 5:return h;case 6:return R;case 2:Bg(x,h)}else switch(e){case 4:return!1;case 7:Bg(x,h)}return s?-1:n||r?r:x}},Nc={forEach:Vn(0),map:Vn(1),filter:Vn(2),some:Vn(3),every:Vn(4),find:Vn(5),findIndex:Vn(6),filterReject:Vn(7)}.forEach,ni=Ic("hidden"),ZN=dn.set,Fg=dn.getterFor("Symbol"),Ti=Object.prototype,Cs=ve.Symbol,Vo=Cs&&Cs.prototype,QN=ve.TypeError,Au=ve.QObject,BT=Ca.f,Zn=Ft.f,FT=Mf.f,eL=Sf.f,jT=He([].push),Ln=gr("symbols"),Ra=gr("op-symbols"),tL=gr("wks"),Ru=!Au||!Au.prototype||!Au.prototype.findChild,Hd=at&&lt(function(){return hr(Zn({},"a",{get:function(){return Zn(this,"a",{value:7}).a}})).a!=7})?function(e,t,i){var n=BT(Ti,t);n&&delete Ti[t],Zn(e,t,i),n&&e!==Ti&&Zn(Ti,t,n)}:Zn,Pu=function(e,t){var i=Ln[e]=hr(Vo);return ZN(i,{type:"Symbol",tag:e,description:t}),at||(i.description=t),i},zl=function(e,t,i){e===Ti&&zl(Ra,t,i),Pt(e);var n=qr(t);return Pt(i),Pe(Ln,n)?(i.enumerable?(Pe(e,ni)&&e[ni][n]&&(e[ni][n]=!1),i=hr(i,{enumerable:Hr(0,!1)})):(Pe(e,ni)||Zn(e,ni,Hr(1,{})),e[ni][n]=!0),Hd(e,n,i)):Zn(e,n,i)},Iu=function(e,t){Pt(e);var i=pn(t),n=xf(i).concat(VT(i));return Nc(n,function(r){at&&!qt(Kd,i,r)||zl(e,r,i[r])}),e},Kd=function(e){var t=qr(e),i=qt(eL,this,t);return!(this===Ti&&Pe(Ln,t)&&!Pe(Ra,t))&&(!(i||!Pe(this,t)||!Pe(Ln,t)||Pe(this,ni)&&this[ni][t])||i)},jg=function(e,t){var i=pn(e),n=qr(t);if(i!==Ti||!Pe(Ln,n)||Pe(Ra,n)){var r=BT(i,n);return!r||!Pe(Ln,n)||Pe(i,ni)&&i[ni][n]||(r.enumerable=!0),r}},Vg=function(e){var t=FT(pn(e)),i=[];return Nc(t,function(n){Pe(Ln,n)||Pe(yo,n)||jT(i,n)}),i},VT=function(e){var t=e===Ti,i=FT(t?Ra:pn(e)),n=[];return Nc(i,function(r){!Pe(Ln,r)||t&&!Pe(Ti,r)||jT(n,Ln[r])}),n};vi||(Vo=(Cs=function(){if(Kr(Vo,this))throw QN("Symbol is not a constructor");var e=arguments.length&&arguments[0]!==void 0?Nn(arguments[0]):void 0,t=Wr(e),i=function(n){this===Ti&&qt(i,Ra,n),Pe(this,ni)&&Pe(this[ni],t)&&(this[ni][t]=!1),Hd(this,t,Hr(1,n))};return at&&Ru&&Hd(Ti,t,{configurable:!0,set:i}),Pu(t,e)}).prototype,Yt(Vo,"toString",function(){return Fg(this).tag}),Yt(Cs,"withoutSetter",function(e){return Pu(Wr(e),e)}),Sf.f=Kd,Ft.f=zl,DT.f=Iu,Ca.f=jg,ca.f=Mf.f=Vg,Oc.f=VT,$T.f=function(e){return Pu(gt(e),e)},at&&(Zn(Vo,"description",{configurable:!0,get:function(){return Fg(this).description}}),Yt(Ti,"propertyIsEnumerable",Kd,{unsafe:!0}))),It({global:!0,wrap:!0,forced:!vi,sham:!vi},{Symbol:Cs}),Nc(xf(tL),function(e){Qt(e)}),It({target:"Symbol",stat:!0,forced:!vi},{useSetter:function(){Ru=!0},useSimple:function(){Ru=!1}}),It({target:"Object",stat:!0,forced:!vi,sham:!at},{create:function(e,t){return t===void 0?hr(e):Iu(hr(e),t)},defineProperty:zl,defineProperties:Iu,getOwnPropertyDescriptor:jg}),It({target:"Object",stat:!0,forced:!vi},{getOwnPropertyNames:Vg}),UT(),er(Cs,"Symbol"),yo[ni]=!0;var GT=vi&&!!Symbol.for&&!!Symbol.keyFor,Ou=gr("string-to-symbol-registry"),iL=gr("symbol-to-string-registry");It({target:"Symbol",stat:!0,forced:!GT},{for:function(e){var t=Nn(e);if(Pe(Ou,t))return Ou[t];var i=qi("Symbol")(t);return Ou[t]=i,iL[i]=t,i}});var Gg=gr("symbol-to-string-registry");It({target:"Symbol",stat:!0,forced:!GT},{keyFor:function(e){if(!Ys(e))throw TypeError(go(e)+" is not a symbol");if(Pe(Gg,e))return Gg[e]}});var HT=Function.prototype,Hg=HT.apply,Kg=HT.call,KT=typeof Reflect=="object"&&Reflect.apply||(Sa?Kg.bind(Hg):function(){return Kg.apply(Hg,arguments)}),$f=He([].slice),sr=qi("JSON","stringify"),el=He(/./.exec),Wg=He("".charAt),nL=He("".charCodeAt),rL=He("".replace),sL=He(1 .toString),oL=/[\uD800-\uDFFF]/g,qg=/^[\uD800-\uDBFF]$/,zg=/^[\uDC00-\uDFFF]$/,Jg=!vi||lt(function(){var e=qi("Symbol")();return sr([e])!="[null]"||sr({a:e})!="{}"||sr(Object(e))!="{}"}),Yg=lt(function(){return sr("\uDF06\uD834")!=='"\\udf06\\ud834"'||sr("\uDEAD")!=='"\\udead"'}),aL=function(e,t){var i=$f(arguments),n=t;if((ft(t)||e!==void 0)&&!Ys(e))return ql(t)||(t=function(r,s){if(ct(n)&&(s=qt(n,this,r,s)),!Ys(s))return s}),i[1]=t,KT(sr,null,i)},lL=function(e,t,i){var n=Wg(i,t-1),r=Wg(i,t+1);return el(qg,e)&&!el(zg,r)||el(zg,e)&&!el(qg,n)?"\\u"+sL(nL(e,0),16):e};sr&&It({target:"JSON",stat:!0,arity:3,forced:Jg||Yg},{stringify:function(e,t,i){var n=$f(arguments),r=KT(Jg?aL:sr,null,n);return Yg&&typeof r=="string"?rL(r,oL,lL):r}});var cL=!vi||lt(function(){Oc.f(1)});It({target:"Object",stat:!0,forced:cL},{getOwnPropertySymbols:function(e){var t=Oc.f;return t?t(vo(e)):[]}}),Qt("asyncIterator");var uL=Ft.f,En=ve.Symbol,Sr=En&&En.prototype;if(at&&ct(En)&&(!("description"in Sr)||En().description!==void 0)){var Xg={},tl=function(){var e=arguments.length<1||arguments[0]===void 0?void 0:Nn(arguments[0]),t=Kr(Sr,this)?new En(e):e===void 0?En():En(e);return e===""&&(Xg[t]=!0),t};_T(tl,En),tl.prototype=Sr,Sr.constructor=tl;var dL=String(En("test"))=="Symbol(test)",hL=He(Sr.toString),fL=He(Sr.valueOf),pL=/^Symbol\((.*)\)[^)]+$/,mL=He("".replace),gL=He("".slice);uL(Sr,"description",{configurable:!0,get:function(){var e=fL(this),t=hL(e);if(Pe(Xg,e))return"";var i=dL?gL(t,7,-1):mL(t,pL,"$1");return i===""?void 0:i}}),It({global:!0,forced:!0},{Symbol:tl})}Qt("hasInstance"),Qt("isConcatSpreadable"),Qt("iterator"),Qt("match"),Qt("matchAll"),Qt("replace"),Qt("search"),Qt("species"),Qt("split"),Qt("toPrimitive"),UT(),Qt("toStringTag"),er(qi("Symbol"),"Symbol"),Qt("unscopables"),er(ve.JSON,"JSON",!0),er(Math,"Math",!0),It({global:!0},{Reflect:{}}),er(ve.Reflect,"Reflect",!0),da.Symbol;var jr,Zg,Qg,vL=He("".charAt),ev=He("".charCodeAt),yL=He("".slice),tv=function(e){return function(t,i){var n,r,s=Nn(ka(t)),o=If(i),a=s.length;return o<0||o>=a?e?"":void 0:(n=ev(s,o))<55296||n>56319||o+1===a||(r=ev(s,o+1))<56320||r>57343?e?vL(s,o):n:e?yL(s,o,o+2):r-56320+(n-55296<<10)+65536}},bL={codeAt:tv(!1),charAt:tv(!0)},EL=!lt(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),iv=Ic("IE_PROTO"),Wd=ve.Object,TL=Wd.prototype,zr=EL?Wd.getPrototypeOf:function(e){var t=vo(e);if(Pe(t,iv))return t[iv];var i=t.constructor;return ct(i)&&t instanceof i?i.prototype:t instanceof Wd?TL:null},qd=gt("iterator"),WT=!1;[].keys&&("next"in(Qg=[].keys())?(Zg=zr(zr(Qg)))!==Object.prototype&&(jr=Zg):WT=!0);var _L=jr==null||lt(function(){var e={};return jr[qd].call(e)!==e});_L&&(jr={}),ct(jr[qd])||Yt(jr,qd,function(){return this});var Uf={IteratorPrototype:jr,BUGGY_SAFARI_ITERATORS:WT},Xs={},wL=Uf.IteratorPrototype,SL=function(){return this},kL=ve.String,CL=ve.TypeError,hn=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=He(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]),t=i instanceof Array}catch{}return function(n,r){return Pt(n),function(s){if(typeof s=="object"||ct(s))return s;throw CL("Can't set "+kL(s)+" as a prototype")}(r),t?e(n,r):n.__proto__=r,n}}():void 0),AL=Rf.PROPER,RL=Rf.CONFIGURABLE,nv=Uf.IteratorPrototype,il=Uf.BUGGY_SAFARI_ITERATORS,Oo=gt("iterator"),PL=function(){return this},Bf=function(e,t,i,n,r,s,o){(function(S,R,O,x){var B=R+" Iterator";S.prototype=hr(wL,{next:Hr(+!x,O)}),er(S,B,!1),Xs[B]=SL})(i,t,n);var a,l,c,u=function(S){if(S===r&&y)return y;if(!il&&S in m)return m[S];switch(S){case"keys":case"values":case"entries":return function(){return new i(this,S)}}return function(){return new i(this)}},d=t+" Iterator",h=!1,m=e.prototype,v=m[Oo]||m["@@iterator"]||r&&m[r],y=!il&&v||u(r),T=t=="Array"&&m.entries||v;if(T&&(a=zr(T.call(new e)))!==Object.prototype&&a.next&&(zr(a)!==nv&&(hn?hn(a,nv):ct(a[Oo])||Yt(a,Oo,PL)),er(a,d,!0)),AL&&r=="values"&&v&&v.name!=="values"&&(RL?es(m,"name","values"):(h=!0,y=function(){return qt(v,this)})),r)if(l={values:u("values"),keys:s?y:u("keys"),entries:u("entries")},o)for(c in l)(il||h||!(c in m))&&Yt(m,c,l[c]);else It({target:t,proto:!0,forced:il||h},l);return m[Oo]!==y&&Yt(m,Oo,y,{name:r}),Xs[t]=y,l},IL=bL.charAt,OL=dn.set,DL=dn.getterFor("String Iterator");Bf(String,"String",function(e){OL(this,{type:"String Iterator",string:Nn(e),index:0})},function(){var e,t=DL(this),i=t.string,n=t.index;return n>=i.length?{value:void 0,done:!0}:(e=IL(i,n),t.index+=e.length,{value:e,done:!1})});var zd=function(e,t,i){var n,r;Pt(e);try{if(!(n=Gl(e,"return"))){if(t==="throw")throw i;return i}n=qt(n,e)}catch(s){r=!0,n=s}if(t==="throw")throw i;if(r)throw n;return Pt(n),i},NL=function(e,t,i,n){try{return n?t(Pt(i)[0],i[1]):t(i)}catch(r){zd(e,"throw",r)}},LL=gt("iterator"),xL=Array.prototype,qT=function(e){return e!==void 0&&(Xs.Array===e||xL[LL]===e)},ML=gt("iterator"),Ff=function(e){if(e!=null)return Gl(e,ML)||Gl(e,"@@iterator")||Xs[ts(e)]},$L=ve.TypeError,zT=function(e,t){var i=arguments.length<2?Ff(e):t;if(Cf(i))return Pt(qt(i,e));throw $L(go(e)+" is not iterable")},rv=ve.Array,JT=gt("iterator"),YT=!1;try{var UL=0,sv={next:function(){return{done:!!UL++}},return:function(){YT=!0}};sv[JT]=function(){return this},Array.from(sv,function(){throw 2})}catch{}var XT=function(e,t){if(!t&&!YT)return!1;var i=!1;try{var n={};n[JT]=function(){return{next:function(){return{done:i=!0}}}},e(n)}catch{}return i},BL=!XT(function(e){Array.from(e)});It({target:"Array",stat:!0,forced:BL},{from:function(e){var t=vo(e),i=Lf(this),n=arguments.length,r=n>1?arguments[1]:void 0,s=r!==void 0;s&&(r=Dc(r,n>2?arguments[2]:void 0));var o,a,l,c,u,d,h=Ff(t),m=0;if(!h||this==rv&&qT(h))for(o=bo(t),a=i?new this(o):rv(o);o>m;m++)d=s?r(t[m],m):t[m],ua(a,m,d);else for(u=(c=zT(t,h)).next,a=i?new this:[];!(l=qt(u,c)).done;m++)d=s?NL(c,r,[l.value,m],!0):l.value,ua(a,m,d);return a.length=m,a}}),da.Array.from;var ri,Ns,Jl,FL=typeof ArrayBuffer<"u"&&typeof DataView<"u",jL=Ft.f,Yl=ve.Int8Array,Jd=Yl&&Yl.prototype,ov=ve.Uint8ClampedArray,av=ov&&ov.prototype,en=Yl&&zr(Yl),Ui=Jd&&zr(Jd),VL=Object.prototype,Yd=ve.TypeError,lv=gt("toStringTag"),Xd=Wr("TYPED_ARRAY_TAG"),jf=Wr("TYPED_ARRAY_CONSTRUCTOR"),In=FL&&!!hn&&ts(ve.opera)!=="Opera",ZT=!1,wn={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Vf={BigInt64Array:8,BigUint64Array:8},cv=function(e){if(!ft(e))return!1;var t=ts(e);return Pe(wn,t)||Pe(Vf,t)};for(ri in wn)(Jl=(Ns=ve[ri])&&Ns.prototype)?es(Jl,jf,Ns):In=!1;for(ri in Vf)(Jl=(Ns=ve[ri])&&Ns.prototype)&&es(Jl,jf,Ns);if((!In||!ct(en)||en===Function.prototype)&&(en=function(){throw Yd("Incorrect invocation")},In))for(ri in wn)ve[ri]&&hn(ve[ri],en);if((!In||!Ui||Ui===VL)&&(Ui=en.prototype,In))for(ri in wn)ve[ri]&&hn(ve[ri].prototype,Ui);if(In&&zr(av)!==Ui&&hn(av,Ui),at&&!Pe(Ui,lv))for(ri in ZT=!0,jL(Ui,lv,{get:function(){return ft(this)?this[Xd]:void 0}}),wn)ve[ri]&&es(ve[ri],Xd,ri);var Lc={NATIVE_ARRAY_BUFFER_VIEWS:In,TYPED_ARRAY_CONSTRUCTOR:jf,TYPED_ARRAY_TAG:ZT&&Xd,aTypedArray:function(e){if(cv(e))return e;throw Yd("Target is not a typed array")},aTypedArrayConstructor:function(e){if(ct(e)&&(!hn||Kr(en,e)))return e;throw Yd(go(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,i,n){if(at){if(i)for(var r in wn){var s=ve[r];if(s&&Pe(s.prototype,e))try{delete s.prototype[e]}catch{try{s.prototype[e]=t}catch{}}}Ui[e]&&!i||Yt(Ui,e,i?t:In&&Jd[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,i){var n,r;if(at){if(hn){if(i){for(n in wn)if((r=ve[n])&&Pe(r,e))try{delete r[e]}catch{}}if(en[e]&&!i)return;try{return Yt(en,e,i?t:In&&en[e]||t)}catch{}}for(n in wn)!(r=ve[n])||r[e]&&!i||Yt(r,e,t)}},isView:function(e){if(!ft(e))return!1;var t=ts(e);return t==="DataView"||Pe(wn,t)||Pe(Vf,t)},isTypedArray:cv,TypedArray:en,TypedArrayPrototype:Ui},GL=ve.TypeError,HL=gt("species"),KL=function(e,t){var i,n=Pt(e).constructor;return n===void 0||(i=Pt(n)[HL])==null?t:function(r){if(Lf(r))return r;throw GL(go(r)+" is not a constructor")}(i)},WL=Lc.TYPED_ARRAY_CONSTRUCTOR,qL=Lc.aTypedArrayConstructor,zL=Lc.aTypedArray;(0,Lc.exportTypedArrayMethod)("slice",function(e,t){for(var i,n=$f(zL(this),e,t),r=qL(KL(i=this,i[WL])),s=0,o=n.length,a=new r(o);o>s;)a[s]=n[s++];return a},lt(function(){new Int8Array(1).slice()}));var Zd=gt("unscopables"),Qd=Array.prototype;Qd[Zd]==null&&Ft.f(Qd,Zd,{configurable:!0,value:hr(null)});var bl=function(e){Qd[Zd][e]=!0},JL=ET.includes,YL=lt(function(){return!Array(1).includes()});It({target:"Array",proto:!0,forced:YL},{includes:function(e){return JL(this,e,arguments.length>1?arguments[1]:void 0)}}),bl("includes"),Df("Array","includes");var XL=He("".indexOf);It({target:"String",proto:!0,forced:!kT("includes")},{includes:function(e){return!!~XL(Nn(ka(this)),Nn(ST(e)),arguments.length>1?arguments[1]:void 0)}}),Df("String","includes");var ZL=Ft.f,QL=dn.set,ex=dn.getterFor("Array Iterator");Bf(Array,"Array",function(e,t){QL(this,{type:"Array Iterator",target:pn(e),index:0,kind:t})},function(){var e=ex(this),t=e.target,i=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):i=="keys"?{value:n,done:!1}:i=="values"?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}},"values");var uv=Xs.Arguments=Xs.Array;if(bl("keys"),bl("values"),bl("entries"),at&&uv.name!=="values")try{ZL(uv,"name",{value:"values"})}catch{}var dv=lt(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),nl=Object.isExtensible,Du=lt(function(){nl(1)})||dv?function(e){return!!ft(e)&&(!dv||Pn(e)!="ArrayBuffer")&&(!nl||nl(e))}:nl,tx=!lt(function(){return Object.isExtensible(Object.preventExtensions({}))}),As=mo(function(e){var t=Ft.f,i=!1,n=Wr("meta"),r=0,s=function(a){t(a,n,{value:{objectID:"O"+r++,weakData:{}}})},o=e.exports={enable:function(){o.enable=function(){},i=!0;var a=ca.f,l=He([].splice),c={};c[n]=1,a(c).length&&(ca.f=function(u){for(var d=a(u),h=0,m=d.length;h<m;h++)if(d[h]===n){l(d,h,1);break}return d},It({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Mf.f}))},fastKey:function(a,l){if(!ft(a))return typeof a=="symbol"?a:(typeof a=="string"?"S":"P")+a;if(!Pe(a,n)){if(!Du(a))return"F";if(!l)return"E";s(a)}return a[n].objectID},getWeakData:function(a,l){if(!Pe(a,n)){if(!Du(a))return!0;if(!l)return!1;s(a)}return a[n].weakData},onFreeze:function(a){return tx&&i&&Du(a)&&!Pe(a,n)&&s(a),a}};yo[n]=!0});As.enable,As.fastKey,As.getWeakData,As.onFreeze;var ix=ve.TypeError,El=function(e,t){this.stopped=e,this.result=t},hv=El.prototype,QT=function(e,t,i){var n,r,s,o,a,l,c,u=i&&i.that,d=!(!i||!i.AS_ENTRIES),h=!(!i||!i.IS_ITERATOR),m=!(!i||!i.INTERRUPTED),v=Dc(t,u),y=function(S){return n&&zd(n,"normal",S),new El(!0,S)},T=function(S){return d?(Pt(S),m?v(S[0],S[1],y):v(S[0],S[1])):m?v(S,y):v(S)};if(h)n=e;else{if(!(r=Ff(e)))throw ix(go(e)+" is not iterable");if(qT(r)){for(s=0,o=bo(e);o>s;s++)if((a=T(e[s]))&&Kr(hv,a))return a;return new El(!1)}n=zT(e,r)}for(l=n.next;!(c=qt(l,n)).done;){try{a=T(c.value)}catch(S){zd(n,"throw",S)}if(typeof a=="object"&&a&&Kr(hv,a))return a}return new El(!1)},nx=ve.TypeError,e_=function(e,t){if(Kr(t,e))return e;throw nx("Incorrect invocation")},fv=function(e,t,i){for(var n in t)Yt(e,n,t[n],i);return e},pv=gt("species"),rx=Ft.f,mv=As.fastKey,gv=dn.set,Nu=dn.getterFor,sx={getConstructor:function(e,t,i,n){var r=e(function(c,u){e_(c,s),gv(c,{type:t,index:hr(null),first:void 0,last:void 0,size:0}),at||(c.size=0),u!=null&&QT(u,c[n],{that:c,AS_ENTRIES:i})}),s=r.prototype,o=Nu(t),a=function(c,u,d){var h,m,v=o(c),y=l(c,u);return y?y.value=d:(v.last=y={index:m=mv(u,!0),key:u,value:d,previous:h=v.last,next:void 0,removed:!1},v.first||(v.first=y),h&&(h.next=y),at?v.size++:c.size++,m!=="F"&&(v.index[m]=y)),c},l=function(c,u){var d,h=o(c),m=mv(u);if(m!=="F")return h.index[m];for(d=h.first;d;d=d.next)if(d.key==u)return d};return fv(s,{clear:function(){for(var c=o(this),u=c.index,d=c.first;d;)d.removed=!0,d.previous&&(d.previous=d.previous.next=void 0),delete u[d.index],d=d.next;c.first=c.last=void 0,at?c.size=0:this.size=0},delete:function(c){var u=this,d=o(u),h=l(u,c);if(h){var m=h.next,v=h.previous;delete d.index[h.index],h.removed=!0,v&&(v.next=m),m&&(m.previous=v),d.first==h&&(d.first=m),d.last==h&&(d.last=v),at?d.size--:u.size--}return!!h},forEach:function(c){for(var u,d=o(this),h=Dc(c,arguments.length>1?arguments[1]:void 0);u=u?u.next:d.first;)for(h(u.value,u.key,this);u&&u.removed;)u=u.previous},has:function(c){return!!l(this,c)}}),fv(s,i?{get:function(c){var u=l(this,c);return u&&u.value},set:function(c,u){return a(this,c===0?0:c,u)}}:{add:function(c){return a(this,c=c===0?0:c,c)}}),at&&rx(s,"size",{get:function(){return o(this).size}}),r},setStrong:function(e,t,i){var n=t+" Iterator",r=Nu(t),s=Nu(n);Bf(e,t,function(o,a){gv(this,{type:n,target:o,state:r(o),kind:a,last:void 0})},function(){for(var o=s(this),a=o.kind,l=o.last;l&&l.removed;)l=l.previous;return o.target&&(o.last=l=l?l.next:o.state.first)?a=="keys"?{value:l.key,done:!1}:a=="values"?{value:l.value,done:!1}:{value:[l.key,l.value],done:!1}:(o.target=void 0,{value:void 0,done:!0})},i?"entries":"values",!i,!0),function(o){var a=qi(o),l=Ft.f;at&&a&&!a[pv]&&l(a,pv,{configurable:!0,get:function(){return this}})}(t)}};function t_(e){var t=this.constructor;return this.then(function(i){return t.resolve(e()).then(function(){return i})},function(i){return t.resolve(e()).then(function(){return t.reject(i)})})}function i_(e){return new this(function(t,i){if(!e||e.length===void 0)return i(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(e);if(n.length===0)return t([]);var r=n.length;function s(a,l){if(l&&(typeof l=="object"||typeof l=="function")){var c=l.then;if(typeof c=="function")return void c.call(l,function(u){s(a,u)},function(u){n[a]={status:"rejected",reason:u},--r==0&&t(n)})}n[a]={status:"fulfilled",value:l},--r==0&&t(n)}for(var o=0;o<n.length;o++)s(o,n[o])})}(function(e,t,i){var n=e.indexOf("Map")!==-1,r=e.indexOf("Weak")!==-1,s=n?"set":"add",o=ve[e],a=o&&o.prototype,l=o,c={},u=function(T){var S=He(a[T]);Yt(a,T,T=="add"?function(R){return S(this,R===0?0:R),this}:T=="delete"?function(R){return!(r&&!ft(R))&&S(this,R===0?0:R)}:T=="get"?function(R){return r&&!ft(R)?void 0:S(this,R===0?0:R)}:T=="has"?function(R){return!(r&&!ft(R))&&S(this,R===0?0:R)}:function(R,O){return S(this,R===0?0:R,O),this})};if(Gd(e,!ct(o)||!(r||a.forEach&&!lt(function(){new o().entries().next()}))))l=i.getConstructor(t,e,n,s),As.enable();else if(Gd(e,!0)){var d=new l,h=d[s](r?{}:-0,1)!=d,m=lt(function(){d.has(1)}),v=XT(function(T){new o(T)}),y=!r&&lt(function(){for(var T=new o,S=5;S--;)T[s](S,S);return!T.has(-0)});v||((l=t(function(T,S){e_(T,a);var R=function(O,x,B){var ie,ee;return hn&&ct(ie=x.constructor)&&ie!==B&&ft(ee=ie.prototype)&&ee!==B.prototype&&hn(O,ee),O}(new o,T,l);return S!=null&&QT(S,R[s],{that:R,AS_ENTRIES:n}),R})).prototype=a,a.constructor=l),(m||y)&&(u("delete"),u("has"),n&&u("get")),(y||h)&&u(s),r&&a.clear&&delete a.clear}c[e]=l,It({global:!0,forced:l!=o},c),er(l,e),r||i.setStrong(l,e,n)})("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},sx),da.Set;var ox=setTimeout;function vv(e){return Boolean(e&&e.length!==void 0)}function ax(){}function dt(e){if(!(this instanceof dt))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],r_(e,this)}function n_(e,t){for(;e._state===3;)e=e._value;e._state!==0?(e._handled=!0,dt._immediateFn(function(){var i=e._state===1?t.onFulfilled:t.onRejected;if(i!==null){var n;try{n=i(e._value)}catch(r){return void ha(t.promise,r)}eh(t.promise,n)}else(e._state===1?eh:ha)(t.promise,e._value)})):e._deferreds.push(t)}function eh(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&(typeof t=="object"||typeof t=="function")){var i=t.then;if(t instanceof dt)return e._state=3,e._value=t,void th(e);if(typeof i=="function")return void r_((n=i,r=t,function(){n.apply(r,arguments)}),e)}e._state=1,e._value=t,th(e)}catch(s){ha(e,s)}var n,r}function ha(e,t){e._state=2,e._value=t,th(e)}function th(e){e._state===2&&e._deferreds.length===0&&dt._immediateFn(function(){e._handled||dt._unhandledRejectionFn(e._value)});for(var t=0,i=e._deferreds.length;t<i;t++)n_(e,e._deferreds[t]);e._deferreds=null}function lx(e,t,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.promise=i}function r_(e,t){var i=!1;try{e(function(n){i||(i=!0,eh(t,n))},function(n){i||(i=!0,ha(t,n))})}catch(n){if(i)return;i=!0,ha(t,n)}}dt.prototype.catch=function(e){return this.then(null,e)},dt.prototype.then=function(e,t){var i=new this.constructor(ax);return n_(this,new lx(e,t,i)),i},dt.prototype.finally=t_,dt.all=function(e){return new dt(function(t,i){if(!vv(e))return i(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(e);if(n.length===0)return t([]);var r=n.length;function s(a,l){try{if(l&&(typeof l=="object"||typeof l=="function")){var c=l.then;if(typeof c=="function")return void c.call(l,function(u){s(a,u)},i)}n[a]=l,--r==0&&t(n)}catch(u){i(u)}}for(var o=0;o<n.length;o++)s(o,n[o])})},dt.allSettled=i_,dt.resolve=function(e){return e&&typeof e=="object"&&e.constructor===dt?e:new dt(function(t){t(e)})},dt.reject=function(e){return new dt(function(t,i){i(e)})},dt.race=function(e){return new dt(function(t,i){if(!vv(e))return i(new TypeError("Promise.race accepts an array"));for(var n=0,r=e.length;n<r;n++)dt.resolve(e[n]).then(t,i)})},dt._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){ox(e,0)},dt._unhandledRejectionFn=function(e){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var ps=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}();typeof ps.Promise!="function"?ps.Promise=dt:(ps.Promise.prototype.finally||(ps.Promise.prototype.finally=t_),ps.Promise.allSettled||(ps.Promise.allSettled=i_)),function(e){function t(){}function i(o,a){if(o=o===void 0?"utf-8":o,a=a===void 0?{fatal:!1}:a,r.indexOf(o.toLowerCase())===-1)throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+o+"') is invalid.");if(a.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function n(o){for(var a=0,l=Math.min(65536,o.length+1),c=new Uint16Array(l),u=[],d=0;;){var h=a<o.length;if(!h||d>=l-1){if(u.push(String.fromCharCode.apply(null,c.subarray(0,d))),!h)return u.join("");o=o.subarray(a),d=a=0}if((128&(h=o[a++]))==0)c[d++]=h;else if((224&h)==192){var m=63&o[a++];c[d++]=(31&h)<<6|m}else if((240&h)==224){m=63&o[a++];var v=63&o[a++];c[d++]=(31&h)<<12|m<<6|v}else(248&h)==240&&(65535<(h=(7&h)<<18|(m=63&o[a++])<<12|(v=63&o[a++])<<6|63&o[a++])&&(h-=65536,c[d++]=h>>>10&1023|55296,h=56320|1023&h),c[d++]=h)}}if(e.TextEncoder&&e.TextDecoder)return!1;var r=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(t.prototype,"encoding",{value:"utf-8"}),t.prototype.encode=function(o,a){if((a=a===void 0?{stream:!1}:a).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");a=0;for(var l=o.length,c=0,u=Math.max(32,l+(l>>>1)+7),d=new Uint8Array(u>>>3<<3);a<l;){var h=o.charCodeAt(a++);if(55296<=h&&56319>=h){if(a<l){var m=o.charCodeAt(a);(64512&m)==56320&&(++a,h=((1023&h)<<10)+(1023&m)+65536)}if(55296<=h&&56319>=h)continue}if(c+4>d.length&&(u+=8,u=(u*=1+a/o.length*2)>>>3<<3,(m=new Uint8Array(u)).set(d),d=m),(4294967168&h)==0)d[c++]=h;else{if((4294965248&h)==0)d[c++]=h>>>6&31|192;else if((4294901760&h)==0)d[c++]=h>>>12&15|224,d[c++]=h>>>6&63|128;else{if((4292870144&h)!=0)continue;d[c++]=h>>>18&7|240,d[c++]=h>>>12&63|128,d[c++]=h>>>6&63|128}d[c++]=63&h|128}}return d.slice?d.slice(0,c):d.subarray(0,c)},Object.defineProperty(i.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(i.prototype,"fatal",{value:!1}),Object.defineProperty(i.prototype,"ignoreBOM",{value:!1});var s=n;typeof Buffer=="function"&&Buffer.from?s=function(o){return Buffer.from(o.buffer,o.byteOffset,o.byteLength).toString("utf-8")}:typeof Blob=="function"&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&(s=function(o){var a=URL.createObjectURL(new Blob([o],{type:"text/plain;charset=UTF-8"}));try{var l=new XMLHttpRequest;return l.open("GET",a,!1),l.send(),l.responseText}catch{return n(o)}finally{URL.revokeObjectURL(a)}}),i.prototype.decode=function(o,a){if((a=a===void 0?{stream:!1}:a).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return o=o instanceof Uint8Array?o:o.buffer instanceof ArrayBuffer?new Uint8Array(o.buffer):new Uint8Array(o),s(o)},e.TextEncoder=t,e.TextDecoder=i}(typeof window<"u"?window:nn),function(){function e(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}function t(T,S){for(var R=0;R<S.length;R++){var O=S[R];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(T,O.key,O)}}function i(T,S,R){return S&&t(T.prototype,S),R&&t(T,R),T}function n(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),S&&s(T,S)}function r(T){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)},r(T)}function s(T,S){return s=Object.setPrototypeOf||function(R,O){return R.__proto__=O,R},s(T,S)}function o(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function a(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function l(T,S){return!S||typeof S!="object"&&typeof S!="function"?a(T):S}function c(T){var S=o();return function(){var R,O=r(T);if(S){var x=r(this).constructor;R=Reflect.construct(O,arguments,x)}else R=O.apply(this,arguments);return l(this,R)}}function u(T,S){for(;!Object.prototype.hasOwnProperty.call(T,S)&&(T=r(T))!==null;);return T}function d(T,S,R){return d=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(O,x,B){var ie=u(O,x);if(ie){var ee=Object.getOwnPropertyDescriptor(ie,x);return ee.get?ee.get.call(B):ee.value}},d(T,S,R||T)}var h=function(){function T(){e(this,T),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return i(T,[{key:"addEventListener",value:function(S,R,O){S in this.listeners||(this.listeners[S]=[]),this.listeners[S].push({callback:R,options:O})}},{key:"removeEventListener",value:function(S,R){if(S in this.listeners){for(var O=this.listeners[S],x=0,B=O.length;x<B;x++)if(O[x].callback===R)return void O.splice(x,1)}}},{key:"dispatchEvent",value:function(S){if(S.type in this.listeners){for(var R=this.listeners[S.type].slice(),O=0,x=R.length;O<x;O++){var B=R[O];try{B.callback.call(this,S)}catch(ie){Promise.resolve().then(function(){throw ie})}B.options&&B.options.once&&this.removeEventListener(S.type,B.callback)}return!S.defaultPrevented}}}]),T}(),m=function(T){n(R,T);var S=c(R);function R(){var O;return e(this,R),(O=S.call(this)).listeners||h.call(a(O)),Object.defineProperty(a(O),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(a(O),"onabort",{value:null,writable:!0,configurable:!0}),O}return i(R,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(O){O.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,O)),d(r(R.prototype),"dispatchEvent",this).call(this,O)}}]),R}(h),v=function(){function T(){e(this,T),Object.defineProperty(this,"signal",{value:new m,writable:!0,configurable:!0})}return i(T,[{key:"abort",value:function(){var S;try{S=new Event("abort")}catch{typeof document<"u"?document.createEvent?(S=document.createEvent("Event")).initEvent("abort",!1,!1):(S=document.createEventObject()).type="abort":S={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(S)}},{key:"toString",value:function(){return"[object AbortController]"}}]),T}();function y(T){return T.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof T.Request=="function"&&!T.Request.prototype.hasOwnProperty("signal")||!T.AbortController}typeof Symbol<"u"&&Symbol.toStringTag&&(v.prototype[Symbol.toStringTag]="AbortController",m.prototype[Symbol.toStringTag]="AbortSignal"),function(T){y(T)&&(T.AbortController=v,T.AbortSignal=m)}(typeof self<"u"?self:nn)}();var Ar=mo(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(){var r=this;this.locked=new Map,this.addToLocked=function(s,o){var a=r.locked.get(s);a===void 0?o===void 0?r.locked.set(s,[]):r.locked.set(s,[o]):o!==void 0&&(a.unshift(o),r.locked.set(s,a))},this.isLocked=function(s){return r.locked.has(s)},this.lock=function(s){return new Promise(function(o,a){r.isLocked(s)?r.addToLocked(s,o):(r.addToLocked(s),o())})},this.unlock=function(s){var o=r.locked.get(s);if(o!==void 0&&o.length!==0){var a=o.pop();r.locked.set(s,o),a!==void 0&&setTimeout(a,0)}else r.locked.delete(s)}}return n.getInstance=function(){return n.instance===void 0&&(n.instance=new n),n.instance},n}();t.default=function(){return i.getInstance()}});wf(Ar);var cx=mo(function(e,t){var i=nn&&nn.__awaiter||function(l,c,u,d){return new(u||(u=Promise))(function(h,m){function v(S){try{T(d.next(S))}catch(R){m(R)}}function y(S){try{T(d.throw(S))}catch(R){m(R)}}function T(S){S.done?h(S.value):new u(function(R){R(S.value)}).then(v,y)}T((d=d.apply(l,c||[])).next())})},n=nn&&nn.__generator||function(l,c){var u,d,h,m,v={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return m={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function y(T){return function(S){return function(R){if(u)throw new TypeError("Generator is already executing.");for(;v;)try{if(u=1,d&&(h=2&R[0]?d.return:R[0]?d.throw||((h=d.return)&&h.call(d),0):d.next)&&!(h=h.call(d,R[1])).done)return h;switch(d=0,h&&(R=[2&R[0],h.value]),R[0]){case 0:case 1:h=R;break;case 4:return v.label++,{value:R[1],done:!1};case 5:v.label++,d=R[1],R=[0];continue;case 7:R=v.ops.pop(),v.trys.pop();continue;default:if(h=v.trys,!((h=h.length>0&&h[h.length-1])||R[0]!==6&&R[0]!==2)){v=0;continue}if(R[0]===3&&(!h||R[1]>h[0]&&R[1]<h[3])){v.label=R[1];break}if(R[0]===6&&v.label<h[1]){v.label=h[1],h=R;break}if(h&&v.label<h[2]){v.label=h[2],v.ops.push(R);break}h[2]&&v.ops.pop(),v.trys.pop();continue}R=c.call(l,v)}catch(O){R=[6,O],d=0}finally{u=h=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([T,S])}}};Object.defineProperty(t,"__esModule",{value:!0});var r="browser-tabs-lock-key";function s(l){return new Promise(function(c){return setTimeout(c,l)})}function o(l){for(var c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",u="",d=0;d<l;d++)u+=c[Math.floor(Math.random()*c.length)];return u}var a=function(){function l(){this.acquiredIatSet=new Set,this.id=Date.now().toString()+o(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),l.waiters===void 0&&(l.waiters=[])}return l.prototype.acquireLock=function(c,u){return u===void 0&&(u=5e3),i(this,void 0,void 0,function(){var d,h,m,v,y,T;return n(this,function(S){switch(S.label){case 0:d=Date.now()+o(4),h=Date.now()+u,m=r+"-"+c,v=window.localStorage,S.label=1;case 1:return Date.now()<h?[4,s(30)]:[3,8];case 2:return S.sent(),v.getItem(m)!==null?[3,5]:(y=this.id+"-"+c+"-"+d,[4,s(Math.floor(25*Math.random()))]);case 3:return S.sent(),v.setItem(m,JSON.stringify({id:this.id,iat:d,timeoutKey:y,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,s(30)];case 4:return S.sent(),(T=v.getItem(m))!==null&&(T=JSON.parse(T)).id===this.id&&T.iat===d?(this.acquiredIatSet.add(d),this.refreshLockWhileAcquired(m,d),[2,!0]):[3,7];case 5:return l.lockCorrector(),[4,this.waitForSomethingToChange(h)];case 6:S.sent(),S.label=7;case 7:return d=Date.now()+o(4),[3,1];case 8:return[2,!1]}})})},l.prototype.refreshLockWhileAcquired=function(c,u){return i(this,void 0,void 0,function(){var d=this;return n(this,function(h){return setTimeout(function(){return i(d,void 0,void 0,function(){var m,v;return n(this,function(y){switch(y.label){case 0:return[4,Ar.default().lock(u)];case 1:return y.sent(),this.acquiredIatSet.has(u)?(m=window.localStorage,(v=m.getItem(c))===null?(Ar.default().unlock(u),[2]):((v=JSON.parse(v)).timeRefreshed=Date.now(),m.setItem(c,JSON.stringify(v)),Ar.default().unlock(u),this.refreshLockWhileAcquired(c,u),[2])):(Ar.default().unlock(u),[2])}})})},1e3),[2]})})},l.prototype.waitForSomethingToChange=function(c){return i(this,void 0,void 0,function(){return n(this,function(u){switch(u.label){case 0:return[4,new Promise(function(d){var h=!1,m=Date.now(),v=!1;function y(){if(v||(window.removeEventListener("storage",y),l.removeFromWaiting(y),clearTimeout(T),v=!0),!h){h=!0;var S=50-(Date.now()-m);S>0?setTimeout(d,S):d()}}window.addEventListener("storage",y),l.addToWaiting(y);var T=setTimeout(y,Math.max(0,c-Date.now()))})];case 1:return u.sent(),[2]}})})},l.addToWaiting=function(c){this.removeFromWaiting(c),l.waiters!==void 0&&l.waiters.push(c)},l.removeFromWaiting=function(c){l.waiters!==void 0&&(l.waiters=l.waiters.filter(function(u){return u!==c}))},l.notifyWaiters=function(){l.waiters!==void 0&&l.waiters.slice().forEach(function(c){return c()})},l.prototype.releaseLock=function(c){return i(this,void 0,void 0,function(){return n(this,function(u){switch(u.label){case 0:return[4,this.releaseLock__private__(c)];case 1:return[2,u.sent()]}})})},l.prototype.releaseLock__private__=function(c){return i(this,void 0,void 0,function(){var u,d,h;return n(this,function(m){switch(m.label){case 0:return u=window.localStorage,d=r+"-"+c,(h=u.getItem(d))===null?[2]:(h=JSON.parse(h)).id!==this.id?[3,2]:[4,Ar.default().lock(h.iat)];case 1:m.sent(),this.acquiredIatSet.delete(h.iat),u.removeItem(d),Ar.default().unlock(h.iat),l.notifyWaiters(),m.label=2;case 2:return[2]}})})},l.lockCorrector=function(){for(var c=Date.now()-5e3,u=window.localStorage,d=Object.keys(u),h=!1,m=0;m<d.length;m++){var v=d[m];if(v.includes(r)){var y=u.getItem(v);y!==null&&((y=JSON.parse(y)).timeRefreshed===void 0&&y.timeAcquired<c||y.timeRefreshed!==void 0&&y.timeRefreshed<c)&&(u.removeItem(v),h=!0)}}h&&l.notifyWaiters()},l.waiters=void 0,l}();t.default=a}),ux=wf(cx),dx={timeoutInSeconds:60},hx=["login_required","consent_required","interaction_required","account_selection_required","access_denied"],s_={name:"auth0-spa-js",version:"1.22.0"},o_=function(){return Date.now()},xn=function(e){function t(i,n){var r=e.call(this,n)||this;return r.error=i,r.error_description=n,Object.setPrototypeOf(r,t.prototype),r}return Qr(t,e),t.fromPayload=function(i){return new t(i.error,i.error_description)},t}(Error),fx=function(e){function t(i,n,r,s){s===void 0&&(s=null);var o=e.call(this,i,n)||this;return o.state=r,o.appState=s,Object.setPrototypeOf(o,t.prototype),o}return Qr(t,e),t}(xn),ih=function(e){function t(){var i=e.call(this,"timeout","Timeout")||this;return Object.setPrototypeOf(i,t.prototype),i}return Qr(t,e),t}(xn),px=function(e){function t(i){var n=e.call(this)||this;return n.popup=i,Object.setPrototypeOf(n,t.prototype),n}return Qr(t,e),t}(ih),mx=function(e){function t(i){var n=e.call(this,"cancelled","Popup closed")||this;return n.popup=i,Object.setPrototypeOf(n,t.prototype),n}return Qr(t,e),t}(xn),gx=function(e){function t(i,n,r){var s=e.call(this,i,n)||this;return s.mfa_token=r,Object.setPrototypeOf(s,t.prototype),s}return Qr(t,e),t}(xn),vx=function(e){function t(i,n){var r=e.call(this,"missing_refresh_token","Missing Refresh Token (audience: '".concat(bv(i,["default"]),"', scope: '").concat(bv(n),"')"))||this;return r.audience=i,r.scope=n,Object.setPrototypeOf(r,t.prototype),r}return Qr(t,e),t}(xn),yx=function(e){return new Promise(function(t,i){var n,r=setInterval(function(){e.popup&&e.popup.closed&&(clearInterval(r),clearTimeout(s),window.removeEventListener("message",n,!1),i(new mx(e.popup)))},1e3),s=setTimeout(function(){clearInterval(r),i(new px(e.popup)),window.removeEventListener("message",n,!1)},1e3*(e.timeoutInSeconds||60));n=function(o){if(o.data&&o.data.type==="authorization_response"){if(clearTimeout(s),clearInterval(r),window.removeEventListener("message",n,!1),e.popup.close(),o.data.response.error)return i(xn.fromPayload(o.data.response));t(o.data.response)}},window.addEventListener("message",n)})},Gf=function(){return window.crypto||window.msCrypto},a_=function(){var e=Gf();return e.subtle||e.webkitSubtle},mn=function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.",t="";return Array.from(Gf().getRandomValues(new Uint8Array(43))).forEach(function(i){return t+=e[i%e.length]}),t},ms=function(e){return btoa(e)},nh=function(e){return Object.keys(e).filter(function(t){return e[t]!==void 0}).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")},Lu=function(e){return ze(void 0,void 0,void 0,function(){var t;return Je(this,function(i){switch(i.label){case 0:return t=a_().digest({name:"SHA-256"},new TextEncoder().encode(e)),window.msCrypto?[2,new Promise(function(n,r){t.oncomplete=function(s){n(s.target.result)},t.onerror=function(s){r(s.error)},t.onabort=function(){r("The digest operation was aborted")}})]:[4,t];case 1:return[2,i.sent()]}})})},yv=function(e){return function(t){return decodeURIComponent(atob(t).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(e.replace(/_/g,"/").replace(/-/g,"+"))},xu=function(e){var t=new Uint8Array(e);return function(i){var n={"+":"-","/":"_","=":""};return i.replace(/[+/=]/g,function(r){return n[r]})}(window.btoa(String.fromCharCode.apply(String,Ud([],Js(Array.from(t)),!1))))};function bv(e,t){return t===void 0&&(t=[]),e&&!t.includes(e)?e:""}var bx=function(e,t){return ze(void 0,void 0,void 0,function(){var i,n;return Je(this,function(r){switch(r.label){case 0:return[4,(s=e,o=t,o=o||{},new Promise(function(a,l){var c=new XMLHttpRequest,u=[],d=[],h={},m=function(){return{ok:(c.status/100|0)==2,statusText:c.statusText,status:c.status,url:c.responseURL,text:function(){return Promise.resolve(c.responseText)},json:function(){return Promise.resolve(c.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([c.response]))},clone:m,headers:{keys:function(){return u},entries:function(){return d},get:function(y){return h[y.toLowerCase()]},has:function(y){return y.toLowerCase()in h}}}};for(var v in c.open(o.method||"get",s,!0),c.onload=function(){c.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(y,T,S){u.push(T=T.toLowerCase()),d.push([T,S]),h[T]=h[T]?h[T]+","+S:S}),a(m())},c.onerror=l,c.withCredentials=o.credentials=="include",o.headers)c.setRequestHeader(v,o.headers[v]);c.send(o.body||null)}))];case 1:return i=r.sent(),n={ok:i.ok},[4,i.json()];case 2:return[2,(n.json=r.sent(),n)]}var s,o})})},Ex=function(e,t,i){return ze(void 0,void 0,void 0,function(){var n,r;return Je(this,function(s){return n=new AbortController,t.signal=n.signal,[2,Promise.race([bx(e,t),new Promise(function(o,a){r=setTimeout(function(){n.abort(),a(new Error("Timeout when executing 'fetch'"))},i)})]).finally(function(){clearTimeout(r)})]})})},Tx=function(e,t,i,n,r,s,o){return ze(void 0,void 0,void 0,function(){return Je(this,function(a){return[2,(l={auth:{audience:t,scope:i},timeout:r,fetchUrl:e,fetchOptions:n,useFormData:o},c=s,new Promise(function(u,d){var h=new MessageChannel;h.port1.onmessage=function(m){m.data.error?d(new Error(m.data.error)):u(m.data)},c.postMessage(l,[h.port2])}))];var l,c})})},_x=function(e,t,i,n,r,s,o){return o===void 0&&(o=1e4),ze(void 0,void 0,void 0,function(){return Je(this,function(a){return r?[2,Tx(e,t,i,n,o,r,s)]:[2,Ex(e,n,o)]})})};function wx(e,t,i,n,r,s,o){return ze(this,void 0,void 0,function(){var a,l,c,u,d,h,m,v,y;return Je(this,function(T){switch(T.label){case 0:a=null,c=0,T.label=1;case 1:if(!(c<3))return[3,6];T.label=2;case 2:return T.trys.push([2,4,,5]),[4,_x(e,i,n,r,s,o,t)];case 3:return l=T.sent(),a=null,[3,6];case 4:return u=T.sent(),a=u,[3,5];case 5:return c++,[3,1];case 6:if(a)throw a.message=a.message||"Failed to fetch",a;if(d=l.json,h=d.error,m=d.error_description,v=Zt(d,["error","error_description"]),!l.ok)throw y=m||"HTTP error. Unable to fetch ".concat(e),h==="mfa_required"?new gx(h,y,v.mfa_token):new xn(h||"request_error",y);return[2,v]}})})}function rl(e,t){var i=e.baseUrl,n=e.timeout,r=e.audience,s=e.scope,o=e.auth0Client,a=e.useFormData,l=Zt(e,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);return ze(this,void 0,void 0,function(){var c;return Je(this,function(u){switch(u.label){case 0:return c=a?nh(l):JSON.stringify(l),[4,wx("".concat(i,"/oauth/token"),n,r||"default",s,{method:"POST",body:c,headers:{"Content-Type":a?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(o||s_))}},t,a)];case 1:return[2,u.sent()]}})})}var Sx=function(e){return Array.from(new Set(e))},Gn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Sx(e.join(" ").trim().split(/\s+/)).join(" ")},Dr=function(){function e(t,i){i===void 0&&(i="@@auth0spajs@@"),this.prefix=i,this.client_id=t.client_id,this.scope=t.scope,this.audience=t.audience}return e.prototype.toKey=function(){return"".concat(this.prefix,"::").concat(this.client_id,"::").concat(this.audience,"::").concat(this.scope)},e.fromKey=function(t){var i=Js(t.split("::"),4),n=i[0],r=i[1],s=i[2];return new e({client_id:r,scope:i[3],audience:s},n)},e.fromCacheEntry=function(t){return new e({scope:t.scope,audience:t.audience,client_id:t.client_id})},e}(),kx=function(){function e(){}return e.prototype.set=function(t,i){localStorage.setItem(t,JSON.stringify(i))},e.prototype.get=function(t){var i=window.localStorage.getItem(t);if(i)try{return JSON.parse(i)}catch{return}},e.prototype.remove=function(t){localStorage.removeItem(t)},e.prototype.allKeys=function(){return Object.keys(window.localStorage).filter(function(t){return t.startsWith("@@auth0spajs@@")})},e}(),Cx=function(){var e;this.enclosedCache=(e={},{set:function(t,i){e[t]=i},get:function(t){var i=e[t];if(i)return i},remove:function(t){delete e[t]},allKeys:function(){return Object.keys(e)}})},Ax=function(){function e(t,i,n){this.cache=t,this.keyManifest=i,this.nowProvider=n,this.nowProvider=this.nowProvider||o_}return e.prototype.get=function(t,i){var n;return i===void 0&&(i=0),ze(this,void 0,void 0,function(){var r,s,o,a,l;return Je(this,function(c){switch(c.label){case 0:return[4,this.cache.get(t.toKey())];case 1:return(r=c.sent())?[3,4]:[4,this.getCacheKeys()];case 2:return(s=c.sent())?(o=this.matchExistingCacheKey(t,s))?[4,this.cache.get(o)]:[3,4]:[2];case 3:r=c.sent(),c.label=4;case 4:return r?[4,this.nowProvider()]:[2];case 5:return a=c.sent(),l=Math.floor(a/1e3),r.expiresAt-i<l?r.body.refresh_token?(r.body={refresh_token:r.body.refresh_token},[4,this.cache.set(t.toKey(),r)]):[3,7]:[3,10];case 6:return c.sent(),[2,r.body];case 7:return[4,this.cache.remove(t.toKey())];case 8:return c.sent(),[4,(n=this.keyManifest)===null||n===void 0?void 0:n.remove(t.toKey())];case 9:return c.sent(),[2];case 10:return[2,r.body]}})})},e.prototype.set=function(t){var i;return ze(this,void 0,void 0,function(){var n,r;return Je(this,function(s){switch(s.label){case 0:return n=new Dr({client_id:t.client_id,scope:t.scope,audience:t.audience}),[4,this.wrapCacheEntry(t)];case 1:return r=s.sent(),[4,this.cache.set(n.toKey(),r)];case 2:return s.sent(),[4,(i=this.keyManifest)===null||i===void 0?void 0:i.add(n.toKey())];case 3:return s.sent(),[2]}})})},e.prototype.clear=function(t){var i;return ze(this,void 0,void 0,function(){var n,r=this;return Je(this,function(s){switch(s.label){case 0:return[4,this.getCacheKeys()];case 1:return(n=s.sent())?[4,n.filter(function(o){return!t||o.includes(t)}).reduce(function(o,a){return ze(r,void 0,void 0,function(){return Je(this,function(l){switch(l.label){case 0:return[4,o];case 1:return l.sent(),[4,this.cache.remove(a)];case 2:return l.sent(),[2]}})})},Promise.resolve())]:[2];case 2:return s.sent(),[4,(i=this.keyManifest)===null||i===void 0?void 0:i.clear()];case 3:return s.sent(),[2]}})})},e.prototype.clearSync=function(t){var i=this,n=this.cache.allKeys();n&&n.filter(function(r){return!t||r.includes(t)}).forEach(function(r){i.cache.remove(r)})},e.prototype.wrapCacheEntry=function(t){return ze(this,void 0,void 0,function(){var i,n,r;return Je(this,function(s){switch(s.label){case 0:return[4,this.nowProvider()];case 1:return i=s.sent(),n=Math.floor(i/1e3)+t.expires_in,r=Math.min(n,t.decodedToken.claims.exp),[2,{body:t,expiresAt:r}]}})})},e.prototype.getCacheKeys=function(){var t;return ze(this,void 0,void 0,function(){var i;return Je(this,function(n){switch(n.label){case 0:return this.keyManifest?[4,this.keyManifest.get()]:[3,2];case 1:return i=(t=n.sent())===null||t===void 0?void 0:t.keys,[3,4];case 2:return[4,this.cache.allKeys()];case 3:i=n.sent(),n.label=4;case 4:return[2,i]}})})},e.prototype.matchExistingCacheKey=function(t,i){return i.filter(function(n){var r=Dr.fromKey(n),s=new Set(r.scope&&r.scope.split(" ")),o=t.scope.split(" "),a=r.scope&&o.reduce(function(l,c){return l&&s.has(c)},!0);return r.prefix==="@@auth0spajs@@"&&r.client_id===t.client_id&&r.audience===t.audience&&a})[0]},e}(),Rx=function(){function e(t,i){this.storage=t,this.clientId=i,this.storageKey="".concat("a0.spajs.txs",".").concat(this.clientId),this.transaction=this.storage.get(this.storageKey)}return e.prototype.create=function(t){this.transaction=t,this.storage.save(this.storageKey,t,{daysUntilExpire:1})},e.prototype.get=function(){return this.transaction},e.prototype.remove=function(){delete this.transaction,this.storage.remove(this.storageKey)},e}(),Do=function(e){return typeof e=="number"},Px=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],Ix=function(e){if(!e.id_token)throw new Error("ID token is required but missing");var t=function(a){var l=a.split("."),c=Js(l,3),u=c[0],d=c[1],h=c[2];if(l.length!==3||!u||!d||!h)throw new Error("ID token could not be decoded");var m=JSON.parse(yv(d)),v={__raw:a},y={};return Object.keys(m).forEach(function(T){v[T]=m[T],Px.includes(T)||(y[T]=m[T])}),{encoded:{header:u,payload:d,signature:h},header:JSON.parse(yv(u)),claims:v,user:y}}(e.id_token);if(!t.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(t.claims.iss!==e.iss)throw new Error('Issuer (iss) claim mismatch in the ID token; expected "'.concat(e.iss,'", found "').concat(t.claims.iss,'"'));if(!t.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if(t.header.alg!=="RS256")throw new Error('Signature algorithm of "'.concat(t.header.alg,'" is not supported. Expected the ID token to be signed with "RS256".'));if(!t.claims.aud||typeof t.claims.aud!="string"&&!Array.isArray(t.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e.aud))throw new Error('Audience (aud) claim mismatch in the ID token; expected "'.concat(e.aud,'" but was not one of "').concat(t.claims.aud.join(", "),'"'));if(t.claims.aud.length>1){if(!t.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(t.claims.azp!==e.aud)throw new Error('Authorized Party (azp) claim mismatch in the ID token; expected "'.concat(e.aud,'", found "').concat(t.claims.azp,'"'))}}else if(t.claims.aud!==e.aud)throw new Error('Audience (aud) claim mismatch in the ID token; expected "'.concat(e.aud,'" but found "').concat(t.claims.aud,'"'));if(e.nonce){if(!t.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(t.claims.nonce!==e.nonce)throw new Error('Nonce (nonce) claim mismatch in the ID token; expected "'.concat(e.nonce,'", found "').concat(t.claims.nonce,'"'))}if(e.max_age&&!Do(t.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(!Do(t.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!Do(t.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");var i=e.leeway||60,n=new Date(e.now||Date.now()),r=new Date(0),s=new Date(0),o=new Date(0);if(o.setUTCSeconds(parseInt(t.claims.auth_time)+e.max_age+i),r.setUTCSeconds(t.claims.exp+i),s.setUTCSeconds(t.claims.nbf-i),n>r)throw new Error("Expiration Time (exp) claim error in the ID token; current time (".concat(n,") is after expiration time (").concat(r,")"));if(Do(t.claims.nbf)&&n<s)throw new Error("Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Currrent time (".concat(n,") is before ").concat(s));if(Do(t.claims.auth_time)&&n>o)throw new Error("Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Currrent time (".concat(n,") is after last auth at ").concat(o));if(e.organizationId){if(!t.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(e.organizationId!==t.claims.org_id)throw new Error('Organization ID (org_id) claim mismatch in the ID token; expected "'.concat(e.organizationId,'", found "').concat(t.claims.org_id,'"'))}return t},xr=mo(function(e,t){var i=nn&&nn.__assign||function(){return i=Object.assign||function(l){for(var c,u=1,d=arguments.length;u<d;u++)for(var h in c=arguments[u])Object.prototype.hasOwnProperty.call(c,h)&&(l[h]=c[h]);return l},i.apply(this,arguments)};function n(l,c){if(!c)return"";var u="; "+l;return c===!0?u:u+"="+c}function r(l,c,u){return encodeURIComponent(l).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(c).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(d){if(typeof d.expires=="number"){var h=new Date;h.setMilliseconds(h.getMilliseconds()+864e5*d.expires),d.expires=h}return n("Expires",d.expires?d.expires.toUTCString():"")+n("Domain",d.domain)+n("Path",d.path)+n("Secure",d.secure)+n("SameSite",d.sameSite)}(u)}function s(l){for(var c={},u=l?l.split("; "):[],d=/(%[\dA-F]{2})+/gi,h=0;h<u.length;h++){var m=u[h].split("="),v=m.slice(1).join("=");v.charAt(0)==='"'&&(v=v.slice(1,-1));try{c[m[0].replace(d,decodeURIComponent)]=v.replace(d,decodeURIComponent)}catch{}}return c}function o(){return s(document.cookie)}function a(l,c,u){document.cookie=r(l,c,i({path:"/"},u))}t.__esModule=!0,t.encode=r,t.parse=s,t.getAll=o,t.get=function(l){return o()[l]},t.set=a,t.remove=function(l,c){a(l,"",i(i({},c),{expires:-1}))}});wf(xr),xr.encode,xr.parse,xr.getAll;var Ox=xr.get,l_=xr.set,Dx=xr.remove,_s={get:function(e){var t=Ox(e);if(t!==void 0)return JSON.parse(t)},save:function(e,t,i){var n={};window.location.protocol==="https:"&&(n={secure:!0,sameSite:"none"}),i!=null&&i.daysUntilExpire&&(n.expires=i.daysUntilExpire),i!=null&&i.cookieDomain&&(n.domain=i.cookieDomain),l_(e,JSON.stringify(t),n)},remove:function(e){Dx(e)}},Nx={get:function(e){var t=_s.get(e);return t||_s.get("".concat("_legacy_").concat(e))},save:function(e,t,i){var n={};window.location.protocol==="https:"&&(n={secure:!0}),i!=null&&i.daysUntilExpire&&(n.expires=i.daysUntilExpire),l_("".concat("_legacy_").concat(e),JSON.stringify(t),n),_s.save(e,t,i)},remove:function(e){_s.remove(e),_s.remove("".concat("_legacy_").concat(e))}},Lx={get:function(e){if(typeof sessionStorage<"u"){var t=sessionStorage.getItem(e);if(t!==void 0)return JSON.parse(t)}},save:function(e,t){sessionStorage.setItem(e,JSON.stringify(t))},remove:function(e){sessionStorage.removeItem(e)}};function xx(e,t,i){var n=t===void 0?null:t,r=function(l,c){var u=atob(l);if(c){for(var d=new Uint8Array(u.length),h=0,m=u.length;h<m;++h)d[h]=u.charCodeAt(h);return String.fromCharCode.apply(null,new Uint16Array(d.buffer))}return u}(e,i!==void 0&&i),s=r.indexOf(`
`,10)+1,o=r.substring(s)+(n?"//# sourceMappingURL="+n:""),a=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(a)}var Ev,Tv,_v,Mu,Mx=(Ev="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Ci8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uCgogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55CiAgICBwdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuCgogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgKICAgIFJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQogICAgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULAogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NCiAgICBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUgogICAgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUgogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4KICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovdmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gdD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSl9LHQoZSxyKX07ZnVuY3Rpb24gZShlLHIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiByJiZudWxsIT09cil0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHIpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX12YXIgcj1mdW5jdGlvbigpe3JldHVybiByPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxyPTEsbj1hcmd1bWVudHMubGVuZ3RoO3I8bjtyKyspZm9yKHZhciBvIGluIGU9YXJndW1lbnRzW3JdKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG8pJiYodFtvXT1lW29dKTtyZXR1cm4gdH0sci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIG4odCxlLHIsbil7cmV0dXJuIG5ldyhyfHwocj1Qcm9taXNlKSkoKGZ1bmN0aW9uKG8sYyl7ZnVuY3Rpb24gaSh0KXt0cnl7cyhuLm5leHQodCkpfWNhdGNoKHQpe2ModCl9fWZ1bmN0aW9uIGEodCl7dHJ5e3Mobi50aHJvdyh0KSl9Y2F0Y2godCl7Yyh0KX19ZnVuY3Rpb24gcyh0KXt2YXIgZTt0LmRvbmU/byh0LnZhbHVlKTooZT10LnZhbHVlLGUgaW5zdGFuY2VvZiByP2U6bmV3IHIoKGZ1bmN0aW9uKHQpe3QoZSl9KSkpLnRoZW4oaSxhKX1zKChuPW4uYXBwbHkodCxlfHxbXSkpLm5leHQoKSl9KSl9ZnVuY3Rpb24gbyh0LGUpe3ZhciByLG4sbyxjLGk9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmb1swXSl0aHJvdyBvWzFdO3JldHVybiBvWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIGM9e25leHQ6YSgwKSx0aHJvdzphKDEpLHJldHVybjphKDIpfSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYoY1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxjO2Z1bmN0aW9uIGEoYyl7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjKXtpZihyKXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO2k7KXRyeXtpZihyPTEsbiYmKG89MiZjWzBdP24ucmV0dXJuOmNbMF0/bi50aHJvd3x8KChvPW4ucmV0dXJuKSYmby5jYWxsKG4pLDApOm4ubmV4dCkmJiEobz1vLmNhbGwobixjWzFdKSkuZG9uZSlyZXR1cm4gbztzd2l0Y2gobj0wLG8mJihjPVsyJmNbMF0sby52YWx1ZV0pLGNbMF0pe2Nhc2UgMDpjYXNlIDE6bz1jO2JyZWFrO2Nhc2UgNDpyZXR1cm4gaS5sYWJlbCsrLHt2YWx1ZTpjWzFdLGRvbmU6ITF9O2Nhc2UgNTppLmxhYmVsKyssbj1jWzFdLGM9WzBdO2NvbnRpbnVlO2Nhc2UgNzpjPWkub3BzLnBvcCgpLGkudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEobz1pLnRyeXMsKG89by5sZW5ndGg+MCYmb1tvLmxlbmd0aC0xXSl8fDYhPT1jWzBdJiYyIT09Y1swXSkpe2k9MDtjb250aW51ZX1pZigzPT09Y1swXSYmKCFvfHxjWzFdPm9bMF0mJmNbMV08b1szXSkpe2kubGFiZWw9Y1sxXTticmVha31pZig2PT09Y1swXSYmaS5sYWJlbDxvWzFdKXtpLmxhYmVsPW9bMV0sbz1jO2JyZWFrfWlmKG8mJmkubGFiZWw8b1syXSl7aS5sYWJlbD1vWzJdLGkub3BzLnB1c2goYyk7YnJlYWt9b1syXSYmaS5vcHMucG9wKCksaS50cnlzLnBvcCgpO2NvbnRpbnVlfWM9ZS5jYWxsKHQsaSl9Y2F0Y2godCl7Yz1bNix0XSxuPTB9ZmluYWxseXtyPW89MH1pZig1JmNbMF0pdGhyb3cgY1sxXTtyZXR1cm57dmFsdWU6Y1swXT9jWzFdOnZvaWQgMCxkb25lOiEwfX0oW2MsYV0pfX19ZnVuY3Rpb24gYyh0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT1bXSksdCYmIWUuaW5jbHVkZXModCk/dDoiIn12YXIgaT1mdW5jdGlvbih0KXtmdW5jdGlvbiByKGUsbil7dmFyIG89dC5jYWxsKHRoaXMsbil8fHRoaXM7cmV0dXJuIG8uZXJyb3I9ZSxvLmVycm9yX2Rlc2NyaXB0aW9uPW4sT2JqZWN0LnNldFByb3RvdHlwZU9mKG8sci5wcm90b3R5cGUpLG99cmV0dXJuIGUocix0KSxyLmZyb21QYXlsb2FkPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcih0LmVycm9yLHQuZXJyb3JfZGVzY3JpcHRpb24pfSxyfShFcnJvcik7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIoZSxuLG8sYyl7dm9pZCAwPT09YyYmKGM9bnVsbCk7dmFyIGk9dC5jYWxsKHRoaXMsZSxuKXx8dGhpcztyZXR1cm4gaS5zdGF0ZT1vLGkuYXBwU3RhdGU9YyxPYmplY3Quc2V0UHJvdG90eXBlT2YoaSxyLnByb3RvdHlwZSksaX1lKHIsdCl9KGkpLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIoZSl7dmFyIG49dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLnBvcHVwPWUsT2JqZWN0LnNldFByb3RvdHlwZU9mKG4sci5wcm90b3R5cGUpLG59ZShyLHQpfShmdW5jdGlvbih0KXtmdW5jdGlvbiByKCl7dmFyIGU9dC5jYWxsKHRoaXMsInRpbWVvdXQiLCJUaW1lb3V0Iil8fHRoaXM7cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZihlLHIucHJvdG90eXBlKSxlfXJldHVybiBlKHIsdCkscn0oaSkpLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIoZSl7dmFyIG49dC5jYWxsKHRoaXMsImNhbmNlbGxlZCIsIlBvcHVwIGNsb3NlZCIpfHx0aGlzO3JldHVybiBuLnBvcHVwPWUsT2JqZWN0LnNldFByb3RvdHlwZU9mKG4sci5wcm90b3R5cGUpLG59ZShyLHQpfShpKSxmdW5jdGlvbih0KXtmdW5jdGlvbiByKGUsbixvKXt2YXIgYz10LmNhbGwodGhpcyxlLG4pfHx0aGlzO3JldHVybiBjLm1mYV90b2tlbj1vLE9iamVjdC5zZXRQcm90b3R5cGVPZihjLHIucHJvdG90eXBlKSxjfWUocix0KX0oaSk7dmFyIGE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gcihlLG4pe3ZhciBvPXQuY2FsbCh0aGlzLCJtaXNzaW5nX3JlZnJlc2hfdG9rZW4iLCJNaXNzaW5nIFJlZnJlc2ggVG9rZW4gKGF1ZGllbmNlOiAnIi5jb25jYXQoYyhlLFsiZGVmYXVsdCJdKSwiJywgc2NvcGU6ICciKS5jb25jYXQoYyhuKSwiJykiKSl8fHRoaXM7cmV0dXJuIG8uYXVkaWVuY2U9ZSxvLnNjb3BlPW4sT2JqZWN0LnNldFByb3RvdHlwZU9mKG8sci5wcm90b3R5cGUpLG99cmV0dXJuIGUocix0KSxyfShpKSxzPXt9LHU9ZnVuY3Rpb24odCxlKXtyZXR1cm4iIi5jb25jYXQodCwifCIpLmNvbmNhdChlKX07YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGZ1bmN0aW9uKHQpe3ZhciBlPXQuZGF0YSxjPWUudGltZW91dCxpPWUuYXV0aCxmPWUuZmV0Y2hVcmwsbD1lLmZldGNoT3B0aW9ucyxwPWUudXNlRm9ybURhdGEsaD1mdW5jdGlvbih0LGUpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJnRbU3ltYm9sLml0ZXJhdG9yXTtpZighcilyZXR1cm4gdDt2YXIgbixvLGM9ci5jYWxsKHQpLGk9W107dHJ5e2Zvcig7KHZvaWQgMD09PWV8fGUtLSA+MCkmJiEobj1jLm5leHQoKSkuZG9uZTspaS5wdXNoKG4udmFsdWUpfWNhdGNoKHQpe289e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e24mJiFuLmRvbmUmJihyPWMucmV0dXJuKSYmci5jYWxsKGMpfWZpbmFsbHl7aWYobyl0aHJvdyBvLmVycm9yfX1yZXR1cm4gaX0odC5wb3J0cywxKVswXTtyZXR1cm4gbih2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxlLG4seSx2LGIsZCx3LE8sXztyZXR1cm4gbyh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOm49KGU9aXx8e30pLmF1ZGllbmNlLHk9ZS5zY29wZSxvLmxhYmVsPTE7Y2FzZSAxOmlmKG8udHJ5cy5wdXNoKFsxLDcsLDhdKSwhKHY9cD8obT1sLmJvZHksaz1uZXcgVVJMU2VhcmNoUGFyYW1zKG0pLFA9e30say5mb3JFYWNoKChmdW5jdGlvbih0LGUpe1BbZV09dH0pKSxQKTpKU09OLnBhcnNlKGwuYm9keSkpLnJlZnJlc2hfdG9rZW4mJiJyZWZyZXNoX3Rva2VuIj09PXYuZ3JhbnRfdHlwZSl7aWYoYj1mdW5jdGlvbih0LGUpe3JldHVybiBzW3UodCxlKV19KG4seSksIWIpdGhyb3cgbmV3IGEobix5KTtsLmJvZHk9cD9uZXcgVVJMU2VhcmNoUGFyYW1zKHIocih7fSx2KSx7cmVmcmVzaF90b2tlbjpifSkpLnRvU3RyaW5nKCk6SlNPTi5zdHJpbmdpZnkocihyKHt9LHYpLHtyZWZyZXNoX3Rva2VuOmJ9KSl9ZD12b2lkIDAsImZ1bmN0aW9uIj09dHlwZW9mIEFib3J0Q29udHJvbGxlciYmKGQ9bmV3IEFib3J0Q29udHJvbGxlcixsLnNpZ25hbD1kLnNpZ25hbCksdz12b2lkIDAsby5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gby50cnlzLnB1c2goWzIsNCwsNV0pLFs0LFByb21pc2UucmFjZShbKGc9YyxuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCl7cmV0dXJuIHNldFRpbWVvdXQodCxnKX0pKSksZmV0Y2goZixyKHt9LGwpKV0pXTtjYXNlIDM6cmV0dXJuIHc9by5zZW50KCksWzMsNV07Y2FzZSA0OnJldHVybiBPPW8uc2VudCgpLGgucG9zdE1lc3NhZ2Uoe2Vycm9yOk8ubWVzc2FnZX0pLFsyXTtjYXNlIDU6cmV0dXJuIHc/WzQsdy5qc29uKCldOihkJiZkLmFib3J0KCksaC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KSxbMl0pO2Nhc2UgNjpyZXR1cm4odD1vLnNlbnQoKSkucmVmcmVzaF90b2tlbj8oZnVuY3Rpb24odCxlLHIpe3NbdShlLHIpXT10fSh0LnJlZnJlc2hfdG9rZW4sbix5KSxkZWxldGUgdC5yZWZyZXNoX3Rva2VuKTpmdW5jdGlvbih0LGUpe2RlbGV0ZSBzW3UodCxlKV19KG4seSksaC5wb3N0TWVzc2FnZSh7b2s6dy5vayxqc29uOnR9KSxbMyw4XTtjYXNlIDc6cmV0dXJuIF89by5zZW50KCksaC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3JfZGVzY3JpcHRpb246Xy5tZXNzYWdlfX0pLFszLDhdO2Nhc2UgODpyZXR1cm5bMl19dmFyIGcsbSxrLFB9KSl9KSl9KSl9KCk7Cgo=",Tv=null,_v=!1,function(e){return Mu=Mu||xx(Ev,Tv,_v),new Worker(Mu,e)}),$u={},$x=function(){function e(t,i){this.cache=t,this.clientId=i,this.manifestKey=this.createManifestKeyFrom(this.clientId)}return e.prototype.add=function(t){var i;return ze(this,void 0,void 0,function(){var n,r;return Je(this,function(s){switch(s.label){case 0:return r=Set.bind,[4,this.cache.get(this.manifestKey)];case 1:return(n=new(r.apply(Set,[void 0,((i=s.sent())===null||i===void 0?void 0:i.keys)||[]]))).add(t),[4,this.cache.set(this.manifestKey,{keys:Ud([],Js(n),!1)})];case 2:return s.sent(),[2]}})})},e.prototype.remove=function(t){return ze(this,void 0,void 0,function(){var i,n;return Je(this,function(r){switch(r.label){case 0:return[4,this.cache.get(this.manifestKey)];case 1:return(i=r.sent())?((n=new Set(i.keys)).delete(t),n.size>0?[4,this.cache.set(this.manifestKey,{keys:Ud([],Js(n),!1)})]:[3,3]):[3,5];case 2:case 4:return[2,r.sent()];case 3:return[4,this.cache.remove(this.manifestKey)];case 5:return[2]}})})},e.prototype.get=function(){return this.cache.get(this.manifestKey)},e.prototype.clear=function(){return this.cache.remove(this.manifestKey)},e.prototype.createManifestKeyFrom=function(t){return"".concat("@@auth0spajs@@","::").concat(t)},e}(),wv=new ux,Ux={memory:function(){return new Cx().enclosedCache},localstorage:function(){return new kx}},Sv=function(e){return Ux[e]},Bx=function(){return!/Trident.*rv:11\.0/.test(navigator.userAgent)},Fx=function(){function e(t){var i,n,r,s;if(this.options=t,typeof window<"u"&&function(){if(!Gf())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(a_()===void 0)throw new Error(`
      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/master/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.
    `)}(),t.cache&&t.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),t.cache)r=t.cache;else{if(this.cacheLocation=t.cacheLocation||"memory",!Sv(this.cacheLocation))throw new Error('Invalid cache location "'.concat(this.cacheLocation,'"'));r=Sv(this.cacheLocation)()}this.httpTimeoutMs=t.httpTimeoutInSeconds?1e3*t.httpTimeoutInSeconds:1e4,this.cookieStorage=t.legacySameSiteCookie===!1?_s:Nx,this.orgHintCookieName=(s=this.options.client_id,"auth0.".concat(s,".organization_hint")),this.isAuthenticatedCookieName=function(l){return"auth0.".concat(l,".is.authenticated")}(this.options.client_id),this.sessionCheckExpiryDays=t.sessionCheckExpiryDays||1;var o,a=t.useCookiesForTransactions?this.cookieStorage:Lx;this.scope=this.options.scope,this.transactionManager=new Rx(a,this.options.client_id),this.nowProvider=this.options.nowProvider||o_,this.cacheManager=new Ax(r,r.allKeys?null:new $x(r,this.options.client_id),this.nowProvider),this.domainUrl=(o=this.options.domain,/^https?:\/\//.test(o)?o:"https://".concat(o)),this.tokenIssuer=function(l,c){return l?l.startsWith("https://")?l:"https://".concat(l,"/"):"".concat(c,"/")}(this.options.issuer,this.domainUrl),this.defaultScope=Gn("openid",((n=(i=this.options)===null||i===void 0?void 0:i.advancedOptions)===null||n===void 0?void 0:n.defaultScope)!==void 0?this.options.advancedOptions.defaultScope:"openid profile email"),this.options.useRefreshTokens&&(this.scope=Gn(this.scope,"offline_access")),typeof window<"u"&&window.Worker&&this.options.useRefreshTokens&&this.cacheLocation==="memory"&&Bx()&&(this.worker=new Mx),this.customOptions=function(l){return l.advancedOptions,l.audience,l.auth0Client,l.authorizeTimeoutInSeconds,l.cacheLocation,l.client_id,l.domain,l.issuer,l.leeway,l.max_age,l.redirect_uri,l.scope,l.useRefreshTokens,l.useCookiesForTransactions,l.useFormData,Zt(l,["advancedOptions","audience","auth0Client","authorizeTimeoutInSeconds","cacheLocation","client_id","domain","issuer","leeway","max_age","redirect_uri","scope","useRefreshTokens","useCookiesForTransactions","useFormData"])}(t),this.useRefreshTokensFallback=this.options.useRefreshTokensFallback!==!1}return e.prototype._url=function(t){var i=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||s_)));return"".concat(this.domainUrl).concat(t,"&auth0Client=").concat(i)},e.prototype._getParams=function(t,i,n,r,s){var o=this.options;o.useRefreshTokens,o.useCookiesForTransactions,o.useFormData,o.auth0Client,o.cacheLocation,o.advancedOptions,o.detailedResponse,o.nowProvider,o.authorizeTimeoutInSeconds,o.legacySameSiteCookie,o.sessionCheckExpiryDays,o.domain,o.leeway,o.httpTimeoutInSeconds;var a=Zt(o,["useRefreshTokens","useCookiesForTransactions","useFormData","auth0Client","cacheLocation","advancedOptions","detailedResponse","nowProvider","authorizeTimeoutInSeconds","legacySameSiteCookie","sessionCheckExpiryDays","domain","leeway","httpTimeoutInSeconds"]);return Me(Me(Me({},a),t),{scope:Gn(this.defaultScope,this.scope,t.scope),response_type:"code",response_mode:"query",state:i,nonce:n,redirect_uri:s||this.options.redirect_uri,code_challenge:r,code_challenge_method:"S256"})},e.prototype._authorizeUrl=function(t){return this._url("/authorize?".concat(nh(t)))},e.prototype._verifyIdToken=function(t,i,n){return ze(this,void 0,void 0,function(){var r;return Je(this,function(s){switch(s.label){case 0:return[4,this.nowProvider()];case 1:return r=s.sent(),[2,Ix({iss:this.tokenIssuer,aud:this.options.client_id,id_token:t,nonce:i,organizationId:n,leeway:this.options.leeway,max_age:this._parseNumber(this.options.max_age),now:r})]}})})},e.prototype._parseNumber=function(t){return typeof t!="string"?t:parseInt(t,10)||void 0},e.prototype._processOrgIdHint=function(t){t?this.cookieStorage.save(this.orgHintCookieName,t,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName)},e.prototype.buildAuthorizeUrl=function(t){return t===void 0&&(t={}),ze(this,void 0,void 0,function(){var i,n,r,s,o,a,l,c,u,d,h,m;return Je(this,function(v){switch(v.label){case 0:return i=t.redirect_uri,n=t.appState,r=Zt(t,["redirect_uri","appState"]),s=ms(mn()),o=ms(mn()),a=mn(),[4,Lu(a)];case 1:return l=v.sent(),c=xu(l),u=t.fragment?"#".concat(t.fragment):"",d=this._getParams(r,s,o,c,i),h=this._authorizeUrl(d),m=t.organization||this.options.organization,this.transactionManager.create(Me({nonce:o,code_verifier:a,appState:n,scope:d.scope,audience:d.audience||"default",redirect_uri:d.redirect_uri,state:s},m&&{organizationId:m})),[2,h+u]}})})},e.prototype.loginWithPopup=function(t,i){return ze(this,void 0,void 0,function(){var n,r,s,o,a,l,c,u,d,h,m,v,y;return Je(this,function(T){switch(T.label){case 0:if(t=t||{},!(i=i||{}).popup&&(i.popup=function(S){var R=window.screenX+(window.innerWidth-400)/2,O=window.screenY+(window.innerHeight-600)/2;return window.open(S,"auth0:authorize:popup","left=".concat(R,",top=").concat(O,",width=").concat(400,",height=").concat(600,",resizable,scrollbars=yes,status=1"))}(""),!i.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");return n=Zt(t,[]),r=ms(mn()),s=ms(mn()),o=mn(),[4,Lu(o)];case 1:return a=T.sent(),l=xu(a),c=this._getParams(n,r,s,l,this.options.redirect_uri||window.location.origin),u=this._authorizeUrl(Me(Me({},c),{response_mode:"web_message"})),i.popup.location.href=u,[4,yx(Me(Me({},i),{timeoutInSeconds:i.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}))];case 2:if(d=T.sent(),r!==d.state)throw new Error("Invalid state");return[4,rl({audience:c.audience,scope:c.scope,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:o,code:d.code,grant_type:"authorization_code",redirect_uri:c.redirect_uri,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},this.worker)];case 3:return h=T.sent(),m=t.organization||this.options.organization,[4,this._verifyIdToken(h.id_token,s,m)];case 4:return v=T.sent(),y=Me(Me({},h),{decodedToken:v,scope:c.scope,audience:c.audience||"default",client_id:this.options.client_id}),[4,this.cacheManager.set(y)];case 5:return T.sent(),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgIdHint(v.claims.org_id),[2]}})})},e.prototype.getUser=function(t){return t===void 0&&(t={}),ze(this,void 0,void 0,function(){var i,n,r;return Je(this,function(s){switch(s.label){case 0:return i=t.audience||this.options.audience||"default",n=Gn(this.defaultScope,this.scope,t.scope),[4,this.cacheManager.get(new Dr({client_id:this.options.client_id,audience:i,scope:n}))];case 1:return[2,(r=s.sent())&&r.decodedToken&&r.decodedToken.user]}})})},e.prototype.getIdTokenClaims=function(t){return t===void 0&&(t={}),ze(this,void 0,void 0,function(){var i,n,r;return Je(this,function(s){switch(s.label){case 0:return i=t.audience||this.options.audience||"default",n=Gn(this.defaultScope,this.scope,t.scope),[4,this.cacheManager.get(new Dr({client_id:this.options.client_id,audience:i,scope:n}))];case 1:return[2,(r=s.sent())&&r.decodedToken&&r.decodedToken.claims]}})})},e.prototype.loginWithRedirect=function(t){return t===void 0&&(t={}),ze(this,void 0,void 0,function(){var i,n,r;return Je(this,function(s){switch(s.label){case 0:return i=t.redirectMethod,n=Zt(t,["redirectMethod"]),[4,this.buildAuthorizeUrl(n)];case 1:return r=s.sent(),window.location[i||"assign"](r),[2]}})})},e.prototype.handleRedirectCallback=function(t){return t===void 0&&(t=window.location.href),ze(this,void 0,void 0,function(){var i,n,r,s,o,a,l,c,u,d;return Je(this,function(h){switch(h.label){case 0:if((i=t.split("?").slice(1)).length===0)throw new Error("There are no query params available for parsing.");if(n=function(m){m.indexOf("#")>-1&&(m=m.substr(0,m.indexOf("#")));var v=m.split("&"),y={};return v.forEach(function(T){var S=Js(T.split("="),2),R=S[0],O=S[1];y[R]=decodeURIComponent(O)}),y.expires_in&&(y.expires_in=parseInt(y.expires_in)),y}(i.join("")),r=n.state,s=n.code,o=n.error,a=n.error_description,!(l=this.transactionManager.get()))throw new Error("Invalid state");if(this.transactionManager.remove(),o)throw new fx(o,a,r,l.appState);if(!l.code_verifier||l.state&&l.state!==r)throw new Error("Invalid state");return c={audience:l.audience,scope:l.scope,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:l.code_verifier,grant_type:"authorization_code",code:s,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},l.redirect_uri!==void 0&&(c.redirect_uri=l.redirect_uri),[4,rl(c,this.worker)];case 1:return u=h.sent(),[4,this._verifyIdToken(u.id_token,l.nonce,l.organizationId)];case 2:return d=h.sent(),[4,this.cacheManager.set(Me(Me(Me(Me({},u),{decodedToken:d,audience:l.audience,scope:l.scope}),u.scope?{oauthTokenScope:u.scope}:null),{client_id:this.options.client_id}))];case 3:return h.sent(),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgIdHint(d.claims.org_id),[2,{appState:l.appState}]}})})},e.prototype.checkSession=function(t){return ze(this,void 0,void 0,function(){var i;return Je(this,function(n){switch(n.label){case 0:if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return[2];this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.getTokenSilently(t)];case 2:return n.sent(),[3,4];case 3:if(i=n.sent(),!hx.includes(i.error))throw i;return[3,4];case 4:return[2]}})})},e.prototype.getTokenSilently=function(t){return t===void 0&&(t={}),ze(this,void 0,void 0,function(){var i,n,r,s=this;return Je(this,function(o){return i=Me(Me({audience:this.options.audience,ignoreCache:!1},t),{scope:Gn(this.defaultScope,this.scope,t.scope)}),n=i.ignoreCache,r=Zt(i,["ignoreCache"]),[2,(a=function(){return s._getTokenSilently(Me({ignoreCache:n},r))},l="".concat(this.options.client_id,"::").concat(r.audience,"::").concat(r.scope),c=$u[l],c||(c=a().finally(function(){delete $u[l],c=null}),$u[l]=c),c)];var a,l,c})})},e.prototype._getTokenSilently=function(t){return t===void 0&&(t={}),ze(this,void 0,void 0,function(){var i,n,r,s,o,a,l,c,u;return Je(this,function(d){switch(d.label){case 0:return i=t.ignoreCache,n=Zt(t,["ignoreCache"]),i?[3,2]:[4,this._getEntryFromCache({scope:n.scope,audience:n.audience||"default",client_id:this.options.client_id,getDetailedEntry:t.detailedResponse})];case 1:if(r=d.sent())return[2,r];d.label=2;case 2:return[4,(h=function(){return wv.acquireLock("auth0.lock.getTokenSilently",5e3)},m=10,m===void 0&&(m=3),ze(void 0,void 0,void 0,function(){var v;return Je(this,function(y){switch(y.label){case 0:v=0,y.label=1;case 1:return v<m?[4,h()]:[3,4];case 2:if(y.sent())return[2,!0];y.label=3;case 3:return v++,[3,1];case 4:return[2,!1]}})}))];case 3:if(!d.sent())return[3,15];d.label=4;case 4:return d.trys.push([4,,12,14]),i?[3,6]:[4,this._getEntryFromCache({scope:n.scope,audience:n.audience||"default",client_id:this.options.client_id,getDetailedEntry:t.detailedResponse})];case 5:if(r=d.sent())return[2,r];d.label=6;case 6:return this.options.useRefreshTokens?[4,this._getTokenUsingRefreshToken(n)]:[3,8];case 7:return o=d.sent(),[3,10];case 8:return[4,this._getTokenFromIFrame(n)];case 9:o=d.sent(),d.label=10;case 10:return s=o,[4,this.cacheManager.set(Me({client_id:this.options.client_id},s))];case 11:return d.sent(),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),t.detailedResponse?(a=s.id_token,l=s.access_token,c=s.oauthTokenScope,u=s.expires_in,[2,Me(Me({id_token:a,access_token:l},c?{scope:c}:null),{expires_in:u})]):[2,s.access_token];case 12:return[4,wv.releaseLock("auth0.lock.getTokenSilently")];case 13:return d.sent(),[7];case 14:return[3,16];case 15:throw new ih;case 16:return[2]}var h,m})})},e.prototype.getTokenWithPopup=function(t,i){return t===void 0&&(t={}),i===void 0&&(i={}),ze(this,void 0,void 0,function(){return Je(this,function(n){switch(n.label){case 0:return t.audience=t.audience||this.options.audience,t.scope=Gn(this.defaultScope,this.scope,t.scope),i=Me(Me({},dx),i),[4,this.loginWithPopup(t,i)];case 1:return n.sent(),[4,this.cacheManager.get(new Dr({scope:t.scope,audience:t.audience||"default",client_id:this.options.client_id}))];case 2:return[2,n.sent().access_token]}})})},e.prototype.isAuthenticated=function(){return ze(this,void 0,void 0,function(){return Je(this,function(t){switch(t.label){case 0:return[4,this.getUser()];case 1:return[2,!!t.sent()]}})})},e.prototype.buildLogoutUrl=function(t){t===void 0&&(t={}),t.client_id!==null?t.client_id=t.client_id||this.options.client_id:delete t.client_id;var i=t.federated,n=Zt(t,["federated"]),r=i?"&federated":"";return this._url("/v2/logout?".concat(nh(n)))+r},e.prototype.logout=function(t){var i=this;t===void 0&&(t={});var n=t.localOnly,r=Zt(t,["localOnly"]);if(n&&r.federated)throw new Error("It is invalid to set both the `federated` and `localOnly` options to `true`");var s=function(){if(i.cookieStorage.remove(i.orgHintCookieName),i.cookieStorage.remove(i.isAuthenticatedCookieName),!n){var o=i.buildLogoutUrl(r);window.location.assign(o)}};if(this.options.cache)return this.cacheManager.clear().then(function(){return s()});this.cacheManager.clearSync(),s()},e.prototype._getTokenFromIFrame=function(t){return ze(this,void 0,void 0,function(){var i,n,r,s,o,a,l,c,u,d,h,m,v,y,T,S,R;return Je(this,function(O){switch(O.label){case 0:return i=ms(mn()),n=ms(mn()),r=mn(),[4,Lu(r)];case 1:s=O.sent(),o=xu(s),a=Zt(t,["detailedResponse"]),l=this._getParams(a,i,n,o,t.redirect_uri||this.options.redirect_uri||window.location.origin),(c=this.cookieStorage.get(this.orgHintCookieName))&&!l.organization&&(l.organization=c),u=this._authorizeUrl(Me(Me({},l),{prompt:"none",response_mode:"web_message"})),O.label=2;case 2:if(O.trys.push([2,6,,7]),window.crossOriginIsolated)throw new xn("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");return d=t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,[4,(x=u,B=this.domainUrl,ie=d,ie===void 0&&(ie=60),new Promise(function(ee,de){var se=window.document.createElement("iframe");se.setAttribute("width","0"),se.setAttribute("height","0"),se.style.display="none";var ye,Ae=function(){window.document.body.contains(se)&&(window.document.body.removeChild(se),window.removeEventListener("message",ye,!1))},ke=setTimeout(function(){de(new ih),Ae()},1e3*ie);ye=function(_e){if(_e.origin==B&&_e.data&&_e.data.type==="authorization_response"){var Ie=_e.source;Ie&&Ie.close(),_e.data.response.error?de(xn.fromPayload(_e.data.response)):ee(_e.data.response),clearTimeout(ke),window.removeEventListener("message",ye,!1),setTimeout(Ae,2e3)}},window.addEventListener("message",ye,!1),window.document.body.appendChild(se),se.setAttribute("src",x)}))];case 3:if(h=O.sent(),i!==h.state)throw new Error("Invalid state");return m=t.scope,v=t.audience,y=Zt(t,["scope","audience","redirect_uri","ignoreCache","timeoutInSeconds","detailedResponse"]),[4,rl(Me(Me(Me({},this.customOptions),y),{scope:m,audience:v,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:r,code:h.code,grant_type:"authorization_code",redirect_uri:l.redirect_uri,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:y.timeout||this.httpTimeoutMs}),this.worker)];case 4:return T=O.sent(),[4,this._verifyIdToken(T.id_token,n)];case 5:return S=O.sent(),this._processOrgIdHint(S.claims.org_id),[2,Me(Me({},T),{decodedToken:S,scope:l.scope,oauthTokenScope:T.scope,audience:l.audience||"default"})];case 6:throw(R=O.sent()).error==="login_required"&&this.logout({localOnly:!0}),R;case 7:return[2]}var x,B,ie})})},e.prototype._getTokenUsingRefreshToken=function(t){return ze(this,void 0,void 0,function(){var i,n,r,s,o,a,l,c,u;return Je(this,function(d){switch(d.label){case 0:return t.scope=Gn(this.defaultScope,this.options.scope,t.scope),[4,this.cacheManager.get(new Dr({scope:t.scope,audience:t.audience||"default",client_id:this.options.client_id}))];case 1:return(i=d.sent())&&i.refresh_token||this.worker?[3,4]:this.useRefreshTokensFallback?[4,this._getTokenFromIFrame(t)]:[3,3];case 2:return[2,d.sent()];case 3:throw new vx(t.audience||"default",t.scope);case 4:n=t.redirect_uri||this.options.redirect_uri||window.location.origin,s=t.scope,o=t.audience,a=Zt(t,["scope","audience","ignoreCache","timeoutInSeconds","detailedResponse"]),l=typeof t.timeoutInSeconds=="number"?1e3*t.timeoutInSeconds:null,d.label=5;case 5:return d.trys.push([5,7,,10]),[4,rl(Me(Me(Me(Me(Me({},this.customOptions),a),{audience:o,scope:s,baseUrl:this.domainUrl,client_id:this.options.client_id,grant_type:"refresh_token",refresh_token:i&&i.refresh_token,redirect_uri:n}),l&&{timeout:l}),{auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs}),this.worker)];case 6:return r=d.sent(),[3,10];case 7:return((c=d.sent()).message.indexOf("Missing Refresh Token")>-1||c.message&&c.message.indexOf("invalid refresh token")>-1)&&this.useRefreshTokensFallback?[4,this._getTokenFromIFrame(t)]:[3,9];case 8:return[2,d.sent()];case 9:throw c;case 10:return[4,this._verifyIdToken(r.id_token)];case 11:return u=d.sent(),[2,Me(Me({},r),{decodedToken:u,scope:t.scope,oauthTokenScope:r.scope,audience:t.audience||"default"})]}})})},e.prototype._getEntryFromCache=function(t){var i=t.scope,n=t.audience,r=t.client_id,s=t.getDetailedEntry,o=s!==void 0&&s;return ze(this,void 0,void 0,function(){var a,l,c,u,d;return Je(this,function(h){switch(h.label){case 0:return[4,this.cacheManager.get(new Dr({scope:i,audience:n,client_id:r}),60)];case 1:return(a=h.sent())&&a.access_token?o?(l=a.id_token,c=a.access_token,u=a.oauthTokenScope,d=a.expires_in,[2,Me(Me({id_token:l,access_token:c},u?{scope:u}:null),{expires_in:d})]):[2,a.access_token]:[2]}})})},e}();function jx(e){return ze(this,void 0,void 0,function(){var t;return Je(this,function(i){switch(i.label){case 0:return[4,(t=new Fx(e)).checkSession()];case 1:return i.sent(),[2,t]}})})}class Vx{constructor(){this._listeners={}}on(t,i,n=null){typeof i=="function"&&(this._listeners[t]=this._listeners[t]||[],i.ctx=n,this._listeners[t].push(i))}off(t,i){this._listeners[t]=this._listeners[t]||[];const n=this._listeners[t].indexOf(i);n!==-1&&this._listeners[t].splice(n,1)}emit(t,i){this._listeners[t]=this._listeners[t]||[];let n=this._listeners[t].length;for(let r=0;r<n;r++){let s=this._listeners[t][r];s.ctx?s.call(s.ctx,i):s(i)}}}const Gx=()=>window.history.replaceState({},document.title,window.location.pathname);let Z={};class Hx extends Vx{constructor(t={}){super(),Z=this,Z.loading=!0,Z.AUTH_EVENTS={LOADING:"LOADING",LOADED:"LOADED",AUTHENTICATED:"AUTHENTICATED",TOKEN_CHANGE:"TOKEN_CHANGE"},Z.user={},Z.userInfo={},Z.identity={},Z.isAuthenticated=!1,Z.bearer="",Z.options=t,Z.popupOpen=!1,Z.auth0Client=null,Z.error=null,Z.options.onRedirectCallback=Z.options.onRedirectCallback||Gx,Z.created(t),Z.created=!0}async loginWithPopup(t={returnTo:window.location.origin}){Z.popupOpen=!0;try{await Z.auth0Client.loginWithPopup(t),Z.user=await Z.auth0Client.getUser(),Z.user=Z.user||{},await Z.getUserData(),Z.isAuthenticated=!0}catch{Z.loginWithRedirect()}finally{Z.popupOpen=!1}}async handleRedirectCallback(){Z.loading=!0;try{await Z.auth0Client.handleRedirectCallback(),Z.user=await Z.auth0Client.getUser(),await Z.getUserData(),Z.isAuthenticated=!0}catch(t){Z.error=t}finally{Z.loading=!1}}loginWithRedirect(t={}){return t.appState||(t.redirectUri=t.redirectUri||window.location.href),Z.auth0Client.loginWithRedirect(t)}getIdTokenClaims(t){return Z.auth0Client.getIdTokenClaims(t)}async getTokenSilently(t){const i=await Z.auth0Client.getTokenSilently(t);return Z.getIdentityClaims(i),Z.emit(Z.AUTH_EVENTS.TOKEN_CHANGE,this),i}hasPermissions(t){if(Array.isArray(t)||(t=[t]),!Z.identity.permissions)return!1;for(;t.length;){const i=t.pop();if(!Z.identity.permissions.find(r=>r===i))return!1}return!0}hasRoles(t){if(Array.isArray(t)||(t=[t]),!Z.userInfo.roles)return!1;for(;t.length;){const i=t.pop();if(!Z.userInfo.roles.find(r=>r===i))return!1}return!0}async getIdentityClaims(t){return Z.identity=JSON.parse(qx(t)),Z.identity}async getTokenWithPopup(t){const i=await Z.auth0Client.getTokenWithPopup(t);return Z.getIdentityClaims(i),Z.emit(Z.AUTH_EVENTS.TOKEN_CHANGE,this),i}async getUserData(){try{const t=await Z.getTokenSilently();await Z.getIdentityClaims(t),Z.bearer="Bearer "+t;const n=await(await fetch(`https://${Z.options.domain}/userinfo`,{headers:{authorization:Z.bearer}})).json();for(const r in n){let s=r;r.includes("https")&&(s=s.slice(s.lastIndexOf("/")+1)),Z.userInfo[s]=n[r]}Z.user=Z.user||{},Z.user.isAuthenticated=!0,Z.emit(Z.AUTH_EVENTS.AUTHENTICATED,this)}catch(t){console.error(t)}}logout(t={returnTo:window.location.origin}){const i=Z.auth0Client.logout(t);return Z.bearer="",Z.user={},Z.userInfo={},Z.identity={},Z.isAuthenticated=!1,i}async created(t){Z.emit(Z.AUTH_EVENTS.LOADING),Z.auth0Client=await jx({domain:t.domain,client_id:t.clientId,audience:t.audience,redirect_uri:t.redirectUri||window.location.origin,useRefreshTokens:t.useRefreshTokens||!1});try{if(window.location.search.includes("code=")&&window.location.search.includes("state=")){const{appState:i}=await Z.auth0Client.handleRedirectCallback();t.onRedirectCallback(i)}}catch(i){Z.error=i}finally{if(Z.isAuthenticated=await Z.auth0Client.isAuthenticated(),!Z.isAuthenticated){Z.loading=!1,Z.emit(Z.AUTH_EVENTS.LOADED);return}Z.user=await Z.auth0Client.getUser(),await Z.getUserData(),Z.loading=!1,Z.emit(Z.AUTH_EVENTS.LOADED)}}}const Kx=e=>new Promise((t,i)=>{const n=Z;if(!n.loading)return typeof e=="function"&&e(n),t(n);n.on(n.AUTH_EVENTS.LOADED,()=>{t(n),typeof e=="function"&&e(n)})});function Wx(e="."){try{return decodeURIComponent(atob(e).replace(/(.)/g,function(t,i){let n=i.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}catch(t){console.error("[AUTH0-PROVIDER-ERROR] unable to decode token",t)}}function qx(e="."){try{e=e.split(".")[1];let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("Illegal base64url string!")}return Wx(t)}catch(t){console.error("[AUTH0-PROVIDER-ERROR] unable to decode token",t)}}function zx(e){return Z&&Z.created?Z:new Hx(e)}async function kv(e,t,i){try{return await Kx(),Z.isAuthenticated?i():Z.loginWithRedirect({appState:{targetUrl:e.fullPath}})}catch{return Z.loginWithRedirect({appState:{targetUrl:e.fullPath}})}}const c_=window.location.origin.includes("localhost"),u_=c_?"http://localhost:3000":"",Jx="mickshanny.us.auth0.com",Yx="luwNBP378EfKtXGGgxJj9T2kNZ1A562I",Xx="http://Sandbox.com",Zx="modulepreload",Qx=function(e){return"/"+e},Cv={},sl=function(t,i,n){return!i||i.length===0?t():Promise.all(i.map(r=>{if(r=Qx(r),r in Cv)return;Cv[r]=!0;const s=r.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${o}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":Zx,s||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),s)return new Promise((l,c)=>{a.addEventListener("load",l),a.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())},eM=(e,t)=>{const i=e[t];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((n,r)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+t)))})};/*!
  * vue-router v4.1.5
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const ws=typeof window<"u";function tM(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const et=Object.assign;function Uu(e,t){const i={};for(const n in t){const r=t[n];i[n]=Gi(r)?r.map(e):e(r)}return i}const Yo=()=>{},Gi=Array.isArray,iM=/\/$/,nM=e=>e.replace(iM,"");function Bu(e,t,i="/"){let n,r={},s="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=t.slice(0,l),s=t.slice(l+1,a>-1?a:t.length),r=e(s)),a>-1&&(n=n||t.slice(0,a),o=t.slice(a,t.length)),n=aM(n!=null?n:t,i),{fullPath:n+(s&&"?")+s+o,path:n,query:r,hash:o}}function rM(e,t){const i=t.query?e(t.query):"";return t.path+(i&&"?")+i+(t.hash||"")}function Av(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function sM(e,t,i){const n=t.matched.length-1,r=i.matched.length-1;return n>-1&&n===r&&Zs(t.matched[n],i.matched[r])&&d_(t.params,i.params)&&e(t.query)===e(i.query)&&t.hash===i.hash}function Zs(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function d_(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!oM(e[i],t[i]))return!1;return!0}function oM(e,t){return Gi(e)?Rv(e,t):Gi(t)?Rv(t,e):e===t}function Rv(e,t){return Gi(t)?e.length===t.length&&e.every((i,n)=>i===t[n]):e.length===1&&e[0]===t}function aM(e,t){if(e.startsWith("/"))return e;if(!e)return t;const i=t.split("/"),n=e.split("/");let r=i.length-1,s,o;for(s=0;s<n.length;s++)if(o=n[s],o!==".")if(o==="..")r>1&&r--;else break;return i.slice(0,r).join("/")+"/"+n.slice(s-(s===n.length?1:0)).join("/")}var fa;(function(e){e.pop="pop",e.push="push"})(fa||(fa={}));var Xo;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Xo||(Xo={}));function lM(e){if(!e)if(ws){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),nM(e)}const cM=/^[^#]+#/;function uM(e,t){return e.replace(cM,"#")+t}function dM(e,t){const i=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-i.left-(t.left||0),top:n.top-i.top-(t.top||0)}}const xc=()=>({left:window.pageXOffset,top:window.pageYOffset});function hM(e){let t;if("el"in e){const i=e.el,n=typeof i=="string"&&i.startsWith("#"),r=typeof i=="string"?n?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!r)return;t=dM(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function Pv(e,t){return(history.state?history.state.position-t:-1)+e}const rh=new Map;function fM(e,t){rh.set(e,t)}function pM(e){const t=rh.get(e);return rh.delete(e),t}let mM=()=>location.protocol+"//"+location.host;function h_(e,t){const{pathname:i,search:n,hash:r}=t,s=e.indexOf("#");if(s>-1){let a=r.includes(e.slice(s))?e.slice(s).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),Av(l,"")}return Av(i,e)+n+r}function gM(e,t,i,n){let r=[],s=[],o=null;const a=({state:h})=>{const m=h_(e,location),v=i.value,y=t.value;let T=0;if(h){if(i.value=m,t.value=h,o&&o===v){o=null;return}T=y?h.position-y.position:0}else n(m);r.forEach(S=>{S(i.value,v,{delta:T,type:fa.pop,direction:T?T>0?Xo.forward:Xo.back:Xo.unknown})})};function l(){o=i.value}function c(h){r.push(h);const m=()=>{const v=r.indexOf(h);v>-1&&r.splice(v,1)};return s.push(m),m}function u(){const{history:h}=window;!h.state||h.replaceState(et({},h.state,{scroll:xc()}),"")}function d(){for(const h of s)h();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:l,listen:c,destroy:d}}function Iv(e,t,i,n=!1,r=!1){return{back:e,current:t,forward:i,replaced:n,position:window.history.length,scroll:r?xc():null}}function vM(e){const{history:t,location:i}=window,n={value:h_(e,i)},r={value:t.state};r.value||s(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const d=e.indexOf("#"),h=d>-1?(i.host&&document.querySelector("base")?e:e.slice(d))+l:mM()+e+l;try{t[u?"replaceState":"pushState"](c,"",h),r.value=c}catch(m){console.error(m),i[u?"replace":"assign"](h)}}function o(l,c){const u=et({},t.state,Iv(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});s(l,u,!0),n.value=l}function a(l,c){const u=et({},r.value,t.state,{forward:l,scroll:xc()});s(u.current,u,!0);const d=et({},Iv(n.value,l,null),{position:u.position+1},c);s(l,d,!1),n.value=l}return{location:n,state:r,push:a,replace:o}}function yM(e){e=lM(e);const t=vM(e),i=gM(e,t.state,t.location,t.replace);function n(s,o=!0){o||i.pauseListeners(),history.go(s)}const r=et({location:"",base:e,go:n,createHref:uM.bind(null,e)},t,i);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function bM(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),yM(e)}function EM(e){return typeof e=="string"||e&&typeof e=="object"}function f_(e){return typeof e=="string"||typeof e=="symbol"}const Hn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},p_=Symbol("");var Ov;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Ov||(Ov={}));function Qs(e,t){return et(new Error,{type:e,[p_]:!0},t)}function gn(e,t){return e instanceof Error&&p_ in e&&(t==null||!!(e.type&t))}const Dv="[^/]+?",TM={sensitive:!1,strict:!1,start:!0,end:!0},_M=/[.+*?^${}()[\]/\\]/g;function wM(e,t){const i=et({},TM,t),n=[];let r=i.start?"^":"";const s=[];for(const c of e){const u=c.length?[]:[90];i.strict&&!c.length&&(r+="/");for(let d=0;d<c.length;d++){const h=c[d];let m=40+(i.sensitive?.25:0);if(h.type===0)d||(r+="/"),r+=h.value.replace(_M,"\\$&"),m+=40;else if(h.type===1){const{value:v,repeatable:y,optional:T,regexp:S}=h;s.push({name:v,repeatable:y,optional:T});const R=S||Dv;if(R!==Dv){m+=10;try{new RegExp(`(${R})`)}catch(x){throw new Error(`Invalid custom RegExp for param "${v}" (${R}): `+x.message)}}let O=y?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;d||(O=T&&c.length<2?`(?:/${O})`:"/"+O),T&&(O+="?"),r+=O,m+=20,T&&(m+=-8),y&&(m+=-20),R===".*"&&(m+=-50)}u.push(m)}n.push(u)}if(i.strict&&i.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}i.strict||(r+="/?"),i.end?r+="$":i.strict&&(r+="(?:/|$)");const o=new RegExp(r,i.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let h=1;h<u.length;h++){const m=u[h]||"",v=s[h-1];d[v.name]=m&&v.repeatable?m.split("/"):m}return d}function l(c){let u="",d=!1;for(const h of e){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const m of h)if(m.type===0)u+=m.value;else if(m.type===1){const{value:v,repeatable:y,optional:T}=m,S=v in c?c[v]:"";if(Gi(S)&&!y)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const R=Gi(S)?S.join("/"):S;if(!R)if(T)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${v}"`);u+=R}}return u||"/"}return{re:o,score:n,keys:s,parse:a,stringify:l}}function SM(e,t){let i=0;for(;i<e.length&&i<t.length;){const n=t[i]-e[i];if(n)return n;i++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function kM(e,t){let i=0;const n=e.score,r=t.score;for(;i<n.length&&i<r.length;){const s=SM(n[i],r[i]);if(s)return s;i++}if(Math.abs(r.length-n.length)===1){if(Nv(n))return 1;if(Nv(r))return-1}return r.length-n.length}function Nv(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const CM={type:0,value:""},AM=/[a-zA-Z0-9_]/;function RM(e){if(!e)return[[]];if(e==="/")return[[CM]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${i})/"${c}": ${m}`)}let i=0,n=i;const r=[];let s;function o(){s&&r.push(s),s=[]}let a=0,l,c="",u="";function d(){!c||(i===0?s.push({type:0,value:c}):i===1||i===2||i===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&i!==2){n=i,i=4;continue}switch(i){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),i=1):h();break;case 4:h(),i=n;break;case 1:l==="("?i=2:AM.test(l)?h():(d(),i=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:i=3:u+=l;break;case 3:d(),i=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return i===2&&t(`Unfinished custom RegExp for param "${c}"`),d(),o(),r}function PM(e,t,i){const n=wM(RM(e.path),i),r=et(n,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function IM(e,t){const i=[],n=new Map;t=Mv({strict:!1,end:!0,sensitive:!1},t);function r(u){return n.get(u)}function s(u,d,h){const m=!h,v=OM(u);v.aliasOf=h&&h.record;const y=Mv(t,u),T=[v];if("alias"in u){const O=typeof u.alias=="string"?[u.alias]:u.alias;for(const x of O)T.push(et({},v,{components:h?h.record.components:v.components,path:x,aliasOf:h?h.record:v}))}let S,R;for(const O of T){const{path:x}=O;if(d&&x[0]!=="/"){const B=d.record.path,ie=B[B.length-1]==="/"?"":"/";O.path=d.record.path+(x&&ie+x)}if(S=PM(O,d,y),h?h.alias.push(S):(R=R||S,R!==S&&R.alias.push(S),m&&u.name&&!xv(S)&&o(u.name)),v.children){const B=v.children;for(let ie=0;ie<B.length;ie++)s(B[ie],S,h&&h.children[ie])}h=h||S,l(S)}return R?()=>{o(R)}:Yo}function o(u){if(f_(u)){const d=n.get(u);d&&(n.delete(u),i.splice(i.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=i.indexOf(u);d>-1&&(i.splice(d,1),u.record.name&&n.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return i}function l(u){let d=0;for(;d<i.length&&kM(u,i[d])>=0&&(u.record.path!==i[d].record.path||!m_(u,i[d]));)d++;i.splice(d,0,u),u.record.name&&!xv(u)&&n.set(u.record.name,u)}function c(u,d){let h,m={},v,y;if("name"in u&&u.name){if(h=n.get(u.name),!h)throw Qs(1,{location:u});y=h.record.name,m=et(Lv(d.params,h.keys.filter(R=>!R.optional).map(R=>R.name)),u.params&&Lv(u.params,h.keys.map(R=>R.name))),v=h.stringify(m)}else if("path"in u)v=u.path,h=i.find(R=>R.re.test(v)),h&&(m=h.parse(v),y=h.record.name);else{if(h=d.name?n.get(d.name):i.find(R=>R.re.test(d.path)),!h)throw Qs(1,{location:u,currentLocation:d});y=h.record.name,m=et({},d.params,u.params),v=h.stringify(m)}const T=[];let S=h;for(;S;)T.unshift(S.record),S=S.parent;return{name:y,path:v,params:m,matched:T,meta:NM(T)}}return e.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function Lv(e,t){const i={};for(const n of t)n in e&&(i[n]=e[n]);return i}function OM(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:DM(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function DM(e){const t={},i=e.props||!1;if("component"in e)t.default=i;else for(const n in e.components)t[n]=typeof i=="boolean"?i:i[n];return t}function xv(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function NM(e){return e.reduce((t,i)=>et(t,i.meta),{})}function Mv(e,t){const i={};for(const n in e)i[n]=n in t?t[n]:e[n];return i}function m_(e,t){return t.children.some(i=>i===e||m_(e,i))}const g_=/#/g,LM=/&/g,xM=/\//g,MM=/=/g,$M=/\?/g,v_=/\+/g,UM=/%5B/g,BM=/%5D/g,y_=/%5E/g,FM=/%60/g,b_=/%7B/g,jM=/%7C/g,E_=/%7D/g,VM=/%20/g;function Hf(e){return encodeURI(""+e).replace(jM,"|").replace(UM,"[").replace(BM,"]")}function GM(e){return Hf(e).replace(b_,"{").replace(E_,"}").replace(y_,"^")}function sh(e){return Hf(e).replace(v_,"%2B").replace(VM,"+").replace(g_,"%23").replace(LM,"%26").replace(FM,"`").replace(b_,"{").replace(E_,"}").replace(y_,"^")}function HM(e){return sh(e).replace(MM,"%3D")}function KM(e){return Hf(e).replace(g_,"%23").replace($M,"%3F")}function WM(e){return e==null?"":KM(e).replace(xM,"%2F")}function Xl(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function qM(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(v_," "),o=s.indexOf("="),a=Xl(o<0?s:s.slice(0,o)),l=o<0?null:Xl(s.slice(o+1));if(a in t){let c=t[a];Gi(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function $v(e){let t="";for(let i in e){const n=e[i];if(i=HM(i),n==null){n!==void 0&&(t+=(t.length?"&":"")+i);continue}(Gi(n)?n.map(s=>s&&sh(s)):[n&&sh(n)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+i,s!=null&&(t+="="+s))})}return t}function zM(e){const t={};for(const i in e){const n=e[i];n!==void 0&&(t[i]=Gi(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return t}const JM=Symbol(""),Uv=Symbol(""),Kf=Symbol(""),Wf=Symbol(""),oh=Symbol("");function No(){let e=[];function t(n){return e.push(n),()=>{const r=e.indexOf(n);r>-1&&e.splice(r,1)}}function i(){e=[]}return{add:t,list:()=>e,reset:i}}function qn(e,t,i,n,r){const s=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const l=d=>{d===!1?a(Qs(4,{from:i,to:t})):d instanceof Error?a(d):EM(d)?a(Qs(2,{from:t,to:d})):(s&&n.enterCallbacks[r]===s&&typeof d=="function"&&s.push(d),o())},c=e.call(n&&n.instances[r],t,i,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch(d=>a(d))})}function Fu(e,t,i,n){const r=[];for(const s of e)for(const o in s.components){let a=s.components[o];if(!(t!=="beforeRouteEnter"&&!s.instances[o]))if(YM(a)){const c=(a.__vccOpts||a)[t];c&&r.push(qn(c,i,n,s,o))}else{let l=a();r.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const u=tM(c)?c.default:c;s.components[o]=u;const h=(u.__vccOpts||u)[t];return h&&qn(h,i,n,s,o)()}))}}return r}function YM(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Bv(e){const t=Rn(Kf),i=Rn(Wf),n=Rt(()=>t.resolve(bi(e.to))),r=Rt(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],d=i.matched;if(!u||!d.length)return-1;const h=d.findIndex(Zs.bind(null,u));if(h>-1)return h;const m=Fv(l[c-2]);return c>1&&Fv(u)===m&&d[d.length-1].path!==m?d.findIndex(Zs.bind(null,l[c-2])):h}),s=Rt(()=>r.value>-1&&e2(i.params,n.value.params)),o=Rt(()=>r.value>-1&&r.value===i.matched.length-1&&d_(i.params,n.value.params));function a(l={}){return QM(l)?t[bi(e.replace)?"replace":"push"](bi(e.to)).catch(Yo):Promise.resolve()}return{route:n,href:Rt(()=>n.value.href),isActive:s,isExactActive:o,navigate:a}}const XM=zE({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Bv,setup(e,{slots:t}){const i=po(Bv(e)),{options:n}=Rn(Kf),r=Rt(()=>({[jv(e.activeClass,n.linkActiveClass,"router-link-active")]:i.isActive,[jv(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const s=t.default&&t.default(i);return e.custom?s:dT("a",{"aria-current":i.isExactActive?e.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:r.value},s)}}}),ZM=XM;function QM(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function e2(e,t){for(const i in t){const n=t[i],r=e[i];if(typeof n=="string"){if(n!==r)return!1}else if(!Gi(r)||r.length!==n.length||n.some((s,o)=>s!==r[o]))return!1}return!0}function Fv(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const jv=(e,t,i)=>e!=null?e:t!=null?t:i,t2=zE({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:i}){const n=Rn(oh),r=Rt(()=>e.route||n.value),s=Rn(Uv,0),o=Rt(()=>{let c=bi(s);const{matched:u}=r.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=Rt(()=>r.value.matched[o.value]);pl(Uv,Rt(()=>o.value+1)),pl(JM,a),pl(oh,r);const l=GO();return qo(()=>[l.value,a.value,e.name],([c,u,d],[h,m,v])=>{u&&(u.instances[d]=c,m&&m!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),c&&u&&(!m||!Zs(u,m)||!h)&&(u.enterCallbacks[d]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=r.value,u=e.name,d=a.value,h=d&&d.components[u];if(!h)return Vv(i.default,{Component:h,route:c});const m=d.props[u],v=m?m===!0?c.params:typeof m=="function"?m(c):m:null,T=dT(h,et({},v,t,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return Vv(i.default,{Component:T,route:c})||T}}});function Vv(e,t){if(!e)return null;const i=e(t);return i.length===1?i[0]:i}const i2=t2;function n2(e){const t=IM(e.routes,e),i=e.parseQuery||qM,n=e.stringifyQuery||$v,r=e.history,s=No(),o=No(),a=No(),l=HO(Hn);let c=Hn;ws&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Uu.bind(null,A=>""+A),d=Uu.bind(null,WM),h=Uu.bind(null,Xl);function m(A,L){let I,j;return f_(A)?(I=t.getRecordMatcher(A),j=L):j=A,t.addRoute(j,I)}function v(A){const L=t.getRecordMatcher(A);L&&t.removeRoute(L)}function y(){return t.getRoutes().map(A=>A.record)}function T(A){return!!t.getRecordMatcher(A)}function S(A,L){if(L=et({},L||l.value),typeof A=="string"){const ne=Bu(i,A,L.path),w=t.resolve({path:ne.path},L),P=r.createHref(ne.fullPath);return et(ne,w,{params:h(w.params),hash:Xl(ne.hash),redirectedFrom:void 0,href:P})}let I;if("path"in A)I=et({},A,{path:Bu(i,A.path,L.path).path});else{const ne=et({},A.params);for(const w in ne)ne[w]==null&&delete ne[w];I=et({},A,{params:d(A.params)}),L.params=d(L.params)}const j=t.resolve(I,L),pe=A.hash||"";j.params=u(h(j.params));const he=rM(n,et({},A,{hash:GM(pe),path:j.path})),ue=r.createHref(he);return et({fullPath:he,hash:pe,query:n===$v?zM(A.query):A.query||{}},j,{redirectedFrom:void 0,href:ue})}function R(A){return typeof A=="string"?Bu(i,A,l.value.path):et({},A)}function O(A,L){if(c!==A)return Qs(8,{from:L,to:A})}function x(A){return ee(A)}function B(A){return x(et(R(A),{replace:!0}))}function ie(A){const L=A.matched[A.matched.length-1];if(L&&L.redirect){const{redirect:I}=L;let j=typeof I=="function"?I(A):I;return typeof j=="string"&&(j=j.includes("?")||j.includes("#")?j=R(j):{path:j},j.params={}),et({query:A.query,hash:A.hash,params:"path"in j?{}:A.params},j)}}function ee(A,L){const I=c=S(A),j=l.value,pe=A.state,he=A.force,ue=A.replace===!0,ne=ie(I);if(ne)return ee(et(R(ne),{state:typeof ne=="object"?et({},pe,ne.state):pe,force:he,replace:ue}),L||I);const w=I;w.redirectedFrom=L;let P;return!he&&sM(n,j,I)&&(P=Qs(16,{to:w,from:j}),D(j,j,!0,!1)),(P?Promise.resolve(P):se(w,j)).catch($=>gn($)?gn($,2)?$:C($):we($,w,j)).then($=>{if($){if(gn($,2))return ee(et({replace:ue},R($.to),{state:typeof $.to=="object"?et({},pe,$.to.state):pe,force:he}),L||w)}else $=Ae(w,j,!0,ue,pe);return ye(w,j,$),$})}function de(A,L){const I=O(A,L);return I?Promise.reject(I):Promise.resolve()}function se(A,L){let I;const[j,pe,he]=r2(A,L);I=Fu(j.reverse(),"beforeRouteLeave",A,L);for(const ne of j)ne.leaveGuards.forEach(w=>{I.push(qn(w,A,L))});const ue=de.bind(null,A,L);return I.push(ue),gs(I).then(()=>{I=[];for(const ne of s.list())I.push(qn(ne,A,L));return I.push(ue),gs(I)}).then(()=>{I=Fu(pe,"beforeRouteUpdate",A,L);for(const ne of pe)ne.updateGuards.forEach(w=>{I.push(qn(w,A,L))});return I.push(ue),gs(I)}).then(()=>{I=[];for(const ne of A.matched)if(ne.beforeEnter&&!L.matched.includes(ne))if(Gi(ne.beforeEnter))for(const w of ne.beforeEnter)I.push(qn(w,A,L));else I.push(qn(ne.beforeEnter,A,L));return I.push(ue),gs(I)}).then(()=>(A.matched.forEach(ne=>ne.enterCallbacks={}),I=Fu(he,"beforeRouteEnter",A,L),I.push(ue),gs(I))).then(()=>{I=[];for(const ne of o.list())I.push(qn(ne,A,L));return I.push(ue),gs(I)}).catch(ne=>gn(ne,8)?ne:Promise.reject(ne))}function ye(A,L,I){for(const j of a.list())j(A,L,I)}function Ae(A,L,I,j,pe){const he=O(A,L);if(he)return he;const ue=L===Hn,ne=ws?history.state:{};I&&(j||ue?r.replace(A.fullPath,et({scroll:ue&&ne&&ne.scroll},pe)):r.push(A.fullPath,pe)),l.value=A,D(A,L,I,ue),C()}let ke;function _e(){ke||(ke=r.listen((A,L,I)=>{if(!H.listening)return;const j=S(A),pe=ie(j);if(pe){ee(et(pe,{replace:!0}),j).catch(Yo);return}c=j;const he=l.value;ws&&fM(Pv(he.fullPath,I.delta),xc()),se(j,he).catch(ue=>gn(ue,12)?ue:gn(ue,2)?(ee(ue.to,j).then(ne=>{gn(ne,20)&&!I.delta&&I.type===fa.pop&&r.go(-1,!1)}).catch(Yo),Promise.reject()):(I.delta&&r.go(-I.delta,!1),we(ue,j,he))).then(ue=>{ue=ue||Ae(j,he,!1),ue&&(I.delta&&!gn(ue,8)?r.go(-I.delta,!1):I.type===fa.pop&&gn(ue,20)&&r.go(-1,!1)),ye(j,he,ue)}).catch(Yo)}))}let Ie=No(),ge=No(),Oe;function we(A,L,I){C(A);const j=ge.list();return j.length?j.forEach(pe=>pe(A,L,I)):console.error(A),Promise.reject(A)}function E(){return Oe&&l.value!==Hn?Promise.resolve():new Promise((A,L)=>{Ie.add([A,L])})}function C(A){return Oe||(Oe=!A,_e(),Ie.list().forEach(([L,I])=>A?I(A):L()),Ie.reset()),A}function D(A,L,I,j){const{scrollBehavior:pe}=e;if(!ws||!pe)return Promise.resolve();const he=!I&&pM(Pv(A.fullPath,0))||(j||!I)&&history.state&&history.state.scroll||null;return $E().then(()=>pe(A,L,he)).then(ue=>ue&&hM(ue)).catch(ue=>we(ue,A,L))}const N=A=>r.go(A);let M;const F=new Set,H={currentRoute:l,listening:!0,addRoute:m,removeRoute:v,hasRoute:T,getRoutes:y,resolve:S,options:e,push:x,replace:B,go:N,back:()=>N(-1),forward:()=>N(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:ge.add,isReady:E,install(A){const L=this;A.component("RouterLink",ZM),A.component("RouterView",i2),A.config.globalProperties.$router=L,Object.defineProperty(A.config.globalProperties,"$route",{enumerable:!0,get:()=>bi(l)}),ws&&!M&&l.value===Hn&&(M=!0,x(r.location).catch(pe=>{}));const I={};for(const pe in Hn)I[pe]=Rt(()=>l.value[pe]);A.provide(Kf,L),A.provide(Wf,po(I)),A.provide(oh,l);const j=A.unmount;F.add(A),A.unmount=function(){F.delete(A),F.size<1&&(c=Hn,ke&&ke(),ke=null,l.value=Hn,M=!1,Oe=!1),j()}}};return H}function gs(e){return e.reduce((t,i)=>t.then(()=>i()),Promise.resolve())}function r2(e,t){const i=[],n=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const a=t.matched[o];a&&(e.matched.find(c=>Zs(c,a))?n.push(a):i.push(a));const l=e.matched[o];l&&(t.matched.find(c=>Zs(c,l))||r.push(l))}return[i,n,r]}function Kj(){return Rn(Wf)}function ol(e){return()=>eM(Object.assign({"./pages/AboutPage.vue":()=>sl(()=>import("./AboutPage.a64927db.js"),[]),"./pages/AccountPage.vue":()=>sl(()=>import("./AccountPage.7fe93ab0.js"),["assets/AccountPage.7fe93ab0.js","assets/AccountPage.618bcd2c.css"]),"./pages/HomePage.vue":()=>sl(()=>import("./HomePage.b26923a4.js"),["assets/HomePage.b26923a4.js","assets/HomePage.fab21e28.css"]),"./pages/RoomPage.vue":()=>sl(()=>import("./RoomPage.04a135e8.js"),["assets/RoomPage.04a135e8.js","assets/RoomPage.e741b268.css"])}),`./pages/${e}.vue`)}const s2=[{path:"/",name:"Home",component:ol("HomePage")},{path:"/about",name:"About",component:ol("AboutPage")},{path:"/room/:roomId",name:"Room",component:ol("RoomPage"),beforeEnter:kv},{path:"/account",name:"Account",component:ol("AccountPage"),beforeEnter:kv}],T_=n2({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:bM(),routes:s2});function Lo(e,t){if(c_)console[e](`[${e}] :: ${new Date().toLocaleTimeString()} :: `,...t);else{switch(e){case"log":case"assert":return}console[e](`[${e}] :: ${new Date().toLocaleTimeString()} :: `,...t)}}const _t={log(){Lo("log",arguments)},error(){Lo("error",arguments)},warn(){Lo("warn",arguments)},assert(){Lo("assert",arguments)},trace(){Lo("trace",arguments)}};var yn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function o2(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var __={exports:{}},qf={exports:{}},w_=function(t,i){return function(){for(var r=new Array(arguments.length),s=0;s<r.length;s++)r[s]=arguments[s];return t.apply(i,r)}},a2=w_,zf=Object.prototype.toString,Jf=function(e){return function(t){var i=zf.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())}}(Object.create(null));function is(e){return e=e.toLowerCase(),function(i){return Jf(i)===e}}function Yf(e){return Array.isArray(e)}function Zl(e){return typeof e>"u"}function l2(e){return e!==null&&!Zl(e)&&e.constructor!==null&&!Zl(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var S_=is("ArrayBuffer");function c2(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&S_(e.buffer),t}function u2(e){return typeof e=="string"}function d2(e){return typeof e=="number"}function k_(e){return e!==null&&typeof e=="object"}function Tl(e){if(Jf(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var h2=is("Date"),f2=is("File"),p2=is("Blob"),m2=is("FileList");function Xf(e){return zf.call(e)==="[object Function]"}function g2(e){return k_(e)&&Xf(e.pipe)}function v2(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||zf.call(e)===t||Xf(e.toString)&&e.toString()===t)}var y2=is("URLSearchParams");function b2(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function E2(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Zf(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Yf(e))for(var i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}function ah(){var e={};function t(r,s){Tl(e[s])&&Tl(r)?e[s]=ah(e[s],r):Tl(r)?e[s]=ah({},r):Yf(r)?e[s]=r.slice():e[s]=r}for(var i=0,n=arguments.length;i<n;i++)Zf(arguments[i],t);return e}function T2(e,t,i){return Zf(t,function(r,s){i&&typeof r=="function"?e[s]=a2(r,i):e[s]=r}),e}function _2(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function w2(e,t,i,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,i&&Object.assign(e.prototype,i)}function S2(e,t,i){var n,r,s,o={};t=t||{};do{for(n=Object.getOwnPropertyNames(e),r=n.length;r-- >0;)s=n[r],o[s]||(t[s]=e[s],o[s]=!0);e=Object.getPrototypeOf(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t}function k2(e,t,i){e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;var n=e.indexOf(t,i);return n!==-1&&n===i}function C2(e){if(!e)return null;var t=e.length;if(Zl(t))return null;for(var i=new Array(t);t-- >0;)i[t]=e[t];return i}var A2=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),Mt={isArray:Yf,isArrayBuffer:S_,isBuffer:l2,isFormData:v2,isArrayBufferView:c2,isString:u2,isNumber:d2,isObject:k_,isPlainObject:Tl,isUndefined:Zl,isDate:h2,isFile:f2,isBlob:p2,isFunction:Xf,isStream:g2,isURLSearchParams:y2,isStandardBrowserEnv:E2,forEach:Zf,merge:ah,extend:T2,trim:b2,stripBOM:_2,inherits:w2,toFlatObject:S2,kindOf:Jf,kindOfTest:is,endsWith:k2,toArray:C2,isTypedArray:A2,isFileList:m2},vs=Mt;function Gv(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var C_=function(t,i,n){if(!i)return t;var r;if(n)r=n(i);else if(vs.isURLSearchParams(i))r=i.toString();else{var s=[];vs.forEach(i,function(l,c){l===null||typeof l>"u"||(vs.isArray(l)?c=c+"[]":l=[l],vs.forEach(l,function(d){vs.isDate(d)?d=d.toISOString():vs.isObject(d)&&(d=JSON.stringify(d)),s.push(Gv(c)+"="+Gv(d))}))}),r=s.join("&")}if(r){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t},R2=Mt;function Mc(){this.handlers=[]}Mc.prototype.use=function(t,i,n){return this.handlers.push({fulfilled:t,rejected:i,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Mc.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Mc.prototype.forEach=function(t){R2.forEach(this.handlers,function(n){n!==null&&t(n)})};var P2=Mc,I2=Mt,O2=function(t,i){I2.forEach(t,function(r,s){s!==i&&s.toUpperCase()===i.toUpperCase()&&(t[i]=r,delete t[s])})},A_=Mt;function eo(e,t,i,n,r){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),r&&(this.response=r)}A_.inherits(eo,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var R_=eo.prototype,P_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){P_[e]={value:e}});Object.defineProperties(eo,P_);Object.defineProperty(R_,"isAxiosError",{value:!0});eo.from=function(e,t,i,n,r,s){var o=Object.create(R_);return A_.toFlatObject(e,o,function(l){return l!==Error.prototype}),eo.call(o,e.message,t,i,n,r),o.name=e.name,s&&Object.assign(o,s),o};var Eo=eo,I_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Pi=Mt;function D2(e,t){t=t||new FormData;var i=[];function n(s){return s===null?"":Pi.isDate(s)?s.toISOString():Pi.isArrayBuffer(s)||Pi.isTypedArray(s)?typeof Blob=="function"?new Blob([s]):Buffer.from(s):s}function r(s,o){if(Pi.isPlainObject(s)||Pi.isArray(s)){if(i.indexOf(s)!==-1)throw Error("Circular reference detected in "+o);i.push(s),Pi.forEach(s,function(l,c){if(!Pi.isUndefined(l)){var u=o?o+"."+c:c,d;if(l&&!o&&typeof l=="object"){if(Pi.endsWith(c,"{}"))l=JSON.stringify(l);else if(Pi.endsWith(c,"[]")&&(d=Pi.toArray(l))){d.forEach(function(h){!Pi.isUndefined(h)&&t.append(u,n(h))});return}}r(l,u)}}),i.pop()}else t.append(o,n(s))}return r(e),t}var O_=D2,ju,Hv;function N2(){if(Hv)return ju;Hv=1;var e=Eo;return ju=function(i,n,r){var s=r.config.validateStatus;!r.status||!s||s(r.status)?i(r):n(new e("Request failed with status code "+r.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))},ju}var Vu,Kv;function L2(){if(Kv)return Vu;Kv=1;var e=Mt;return Vu=e.isStandardBrowserEnv()?function(){return{write:function(n,r,s,o,a,l){var c=[];c.push(n+"="+encodeURIComponent(r)),e.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),e.isString(o)&&c.push("path="+o),e.isString(a)&&c.push("domain="+a),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(n){var r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Vu}var x2=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},M2=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t},$2=x2,U2=M2,D_=function(t,i){return t&&!$2(i)?U2(t,i):i},Gu,Wv;function B2(){if(Wv)return Gu;Wv=1;var e=Mt,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Gu=function(n){var r={},s,o,a;return n&&e.forEach(n.split(`
`),function(c){if(a=c.indexOf(":"),s=e.trim(c.substr(0,a)).toLowerCase(),o=e.trim(c.substr(a+1)),s){if(r[s]&&t.indexOf(s)>=0)return;s==="set-cookie"?r[s]=(r[s]?r[s]:[]).concat([o]):r[s]=r[s]?r[s]+", "+o:o}}),r},Gu}var Hu,qv;function F2(){if(qv)return Hu;qv=1;var e=Mt;return Hu=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),r;function s(o){var a=o;return i&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(a){var l=e.isString(a)?s(a):a;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}(),Hu}var Ku,zv;function $c(){if(zv)return Ku;zv=1;var e=Eo,t=Mt;function i(n){e.call(this,n==null?"canceled":n,e.ERR_CANCELED),this.name="CanceledError"}return t.inherits(i,e,{__CANCEL__:!0}),Ku=i,Ku}var Wu,Jv;function j2(){return Jv||(Jv=1,Wu=function(t){var i=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return i&&i[1]||""}),Wu}var qu,Yv;function Xv(){if(Yv)return qu;Yv=1;var e=Mt,t=N2(),i=L2(),n=C_,r=D_,s=B2(),o=F2(),a=I_,l=Eo,c=$c(),u=j2();return qu=function(h){return new Promise(function(v,y){var T=h.data,S=h.headers,R=h.responseType,O;function x(){h.cancelToken&&h.cancelToken.unsubscribe(O),h.signal&&h.signal.removeEventListener("abort",O)}e.isFormData(T)&&e.isStandardBrowserEnv()&&delete S["Content-Type"];var B=new XMLHttpRequest;if(h.auth){var ie=h.auth.username||"",ee=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";S.Authorization="Basic "+btoa(ie+":"+ee)}var de=r(h.baseURL,h.url);B.open(h.method.toUpperCase(),n(de,h.params,h.paramsSerializer),!0),B.timeout=h.timeout;function se(){if(!!B){var ke="getAllResponseHeaders"in B?s(B.getAllResponseHeaders()):null,_e=!R||R==="text"||R==="json"?B.responseText:B.response,Ie={data:_e,status:B.status,statusText:B.statusText,headers:ke,config:h,request:B};t(function(Oe){v(Oe),x()},function(Oe){y(Oe),x()},Ie),B=null}}if("onloadend"in B?B.onloadend=se:B.onreadystatechange=function(){!B||B.readyState!==4||B.status===0&&!(B.responseURL&&B.responseURL.indexOf("file:")===0)||setTimeout(se)},B.onabort=function(){!B||(y(new l("Request aborted",l.ECONNABORTED,h,B)),B=null)},B.onerror=function(){y(new l("Network Error",l.ERR_NETWORK,h,B,B)),B=null},B.ontimeout=function(){var _e=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",Ie=h.transitional||a;h.timeoutErrorMessage&&(_e=h.timeoutErrorMessage),y(new l(_e,Ie.clarifyTimeoutError?l.ETIMEDOUT:l.ECONNABORTED,h,B)),B=null},e.isStandardBrowserEnv()){var ye=(h.withCredentials||o(de))&&h.xsrfCookieName?i.read(h.xsrfCookieName):void 0;ye&&(S[h.xsrfHeaderName]=ye)}"setRequestHeader"in B&&e.forEach(S,function(_e,Ie){typeof T>"u"&&Ie.toLowerCase()==="content-type"?delete S[Ie]:B.setRequestHeader(Ie,_e)}),e.isUndefined(h.withCredentials)||(B.withCredentials=!!h.withCredentials),R&&R!=="json"&&(B.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&B.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&B.upload&&B.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(O=function(ke){!B||(y(!ke||ke&&ke.type?new c:ke),B.abort(),B=null)},h.cancelToken&&h.cancelToken.subscribe(O),h.signal&&(h.signal.aborted?O():h.signal.addEventListener("abort",O))),T||(T=null);var Ae=u(de);if(Ae&&["http","https","file"].indexOf(Ae)===-1){y(new l("Unsupported protocol "+Ae+":",l.ERR_BAD_REQUEST,h));return}B.send(T)})},qu}var zu,Zv;function V2(){return Zv||(Zv=1,zu=null),zu}var Ct=Mt,Qv=O2,ey=Eo,G2=I_,H2=O_,K2={"Content-Type":"application/x-www-form-urlencoded"};function ty(e,t){!Ct.isUndefined(e)&&Ct.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function W2(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=Xv()),e}function q2(e,t,i){if(Ct.isString(e))try{return(t||JSON.parse)(e),Ct.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(i||JSON.stringify)(e)}var Uc={transitional:G2,adapter:W2(),transformRequest:[function(t,i){if(Qv(i,"Accept"),Qv(i,"Content-Type"),Ct.isFormData(t)||Ct.isArrayBuffer(t)||Ct.isBuffer(t)||Ct.isStream(t)||Ct.isFile(t)||Ct.isBlob(t))return t;if(Ct.isArrayBufferView(t))return t.buffer;if(Ct.isURLSearchParams(t))return ty(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var n=Ct.isObject(t),r=i&&i["Content-Type"],s;if((s=Ct.isFileList(t))||n&&r==="multipart/form-data"){var o=this.env&&this.env.FormData;return H2(s?{"files[]":t}:t,o&&new o)}else if(n||r==="application/json")return ty(i,"application/json"),q2(t);return t}],transformResponse:[function(t){var i=this.transitional||Uc.transitional,n=i&&i.silentJSONParsing,r=i&&i.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||r&&Ct.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(s)throw o.name==="SyntaxError"?ey.from(o,ey.ERR_BAD_RESPONSE,this,null,this.response):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:V2()},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ct.forEach(["delete","get","head"],function(t){Uc.headers[t]={}});Ct.forEach(["post","put","patch"],function(t){Uc.headers[t]=Ct.merge(K2)});var Qf=Uc,z2=Mt,J2=Qf,Y2=function(t,i,n){var r=this||J2;return z2.forEach(n,function(o){t=o.call(r,t,i)}),t},Ju,iy;function N_(){return iy||(iy=1,Ju=function(t){return!!(t&&t.__CANCEL__)}),Ju}var ny=Mt,Yu=Y2,X2=N_(),Z2=Qf,Q2=$c();function Xu(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Q2}var e$=function(t){Xu(t),t.headers=t.headers||{},t.data=Yu.call(t,t.data,t.headers,t.transformRequest),t.headers=ny.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),ny.forEach(["delete","get","head","post","put","patch","common"],function(r){delete t.headers[r]});var i=t.adapter||Z2.adapter;return i(t).then(function(r){return Xu(t),r.data=Yu.call(t,r.data,r.headers,t.transformResponse),r},function(r){return X2(r)||(Xu(t),r&&r.response&&(r.response.data=Yu.call(t,r.response.data,r.response.headers,t.transformResponse))),Promise.reject(r)})},ai=Mt,L_=function(t,i){i=i||{};var n={};function r(u,d){return ai.isPlainObject(u)&&ai.isPlainObject(d)?ai.merge(u,d):ai.isPlainObject(d)?ai.merge({},d):ai.isArray(d)?d.slice():d}function s(u){if(ai.isUndefined(i[u])){if(!ai.isUndefined(t[u]))return r(void 0,t[u])}else return r(t[u],i[u])}function o(u){if(!ai.isUndefined(i[u]))return r(void 0,i[u])}function a(u){if(ai.isUndefined(i[u])){if(!ai.isUndefined(t[u]))return r(void 0,t[u])}else return r(void 0,i[u])}function l(u){if(u in i)return r(t[u],i[u]);if(u in t)return r(void 0,t[u])}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return ai.forEach(Object.keys(t).concat(Object.keys(i)),function(d){var h=c[d]||s,m=h(d);ai.isUndefined(m)&&h!==l||(n[d]=m)}),n},Zu,ry;function x_(){return ry||(ry=1,Zu={version:"0.27.2"}),Zu}var t$=x_().version,zn=Eo,ep={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){ep[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var sy={};ep.transitional=function(t,i,n){function r(s,o){return"[Axios v"+t$+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(t===!1)throw new zn(r(o," has been removed"+(i?" in "+i:"")),zn.ERR_DEPRECATED);return i&&!sy[o]&&(sy[o]=!0,console.warn(r(o," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(s,o,a):!0}};function i$(e,t,i){if(typeof e!="object")throw new zn("options must be an object",zn.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),r=n.length;r-- >0;){var s=n[r],o=t[s];if(o){var a=e[s],l=a===void 0||o(a,s,e);if(l!==!0)throw new zn("option "+s+" must be "+l,zn.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new zn("Unknown option "+s,zn.ERR_BAD_OPTION)}}var n$={assertOptions:i$,validators:ep},M_=Mt,r$=C_,oy=P2,ay=e$,Bc=L_,s$=D_,$_=n$,ys=$_.validators;function to(e){this.defaults=e,this.interceptors={request:new oy,response:new oy}}to.prototype.request=function(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=Bc(this.defaults,i),i.method?i.method=i.method.toLowerCase():this.defaults.method?i.method=this.defaults.method.toLowerCase():i.method="get";var n=i.transitional;n!==void 0&&$_.assertOptions(n,{silentJSONParsing:ys.transitional(ys.boolean),forcedJSONParsing:ys.transitional(ys.boolean),clarifyTimeoutError:ys.transitional(ys.boolean)},!1);var r=[],s=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(i)===!1||(s=s&&m.synchronous,r.unshift(m.fulfilled,m.rejected))});var o=[];this.interceptors.response.forEach(function(m){o.push(m.fulfilled,m.rejected)});var a;if(!s){var l=[ay,void 0];for(Array.prototype.unshift.apply(l,r),l=l.concat(o),a=Promise.resolve(i);l.length;)a=a.then(l.shift(),l.shift());return a}for(var c=i;r.length;){var u=r.shift(),d=r.shift();try{c=u(c)}catch(h){d(h);break}}try{a=ay(c)}catch(h){return Promise.reject(h)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};to.prototype.getUri=function(t){t=Bc(this.defaults,t);var i=s$(t.baseURL,t.url);return r$(i,t.params,t.paramsSerializer)};M_.forEach(["delete","get","head","options"],function(t){to.prototype[t]=function(i,n){return this.request(Bc(n||{},{method:t,url:i,data:(n||{}).data}))}});M_.forEach(["post","put","patch"],function(t){function i(n){return function(s,o,a){return this.request(Bc(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}to.prototype[t]=i(),to.prototype[t+"Form"]=i(!0)});var o$=to,Qu,ly;function a$(){if(ly)return Qu;ly=1;var e=$c();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var r=this;this.promise.then(function(s){if(!!r._listeners){var o,a=r._listeners.length;for(o=0;o<a;o++)r._listeners[o](s);r._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(l){r.subscribe(l),o=l}).then(s);return a.cancel=function(){r.unsubscribe(o)},a},i(function(o){r.reason||(r.reason=new e(o),n(r.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},t.prototype.unsubscribe=function(n){if(!!this._listeners){var r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}},t.source=function(){var n,r=new t(function(o){n=o});return{token:r,cancel:n}},Qu=t,Qu}var ed,cy;function l$(){return cy||(cy=1,ed=function(t){return function(n){return t.apply(null,n)}}),ed}var td,uy;function c$(){if(uy)return td;uy=1;var e=Mt;return td=function(i){return e.isObject(i)&&i.isAxiosError===!0},td}var dy=Mt,u$=w_,_l=o$,d$=L_,h$=Qf;function U_(e){var t=new _l(e),i=u$(_l.prototype.request,t);return dy.extend(i,_l.prototype,t),dy.extend(i,t),i.create=function(r){return U_(d$(e,r))},i}var si=U_(h$);si.Axios=_l;si.CanceledError=$c();si.CancelToken=a$();si.isCancel=N_();si.VERSION=x_().version;si.toFormData=O_;si.AxiosError=Eo;si.Cancel=si.CanceledError;si.all=function(t){return Promise.all(t)};si.spread=l$();si.isAxiosError=c$();qf.exports=si;qf.exports.default=si;(function(e){e.exports=qf.exports})(__);const B_=o2(__.exports),Ls=B_.create({baseURL:u_,timeout:8e3});B_.create({baseURL:"https://api.100ms.live/v2/rooms"});var F_={exports:{}};/*!
* sweetalert2 v11.4.34
* Released under the MIT License.
*/(function(e,t){(function(i,n){e.exports=n()})(yn,function(){var i={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const n="swal2-",r=f=>{const p={};for(const g in f)p[f[g]]=n+f[g];return p},s=r(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","no-war"]),o=r(["success","warning","info","question","error"]),a="SweetAlert2:",l=f=>{const p=[];for(let g=0;g<f.length;g++)p.indexOf(f[g])===-1&&p.push(f[g]);return p},c=f=>f.charAt(0).toUpperCase()+f.slice(1),u=f=>{console.warn("".concat(a," ").concat(typeof f=="object"?f.join(" "):f))},d=f=>{console.error("".concat(a," ").concat(f))},h=[],m=f=>{h.includes(f)||(h.push(f),u(f))},v=(f,p)=>{m('"'.concat(f,'" is deprecated and will be removed in the next major release. Please use "').concat(p,'" instead.'))},y=f=>typeof f=="function"?f():f,T=f=>f&&typeof f.toPromise=="function",S=f=>T(f)?f.toPromise():Promise.resolve(f),R=f=>f&&Promise.resolve(f)===f,O=f=>f[Math.floor(Math.random()*f.length)],x=()=>document.body.querySelector(".".concat(s.container)),B=f=>{const p=x();return p?p.querySelector(f):null},ie=f=>B(".".concat(f)),ee=()=>ie(s.popup),de=()=>ie(s.icon),se=()=>ie(s.title),ye=()=>ie(s["html-container"]),Ae=()=>ie(s.image),ke=()=>ie(s["progress-steps"]),_e=()=>ie(s["validation-message"]),Ie=()=>B(".".concat(s.actions," .").concat(s.confirm)),ge=()=>B(".".concat(s.actions," .").concat(s.deny)),Oe=()=>ie(s["input-label"]),we=()=>B(".".concat(s.loader)),E=()=>B(".".concat(s.actions," .").concat(s.cancel)),C=()=>ie(s.actions),D=()=>ie(s.footer),N=()=>ie(s["timer-progress-bar"]),M=()=>ie(s.close),F=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,H=()=>{const f=Array.from(ee().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((g,k)=>{const G=parseInt(g.getAttribute("tabindex")),be=parseInt(k.getAttribute("tabindex"));return G>be?1:G<be?-1:0}),p=Array.from(ee().querySelectorAll(F)).filter(g=>g.getAttribute("tabindex")!=="-1");return l(f.concat(p)).filter(g=>oe(g))},A=()=>he(document.body,s.shown)&&!he(document.body,s["toast-shown"])&&!he(document.body,s["no-backdrop"]),L=()=>ee()&&he(ee(),s.toast),I=()=>ee().hasAttribute("data-loading"),j={previousBodyPadding:null},pe=(f,p)=>{if(f.textContent="",p){const k=new DOMParser().parseFromString(p,"text/html");Array.from(k.querySelector("head").childNodes).forEach(G=>{f.appendChild(G)}),Array.from(k.querySelector("body").childNodes).forEach(G=>{f.appendChild(G)})}},he=(f,p)=>{if(!p)return!1;const g=p.split(/\s+/);for(let k=0;k<g.length;k++)if(!f.classList.contains(g[k]))return!1;return!0},ue=(f,p)=>{Array.from(f.classList).forEach(g=>{!Object.values(s).includes(g)&&!Object.values(o).includes(g)&&!Object.values(p.showClass).includes(g)&&f.classList.remove(g)})},ne=(f,p,g)=>{if(ue(f,p),p.customClass&&p.customClass[g]){if(typeof p.customClass[g]!="string"&&!p.customClass[g].forEach)return u("Invalid type of customClass.".concat(g,'! Expected string or iterable object, got "').concat(typeof p.customClass[g],'"'));U(f,p.customClass[g])}},w=(f,p)=>{if(!p)return null;switch(p){case"select":case"textarea":case"file":return f.querySelector(".".concat(s.popup," > .").concat(s[p]));case"checkbox":return f.querySelector(".".concat(s.popup," > .").concat(s.checkbox," input"));case"radio":return f.querySelector(".".concat(s.popup," > .").concat(s.radio," input:checked"))||f.querySelector(".".concat(s.popup," > .").concat(s.radio," input:first-child"));case"range":return f.querySelector(".".concat(s.popup," > .").concat(s.range," input"));default:return f.querySelector(".".concat(s.popup," > .").concat(s.input))}},P=f=>{if(f.focus(),f.type!=="file"){const p=f.value;f.value="",f.value=p}},$=(f,p,g)=>{!f||!p||(typeof p=="string"&&(p=p.split(/\s+/).filter(Boolean)),p.forEach(k=>{Array.isArray(f)?f.forEach(G=>{g?G.classList.add(k):G.classList.remove(k)}):g?f.classList.add(k):f.classList.remove(k)}))},U=(f,p)=>{$(f,p,!0)},V=(f,p)=>{$(f,p,!1)},q=(f,p)=>{const g=Array.from(f.children);for(let k=0;k<g.length;k++){const G=g[k];if(G instanceof HTMLElement&&he(G,p))return G}},Y=(f,p,g)=>{g==="".concat(parseInt(g))&&(g=parseInt(g)),g||parseInt(g)===0?f.style[p]=typeof g=="number"?"".concat(g,"px"):g:f.style.removeProperty(p)},K=function(f){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";f.style.display=p},z=f=>{f.style.display="none"},W=(f,p,g,k)=>{const G=f.querySelector(p);G&&(G.style[g]=k)},me=function(f,p){let g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";p?K(f,g):z(f)},oe=f=>!!(f&&(f.offsetWidth||f.offsetHeight||f.getClientRects().length)),X=()=>!oe(Ie())&&!oe(ge())&&!oe(E()),le=f=>f.scrollHeight>f.clientHeight,ae=f=>{const p=window.getComputedStyle(f),g=parseFloat(p.getPropertyValue("animation-duration")||"0"),k=parseFloat(p.getPropertyValue("transition-duration")||"0");return g>0||k>0},Ee=function(f){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const g=N();oe(g)&&(p&&(g.style.transition="none",g.style.width="100%"),setTimeout(()=>{g.style.transition="width ".concat(f/1e3,"s linear"),g.style.width="0%"},10))},Fe=()=>{const f=N(),p=parseInt(window.getComputedStyle(f).width);f.style.removeProperty("transition"),f.style.width="100%";const g=parseInt(window.getComputedStyle(f).width),k=p/g*100;f.style.removeProperty("transition"),f.style.width="".concat(k,"%")},je=100,ce={},Se=()=>{ce.previousActiveElement instanceof HTMLElement?(ce.previousActiveElement.focus(),ce.previousActiveElement=null):document.body&&document.body.focus()},jt=f=>new Promise(p=>{if(!f)return p();const g=window.scrollX,k=window.scrollY;ce.restoreFocusTimeout=setTimeout(()=>{Se(),p()},je),window.scrollTo(g,k)}),mi=()=>typeof window>"u"||typeof document>"u",br=`
 <div aria-labelledby="`.concat(s.title,'" aria-describedby="').concat(s["html-container"],'" class="').concat(s.popup,`" tabindex="-1">
   <button type="button" class="`).concat(s.close,`"></button>
   <ul class="`).concat(s["progress-steps"],`"></ul>
   <div class="`).concat(s.icon,`"></div>
   <img class="`).concat(s.image,`" />
   <h2 class="`).concat(s.title,'" id="').concat(s.title,`"></h2>
   <div class="`).concat(s["html-container"],'" id="').concat(s["html-container"],`"></div>
   <input class="`).concat(s.input,`" />
   <input type="file" class="`).concat(s.file,`" />
   <div class="`).concat(s.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(s.select,`"></select>
   <div class="`).concat(s.radio,`"></div>
   <label for="`).concat(s.checkbox,'" class="').concat(s.checkbox,`">
     <input type="checkbox" />
     <span class="`).concat(s.label,`"></span>
   </label>
   <textarea class="`).concat(s.textarea,`"></textarea>
   <div class="`).concat(s["validation-message"],'" id="').concat(s["validation-message"],`"></div>
   <div class="`).concat(s.actions,`">
     <div class="`).concat(s.loader,`"></div>
     <button type="button" class="`).concat(s.confirm,`"></button>
     <button type="button" class="`).concat(s.deny,`"></button>
     <button type="button" class="`).concat(s.cancel,`"></button>
   </div>
   <div class="`).concat(s.footer,`"></div>
   <div class="`).concat(s["timer-progress-bar-container"],`">
     <div class="`).concat(s["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),Vt=()=>{const f=x();return f?(f.remove(),V([document.documentElement,document.body],[s["no-backdrop"],s["toast-shown"],s["has-column"]]),!0):!1},kt=()=>{ce.currentInstance.resetValidationMessage()},La=()=>{const f=ee(),p=q(f,s.input),g=q(f,s.file),k=f.querySelector(".".concat(s.range," input")),G=f.querySelector(".".concat(s.range," output")),be=q(f,s.select),pt=f.querySelector(".".concat(s.checkbox," input")),Ji=q(f,s.textarea);p.oninput=kt,g.onchange=kt,be.onchange=kt,pt.onchange=kt,Ji.oninput=kt,k.oninput=()=>{kt(),G.value=k.value},k.onchange=()=>{kt(),G.value=k.value}},kw=f=>typeof f=="string"?document.querySelector(f):f,Cw=f=>{const p=ee();p.setAttribute("role",f.toast?"alert":"dialog"),p.setAttribute("aria-live",f.toast?"polite":"assertive"),f.toast||p.setAttribute("aria-modal","true")},Aw=f=>{window.getComputedStyle(f).direction==="rtl"&&U(x(),s.rtl)},Rw=f=>{const p=Vt();if(mi()){d("SweetAlert2 requires document to initialize");return}const g=document.createElement("div");g.className=s.container,p&&U(g,s["no-transition"]),pe(g,br);const k=kw(f.target);k.appendChild(g),Cw(f),Aw(k),La()},Kc=(f,p)=>{f instanceof HTMLElement?p.appendChild(f):typeof f=="object"?Pw(f,p):f&&pe(p,f)},Pw=(f,p)=>{f.jquery?Iw(p,f):pe(p,f.toString())},Iw=(f,p)=>{if(f.textContent="",0 in p)for(let g=0;g in p;g++)f.appendChild(p[g].cloneNode(!0));else f.appendChild(p.cloneNode(!0))},wo=(()=>{if(mi())return!1;const f=document.createElement("div"),p={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const g in p)if(Object.prototype.hasOwnProperty.call(p,g)&&typeof f.style[g]<"u")return p[g];return!1})(),Ow=()=>{const f=document.createElement("div");f.className=s["scrollbar-measure"],document.body.appendChild(f);const p=f.getBoundingClientRect().width-f.clientWidth;return document.body.removeChild(f),p},Dw=(f,p)=>{const g=C(),k=we();!p.showConfirmButton&&!p.showDenyButton&&!p.showCancelButton?z(g):K(g),ne(g,p,"actions"),Nw(g,k,p),pe(k,p.loaderHtml),ne(k,p,"loader")};function Nw(f,p,g){const k=Ie(),G=ge(),be=E();Wc(k,"confirm",g),Wc(G,"deny",g),Wc(be,"cancel",g),Lw(k,G,be,g),g.reverseButtons&&(g.toast?(f.insertBefore(be,k),f.insertBefore(G,k)):(f.insertBefore(be,p),f.insertBefore(G,p),f.insertBefore(k,p)))}function Lw(f,p,g,k){if(!k.buttonsStyling)return V([f,p,g],s.styled);U([f,p,g],s.styled),k.confirmButtonColor&&(f.style.backgroundColor=k.confirmButtonColor,U(f,s["default-outline"])),k.denyButtonColor&&(p.style.backgroundColor=k.denyButtonColor,U(p,s["default-outline"])),k.cancelButtonColor&&(g.style.backgroundColor=k.cancelButtonColor,U(g,s["default-outline"]))}function Wc(f,p,g){me(f,g["show".concat(c(p),"Button")],"inline-block"),pe(f,g["".concat(p,"ButtonText")]),f.setAttribute("aria-label",g["".concat(p,"ButtonAriaLabel")]),f.className=s[p],ne(f,g,"".concat(p,"Button")),U(f,g["".concat(p,"ButtonClass")])}const xw=(f,p)=>{const g=M();pe(g,p.closeButtonHtml),ne(g,p,"closeButton"),me(g,p.showCloseButton),g.setAttribute("aria-label",p.closeButtonAriaLabel)},Mw=(f,p)=>{const g=x();!g||($w(g,p.backdrop),Uw(g,p.position),Bw(g,p.grow),ne(g,p,"container"))};function $w(f,p){typeof p=="string"?f.style.background=p:p||U([document.documentElement,document.body],s["no-backdrop"])}function Uw(f,p){p in s?U(f,s[p]):(u('The "position" parameter is not valid, defaulting to "center"'),U(f,s.center))}function Bw(f,p){if(p&&typeof p=="string"){const g="grow-".concat(p);g in s&&U(f,s[g])}}const Fw=["input","file","range","select","radio","checkbox","textarea"],jw=(f,p)=>{const g=ee(),k=i.innerParams.get(f),G=!k||p.input!==k.input;Fw.forEach(be=>{const pt=q(g,s[be]);Hw(be,p.inputAttributes),pt.className=s[be],G&&z(pt)}),p.input&&(G&&Vw(p),Kw(p))},Vw=f=>{if(!Xt[f.input])return d('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(f.input,'"'));const p=Lp(f.input),g=Xt[f.input](p,f);K(p),setTimeout(()=>{P(g)})},Gw=f=>{for(let p=0;p<f.attributes.length;p++){const g=f.attributes[p].name;["type","value","style"].includes(g)||f.removeAttribute(g)}},Hw=(f,p)=>{const g=w(ee(),f);if(!!g){Gw(g);for(const k in p)g.setAttribute(k,p[k])}},Kw=f=>{const p=Lp(f.input);typeof f.customClass=="object"&&U(p,f.customClass.input)},qc=(f,p)=>{(!f.placeholder||p.inputPlaceholder)&&(f.placeholder=p.inputPlaceholder)},So=(f,p,g)=>{if(g.inputLabel){f.id=s.input;const k=document.createElement("label"),G=s["input-label"];k.setAttribute("for",f.id),k.className=G,typeof g.customClass=="object"&&U(k,g.customClass.inputLabel),k.innerText=g.inputLabel,p.insertAdjacentElement("beforebegin",k)}},Lp=f=>q(ee(),s[f]||s.input),xa=(f,p)=>{["string","number"].includes(typeof p)?f.value="".concat(p):R(p)||u('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof p,'"'))},Xt={};Xt.text=Xt.email=Xt.password=Xt.number=Xt.tel=Xt.url=(f,p)=>(xa(f,p.inputValue),So(f,f,p),qc(f,p),f.type=p.input,f),Xt.file=(f,p)=>(So(f,f,p),qc(f,p),f),Xt.range=(f,p)=>{const g=f.querySelector("input"),k=f.querySelector("output");return xa(g,p.inputValue),g.type=p.input,xa(k,p.inputValue),So(g,f,p),f},Xt.select=(f,p)=>{if(f.textContent="",p.inputPlaceholder){const g=document.createElement("option");pe(g,p.inputPlaceholder),g.value="",g.disabled=!0,g.selected=!0,f.appendChild(g)}return So(f,f,p),f},Xt.radio=f=>(f.textContent="",f),Xt.checkbox=(f,p)=>{const g=w(ee(),"checkbox");g.value="1",g.id=s.checkbox,g.checked=Boolean(p.inputValue);const k=f.querySelector("span");return pe(k,p.inputPlaceholder),g},Xt.textarea=(f,p)=>{xa(f,p.inputValue),qc(f,p),So(f,f,p);const g=k=>parseInt(window.getComputedStyle(k).marginLeft)+parseInt(window.getComputedStyle(k).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const k=parseInt(window.getComputedStyle(ee()).width),G=()=>{const be=f.offsetWidth+g(f);be>k?ee().style.width="".concat(be,"px"):ee().style.width=null};new MutationObserver(G).observe(f,{attributes:!0,attributeFilter:["style"]})}}),f};const Ww=(f,p)=>{const g=ye();ne(g,p,"htmlContainer"),p.html?(Kc(p.html,g),K(g,"block")):p.text?(g.textContent=p.text,K(g,"block")):z(g),jw(f,p)},qw=(f,p)=>{const g=D();me(g,p.footer),p.footer&&Kc(p.footer,g),ne(g,p,"footer")},zw=(f,p)=>{const g=i.innerParams.get(f),k=de();if(g&&p.icon===g.icon){Mp(k,p),xp(k,p);return}if(!p.icon&&!p.iconHtml){z(k);return}if(p.icon&&Object.keys(o).indexOf(p.icon)===-1){d('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(p.icon,'"')),z(k);return}K(k),Mp(k,p),xp(k,p),U(k,p.showClass.icon)},xp=(f,p)=>{for(const g in o)p.icon!==g&&V(f,o[g]);U(f,o[p.icon]),Zw(f,p),Jw(),ne(f,p,"icon")},Jw=()=>{const f=ee(),p=window.getComputedStyle(f).getPropertyValue("background-color"),g=f.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let k=0;k<g.length;k++)g[k].style.backgroundColor=p},Yw=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Xw=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Mp=(f,p)=>{let g=f.innerHTML,k;p.iconHtml?k=$p(p.iconHtml):p.icon==="success"?(k=Yw,g=g.replace(/ style=".*?"/g,"")):p.icon==="error"?k=Xw:k=$p({question:"?",warning:"!",info:"i"}[p.icon]),g.trim()!==k.trim()&&pe(f,k)},Zw=(f,p)=>{if(!!p.iconColor){f.style.color=p.iconColor,f.style.borderColor=p.iconColor;for(const g of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])W(f,g,"backgroundColor",p.iconColor);W(f,".swal2-success-ring","borderColor",p.iconColor)}},$p=f=>'<div class="'.concat(s["icon-content"],'">').concat(f,"</div>"),Qw=(f,p)=>{const g=Ae();if(!p.imageUrl)return z(g);K(g,""),g.setAttribute("src",p.imageUrl),g.setAttribute("alt",p.imageAlt),Y(g,"width",p.imageWidth),Y(g,"height",p.imageHeight),g.className=s.image,ne(g,p,"image")},eS=(f,p)=>{const g=x(),k=ee();p.toast?(Y(g,"width",p.width),k.style.width="100%",k.insertBefore(we(),de())):Y(k,"width",p.width),Y(k,"padding",p.padding),p.color&&(k.style.color=p.color),p.background&&(k.style.background=p.background),z(_e()),tS(k,p)},tS=(f,p)=>{f.className="".concat(s.popup," ").concat(oe(f)?p.showClass.popup:""),p.toast?(U([document.documentElement,document.body],s["toast-shown"]),U(f,s.toast)):U(f,s.modal),ne(f,p,"popup"),typeof p.customClass=="string"&&U(f,p.customClass),p.icon&&U(f,s["icon-".concat(p.icon)])},iS=(f,p)=>{const g=ke();if(!p.progressSteps||p.progressSteps.length===0)return z(g);K(g),g.textContent="",p.currentProgressStep>=p.progressSteps.length&&u("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),p.progressSteps.forEach((k,G)=>{const be=nS(k);if(g.appendChild(be),G===p.currentProgressStep&&U(be,s["active-progress-step"]),G!==p.progressSteps.length-1){const pt=rS(p);g.appendChild(pt)}})},nS=f=>{const p=document.createElement("li");return U(p,s["progress-step"]),pe(p,f),p},rS=f=>{const p=document.createElement("li");return U(p,s["progress-step-line"]),f.progressStepsDistance&&Y(p,"width",f.progressStepsDistance),p},sS=(f,p)=>{const g=se();me(g,p.title||p.titleText,"block"),p.title&&Kc(p.title,g),p.titleText&&(g.innerText=p.titleText),ne(g,p,"title")},Up=(f,p)=>{eS(f,p),Mw(f,p),iS(f,p),zw(f,p),Qw(f,p),sS(f,p),xw(f,p),Ww(f,p),Dw(f,p),qw(f,p),typeof p.didRender=="function"&&p.didRender(ee())};function Bp(){const f=i.innerParams.get(this);if(!f)return;const p=i.domCache.get(this);z(p.loader),L()?f.icon&&K(de()):oS(p),V([p.popup,p.actions],s.loading),p.popup.removeAttribute("aria-busy"),p.popup.removeAttribute("data-loading"),p.confirmButton.disabled=!1,p.denyButton.disabled=!1,p.cancelButton.disabled=!1}const oS=f=>{const p=f.popup.getElementsByClassName(f.loader.getAttribute("data-button-to-replace"));p.length?K(p[0],"inline-block"):X()&&z(f.actions)};function aS(f){const p=i.innerParams.get(f||this),g=i.domCache.get(f||this);return g?w(g.popup,p.input):null}const lS=()=>oe(ee()),Fp=()=>Ie()&&Ie().click(),cS=()=>ge()&&ge().click(),uS=()=>E()&&E().click(),os=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),jp=f=>{f.keydownTarget&&f.keydownHandlerAdded&&(f.keydownTarget.removeEventListener("keydown",f.keydownHandler,{capture:f.keydownListenerCapture}),f.keydownHandlerAdded=!1)},dS=(f,p,g,k)=>{jp(p),g.toast||(p.keydownHandler=G=>fS(f,G,k),p.keydownTarget=g.keydownListenerCapture?window:ee(),p.keydownListenerCapture=g.keydownListenerCapture,p.keydownTarget.addEventListener("keydown",p.keydownHandler,{capture:p.keydownListenerCapture}),p.keydownHandlerAdded=!0)},zc=(f,p,g)=>{const k=H();if(k.length)return p=p+g,p===k.length?p=0:p===-1&&(p=k.length-1),k[p].focus();ee().focus()},Vp=["ArrowRight","ArrowDown"],hS=["ArrowLeft","ArrowUp"],fS=(f,p,g)=>{const k=i.innerParams.get(f);!k||p.isComposing||p.keyCode===229||(k.stopKeydownPropagation&&p.stopPropagation(),p.key==="Enter"?pS(f,p,k):p.key==="Tab"?mS(p,k):[...Vp,...hS].includes(p.key)?gS(p.key):p.key==="Escape"&&vS(p,k,g))},pS=(f,p,g)=>{if(!!y(g.allowEnterKey)&&p.target&&f.getInput()&&p.target instanceof HTMLElement&&p.target.outerHTML===f.getInput().outerHTML){if(["textarea","file"].includes(g.input))return;Fp(),p.preventDefault()}},mS=(f,p)=>{const g=f.target,k=H();let G=-1;for(let be=0;be<k.length;be++)if(g===k[be]){G=be;break}f.shiftKey?zc(p,G,-1):zc(p,G,1),f.stopPropagation(),f.preventDefault()},gS=f=>{const p=Ie(),g=ge(),k=E();if(document.activeElement instanceof HTMLElement&&![p,g,k].includes(document.activeElement))return;const G=Vp.includes(f)?"nextElementSibling":"previousElementSibling";let be=document.activeElement;for(let pt=0;pt<C().children.length;pt++){if(be=be[G],!be)return;if(be instanceof HTMLButtonElement&&oe(be))break}be instanceof HTMLButtonElement&&be.focus()},vS=(f,p,g)=>{y(p.allowEscapeKey)&&(f.preventDefault(),g(os.esc))};var ko={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const yS=()=>{Array.from(document.body.children).forEach(p=>{p===x()||p.contains(x())||(p.hasAttribute("aria-hidden")&&p.setAttribute("data-previous-aria-hidden",p.getAttribute("aria-hidden")),p.setAttribute("aria-hidden","true"))})},Gp=()=>{Array.from(document.body.children).forEach(p=>{p.hasAttribute("data-previous-aria-hidden")?(p.setAttribute("aria-hidden",p.getAttribute("data-previous-aria-hidden")),p.removeAttribute("data-previous-aria-hidden")):p.removeAttribute("aria-hidden")})},bS=()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!he(document.body,s.iosfix)){const p=document.body.scrollTop;document.body.style.top="".concat(p*-1,"px"),U(document.body,s.iosfix),TS(),ES()}},ES=()=>{const f=navigator.userAgent,p=!!f.match(/iPad/i)||!!f.match(/iPhone/i),g=!!f.match(/WebKit/i);p&&g&&!f.match(/CriOS/i)&&ee().scrollHeight>window.innerHeight-44&&(x().style.paddingBottom="".concat(44,"px"))},TS=()=>{const f=x();let p;f.ontouchstart=g=>{p=_S(g)},f.ontouchmove=g=>{p&&(g.preventDefault(),g.stopPropagation())}},_S=f=>{const p=f.target,g=x();return wS(f)||SS(f)?!1:p===g||!le(g)&&p instanceof HTMLElement&&p.tagName!=="INPUT"&&p.tagName!=="TEXTAREA"&&!(le(ye())&&ye().contains(p))},wS=f=>f.touches&&f.touches.length&&f.touches[0].touchType==="stylus",SS=f=>f.touches&&f.touches.length>1,kS=()=>{if(he(document.body,s.iosfix)){const f=parseInt(document.body.style.top,10);V(document.body,s.iosfix),document.body.style.top="",document.body.scrollTop=f*-1}},CS=()=>{j.previousBodyPadding===null&&document.body.scrollHeight>window.innerHeight&&(j.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(j.previousBodyPadding+Ow(),"px"))},AS=()=>{j.previousBodyPadding!==null&&(document.body.style.paddingRight="".concat(j.previousBodyPadding,"px"),j.previousBodyPadding=null)};function Hp(f,p,g,k){L()?Kp(f,k):(jt(g).then(()=>Kp(f,k)),jp(ce)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(p.setAttribute("style","display:none !important"),p.removeAttribute("class"),p.innerHTML=""):p.remove(),A()&&(AS(),kS(),Gp()),RS()}function RS(){V([document.documentElement,document.body],[s.shown,s["height-auto"],s["no-backdrop"],s["toast-shown"]])}function Ma(f){f=DS(f);const p=ko.swalPromiseResolve.get(this),g=IS(this);this.isAwaitingPromise()?f.isDismissed||(Co(this),p(f)):g&&p(f)}function PS(){return!!i.awaitingPromise.get(this)}const IS=f=>{const p=ee();if(!p)return!1;const g=i.innerParams.get(f);if(!g||he(p,g.hideClass.popup))return!1;V(p,g.showClass.popup),U(p,g.hideClass.popup);const k=x();return V(k,g.showClass.backdrop),U(k,g.hideClass.backdrop),NS(f,p,g),!0};function OS(f){const p=ko.swalPromiseReject.get(this);Co(this),p&&p(f)}const Co=f=>{f.isAwaitingPromise()&&(i.awaitingPromise.delete(f),i.innerParams.get(f)||f._destroy())},DS=f=>typeof f>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},f),NS=(f,p,g)=>{const k=x(),G=wo&&ae(p);typeof g.willClose=="function"&&g.willClose(p),G?LS(f,p,k,g.returnFocus,g.didClose):Hp(f,k,g.returnFocus,g.didClose)},LS=(f,p,g,k,G)=>{ce.swalCloseEventFinishedCallback=Hp.bind(null,f,g,k,G),p.addEventListener(wo,function(be){be.target===p&&(ce.swalCloseEventFinishedCallback(),delete ce.swalCloseEventFinishedCallback)})},Kp=(f,p)=>{setTimeout(()=>{typeof p=="function"&&p.bind(f.params)(),f._destroy()})};function Wp(f,p,g){const k=i.domCache.get(f);p.forEach(G=>{k[G].disabled=g})}function qp(f,p){if(!!f)if(f.type==="radio"){const k=f.parentNode.parentNode.querySelectorAll("input");for(let G=0;G<k.length;G++)k[G].disabled=p}else f.disabled=p}function xS(){Wp(this,["confirmButton","denyButton","cancelButton"],!1)}function MS(){Wp(this,["confirmButton","denyButton","cancelButton"],!0)}function $S(){qp(this.getInput(),!1)}function US(){qp(this.getInput(),!0)}function BS(f){const p=i.domCache.get(this),g=i.innerParams.get(this);pe(p.validationMessage,f),p.validationMessage.className=s["validation-message"],g.customClass&&g.customClass.validationMessage&&U(p.validationMessage,g.customClass.validationMessage),K(p.validationMessage);const k=this.getInput();k&&(k.setAttribute("aria-invalid",!0),k.setAttribute("aria-describedby",s["validation-message"]),P(k),U(k,s.inputerror))}function FS(){const f=i.domCache.get(this);f.validationMessage&&z(f.validationMessage);const p=this.getInput();p&&(p.removeAttribute("aria-invalid"),p.removeAttribute("aria-describedby"),V(p,s.inputerror))}function jS(){return i.domCache.get(this).progressSteps}const as={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},VS=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],GS={},HS=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],zp=f=>Object.prototype.hasOwnProperty.call(as,f),Jp=f=>VS.indexOf(f)!==-1,Jc=f=>GS[f],KS=f=>{zp(f)||u('Unknown parameter "'.concat(f,'"'))},WS=f=>{HS.includes(f)&&u('The parameter "'.concat(f,'" is incompatible with toasts'))},qS=f=>{Jc(f)&&v(f,Jc(f))},zS=f=>{!f.backdrop&&f.allowOutsideClick&&u('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const p in f)KS(p),f.toast&&WS(p),qS(p)};function JS(f){const p=ee(),g=i.innerParams.get(this);if(!p||he(p,g.hideClass.popup))return u("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const k=YS(f),G=Object.assign({},g,k);Up(this,G),i.innerParams.set(this,G),Object.defineProperties(this,{params:{value:Object.assign({},this.params,f),writable:!1,enumerable:!0}})}const YS=f=>{const p={};return Object.keys(f).forEach(g=>{Jp(g)?p[g]=f[g]:u("Invalid parameter to update: ".concat(g))}),p};function XS(){const f=i.domCache.get(this),p=i.innerParams.get(this);if(!p){Yp(this);return}f.popup&&ce.swalCloseEventFinishedCallback&&(ce.swalCloseEventFinishedCallback(),delete ce.swalCloseEventFinishedCallback),typeof p.didDestroy=="function"&&p.didDestroy(),ZS(this)}const ZS=f=>{Yp(f),delete f.params,delete ce.keydownHandler,delete ce.keydownTarget,delete ce.currentInstance},Yp=f=>{f.isAwaitingPromise()?(Yc(i,f),i.awaitingPromise.set(f,!0)):(Yc(ko,f),Yc(i,f))},Yc=(f,p)=>{for(const g in f)f[g].delete(p)};var Xp=Object.freeze({hideLoading:Bp,disableLoading:Bp,getInput:aS,close:Ma,isAwaitingPromise:PS,rejectPromise:OS,handleAwaitingPromise:Co,closePopup:Ma,closeModal:Ma,closeToast:Ma,enableButtons:xS,disableButtons:MS,enableInput:$S,disableInput:US,showValidationMessage:BS,resetValidationMessage:FS,getProgressSteps:jS,update:JS,_destroy:XS});const ls=f=>{let p=ee();p||new Ua,p=ee();const g=we();L()?z(de()):QS(p,f),K(g),p.setAttribute("data-loading","true"),p.setAttribute("aria-busy","true"),p.focus()},QS=(f,p)=>{const g=C(),k=we();!p&&oe(Ie())&&(p=Ie()),K(g),p&&(z(p),k.setAttribute("data-button-to-replace",p.className)),k.parentNode.insertBefore(k,p),U([f,g],s.loading)},ek=(f,p)=>{p.input==="select"||p.input==="radio"?sk(f,p):["text","email","number","tel","textarea"].includes(p.input)&&(T(p.inputValue)||R(p.inputValue))&&(ls(Ie()),ok(f,p))},tk=(f,p)=>{const g=f.getInput();if(!g)return null;switch(p.input){case"checkbox":return ik(g);case"radio":return nk(g);case"file":return rk(g);default:return p.inputAutoTrim?g.value.trim():g.value}},ik=f=>f.checked?1:0,nk=f=>f.checked?f.value:null,rk=f=>f.files.length?f.getAttribute("multiple")!==null?f.files:f.files[0]:null,sk=(f,p)=>{const g=ee(),k=G=>{ak[p.input](g,Xc(G),p)};T(p.inputOptions)||R(p.inputOptions)?(ls(Ie()),S(p.inputOptions).then(G=>{f.hideLoading(),k(G)})):typeof p.inputOptions=="object"?k(p.inputOptions):d("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof p.inputOptions))},ok=(f,p)=>{const g=f.getInput();z(g),S(p.inputValue).then(k=>{g.value=p.input==="number"?"".concat(parseFloat(k)||0):"".concat(k),K(g),g.focus(),f.hideLoading()}).catch(k=>{d("Error in inputValue promise: ".concat(k)),g.value="",K(g),g.focus(),f.hideLoading()})},ak={select:(f,p,g)=>{const k=q(f,s.select),G=(be,pt,Ji)=>{const Gt=document.createElement("option");Gt.value=Ji,pe(Gt,pt),Gt.selected=Zp(Ji,g.inputValue),be.appendChild(Gt)};p.forEach(be=>{const pt=be[0],Ji=be[1];if(Array.isArray(Ji)){const Gt=document.createElement("optgroup");Gt.label=pt,Gt.disabled=!1,k.appendChild(Gt),Ji.forEach(us=>G(Gt,us[1],us[0]))}else G(k,Ji,pt)}),k.focus()},radio:(f,p,g)=>{const k=q(f,s.radio);p.forEach(be=>{const pt=be[0],Ji=be[1],Gt=document.createElement("input"),us=document.createElement("label");Gt.type="radio",Gt.name=s.radio,Gt.value=pt,Zp(pt,g.inputValue)&&(Gt.checked=!0);const tu=document.createElement("span");pe(tu,Ji),tu.className=s.label,us.appendChild(Gt),us.appendChild(tu),k.appendChild(us)});const G=k.querySelectorAll("input");G.length&&G[0].focus()}},Xc=f=>{const p=[];return typeof Map<"u"&&f instanceof Map?f.forEach((g,k)=>{let G=g;typeof G=="object"&&(G=Xc(G)),p.push([k,G])}):Object.keys(f).forEach(g=>{let k=f[g];typeof k=="object"&&(k=Xc(k)),p.push([g,k])}),p},Zp=(f,p)=>p&&p.toString()===f.toString(),lk=f=>{const p=i.innerParams.get(f);f.disableButtons(),p.input?Qp(f,"confirm"):Qc(f,!0)},ck=f=>{const p=i.innerParams.get(f);f.disableButtons(),p.returnInputValueOnDeny?Qp(f,"deny"):Zc(f,!1)},uk=(f,p)=>{f.disableButtons(),p(os.cancel)},Qp=(f,p)=>{const g=i.innerParams.get(f);if(!g.input){d('The "input" parameter is needed to be set when using returnInputValueOn'.concat(c(p)));return}const k=tk(f,g);g.inputValidator?dk(f,k,p):f.getInput().checkValidity()?p==="deny"?Zc(f,k):Qc(f,k):(f.enableButtons(),f.showValidationMessage(g.validationMessage))},dk=(f,p,g)=>{const k=i.innerParams.get(f);f.disableInput(),Promise.resolve().then(()=>S(k.inputValidator(p,k.validationMessage))).then(be=>{f.enableButtons(),f.enableInput(),be?f.showValidationMessage(be):g==="deny"?Zc(f,p):Qc(f,p)})},Zc=(f,p)=>{const g=i.innerParams.get(f||void 0);g.showLoaderOnDeny&&ls(ge()),g.preDeny?(i.awaitingPromise.set(f||void 0,!0),Promise.resolve().then(()=>S(g.preDeny(p,g.validationMessage))).then(G=>{G===!1?(f.hideLoading(),Co(f)):f.close({isDenied:!0,value:typeof G>"u"?p:G})}).catch(G=>tm(f||void 0,G))):f.close({isDenied:!0,value:p})},em=(f,p)=>{f.close({isConfirmed:!0,value:p})},tm=(f,p)=>{f.rejectPromise(p)},Qc=(f,p)=>{const g=i.innerParams.get(f||void 0);g.showLoaderOnConfirm&&ls(),g.preConfirm?(f.resetValidationMessage(),i.awaitingPromise.set(f||void 0,!0),Promise.resolve().then(()=>S(g.preConfirm(p,g.validationMessage))).then(G=>{oe(_e())||G===!1?(f.hideLoading(),Co(f)):em(f,typeof G>"u"?p:G)}).catch(G=>tm(f||void 0,G))):em(f,p)},hk=(f,p,g)=>{i.innerParams.get(f).toast?fk(f,p,g):(mk(p),gk(p),vk(f,p,g))},fk=(f,p,g)=>{p.popup.onclick=()=>{const k=i.innerParams.get(f);k&&(pk(k)||k.timer||k.input)||g(os.close)}},pk=f=>f.showConfirmButton||f.showDenyButton||f.showCancelButton||f.showCloseButton;let $a=!1;const mk=f=>{f.popup.onmousedown=()=>{f.container.onmouseup=function(p){f.container.onmouseup=void 0,p.target===f.container&&($a=!0)}}},gk=f=>{f.container.onmousedown=()=>{f.popup.onmouseup=function(p){f.popup.onmouseup=void 0,(p.target===f.popup||f.popup.contains(p.target))&&($a=!0)}}},vk=(f,p,g)=>{p.container.onclick=k=>{const G=i.innerParams.get(f);if($a){$a=!1;return}k.target===p.container&&y(G.allowOutsideClick)&&g(os.backdrop)}},yk=f=>typeof f=="object"&&f.jquery,im=f=>f instanceof Element||yk(f),bk=f=>{const p={};return typeof f[0]=="object"&&!im(f[0])?Object.assign(p,f[0]):["title","html","icon"].forEach((g,k)=>{const G=f[k];typeof G=="string"||im(G)?p[g]=G:G!==void 0&&d("Unexpected type of ".concat(g,'! Expected "string" or "Element", got ').concat(typeof G))}),p};function Ek(){const f=this;for(var p=arguments.length,g=new Array(p),k=0;k<p;k++)g[k]=arguments[k];return new f(...g)}function Tk(f){class p extends this{_main(k,G){return super._main(k,Object.assign({},f,G))}}return p}const _k=()=>ce.timeout&&ce.timeout.getTimerLeft(),nm=()=>{if(ce.timeout)return Fe(),ce.timeout.stop()},rm=()=>{if(ce.timeout){const f=ce.timeout.start();return Ee(f),f}},wk=()=>{const f=ce.timeout;return f&&(f.running?nm():rm())},Sk=f=>{if(ce.timeout){const p=ce.timeout.increase(f);return Ee(p,!0),p}},kk=()=>ce.timeout&&ce.timeout.isRunning();let sm=!1;const eu={};function Ck(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";eu[f]=this,sm||(document.body.addEventListener("click",Ak),sm=!0)}const Ak=f=>{for(let p=f.target;p&&p!==document;p=p.parentNode)for(const g in eu){const k=p.getAttribute(g);if(k){eu[g].fire({template:k});return}}};var Rk=Object.freeze({isValidParameter:zp,isUpdatableParameter:Jp,isDeprecatedParameter:Jc,argsToParams:bk,isVisible:lS,clickConfirm:Fp,clickDeny:cS,clickCancel:uS,getContainer:x,getPopup:ee,getTitle:se,getHtmlContainer:ye,getImage:Ae,getIcon:de,getInputLabel:Oe,getCloseButton:M,getActions:C,getConfirmButton:Ie,getDenyButton:ge,getCancelButton:E,getLoader:we,getFooter:D,getTimerProgressBar:N,getFocusableElements:H,getValidationMessage:_e,isLoading:I,fire:Ek,mixin:Tk,showLoading:ls,enableLoading:ls,getTimerLeft:_k,stopTimer:nm,resumeTimer:rm,toggleTimer:wk,increaseTimer:Sk,isTimerRunning:kk,bindClickHandler:Ck});class Pk{constructor(p,g){this.callback=p,this.remaining=g,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(p){const g=this.running;return g&&this.stop(),this.remaining+=p,g&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const om=["swal-title","swal-html","swal-footer"],Ik=f=>{const p=typeof f.template=="string"?document.querySelector(f.template):f.template;if(!p)return{};const g=p.content;return $k(g),Object.assign(Ok(g),Dk(g),Nk(g),Lk(g),xk(g),Mk(g,om))},Ok=f=>{const p={};return Array.from(f.querySelectorAll("swal-param")).forEach(k=>{Er(k,["name","value"]);const G=k.getAttribute("name"),be=k.getAttribute("value");typeof as[G]=="boolean"&&be==="false"&&(p[G]=!1),typeof as[G]=="object"&&(p[G]=JSON.parse(be))}),p},Dk=f=>{const p={};return Array.from(f.querySelectorAll("swal-button")).forEach(k=>{Er(k,["type","color","aria-label"]);const G=k.getAttribute("type");p["".concat(G,"ButtonText")]=k.innerHTML,p["show".concat(c(G),"Button")]=!0,k.hasAttribute("color")&&(p["".concat(G,"ButtonColor")]=k.getAttribute("color")),k.hasAttribute("aria-label")&&(p["".concat(G,"ButtonAriaLabel")]=k.getAttribute("aria-label"))}),p},Nk=f=>{const p={},g=f.querySelector("swal-image");return g&&(Er(g,["src","width","height","alt"]),g.hasAttribute("src")&&(p.imageUrl=g.getAttribute("src")),g.hasAttribute("width")&&(p.imageWidth=g.getAttribute("width")),g.hasAttribute("height")&&(p.imageHeight=g.getAttribute("height")),g.hasAttribute("alt")&&(p.imageAlt=g.getAttribute("alt"))),p},Lk=f=>{const p={},g=f.querySelector("swal-icon");return g&&(Er(g,["type","color"]),g.hasAttribute("type")&&(p.icon=g.getAttribute("type")),g.hasAttribute("color")&&(p.iconColor=g.getAttribute("color")),p.iconHtml=g.innerHTML),p},xk=f=>{const p={},g=f.querySelector("swal-input");g&&(Er(g,["type","label","placeholder","value"]),p.input=g.getAttribute("type")||"text",g.hasAttribute("label")&&(p.inputLabel=g.getAttribute("label")),g.hasAttribute("placeholder")&&(p.inputPlaceholder=g.getAttribute("placeholder")),g.hasAttribute("value")&&(p.inputValue=g.getAttribute("value")));const k=Array.from(f.querySelectorAll("swal-input-option"));return k.length&&(p.inputOptions={},k.forEach(G=>{Er(G,["value"]);const be=G.getAttribute("value"),pt=G.innerHTML;p.inputOptions[be]=pt})),p},Mk=(f,p)=>{const g={};for(const k in p){const G=p[k],be=f.querySelector(G);be&&(Er(be,[]),g[G.replace(/^swal-/,"")]=be.innerHTML.trim())}return g},$k=f=>{const p=om.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(f.children).forEach(g=>{const k=g.tagName.toLowerCase();p.includes(k)||u("Unrecognized element <".concat(k,">"))})},Er=(f,p)=>{Array.from(f.attributes).forEach(g=>{p.indexOf(g.name)===-1&&u(['Unrecognized attribute "'.concat(g.name,'" on <').concat(f.tagName.toLowerCase(),">."),"".concat(p.length?"Allowed attributes are: ".concat(p.join(", ")):"To set the value, use HTML within the element.")])})},am=10,Uk=f=>{const p=x(),g=ee();typeof f.willOpen=="function"&&f.willOpen(g);const G=window.getComputedStyle(document.body).overflowY;jk(p,g,f),setTimeout(()=>{Bk(p,g)},am),A()&&(Fk(p,f.scrollbarPadding,G),yS()),!L()&&!ce.previousActiveElement&&(ce.previousActiveElement=document.activeElement),typeof f.didOpen=="function"&&setTimeout(()=>f.didOpen(g)),V(p,s["no-transition"])},lm=f=>{const p=ee();if(f.target!==p)return;const g=x();p.removeEventListener(wo,lm),g.style.overflowY="auto"},Bk=(f,p)=>{wo&&ae(p)?(f.style.overflowY="hidden",p.addEventListener(wo,lm)):f.style.overflowY="auto"},Fk=(f,p,g)=>{bS(),p&&g!=="hidden"&&CS(),setTimeout(()=>{f.scrollTop=0})},jk=(f,p,g)=>{U(f,g.showClass.backdrop),p.style.setProperty("opacity","0","important"),K(p,"grid"),setTimeout(()=>{U(p,g.showClass.popup),p.style.removeProperty("opacity")},am),U([document.documentElement,document.body],s.shown),g.heightAuto&&g.backdrop&&!g.toast&&U([document.documentElement,document.body],s["height-auto"])};var cm={email:(f,p)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(f)?Promise.resolve():Promise.resolve(p||"Invalid email address"),url:(f,p)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(f)?Promise.resolve():Promise.resolve(p||"Invalid URL")};function Vk(f){f.inputValidator||Object.keys(cm).forEach(p=>{f.input===p&&(f.inputValidator=cm[p])})}function Gk(f){(!f.target||typeof f.target=="string"&&!document.querySelector(f.target)||typeof f.target!="string"&&!f.target.appendChild)&&(u('Target parameter is not valid, defaulting to "body"'),f.target="body")}function Hk(f){Vk(f),f.showLoaderOnConfirm&&!f.preConfirm&&u(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),Gk(f),typeof f.title=="string"&&(f.title=f.title.split(`
`).join("<br />")),Rw(f)}let zi;class cs{constructor(){if(typeof window>"u")return;zi=this;for(var p=arguments.length,g=new Array(p),k=0;k<p;k++)g[k]=arguments[k];const G=Object.freeze(this.constructor.argsToParams(g));Object.defineProperties(this,{params:{value:G,writable:!1,enumerable:!0,configurable:!0}});const be=zi._main(zi.params);i.promise.set(this,be)}_main(p){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};zS(Object.assign({},g,p)),ce.currentInstance&&(ce.currentInstance._destroy(),A()&&Gp()),ce.currentInstance=zi;const k=Wk(p,g);Hk(k),Object.freeze(k),ce.timeout&&(ce.timeout.stop(),delete ce.timeout),clearTimeout(ce.restoreFocusTimeout);const G=qk(zi);return Up(zi,k),i.innerParams.set(zi,k),Kk(zi,G,k)}then(p){return i.promise.get(this).then(p)}finally(p){return i.promise.get(this).finally(p)}}const Kk=(f,p,g)=>new Promise((k,G)=>{const be=pt=>{f.close({isDismissed:!0,dismiss:pt})};ko.swalPromiseResolve.set(f,k),ko.swalPromiseReject.set(f,G),p.confirmButton.onclick=()=>{lk(f)},p.denyButton.onclick=()=>{ck(f)},p.cancelButton.onclick=()=>{uk(f,be)},p.closeButton.onclick=()=>{be(os.close)},hk(f,p,be),dS(f,ce,g,be),ek(f,g),Uk(g),zk(ce,g,be),Jk(p,g),setTimeout(()=>{p.container.scrollTop=0})}),Wk=(f,p)=>{const g=Ik(f),k=Object.assign({},as,p,g,f);return k.showClass=Object.assign({},as.showClass,k.showClass),k.hideClass=Object.assign({},as.hideClass,k.hideClass),k},qk=f=>{const p={popup:ee(),container:x(),actions:C(),confirmButton:Ie(),denyButton:ge(),cancelButton:E(),loader:we(),closeButton:M(),validationMessage:_e(),progressSteps:ke()};return i.domCache.set(f,p),p},zk=(f,p,g)=>{const k=N();z(k),p.timer&&(f.timeout=new Pk(()=>{g("timer"),delete f.timeout},p.timer),p.timerProgressBar&&(K(k),ne(k,p,"timerProgressBar"),setTimeout(()=>{f.timeout&&f.timeout.running&&Ee(p.timer)})))},Jk=(f,p)=>{if(!p.toast){if(!y(p.allowEnterKey)){Xk();return}Yk(f,p)||zc(p,-1,1)}},Yk=(f,p)=>p.focusDeny&&oe(f.denyButton)?(f.denyButton.focus(),!0):p.focusCancel&&oe(f.cancelButton)?(f.cancelButton.focus(),!0):p.focusConfirm&&oe(f.confirmButton)?(f.confirmButton.focus(),!0):!1,Xk=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)&&Math.random()<.1){const f=document.createElement("div");f.className="leave-russia-now-and-apply-your-skills-to-the-world";const p=O([{text:`\u0412 \u043D\u0438\u0436\u0435\u043F\u0440\u0438\u0432\u0435\u0434\u0451\u043D\u043D\u043E\u043C \u0432\u0438\u0434\u0435\u043E \u043E\u0431\u044A\u044F\u0441\u043D\u044F\u0435\u0442\u0441\u044F \u043A\u0430\u043A \u043A\u0430\u0436\u0434\u044B\u0439 \u0438\u0437 \u043D\u0430\u0441 \u043C\u043E\u0436\u0435\u0442 \u043F\u043E\u043C\u043E\u0447\u044C \u0432 \u0442\u043E\u043C,
        <strong>\u0447\u0442\u043E\u0431\u044B \u044D\u0442\u0430 \u0431\u0435\u0441\u0441\u043C\u044B\u0441\u043B\u0435\u043D\u043D\u0430\u044F \u0438 \u0431\u0435\u0441\u0447\u0435\u043B\u043E\u0432\u0435\u0447\u043D\u0430\u044F \u0432\u043E\u0439\u043D\u0430 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u043B\u0430\u0441\u044C</strong>:`,id:"4CfDhaRkw7I"},{text:"\u042D\u043C\u043F\u0430\u0442\u0438\u044F - \u0433\u043B\u0430\u0432\u043D\u043E\u0435 <strong>\u0447\u0435\u043B\u043E\u0432\u0435\u0447\u0435\u0441\u043A\u043E\u0435</strong> \u0447\u0443\u0432\u0441\u0442\u0432\u043E. \u0421\u043F\u043E\u0441\u043E\u0431\u043D\u043E\u0441\u0442\u044C \u0441\u043E\u043F\u0435\u0440\u0435\u0436\u0438\u0432\u0430\u0442\u044C. <strong>\u0421\u043F\u043E\u0441\u043E\u0431\u043D\u043E\u0441\u0442\u044C \u043F\u043E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0441\u0435\u0431\u044F \u043D\u0430 \u043C\u0435\u0441\u0442\u043E \u0434\u0440\u0443\u0433\u043E\u0433\u043E.</strong>",id:"s-GLAIY4DXA"}]);pe(f,`
      <div>
        \u0415\u0441\u043B\u0438 \u043C\u044B \u043D\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u043C \u0432\u043E\u0439\u043D\u0443, \u043E\u043D\u0430 \u043F\u0440\u0438\u0434\u0435\u0442 \u0432 \u0434\u043E\u043C <strong>\u043A\u0430\u0436\u0434\u043E\u0433\u043E \u0438\u0437 \u043D\u0430\u0441</strong> \u0438 \u0435\u0451 \u043F\u043E\u0441\u043B\u0435\u0434\u0441\u0442\u0432\u0438\u044F \u0431\u0443\u0434\u0443\u0442 <strong>\u0443\u0436\u0430\u0441\u0430\u044E\u0449\u0438\u043C\u0438</strong>.
      </div>
      <div>
        \u041F\u0443\u0442\u0438\u043D\u0441\u043A\u0438\u0439 \u0440\u0435\u0436\u0438\u043C \u0437\u0430 20 \u0441 \u043B\u0438\u0448\u043D\u0438\u043C \u043B\u0435\u0442 \u0441\u0432\u043E\u0435\u0433\u043E \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043E\u0432\u0430\u043D\u0438\u044F \u0432\u0434\u043E\u043B\u0431\u0438\u043B \u043D\u0430\u043C, \u0447\u0442\u043E \u043C\u044B \u0431\u0435\u0441\u0441\u0438\u043B\u044C\u043D\u044B \u0438 \u043E\u0434\u0438\u043D \u0447\u0435\u043B\u043E\u0432\u0435\u043A \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u043D\u0438\u0447\u0435\u0433\u043E \u0441\u0434\u0435\u043B\u0430\u0442\u044C. <strong>\u042D\u0442\u043E \u043D\u0435 \u0442\u0430\u043A!</strong>
      </div>
      <div>
        `.concat(p.text,`
      </div>
      <iframe width="560" height="315" src="https://www.youtube.com/embed/`).concat(p.id,`" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      <div>
        \u041D\u0435\u0442 \u0432\u043E\u0439\u043D\u0435!
      </div>
      `));const g=document.createElement("button");g.innerHTML="&times;",g.onclick=()=>f.remove(),f.appendChild(g),window.addEventListener("load",()=>{setTimeout(()=>{document.body.appendChild(f)},1e3)})}Object.assign(cs.prototype,Xp),Object.assign(cs,Rk),Object.keys(Xp).forEach(f=>{cs[f]=function(){if(zi)return zi[f](...arguments)}}),cs.DismissReason=os,cs.version="11.4.34";const Ua=cs;return Ua.default=Ua,Ua}),typeof yn<"u"&&yn.Sweetalert2&&(yn.swal=yn.sweetAlert=yn.Swal=yn.SweetAlert=yn.Sweetalert2),typeof document<"u"&&function(i,n){var r=i.createElement("style");if(i.getElementsByTagName("head")[0].appendChild(r),r.styleSheet)r.styleSheet.disabled||(r.styleSheet.cssText=n);else try{r.innerHTML=n}catch{r.innerText=n}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px hsla(0deg,0%,0%,.075),0 1px 2px hsla(0deg,0%,0%,.075),1px 2px 4px hsla(0deg,0%,0%,.075),1px 3px 8px hsla(0deg,0%,0%,.075),2px 4px 16px hsla(0deg,0%,0%,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto);grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 3px}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:0 0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:0 0;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:0 0;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .5s;animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .8s;animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-question-mark .8s;animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:0 0;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.leave-russia-now-and-apply-your-skills-to-the-world{display:flex;position:fixed;z-index:1939;top:0;right:0;bottom:0;left:0;flex-direction:column;align-items:center;justify-content:center;padding:25px 0 20px;background:#20232a;color:#fff;text-align:center}.leave-russia-now-and-apply-your-skills-to-the-world div{max-width:560px;margin:10px;line-height:146%}.leave-russia-now-and-apply-your-skills-to-the-world iframe{max-width:100%;max-height:55.5555555556vmin;margin:16px auto}.leave-russia-now-and-apply-your-skills-to-the-world strong{border-bottom:2px dashed #fff}.leave-russia-now-and-apply-your-skills-to-the-world button{display:flex;position:fixed;z-index:1940;top:0;right:0;align-items:center;justify-content:center;width:48px;height:48px;margin-right:10px;margin-bottom:-10px;border:none;background:0 0;color:#aaa;font-size:48px;font-weight:700;cursor:pointer}.leave-russia-now-and-apply-your-skills-to-the-world button:hover{color:#fff}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@-webkit-keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@-webkit-keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{background-color:transparent!important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent;pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')})(F_);const hy=F_.exports;class lh{static async confirm(t="Are you sure?",i="You won't be able to revert this!",n="Yes",r="warning"){try{return!!(await hy.fire({title:t,text:i,icon:r,confirmButtonText:n,showCancelButton:!0,reverseButtons:!0,confirmButtonColor:"var(--bs-primary)",cancelButtonColor:"var(--bs-secondary)"})).isConfirmed}catch{return!1}}static toast(t="Warning!",i="warning",n="top-end",r=3e3,s=!0){hy.fire({title:t,icon:i,position:n,timer:r,timerProgressBar:s,toast:!0,showConfirmButton:!1})}static error(t,i=""){if(_t.error(i,t),t.isAxiosError){const{response:n}=t,r=(n.data?n.data.error:n.data)||{message:"Invalid Request "+n.status};if(!r)return this.toast(t.message);this.toast(r.message||r.error||"error")}else this.toast(t.message||t,"error")}static success(t="Success!"){this.toast(t,"success")}}const fn=Object.create(null);fn.open="0";fn.close="1";fn.ping="2";fn.pong="3";fn.message="4";fn.upgrade="5";fn.noop="6";const wl=Object.create(null);Object.keys(fn).forEach(e=>{wl[fn[e]]=e});const f$={type:"error",data:"parser error"},p$=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",m$=typeof ArrayBuffer=="function",g$=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,j_=({type:e,data:t},i,n)=>p$&&t instanceof Blob?i?n(t):fy(t,n):m$&&(t instanceof ArrayBuffer||g$(t))?i?n(t):fy(new Blob([t]),n):n(fn[e]+(t||"")),fy=(e,t)=>{const i=new FileReader;return i.onload=function(){const n=i.result.split(",")[1];t("b"+n)},i.readAsDataURL(e)},py="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Go=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<py.length;e++)Go[py.charCodeAt(e)]=e;const v$=e=>{let t=e.length*.75,i=e.length,n,r=0,s,o,a,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const c=new ArrayBuffer(t),u=new Uint8Array(c);for(n=0;n<i;n+=4)s=Go[e.charCodeAt(n)],o=Go[e.charCodeAt(n+1)],a=Go[e.charCodeAt(n+2)],l=Go[e.charCodeAt(n+3)],u[r++]=s<<2|o>>4,u[r++]=(o&15)<<4|a>>2,u[r++]=(a&3)<<6|l&63;return c},y$=typeof ArrayBuffer=="function",V_=(e,t)=>{if(typeof e!="string")return{type:"message",data:G_(e,t)};const i=e.charAt(0);return i==="b"?{type:"message",data:b$(e.substring(1),t)}:wl[i]?e.length>1?{type:wl[i],data:e.substring(1)}:{type:wl[i]}:f$},b$=(e,t)=>{if(y$){const i=v$(e);return G_(i,t)}else return{base64:!0,data:e}},G_=(e,t)=>{switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}},H_=String.fromCharCode(30),E$=(e,t)=>{const i=e.length,n=new Array(i);let r=0;e.forEach((s,o)=>{j_(s,!1,a=>{n[o]=a,++r===i&&t(n.join(H_))})})},T$=(e,t)=>{const i=e.split(H_),n=[];for(let r=0;r<i.length;r++){const s=V_(i[r],t);if(n.push(s),s.type==="error")break}return n},K_=4;function Et(e){if(e)return _$(e)}function _$(e){for(var t in Et.prototype)e[t]=Et.prototype[t];return e}Et.prototype.on=Et.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Et.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this};Et.prototype.off=Et.prototype.removeListener=Et.prototype.removeAllListeners=Et.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i=this._callbacks["$"+e];if(!i)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,r=0;r<i.length;r++)if(n=i[r],n===t||n.fn===t){i.splice(r,1);break}return i.length===0&&delete this._callbacks["$"+e],this};Et.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),i=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(i){i=i.slice(0);for(var n=0,r=i.length;n<r;++n)i[n].apply(this,t)}return this};Et.prototype.emitReserved=Et.prototype.emit;Et.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Et.prototype.hasListeners=function(e){return!!this.listeners(e).length};const tr=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function W_(e,...t){return t.reduce((i,n)=>(e.hasOwnProperty(n)&&(i[n]=e[n]),i),{})}const w$=setTimeout,S$=clearTimeout;function Fc(e,t){t.useNativeTimers?(e.setTimeoutFn=w$.bind(tr),e.clearTimeoutFn=S$.bind(tr)):(e.setTimeoutFn=setTimeout.bind(tr),e.clearTimeoutFn=clearTimeout.bind(tr))}const k$=1.33;function C$(e){return typeof e=="string"?A$(e):Math.ceil((e.byteLength||e.size)*k$)}function A$(e){let t=0,i=0;for(let n=0,r=e.length;n<r;n++)t=e.charCodeAt(n),t<128?i+=1:t<2048?i+=2:t<55296||t>=57344?i+=3:(n++,i+=4);return i}class R$ extends Error{constructor(t,i,n){super(t),this.description=i,this.context=n,this.type="TransportError"}}class q_ extends Et{constructor(t){super(),this.writable=!1,Fc(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,i,n){return super.emitReserved("error",new R$(t,i,n)),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const i=V_(t,this.socket.binaryType);this.onPacket(i)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}}const z_="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ch=64,P$={};let my=0,al=0,gy;function vy(e){let t="";do t=z_[e%ch]+t,e=Math.floor(e/ch);while(e>0);return t}function J_(){const e=vy(+new Date);return e!==gy?(my=0,gy=e):e+"."+vy(my++)}for(;al<ch;al++)P$[z_[al]]=al;function Y_(e){let t="";for(let i in e)e.hasOwnProperty(i)&&(t.length&&(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t}function I$(e){let t={},i=e.split("&");for(let n=0,r=i.length;n<r;n++){let s=i[n].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}let X_=!1;try{X_=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const O$=X_;function Z_(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||O$))return new XMLHttpRequest}catch{}if(!t)try{return new tr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function D$(){}const N$=function(){return new Z_({xdomain:!1}).responseType!=null}();class L$ extends q_{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port,this.xs=t.secure!==n}const i=t&&t.forceBase64;this.supportsBinary=N$&&!i}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const i=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let n=0;this.polling&&(n++,this.once("pollComplete",function(){--n||i()})),this.writable||(n++,this.once("drain",function(){--n||i()}))}else i()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const i=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};T$(t,this.socket.binaryType).forEach(i),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,E$(t,i=>{this.doWrite(i,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.query||{};const i=this.opts.secure?"https":"http";let n="";this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=J_()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.opts.port&&(i==="https"&&Number(this.opts.port)!==443||i==="http"&&Number(this.opts.port)!==80)&&(n=":"+this.opts.port);const r=Y_(t),s=this.opts.hostname.indexOf(":")!==-1;return i+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new an(this.uri(),t)}doWrite(t,i){const n=this.request({method:"POST",data:t});n.on("success",i),n.on("error",(r,s)=>{this.onError("xhr post error",r,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(i,n)=>{this.onError("xhr poll error",i,n)}),this.pollXhr=t}}class an extends Et{constructor(t,i){super(),Fc(this,i),this.opts=i,this.method=i.method||"GET",this.uri=t,this.async=i.async!==!1,this.data=i.data!==void 0?i.data:null,this.create()}create(){const t=W_(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const i=this.xhr=new Z_(t);try{i.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let n in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,this.opts.extraHeaders[n])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(n){this.setTimeoutFn(()=>{this.onError(n)},0);return}typeof document<"u"&&(this.index=an.requestsCount++,an.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=D$,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete an.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}an.requestsCount=0;an.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",yy);else if(typeof addEventListener=="function"){const e="onpagehide"in tr?"pagehide":"unload";addEventListener(e,yy,!1)}}function yy(){for(let e in an.requests)an.requests.hasOwnProperty(e)&&an.requests[e].abort()}const x$=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,i)=>i(t,0))(),ll=tr.WebSocket||tr.MozWebSocket,by=!0,M$="arraybuffer",Ey=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class $$ extends q_{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),i=this.opts.protocols,n=Ey?{}:W_(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=by&&!Ey?i?new ll(t,i):new ll(t):new ll(t,i,n)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType||M$,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let i=0;i<t.length;i++){const n=t[i],r=i===t.length-1;j_(n,this.supportsBinary,s=>{const o={};try{by&&this.ws.send(s)}catch{}r&&x$(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const i=this.opts.secure?"wss":"ws";let n="";this.opts.port&&(i==="wss"&&Number(this.opts.port)!==443||i==="ws"&&Number(this.opts.port)!==80)&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=J_()),this.supportsBinary||(t.b64=1);const r=Y_(t),s=this.opts.hostname.indexOf(":")!==-1;return i+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}check(){return!!ll}}const U$={websocket:$$,polling:L$},B$=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,F$=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function uh(e){const t=e,i=e.indexOf("["),n=e.indexOf("]");i!=-1&&n!=-1&&(e=e.substring(0,i)+e.substring(i,n).replace(/:/g,";")+e.substring(n,e.length));let r=B$.exec(e||""),s={},o=14;for(;o--;)s[F$[o]]=r[o]||"";return i!=-1&&n!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=j$(s,s.path),s.queryKey=V$(s,s.query),s}function j$(e,t){const i=/\/{2,9}/g,n=t.replace(i,"/").split("/");return(t.substr(0,1)=="/"||t.length===0)&&n.splice(0,1),t.substr(t.length-1,1)=="/"&&n.splice(n.length-1,1),n}function V$(e,t){const i={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,r,s){r&&(i[r]=s)}),i}class Qn extends Et{constructor(t,i={}){super(),t&&typeof t=="object"&&(i=t,t=null),t?(t=uh(t),i.hostname=t.host,i.secure=t.protocol==="https"||t.protocol==="wss",i.port=t.port,t.query&&(i.query=t.query)):i.host&&(i.hostname=uh(i.host).host),Fc(this,i),this.secure=i.secure!=null?i.secure:typeof location<"u"&&location.protocol==="https:",i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.hostname=i.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=i.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=i.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=I$(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const i=Object.assign({},this.opts.query);i.EIO=K_,i.transport=t,this.id&&(i.sid=this.id);const n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new U$[t](n)}open(){let t;if(this.opts.rememberUpgrade&&Qn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",i=>this.onClose("transport close",i))}probe(t){let i=this.createTransport(t),n=!1;Qn.priorWebsocketSuccess=!1;const r=()=>{n||(i.send([{type:"ping",data:"probe"}]),i.once("packet",d=>{if(!n)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",i),!i)return;Qn.priorWebsocketSuccess=i.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=i.name,this.emitReserved("upgradeError",h)}}))};function s(){n||(n=!0,u(),i.close(),i=null)}const o=d=>{const h=new Error("probe error: "+d);h.transport=i.name,s(),this.emitReserved("upgradeError",h)};function a(){o("transport closed")}function l(){o("socket closed")}function c(d){i&&d.name!==i.name&&s()}const u=()=>{i.removeListener("open",r),i.removeListener("error",o),i.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};i.once("open",r),i.once("error",o),i.once("close",a),this.once("close",l),this.once("upgrading",c),i.open()}onOpen(){if(this.readyState="open",Qn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let t=0;const i=this.upgrades.length;for(;t<i;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const i=new Error("server error");i.code=t.data,this.onError(i);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let i=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(i+=C$(r)),n>0&&i>this.maxPayload)return this.writeBuffer.slice(0,n);i+=2}return this.writeBuffer}write(t,i,n){return this.sendPacket("message",t,i,n),this}send(t,i,n){return this.sendPacket("message",t,i,n),this}sendPacket(t,i,n,r){if(typeof i=="function"&&(r=i,i=void 0),typeof n=="function"&&(r=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const s={type:t,data:i,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),r&&this.once("flush",r),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},i=()=>{this.off("upgrade",i),this.off("upgradeError",i),t()},n=()=>{this.once("upgrade",i),this.once("upgradeError",i)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}onError(t){Qn.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,i){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,i),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const i=[];let n=0;const r=t.length;for(;n<r;n++)~this.transports.indexOf(t[n])&&i.push(t[n]);return i}}Qn.protocol=K_;function G$(e,t="",i){let n=e;i=i||typeof location<"u"&&location,e==null&&(e=i.protocol+"//"+i.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=i.protocol+e:e=i.host+e),/^(https?|wss?):\/\//.test(e)||(typeof i<"u"?e=i.protocol+"//"+e:e="https://"+e),n=uh(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const s=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+t,n.href=n.protocol+"://"+s+(i&&i.port===n.port?"":":"+n.port),n}const H$=typeof ArrayBuffer=="function",K$=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Q_=Object.prototype.toString,W$=typeof Blob=="function"||typeof Blob<"u"&&Q_.call(Blob)==="[object BlobConstructor]",q$=typeof File=="function"||typeof File<"u"&&Q_.call(File)==="[object FileConstructor]";function tp(e){return H$&&(e instanceof ArrayBuffer||K$(e))||W$&&e instanceof Blob||q$&&e instanceof File}function Sl(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let i=0,n=e.length;i<n;i++)if(Sl(e[i]))return!0;return!1}if(tp(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Sl(e.toJSON(),!0);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&Sl(e[i]))return!0;return!1}function z$(e){const t=[],i=e.data,n=e;return n.data=dh(i,t),n.attachments=t.length,{packet:n,buffers:t}}function dh(e,t){if(!e)return e;if(tp(e)){const i={_placeholder:!0,num:t.length};return t.push(e),i}else if(Array.isArray(e)){const i=new Array(e.length);for(let n=0;n<e.length;n++)i[n]=dh(e[n],t);return i}else if(typeof e=="object"&&!(e instanceof Date)){const i={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=dh(e[n],t));return i}return e}function J$(e,t){return e.data=hh(e.data,t),e.attachments=void 0,e}function hh(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let i=0;i<e.length;i++)e[i]=hh(e[i],t);else if(typeof e=="object")for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(e[i]=hh(e[i],t));return e}const Y$=5;var We;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(We||(We={}));class X${constructor(t){this.replacer=t}encode(t){return(t.type===We.EVENT||t.type===We.ACK)&&Sl(t)?(t.type=t.type===We.EVENT?We.BINARY_EVENT:We.BINARY_ACK,this.encodeAsBinary(t)):[this.encodeAsString(t)]}encodeAsString(t){let i=""+t.type;return(t.type===We.BINARY_EVENT||t.type===We.BINARY_ACK)&&(i+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(i+=t.nsp+","),t.id!=null&&(i+=t.id),t.data!=null&&(i+=JSON.stringify(t.data,this.replacer)),i}encodeAsBinary(t){const i=z$(t),n=this.encodeAsString(i.packet),r=i.buffers;return r.unshift(n),r}}class ip extends Et{constructor(t){super(),this.reviver=t}add(t){let i;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");i=this.decodeString(t),i.type===We.BINARY_EVENT||i.type===We.BINARY_ACK?(this.reconstructor=new Z$(i),i.attachments===0&&super.emitReserved("decoded",i)):super.emitReserved("decoded",i)}else if(tp(t)||t.base64)if(this.reconstructor)i=this.reconstructor.takeBinaryData(t),i&&(this.reconstructor=null,super.emitReserved("decoded",i));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let i=0;const n={type:Number(t.charAt(0))};if(We[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===We.BINARY_EVENT||n.type===We.BINARY_ACK){const s=i+1;for(;t.charAt(++i)!=="-"&&i!=t.length;);const o=t.substring(s,i);if(o!=Number(o)||t.charAt(i)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(i+1)==="/"){const s=i+1;for(;++i&&!(t.charAt(i)===","||i===t.length););n.nsp=t.substring(s,i)}else n.nsp="/";const r=t.charAt(i+1);if(r!==""&&Number(r)==r){const s=i+1;for(;++i;){const o=t.charAt(i);if(o==null||Number(o)!=o){--i;break}if(i===t.length)break}n.id=Number(t.substring(s,i+1))}if(t.charAt(++i)){const s=this.tryParse(t.substr(i));if(ip.isPayloadValid(n.type,s))n.data=s;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,i){switch(t){case We.CONNECT:return typeof i=="object";case We.DISCONNECT:return i===void 0;case We.CONNECT_ERROR:return typeof i=="string"||typeof i=="object";case We.EVENT:case We.BINARY_EVENT:return Array.isArray(i)&&i.length>0;case We.ACK:case We.BINARY_ACK:return Array.isArray(i)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class Z${constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const i=J$(this.reconPack,this.buffers);return this.finishedReconstruction(),i}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Q$=Object.freeze(Object.defineProperty({__proto__:null,protocol:Y$,get PacketType(){return We},Encoder:X$,Decoder:ip},Symbol.toStringTag,{value:"Module"}));function Ii(e,t,i){return e.on(t,i),function(){e.off(t,i)}}const eU=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class e0 extends Et{constructor(t,i,n){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=i,n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ii(t,"open",this.onopen.bind(this)),Ii(t,"packet",this.onpacket.bind(this)),Ii(t,"error",this.onerror.bind(this)),Ii(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...i){if(eU.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');i.unshift(t);const n={type:We.EVENT,data:i};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof i[i.length-1]=="function"){const o=this.ids++,a=i.pop();this._registerAckCallback(o,a),n.id=o}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(t,i){const n=this.flags.timeout;if(n===void 0){this.acks[t]=i;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===t&&this.sendBuffer.splice(s,1);i.call(this,new Error("operation has timed out"))},n);this.acks[t]=(...s)=>{this.io.clearTimeoutFn(r),i.apply(this,[null,...s])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this.packet({type:We.CONNECT,data:t})}):this.packet({type:We.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,i){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,i)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case We.CONNECT:if(t.data&&t.data.sid){const r=t.data.sid;this.onconnect(r)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case We.EVENT:case We.BINARY_EVENT:this.onevent(t);break;case We.ACK:case We.BINARY_ACK:this.onack(t);break;case We.DISCONNECT:this.ondisconnect();break;case We.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const i=t.data||[];t.id!=null&&i.push(this.ack(t.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const i=this._anyListeners.slice();for(const n of i)n.apply(this,t)}super.emit.apply(this,t)}ack(t){const i=this;let n=!1;return function(...r){n||(n=!0,i.packet({type:We.ACK,id:t,data:r}))}}onack(t){const i=this.acks[t.id];typeof i=="function"&&(i.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:We.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const i=this._anyListeners;for(let n=0;n<i.length;n++)if(t===i[n])return i.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const i=this._anyOutgoingListeners;for(let n=0;n<i.length;n++)if(t===i[n])return i.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const i=this._anyOutgoingListeners.slice();for(const n of i)n.apply(this,t.data)}}}function To(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}To.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),i=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-i:e+i}return Math.min(e,this.max)|0};To.prototype.reset=function(){this.attempts=0};To.prototype.setMin=function(e){this.ms=e};To.prototype.setMax=function(e){this.max=e};To.prototype.setJitter=function(e){this.jitter=e};class fh extends Et{constructor(t,i){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(i=t,t=void 0),i=i||{},i.path=i.path||"/socket.io",this.opts=i,Fc(this,i),this.reconnection(i.reconnection!==!1),this.reconnectionAttempts(i.reconnectionAttempts||1/0),this.reconnectionDelay(i.reconnectionDelay||1e3),this.reconnectionDelayMax(i.reconnectionDelayMax||5e3),this.randomizationFactor((n=i.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new To({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(i.timeout==null?2e4:i.timeout),this._readyState="closed",this.uri=t;const r=i.parser||Q$;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=i.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var i;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(i=this.backoff)===null||i===void 0||i.setMin(t),this)}randomizationFactor(t){var i;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(i=this.backoff)===null||i===void 0||i.setJitter(t),this)}reconnectionDelayMax(t){var i;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(i=this.backoff)===null||i===void 0||i.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Qn(this.uri,this.opts);const i=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=Ii(i,"open",function(){n.onopen(),t&&t()}),s=Ii(i,"error",o=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",o),t?t(o):n.maybeReconnectOnOpen()});if(this._timeout!==!1){const o=this._timeout;o===0&&r();const a=this.setTimeoutFn(()=>{r(),i.close(),i.emit("error",new Error("timeout"))},o);this.opts.autoUnref&&a.unref(),this.subs.push(function(){clearTimeout(a)})}return this.subs.push(r),this.subs.push(s),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ii(t,"ping",this.onping.bind(this)),Ii(t,"data",this.ondata.bind(this)),Ii(t,"error",this.onerror.bind(this)),Ii(t,"close",this.onclose.bind(this)),Ii(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch{this.onclose("parse error")}}ondecoded(t){this.emitReserved("packet",t)}onerror(t){this.emitReserved("error",t)}socket(t,i){let n=this.nsps[t];return n||(n=new e0(this,t,i),this.nsps[t]=n),n}_destroy(t){const i=Object.keys(this.nsps);for(const n of i)if(this.nsps[n].active)return;this._close()}_packet(t){const i=this.encoder.encode(t);for(let n=0;n<i.length;n++)this.engine.write(i[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,i){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,i),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const i=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(r=>{r?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",r)):t.onreconnect()}))},i);this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const xo={};function id(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const i=G$(e,t.path||"/socket.io"),n=i.source,r=i.id,s=i.path,o=xo[r]&&s in xo[r].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let l;return a?l=new fh(n,t):(xo[r]||(xo[r]=new fh(n,t)),l=xo[r]),i.query&&!t.query&&(t.query=i.queryKey),l.socket(i.path,t)}Object.assign(id,{Manager:fh,Socket:e0,io:id,connect:id});const tU={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class iU{constructor(t=!1,i=u_){}on(t,i){var n;return(n=this.socket)==null||n.on(t,i.bind(this)),this}onConnected(t){_t.log("[SOCKET_CONNECTION]",t),this.connected=!0,this.playback()}onAuthenticated(t){_t.log("[SOCKET_AUTHENTICATED]",t),this.authenticated=!0,this.playback()}authenticate(t){var i;(i=this.socket)==null||i.emit(tU.authenticate,t)}onError(t){_t.error("[SOCKET_ERROR]",t)}enqueue(t,i){_t.log("[ENQUEING_ACTION]",{action:t,payload:i}),this.queue.push({action:t,payload:i})}playback(){_t.log("[SOCKET_PLAYBACK]");const t=[...this.queue];this.queue=[],t.forEach(i=>{this.emit(i.action,i.payload)})}emit(t,i=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(t,i);if(!this.connected)return this.enqueue(t,i);this.socket.emit(t,i)}}class nU extends iU{constructor(){super(),this.on("error",this.onError)}onError(t){lh.toast(t.message,"error")}}const rU=new nU;function Ni(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(i.length?" "+i.map(function(r){return"'"+r+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function io(e){return!!e&&!!e[hi]}function Jr(e){var t;return!!e&&(function(i){if(!i||typeof i!="object")return!1;var n=Object.getPrototypeOf(i);if(n===null)return!0;var r=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return r===Object||typeof r=="function"&&Function.toString.call(r)===hU}(e)||Array.isArray(e)||!!e[Ry]||!!(!((t=e.constructor)===null||t===void 0)&&t[Ry])||np(e)||rp(e))}function pa(e,t,i){i===void 0&&(i=!1),_o(e)===0?(i?Object.keys:cp)(e).forEach(function(n){i&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,r){return t(r,n,e)})}function _o(e){var t=e[hi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:np(e)?2:rp(e)?3:0}function ph(e,t){return _o(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function sU(e,t){return _o(e)===2?e.get(t):e[t]}function t0(e,t,i){var n=_o(e);n===2?e.set(t,i):n===3?e.add(i):e[t]=i}function oU(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function np(e){return uU&&e instanceof Map}function rp(e){return dU&&e instanceof Set}function Rr(e){return e.o||e.t}function sp(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=fU(e);delete t[hi];for(var i=cp(t),n=0;n<i.length;n++){var r=i[n],s=t[r];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[r]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[r]})}return Object.create(Object.getPrototypeOf(e),t)}function op(e,t){return t===void 0&&(t=!1),ap(e)||io(e)||!Jr(e)||(_o(e)>1&&(e.set=e.add=e.clear=e.delete=aU),Object.freeze(e),t&&pa(e,function(i,n){return op(n,!0)},!0)),e}function aU(){Ni(2)}function ap(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function ln(e){var t=pU[e];return t||Ni(18,e),t}function Ty(){return ma}function nd(e,t){t&&(ln("Patches"),e.u=[],e.s=[],e.v=t)}function Ql(e){mh(e),e.p.forEach(lU),e.p=null}function mh(e){e===ma&&(ma=e.l)}function _y(e){return ma={p:[],l:ma,h:e,m:!0,_:0}}function lU(e){var t=e[hi];t.i===0||t.i===1?t.j():t.g=!0}function rd(e,t){t._=t.p.length;var i=t.p[0],n=e!==void 0&&e!==i;return t.h.O||ln("ES5").S(t,e,n),n?(i[hi].P&&(Ql(t),Ni(4)),Jr(e)&&(e=ec(t,e),t.l||tc(t,e)),t.u&&ln("Patches").M(i[hi].t,e,t.u,t.s)):e=ec(t,i,[]),Ql(t),t.u&&t.v(t.u,t.s),e!==i0?e:void 0}function ec(e,t,i){if(ap(t))return t;var n=t[hi];if(!n)return pa(t,function(a,l){return wy(e,n,t,a,l,i)},!0),t;if(n.A!==e)return t;if(!n.P)return tc(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var r=n.i===4||n.i===5?n.o=sp(n.k):n.o,s=r,o=!1;n.i===3&&(s=new Set(r),r.clear(),o=!0),pa(s,function(a,l){return wy(e,n,r,a,l,i,o)}),tc(e,r,!1),i&&e.u&&ln("Patches").N(n,i,e.u,e.s)}return n.o}function wy(e,t,i,n,r,s,o){if(io(r)){var a=ec(e,r,s&&t&&t.i!==3&&!ph(t.R,n)?s.concat(n):void 0);if(t0(i,n,a),!io(a))return;e.m=!1}else o&&i.add(r);if(Jr(r)&&!ap(r)){if(!e.h.D&&e._<1)return;ec(e,r),t&&t.A.l||tc(e,r)}}function tc(e,t,i){i===void 0&&(i=!1),!e.l&&e.h.D&&e.m&&op(t,i)}function sd(e,t){var i=e[hi];return(i?Rr(i):e)[t]}function Sy(e,t){if(t in e)for(var i=Object.getPrototypeOf(e);i;){var n=Object.getOwnPropertyDescriptor(i,t);if(n)return n;i=Object.getPrototypeOf(i)}}function gh(e){e.P||(e.P=!0,e.l&&gh(e.l))}function od(e){e.o||(e.o=sp(e.t))}function vh(e,t,i){var n=np(t)?ln("MapSet").F(t,i):rp(t)?ln("MapSet").T(t,i):e.O?function(r,s){var o=Array.isArray(r),a={i:o?1:0,A:s?s.A:Ty(),P:!1,I:!1,R:{},l:s,t:r,k:null,o:null,j:null,C:!1},l=a,c=yh;o&&(l=[a],c=Ho);var u=Proxy.revocable(l,c),d=u.revoke,h=u.proxy;return a.k=h,a.j=d,h}(t,i):ln("ES5").J(t,i);return(i?i.A:Ty()).p.push(n),n}function cU(e){return io(e)||Ni(22,e),function t(i){if(!Jr(i))return i;var n,r=i[hi],s=_o(i);if(r){if(!r.P&&(r.i<4||!ln("ES5").K(r)))return r.t;r.I=!0,n=ky(i,s),r.I=!1}else n=ky(i,s);return pa(n,function(o,a){r&&sU(r.t,o)===a||t0(n,o,t(a))}),s===3?new Set(n):n}(e)}function ky(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return sp(e)}var Cy,ma,lp=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",uU=typeof Map<"u",dU=typeof Set<"u",Ay=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",i0=lp?Symbol.for("immer-nothing"):((Cy={})["immer-nothing"]=!0,Cy),Ry=lp?Symbol.for("immer-draftable"):"__$immer_draftable",hi=lp?Symbol.for("immer-state"):"__$immer_state",hU=""+Object.prototype.constructor,cp=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,fU=Object.getOwnPropertyDescriptors||function(e){var t={};return cp(e).forEach(function(i){t[i]=Object.getOwnPropertyDescriptor(e,i)}),t},pU={},yh={get:function(e,t){if(t===hi)return e;var i=Rr(e);if(!ph(i,t))return function(r,s,o){var a,l=Sy(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(r.k):void 0}(e,i,t);var n=i[t];return e.I||!Jr(n)?n:n===sd(e.t,t)?(od(e),e.o[t]=vh(e.A.h,n,e)):n},has:function(e,t){return t in Rr(e)},ownKeys:function(e){return Reflect.ownKeys(Rr(e))},set:function(e,t,i){var n=Sy(Rr(e),t);if(n!=null&&n.set)return n.set.call(e.k,i),!0;if(!e.P){var r=sd(Rr(e),t),s=r==null?void 0:r[hi];if(s&&s.t===i)return e.o[t]=i,e.R[t]=!1,!0;if(oU(i,r)&&(i!==void 0||ph(e.t,t)))return!0;od(e),gh(e)}return e.o[t]===i&&(i!==void 0||t in e.o)||Number.isNaN(i)&&Number.isNaN(e.o[t])||(e.o[t]=i,e.R[t]=!0),!0},deleteProperty:function(e,t){return sd(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,od(e),gh(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var i=Rr(e),n=Reflect.getOwnPropertyDescriptor(i,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:i[t]}},defineProperty:function(){Ni(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ni(12)}},Ho={};pa(yh,function(e,t){Ho[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Ho.deleteProperty=function(e,t){return Ho.set.call(this,e,t,void 0)},Ho.set=function(e,t,i){return yh.set.call(this,e[0],t,i,e[0])};var mU=function(){function e(i){var n=this;this.O=Ay,this.D=!0,this.produce=function(r,s,o){if(typeof r=="function"&&typeof s!="function"){var a=s;s=r;var l=n;return function(y){var T=this;y===void 0&&(y=a);for(var S=arguments.length,R=Array(S>1?S-1:0),O=1;O<S;O++)R[O-1]=arguments[O];return l.produce(y,function(x){var B;return(B=s).call.apply(B,[T,x].concat(R))})}}var c;if(typeof s!="function"&&Ni(6),o!==void 0&&typeof o!="function"&&Ni(7),Jr(r)){var u=_y(n),d=vh(n,r,void 0),h=!0;try{c=s(d),h=!1}finally{h?Ql(u):mh(u)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(y){return nd(u,o),rd(y,u)},function(y){throw Ql(u),y}):(nd(u,o),rd(c,u))}if(!r||typeof r!="object"){if((c=s(r))===void 0&&(c=r),c===i0&&(c=void 0),n.D&&op(c,!0),o){var m=[],v=[];ln("Patches").M(r,c,m,v),o(m,v)}return c}Ni(21,r)},this.produceWithPatches=function(r,s){if(typeof r=="function")return function(c){for(var u=arguments.length,d=Array(u>1?u-1:0),h=1;h<u;h++)d[h-1]=arguments[h];return n.produceWithPatches(c,function(m){return r.apply(void 0,[m].concat(d))})};var o,a,l=n.produce(r,s,function(c,u){o=c,a=u});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(i==null?void 0:i.useProxies)=="boolean"&&this.setUseProxies(i.useProxies),typeof(i==null?void 0:i.autoFreeze)=="boolean"&&this.setAutoFreeze(i.autoFreeze)}var t=e.prototype;return t.createDraft=function(i){Jr(i)||Ni(8),io(i)&&(i=cU(i));var n=_y(this),r=vh(this,i,void 0);return r[hi].C=!0,mh(n),r},t.finishDraft=function(i,n){var r=i&&i[hi],s=r.A;return nd(s,n),rd(void 0,s)},t.setAutoFreeze=function(i){this.D=i},t.setUseProxies=function(i){i&&!Ay&&Ni(20),this.O=i},t.applyPatches=function(i,n){var r;for(r=n.length-1;r>=0;r--){var s=n[r];if(s.path.length===0&&s.op==="replace"){i=s.value;break}}r>-1&&(n=n.slice(r+1));var o=ln("Patches").$;return io(i)?o(i,n):this.produce(i,function(a){return o(a,n)})},e}(),fi=new mU,gU=fi.produce;fi.produceWithPatches.bind(fi);fi.setAutoFreeze.bind(fi);fi.setUseProxies.bind(fi);fi.applyPatches.bind(fi);fi.createDraft.bind(fi);fi.finishDraft.bind(fi);const vU=gU;function yU(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;for(let n=0;n<i.length;n++)if(!Object.prototype.hasOwnProperty.call(t,i[n])||!Object.is(e[i[n]],t[i[n]]))return!1;return!0}function bU(e){let t;const i=new Set,n=(c,u)=>{const d=typeof c=="function"?c(t):c;if(d!==t){const h=t;t=u?d:Object.assign({},t,d),i.forEach(m=>m(t,h))}},r=()=>t,s=(c,u=r,d=Object.is)=>{let h=u(t);function m(){const v=u(t);if(!d(h,v)){const y=h;c(h=v,y)}}return i.add(m),()=>i.delete(m)},l={setState:n,getState:r,subscribe:(c,u,d)=>u||d?s(c,u,d):(i.add(c),()=>i.delete(c)),destroy:()=>i.clear()};return t=e(n,r,l),l}let n0=!0,r0=!0;function kl(e,t,i){const n=e.match(t);return n&&n.length>=i&&parseInt(n[i],10)}function ns(e,t,i){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,r=n.addEventListener;n.addEventListener=function(o,a){if(o!==t)return r.apply(this,arguments);const l=c=>{const u=i(c);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(a,l),r.apply(this,[o,l])};const s=n.removeEventListener;n.removeEventListener=function(o,a){if(o!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(a))return s.apply(this,arguments);const l=this._eventMap[t].get(a);return this._eventMap[t].delete(a),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,l])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(o){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),o&&this.addEventListener(t,this["_on"+t]=o)},enumerable:!0,configurable:!0})}function EU(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(n0=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function TU(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(r0=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function s0(){if(typeof window=="object"){if(n0)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function up(e,t){!r0||console.warn(e+" is deprecated, please use "+t+" instead.")}function _U(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator)return t.browser="Not a browser.",t;const{navigator:i}=e;if(i.mozGetUserMedia)t.browser="firefox",t.version=kl(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=kl(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.RTCPeerConnection&&i.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=kl(i.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function Py(e){return Object.prototype.toString.call(e)==="[object Object]"}function o0(e){return Py(e)?Object.keys(e).reduce(function(t,i){const n=Py(e[i]),r=n?o0(e[i]):e[i],s=n&&!Object.keys(r).length;return r===void 0||s?t:Object.assign(t,{[i]:r})},{}):e}function bh(e,t,i){!t||i.has(t.id)||(i.set(t.id,t),Object.keys(t).forEach(n=>{n.endsWith("Id")?bh(e,e.get(t[n]),i):n.endsWith("Ids")&&t[n].forEach(r=>{bh(e,e.get(r),i)})}))}function Iy(e,t,i){const n=i?"outbound-rtp":"inbound-rtp",r=new Map;if(t===null)return r;const s=[];return e.forEach(o=>{o.type==="track"&&o.trackIdentifier===t.id&&s.push(o)}),s.forEach(o=>{e.forEach(a=>{a.type===n&&a.trackId===o.id&&bh(e,a,r)})}),r}const Oy=s0;function a0(e,t){const i=e&&e.navigator;if(!i.mediaDevices)return;const n=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const l={};return Object.keys(a).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const u=typeof a[c]=="object"?a[c]:{ideal:a[c]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(h,m){return h?h+m.charAt(0).toUpperCase()+m.slice(1):m==="deviceId"?"sourceId":m};if(u.ideal!==void 0){l.optional=l.optional||[];let h={};typeof u.ideal=="number"?(h[d("min",c)]=u.ideal,l.optional.push(h),h={},h[d("max",c)]=u.ideal,l.optional.push(h)):(h[d("",c)]=u.ideal,l.optional.push(h))}u.exact!==void 0&&typeof u.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[d("",c)]=u.exact):["min","max"].forEach(h=>{u[h]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[d(h,c)]=u[h])})}),a.advanced&&(l.optional=(l.optional||[]).concat(a.advanced)),l},r=function(a,l){if(t.version>=61)return l(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const c=function(u,d,h){d in u&&!(h in u)&&(u[h]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),c(a.audio,"autoGainControl","googAutoGainControl"),c(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=n(a.audio)}if(a&&typeof a.video=="object"){let c=a.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const u=t.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(i.mediaDevices.getSupportedConstraints&&i.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(c.exact==="environment"||c.ideal==="environment"?d=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(d=["front"]),d)return i.mediaDevices.enumerateDevices().then(h=>{h=h.filter(v=>v.kind==="videoinput");let m=h.find(v=>d.some(y=>v.label.toLowerCase().includes(y)));return!m&&h.length&&d.includes("back")&&(m=h[h.length-1]),m&&(a.video.deviceId=c.exact?{exact:m.deviceId}:{ideal:m.deviceId}),a.video=n(a.video),Oy("chrome: "+JSON.stringify(a)),l(a)})}a.video=n(a.video)}return Oy("chrome: "+JSON.stringify(a)),l(a)},s=function(a){return t.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,l,c){r(a,u=>{i.webkitGetUserMedia(u,l,d=>{c&&c(s(d))})})};if(i.getUserMedia=o.bind(i),i.mediaDevices.getUserMedia){const a=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(l){return r(l,c=>a(c).then(u=>{if(c.audio&&!u.getAudioTracks().length||c.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(s(u))))}}}function wU(e,t){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&!!e.navigator.mediaDevices){if(typeof t!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(r=>{const s=n.video&&n.video.width,o=n.video&&n.video.height,a=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:r,maxFrameRate:a||3}},s&&(n.video.mandatory.maxWidth=s),o&&(n.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(n)})}}}function l0(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function c0(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(i){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=i)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",r=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===r.track.id):s={track:r.track};const o=new Event("track");o.track=r.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[n.stream],this.dispatchEvent(o)}),n.stream.getTracks().forEach(r=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===r.id):s={track:r};const o=new Event("track");o.track=r,o.receiver=s,o.transceiver={receiver:s},o.streams=[n.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else ns(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function u0(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(r,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=r.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:r}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,l){let c=r.apply(this,arguments);return c||(c=t(this,a),this._senders.push(c)),c};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const l=this._senders.indexOf(a);l!==-1&&this._senders.splice(l,1)}}const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],i.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(t(this,o))})};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(l=>l.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const n=t.apply(this,[]);return n.forEach(r=>r._pc=this),n},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function d0(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[n,r,s]=arguments;if(arguments.length>0&&typeof n=="function")return t.apply(this,arguments);if(t.length===0&&(arguments.length===0||typeof n!="function"))return t.apply(this,[]);const o=function(l){const c={};return l.result().forEach(d=>{const h={id:d.id,timestamp:d.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[d.type]||d.type};d.names().forEach(m=>{h[m]=d.stat(m)}),c[h.id]=h}),c},a=function(l){return new Map(Object.keys(l).map(c=>[c,l[c]]))};if(arguments.length>=2){const l=function(c){r(a(o(c)))};return t.apply(this,[l,n])}return new Promise((l,c)=>{t.apply(this,[function(u){l(a(o(u)))},c])}).then(r,s)}}function h0(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const i=e.RTCPeerConnection.prototype.getSenders;i&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=i.apply(this,[]);return s.forEach(o=>o._pc=this),s});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=n.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>Iy(o,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=i.apply(this,[]);return r.forEach(s=>s._pc=this),r}),ns(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){const r=this;return this._pc.getStats().then(s=>Iy(s,r.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const n=arguments[0];let r,s,o;return this.getSenders().forEach(a=>{a.track===n&&(r?o=!0:r=a)}),this.getReceivers().forEach(a=>(a.track===n&&(s?o=!0:s=a),a.track===n)),o||r&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function f0(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const l=t.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(l)===-1&&this._shimmedLocalStreams[a.id].push(l):this._shimmedLocalStreams[a.id]=[a,l],l};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(c=>{if(this.getSenders().find(d=>d.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();i.apply(this,arguments);const l=this.getSenders().filter(c=>a.indexOf(c)===-1);this._shimmedLocalStreams[o.id]=[o].concat(l)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],n.apply(this,arguments)};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const l=this._shimmedLocalStreams[a].indexOf(o);l!==-1&&this._shimmedLocalStreams[a].splice(l,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),r.apply(this,arguments)}}function p0(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return f0(e);const i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const u=i.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(m=>m.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new e.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}n.apply(this,[u])};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},e.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const h=[].slice.call(arguments,1);if(h.length!==1||!h[0].getTracks().find(y=>y===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(y=>y.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const v=this._streams[d.id];if(v)v.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const y=new e.MediaStream([u]);this._streams[d.id]=y,this._reverseStreams[y.id]=d,this.addStream(y)}return this.getSenders().find(y=>y.track===u)};function s(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(h=>{const m=c._reverseStreams[h],v=c._streams[m.id];d=d.replace(new RegExp(v.id,"g"),m.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function o(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(h=>{const m=c._reverseStreams[h],v=c._streams[m.id];d=d.replace(new RegExp(m.id,"g"),v.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(c){const u=e.RTCPeerConnection.prototype[c],d={[c](){const h=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[v=>{const y=s(this,v);h[0].apply(null,[y])},v=>{h[1]&&h[1].apply(null,v)},arguments[2]]):u.apply(this,arguments).then(v=>s(this,v))}};e.RTCPeerConnection.prototype[c]=d[c]});const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const l=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const c=l.get.apply(this);return c.type===""?c:s(this,c)}}),e.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let h;Object.keys(this._streams).forEach(m=>{this._streams[m].getTracks().find(y=>u.track===y)&&(h=this._streams[m])}),h&&(h.getTracks().length===1?this.removeStream(this._reverseStreams[h.id]):h.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Eh(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),!!e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const n=e.RTCPeerConnection.prototype[i],r={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=r[i]})}function m0(e,t){ns(e,"negotiationneeded",i=>{const n=i.target;if(!((t.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return i})}const Dy=Object.freeze(Object.defineProperty({__proto__:null,shimMediaStream:l0,shimOnTrack:c0,shimGetSendersWithDtmf:u0,shimGetStats:d0,shimSenderReceiverGetStats:h0,shimAddTrackRemoveTrackWithNative:f0,shimAddTrackRemoveTrack:p0,shimPeerConnection:Eh,fixNegotiationNeeded:m0,shimGetUserMedia:a0,shimGetDisplayMedia:wU},Symbol.toStringTag,{value:"Module"}));function g0(e,t){const i=e&&e.navigator,n=e&&e.MediaStreamTrack;if(i.getUserMedia=function(r,s,o){up("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(r).then(s,o)},!(t.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const r=function(o,a,l){a in o&&!(l in o)&&(o[l]=o[a],delete o[a])},s=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),r(o.audio,"autoGainControl","mozAutoGainControl"),r(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},n&&n.prototype.getSettings){const o=n.prototype.getSettings;n.prototype.getSettings=function(){const a=o.apply(this,arguments);return r(a,"mozAutoGainControl","autoGainControl"),r(a,"mozNoiseSuppression","noiseSuppression"),a}}if(n&&n.prototype.applyConstraints){const o=n.prototype.applyConstraints;n.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),r(a,"autoGainControl","mozAutoGainControl"),r(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function SU(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||!e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return n.video===!0?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function v0(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Th(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const s=e.RTCPeerConnection.prototype[r],o={[r](){return arguments[0]=new(r==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[r]=o[r]});const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return n.apply(this,[s||null]).then(l=>{if(t.version<53&&!o)try{l.forEach(c=>{c.type=i[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;l.forEach((u,d)=>{l.set(d,Object.assign({},u,{type:i[u.type]||u.type}))})}return l}).then(o,a)}}function y0(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(s=>s._pc=this),r});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const r=i.apply(this,arguments);return r._pc=this,r}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function b0(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const n=t.apply(this,[]);return n.forEach(r=>r._pc=this),n}),ns(e,"track",i=>(i.receiver._pc=i.srcElement,i)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function E0(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(i){up("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&i.getTracks().includes(n.track)&&this.removeTrack(n)})})}function T0(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function _0(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;n===void 0&&(n=[]),n=[...n];const r=n.length>0;r&&n.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(r){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=n,o.sendEncodings=n,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function w0(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const n=t.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function S0(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function k0(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const Ny=Object.freeze(Object.defineProperty({__proto__:null,shimOnTrack:v0,shimPeerConnection:Th,shimSenderGetStats:y0,shimReceiverGetStats:b0,shimRemoveStream:E0,shimRTCDataChannel:T0,shimAddTransceiver:_0,shimGetParameters:w0,shimCreateOffer:S0,shimCreateAnswer:k0,shimGetUserMedia:g0,shimGetDisplayMedia:SU},Symbol.toStringTag,{value:"Module"}));function C0(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(r=>t.call(this,r,n)),n.getVideoTracks().forEach(r=>t.call(this,r,n))},e.RTCPeerConnection.prototype.addTrack=function(n,...r){return r&&r.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(i){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(i);if(n===-1)return;this._localStreams.splice(n,1);const r=i.getTracks();this.getSenders().forEach(s=>{r.includes(s.track)&&this.removeTrack(s)})})}}function A0(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(i){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=i),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(r=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(r))return;this._remoteStreams.push(r);const s=new Event("addstream");s.stream=r,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(r){r.streams.forEach(s=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(s)>=0)return;n._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,n.dispatchEvent(o)})}),t.apply(n,arguments)}}}function R0(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,i=t.createOffer,n=t.createAnswer,r=t.setLocalDescription,s=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=i.apply(this,[d]);return u?(h.then(c,u),Promise.resolve()):h},t.createAnswer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=n.apply(this,[d]);return u?(h.then(c,u),Promise.resolve()):h};let a=function(l,c,u){const d=r.apply(this,[l]);return u?(d.then(c,u),Promise.resolve()):d};t.setLocalDescription=a,a=function(l,c,u){const d=s.apply(this,[l]);return u?(d.then(c,u),Promise.resolve()):d},t.setRemoteDescription=a,a=function(l,c,u){const d=o.apply(this,[l]);return u?(d.then(c,u),Promise.resolve()):d},t.addIceCandidate=a}function P0(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const i=t.mediaDevices,n=i.getUserMedia.bind(i);t.mediaDevices.getUserMedia=r=>n(I0(r))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(n,r,s){t.mediaDevices.getUserMedia(n).then(r,s)}.bind(t))}function I0(e){return e&&e.video!==void 0?Object.assign({},e,{video:o0(e.video)}):e}function O0(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(n,r){if(n&&n.iceServers){const s=[];for(let o=0;o<n.iceServers.length;o++){let a=n.iceServers[o];a.urls===void 0&&a.url?(up("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(n.iceServers[o])}n.iceServers=s}return new t(n,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function D0(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function N0(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const r=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):n.offerToReceiveAudio===!0&&!r&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):n.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function L0(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const Ly=Object.freeze(Object.defineProperty({__proto__:null,shimLocalStreamsAPI:C0,shimRemoteStreamsAPI:A0,shimCallbacksAPI:R0,shimGetUserMedia:P0,shimConstraints:I0,shimRTCIceServerUrls:O0,shimTrackEventTransceiver:D0,shimCreateOfferLegacy:N0,shimAudioContext:L0},Symbol.toStringTag,{value:"Module"}));var dp={exports:{}};(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(i){return i.trim().split(`
`).map(n=>n.trim())},t.splitSections=function(i){return i.split(`
m=`).map((r,s)=>(s>0?"m="+r:r).trim()+`\r
`)},t.getDescription=function(i){const n=t.splitSections(i);return n&&n[0]},t.getMediaSections=function(i){const n=t.splitSections(i);return n.shift(),n},t.matchPrefix=function(i,n){return t.splitLines(i).filter(r=>r.indexOf(n)===0)},t.parseCandidate=function(i){let n;i.indexOf("a=candidate:")===0?n=i.substring(12).split(" "):n=i.substring(10).split(" ");const r={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let s=8;s<n.length;s+=2)switch(n[s]){case"raddr":r.relatedAddress=n[s+1];break;case"rport":r.relatedPort=parseInt(n[s+1],10);break;case"tcptype":r.tcpType=n[s+1];break;case"ufrag":r.ufrag=n[s+1],r.usernameFragment=n[s+1];break;default:r[n[s]]===void 0&&(r[n[s]]=n[s+1]);break}return r},t.writeCandidate=function(i){const n=[];n.push(i.foundation);const r=i.component;r==="rtp"?n.push(1):r==="rtcp"?n.push(2):n.push(r),n.push(i.protocol.toUpperCase()),n.push(i.priority),n.push(i.address||i.ip),n.push(i.port);const s=i.type;return n.push("typ"),n.push(s),s!=="host"&&i.relatedAddress&&i.relatedPort&&(n.push("raddr"),n.push(i.relatedAddress),n.push("rport"),n.push(i.relatedPort)),i.tcpType&&i.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(i.tcpType)),(i.usernameFragment||i.ufrag)&&(n.push("ufrag"),n.push(i.usernameFragment||i.ufrag)),"candidate:"+n.join(" ")},t.parseIceOptions=function(i){return i.substring(14).split(" ")},t.parseRtpMap=function(i){let n=i.substring(9).split(" ");const r={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),r.name=n[0],r.clockRate=parseInt(n[1],10),r.channels=n.length===3?parseInt(n[2],10):1,r.numChannels=r.channels,r},t.writeRtpMap=function(i){let n=i.payloadType;i.preferredPayloadType!==void 0&&(n=i.preferredPayloadType);const r=i.channels||i.numChannels||1;return"a=rtpmap:"+n+" "+i.name+"/"+i.clockRate+(r!==1?"/"+r:"")+`\r
`},t.parseExtmap=function(i){const n=i.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},t.writeExtmap=function(i){return"a=extmap:"+(i.id||i.preferredId)+(i.direction&&i.direction!=="sendrecv"?"/"+i.direction:"")+" "+i.uri+(i.attributes?" "+i.attributes:"")+`\r
`},t.parseFmtp=function(i){const n={};let r;const s=i.substring(i.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)r=s[o].trim().split("="),n[r[0].trim()]=r[1];return n},t.writeFmtp=function(i){let n="",r=i.payloadType;if(i.preferredPayloadType!==void 0&&(r=i.preferredPayloadType),i.parameters&&Object.keys(i.parameters).length){const s=[];Object.keys(i.parameters).forEach(o=>{i.parameters[o]!==void 0?s.push(o+"="+i.parameters[o]):s.push(o)}),n+="a=fmtp:"+r+" "+s.join(";")+`\r
`}return n},t.parseRtcpFb=function(i){const n=i.substring(i.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},t.writeRtcpFb=function(i){let n="",r=i.payloadType;return i.preferredPayloadType!==void 0&&(r=i.preferredPayloadType),i.rtcpFeedback&&i.rtcpFeedback.length&&i.rtcpFeedback.forEach(s=>{n+="a=rtcp-fb:"+r+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),n},t.parseSsrcMedia=function(i){const n=i.indexOf(" "),r={ssrc:parseInt(i.substring(7,n),10)},s=i.indexOf(":",n);return s>-1?(r.attribute=i.substring(n+1,s),r.value=i.substring(s+1)):r.attribute=i.substring(n+1),r},t.parseSsrcGroup=function(i){const n=i.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(r=>parseInt(r,10))}},t.getMid=function(i){const n=t.matchPrefix(i,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(i){const n=i.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},t.getDtlsParameters=function(i,n){const r=t.matchPrefix(i+n,"a=fingerprint:");return{role:"auto",fingerprints:r.map(t.parseFingerprint)}},t.writeDtlsParameters=function(i,n){let r="a=setup:"+n+`\r
`;return i.fingerprints.forEach(s=>{r+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),r},t.parseCryptoLine=function(i){const n=i.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},t.writeCryptoLine=function(i){return"a=crypto:"+i.tag+" "+i.cryptoSuite+" "+(typeof i.keyParams=="object"?t.writeCryptoKeyParams(i.keyParams):i.keyParams)+(i.sessionParams?" "+i.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(i){if(i.indexOf("inline:")!==0)return null;const n=i.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(i){return i.keyMethod+":"+i.keySalt+(i.lifeTime?"|"+i.lifeTime:"")+(i.mkiValue&&i.mkiLength?"|"+i.mkiValue+":"+i.mkiLength:"")},t.getCryptoParameters=function(i,n){return t.matchPrefix(i+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(i,n){const r=t.matchPrefix(i+n,"a=ice-ufrag:")[0],s=t.matchPrefix(i+n,"a=ice-pwd:")[0];return r&&s?{usernameFragment:r.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(i){let n="a=ice-ufrag:"+i.usernameFragment+`\r
a=ice-pwd:`+i.password+`\r
`;return i.iceLite&&(n+=`a=ice-lite\r
`),n},t.parseRtpParameters=function(i){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(i)[0].split(" ");n.profile=s[2];for(let a=3;a<s.length;a++){const l=s[a],c=t.matchPrefix(i,"a=rtpmap:"+l+" ")[0];if(c){const u=t.parseRtpMap(c),d=t.matchPrefix(i,"a=fmtp:"+l+" ");switch(u.parameters=d.length?t.parseFmtp(d[0]):{},u.rtcpFeedback=t.matchPrefix(i,"a=rtcp-fb:"+l+" ").map(t.parseRtcpFb),n.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(u.name.toUpperCase());break}}}t.matchPrefix(i,"a=extmap:").forEach(a=>{n.headerExtensions.push(t.parseExtmap(a))});const o=t.matchPrefix(i,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach(a=>{o.forEach(l=>{a.rtcpFeedback.find(u=>u.type===l.type&&u.parameter===l.parameter)||a.rtcpFeedback.push(l)})}),n},t.writeRtpDescription=function(i,n){let r="";r+="m="+i+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,r+=`c=IN IP4 0.0.0.0\r
`,r+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(o=>{r+=t.writeRtpMap(o),r+=t.writeFmtp(o),r+=t.writeRtcpFb(o)});let s=0;return n.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(r+="a=maxptime:"+s+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(o=>{r+=t.writeExtmap(o)}),r},t.parseRtpEncodingParameters=function(i){const n=[],r=t.parseRtpParameters(i),s=r.fecMechanisms.indexOf("RED")!==-1,o=r.fecMechanisms.indexOf("ULPFEC")!==-1,a=t.matchPrefix(i,"a=ssrc:").map(h=>t.parseSsrcMedia(h)).filter(h=>h.attribute==="cname"),l=a.length>0&&a[0].ssrc;let c;const u=t.matchPrefix(i,"a=ssrc-group:FID").map(h=>h.substring(17).split(" ").map(v=>parseInt(v,10)));u.length>0&&u[0].length>1&&u[0][0]===l&&(c=u[0][1]),r.codecs.forEach(h=>{if(h.name.toUpperCase()==="RTX"&&h.parameters.apt){let m={ssrc:l,codecPayloadType:parseInt(h.parameters.apt,10)};l&&c&&(m.rtx={ssrc:c}),n.push(m),s&&(m=JSON.parse(JSON.stringify(m)),m.fec={ssrc:l,mechanism:o?"red+ulpfec":"red"},n.push(m))}}),n.length===0&&l&&n.push({ssrc:l});let d=t.matchPrefix(i,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,n.forEach(h=>{h.maxBitrate=d})),n},t.parseRtcpParameters=function(i){const n={},r=t.matchPrefix(i,"a=ssrc:").map(a=>t.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const s=t.matchPrefix(i,"a=rtcp-rsize");n.reducedSize=s.length>0,n.compound=s.length===0;const o=t.matchPrefix(i,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(i){let n="";return i.reducedSize&&(n+=`a=rtcp-rsize\r
`),i.mux&&(n+=`a=rtcp-mux\r
`),i.ssrc!==void 0&&i.cname&&(n+="a=ssrc:"+i.ssrc+" cname:"+i.cname+`\r
`),n},t.parseMsid=function(i){let n;const r=t.matchPrefix(i,"a=msid:");if(r.length===1)return n=r[0].substring(7).split(" "),{stream:n[0],track:n[1]};const s=t.matchPrefix(i,"a=ssrc:").map(o=>t.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return n=s[0].value.split(" "),{stream:n[0],track:n[1]}},t.parseSctpDescription=function(i){const n=t.parseMLine(i),r=t.matchPrefix(i,"a=max-message-size:");let s;r.length>0&&(s=parseInt(r[0].substring(19),10)),isNaN(s)&&(s=65536);const o=t.matchPrefix(i,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:s};const a=t.matchPrefix(i,"a=sctpmap:");if(a.length>0){const l=a[0].substring(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:s}}},t.writeSctpDescription=function(i,n){let r=[];return i.protocol!=="DTLS/SCTP"?r=["m="+i.kind+" 9 "+i.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:r=["m="+i.kind+" 9 "+i.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&r.push("a=max-message-size:"+n.maxMessageSize+`\r
`),r.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(i,n,r){let s;const o=n!==void 0?n:2;return i?s=i:s=t.generateSessionId(),`v=0\r
o=`+(r||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(i,n){const r=t.splitLines(i);for(let s=0;s<r.length;s++)switch(r[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[s].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(i){return t.splitLines(i)[0].split(" ")[0].substring(2)},t.isRejected=function(i){return i.split(" ",2)[1]==="0"},t.parseMLine=function(i){const r=t.splitLines(i)[0].substring(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},t.parseOLine=function(i){const r=t.matchPrefix(i,"o=")[0].substring(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},t.isValidSDP=function(i){if(typeof i!="string"||i.length===0)return!1;const n=t.splitLines(i);for(let r=0;r<n.length;r++)if(n[r].length<2||n[r].charAt(1)!=="=")return!1;return!0},e.exports=t})(dp);const xs=dp.exports,kU=Zk({__proto__:null,default:xs},[dp.exports]);function Cl(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substring(2)),n.candidate&&n.candidate.length){const r=new t(n),s=xs.parseCandidate(n.candidate);for(const o in s)o in r||Object.defineProperty(r,o,{value:s[o]});return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new t(n)},e.RTCIceCandidate.prototype=t.prototype,ns(e,"icecandidate",i=>(i.candidate&&Object.defineProperty(i,"candidate",{value:new e.RTCIceCandidate(i.candidate),writable:"false"}),i))}function _h(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||ns(e,"icecandidate",t=>{if(t.candidate){const i=xs.parseCandidate(t.candidate.candidate);i.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[i.priority>>24])}return t})}function Al(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const i=function(a){if(!a||!a.sdp)return!1;const l=xs.splitSections(a.sdp);return l.shift(),l.some(c=>{const u=xs.parseMLine(c);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},n=function(a){const l=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const c=parseInt(l[1],10);return c!==c?-1:c},r=function(a){let l=65536;return t.browser==="firefox"&&(t.version<57?a===-1?l=16384:l=2147483637:t.version<60?l=t.version===57?65535:65536:l=2147483637),l},s=function(a,l){let c=65536;t.browser==="firefox"&&t.version===57&&(c=65535);const u=xs.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?c=parseInt(u[0].substring(19),10):t.browser==="firefox"&&l!==-1&&(c=2147483637),c},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const l=n(arguments[0]),c=r(l),u=s(arguments[0],l);let d;c===0&&u===0?d=Number.POSITIVE_INFINITY:c===0||u===0?d=Math.max(c,u):d=Math.min(c,u);const h={};Object.defineProperty(h,"maxMessageSize",{get(){return d}}),this._sctp=h}return o.apply(this,arguments)}}function Rl(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(n,r){const s=n.send;n.send=function(){const a=arguments[0],l=a.length||a.size||a.byteLength;if(n.readyState==="open"&&r.sctp&&l>r.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+r.sctp.maxMessageSize+" bytes)");return s.apply(n,arguments)}}const i=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const r=i.apply(this,arguments);return t(r,this),r},ns(e,"datachannel",n=>(t(n.channel,n.target),n))}function wh(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(i){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),i&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=i)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(i=>{const n=t[i];t[i]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=r=>{const s=r.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",r);s.dispatchEvent(o)}return r},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function Sh(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(r){if(r&&r.sdp&&r.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=r.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&r instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:r.type,sdp:s}):r.sdp=s}return i.apply(this,arguments)}}function Pl(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const i=e.RTCPeerConnection.prototype.addIceCandidate;!i||i.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Il(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const i=e.RTCPeerConnection.prototype.setLocalDescription;!i||i.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let r=arguments[0]||{};if(typeof r!="object"||r.type&&r.sdp)return i.apply(this,arguments);if(r={type:r.type,sdp:r.sdp},!r.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":r.type="offer";break;default:r.type="answer";break}return r.sdp||r.type!=="offer"&&r.type!=="answer"?i.apply(this,[r]):(r.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>i.apply(this,[o]))})}const CU=Object.freeze(Object.defineProperty({__proto__:null,shimRTCIceCandidate:Cl,shimRTCIceCandidateRelayProtocol:_h,shimMaxMessageSize:Al,shimSendThrowTypeError:Rl,shimConnectionState:wh,removeExtmapAllowMixed:Sh,shimAddIceCandidateNullOrEmpty:Pl,shimParameterlessSetLocalDescription:Il},Symbol.toStringTag,{value:"Module"}));function AU({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const i=s0,n=_U(e),r={browserDetails:n,commonShim:CU,extractVersion:kl,disableLog:EU,disableWarnings:TU,sdp:kU};switch(n.browser){case"chrome":if(!Dy||!Eh||!t.shimChrome)return i("Chrome shim is not included in this adapter release."),r;if(n.version===null)return i("Chrome shim can not determine version, not shimming."),r;i("adapter.js shimming chrome."),r.browserShim=Dy,Pl(e,n),Il(e),a0(e,n),l0(e),Eh(e,n),c0(e),p0(e,n),u0(e),d0(e),h0(e),m0(e,n),Cl(e),_h(e),wh(e),Al(e,n),Rl(e),Sh(e,n);break;case"firefox":if(!Ny||!Th||!t.shimFirefox)return i("Firefox shim is not included in this adapter release."),r;i("adapter.js shimming firefox."),r.browserShim=Ny,Pl(e,n),Il(e),g0(e,n),Th(e,n),v0(e),E0(e),y0(e),b0(e),T0(e),_0(e),w0(e),S0(e),k0(e),Cl(e),wh(e),Al(e,n),Rl(e);break;case"safari":if(!Ly||!t.shimSafari)return i("Safari shim is not included in this adapter release."),r;i("adapter.js shimming safari."),r.browserShim=Ly,Pl(e,n),Il(e),O0(e),N0(e),R0(e),C0(e),A0(e),D0(e),P0(e),L0(e),Cl(e),_h(e),Al(e,n),Rl(e),Sh(e,n);break;default:i("Unsupported browser!");break}return r}const ic=AU({window:typeof window>"u"?void 0:window});var kh={exports:{}};(function(e,t){(function(i,n){var r="1.0.35",s="",o="?",a="function",l="undefined",c="object",u="string",d="major",h="model",m="name",v="type",y="vendor",T="version",S="architecture",R="console",O="mobile",x="tablet",B="smarttv",ie="wearable",ee="embedded",de=350,se="Amazon",ye="Apple",Ae="ASUS",ke="BlackBerry",_e="Browser",Ie="Chrome",ge="Edge",Oe="Firefox",we="Google",E="Huawei",C="LG",D="Microsoft",N="Motorola",M="Opera",F="Samsung",H="Sharp",A="Sony",L="Xiaomi",I="Zebra",j="Facebook",pe="Chromium OS",he="Mac OS",ue=function(X,le){var ae={};for(var Ee in X)le[Ee]&&le[Ee].length%2===0?ae[Ee]=le[Ee].concat(X[Ee]):ae[Ee]=X[Ee];return ae},ne=function(X){for(var le={},ae=0;ae<X.length;ae++)le[X[ae].toUpperCase()]=X[ae];return le},w=function(X,le){return typeof X===u?P(le).indexOf(P(X))!==-1:!1},P=function(X){return X.toLowerCase()},$=function(X){return typeof X===u?X.replace(/[^\d\.]/g,s).split(".")[0]:n},U=function(X,le){if(typeof X===u)return X=X.replace(/^\s\s*/,s),typeof le===l?X:X.substring(0,de)},V=function(X,le){for(var ae=0,Ee,Fe,je,ce,Se,jt;ae<le.length&&!Se;){var mi=le[ae],br=le[ae+1];for(Ee=Fe=0;Ee<mi.length&&!Se&&mi[Ee];)if(Se=mi[Ee++].exec(X),Se)for(je=0;je<br.length;je++)jt=Se[++Fe],ce=br[je],typeof ce===c&&ce.length>0?ce.length===2?typeof ce[1]==a?this[ce[0]]=ce[1].call(this,jt):this[ce[0]]=ce[1]:ce.length===3?typeof ce[1]===a&&!(ce[1].exec&&ce[1].test)?this[ce[0]]=jt?ce[1].call(this,jt,ce[2]):n:this[ce[0]]=jt?jt.replace(ce[1],ce[2]):n:ce.length===4&&(this[ce[0]]=jt?ce[3].call(this,jt.replace(ce[1],ce[2])):n):this[ce]=jt||n;ae+=2}},q=function(X,le){for(var ae in le)if(typeof le[ae]===c&&le[ae].length>0){for(var Ee=0;Ee<le[ae].length;Ee++)if(w(le[ae][Ee],X))return ae===o?n:ae}else if(w(le[ae],X))return ae===o?n:ae;return X},Y={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},K={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},z={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[T,[m,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[T,[m,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[m,T],[/opios[\/ ]+([\w\.]+)/i],[T,[m,M+" Mini"]],[/\bopr\/([\w\.]+)/i],[T,[m,M]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[m,T],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[T,[m,"UC"+_e]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[T,[m,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[T,[m,"WeChat"]],[/konqueror\/([\w\.]+)/i],[T,[m,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[T,[m,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[T,[m,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[m,/(.+)/,"$1 Secure "+_e],T],[/\bfocus\/([\w\.]+)/i],[T,[m,Oe+" Focus"]],[/\bopt\/([\w\.]+)/i],[T,[m,M+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[T,[m,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[T,[m,"Dolphin"]],[/coast\/([\w\.]+)/i],[T,[m,M+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[T,[m,"MIUI "+_e]],[/fxios\/([-\w\.]+)/i],[T,[m,Oe]],[/\bqihu|(qi?ho?o?|360)browser/i],[[m,"360 "+_e]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[m,/(.+)/,"$1 "+_e],T],[/(comodo_dragon)\/([\w\.]+)/i],[[m,/_/g," "],T],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[m,T],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[m],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[m,j],T],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[m,T],[/\bgsa\/([\w\.]+) .*safari\//i],[T,[m,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[T,[m,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[T,[m,Ie+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[m,Ie+" WebView"],T],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[T,[m,"Android "+_e]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[m,T],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[T,[m,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[T,m],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[m,[T,q,Y]],[/(webkit|khtml)\/([\w\.]+)/i],[m,T],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[m,"Netscape"],T],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[T,[m,Oe+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[m,T],[/(cobalt)\/([\w\.]+)/i],[m,[T,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[S,"amd64"]],[/(ia32(?=;))/i],[[S,P]],[/((?:i[346]|x)86)[;\)]/i],[[S,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[S,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[S,"armhf"]],[/windows (ce|mobile); ppc;/i],[[S,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[S,/ower/,s,P]],[/(sun4\w)[;\)]/i],[[S,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[S,P]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[y,F],[v,x]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[h,[y,F],[v,O]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[h,[y,ye],[v,O]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[y,ye],[v,x]],[/(macintosh);/i],[h,[y,ye]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[y,H],[v,O]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[y,E],[v,x]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[h,[y,E],[v,O]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[h,/_/g," "],[y,L],[v,O]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[y,L],[v,x]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[y,"OPPO"],[v,O]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[y,"Vivo"],[v,O]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[h,[y,"Realme"],[v,O]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[y,N],[v,O]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[y,N],[v,x]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[y,C],[v,x]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[y,C],[v,O]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[y,"Lenovo"],[v,x]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[y,"Nokia"],[v,O]],[/(pixel c)\b/i],[h,[y,we],[v,x]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[y,we],[v,O]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[y,A],[v,O]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[y,A],[v,x]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[y,"OnePlus"],[v,O]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[y,se],[v,x]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[y,se],[v,O]],[/(playbook);[-\w\),; ]+(rim)/i],[h,y,[v,x]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[y,ke],[v,O]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[y,Ae],[v,x]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[y,Ae],[v,O]],[/(nexus 9)/i],[h,[y,"HTC"],[v,x]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[y,[h,/_/g," "],[v,O]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[y,"Acer"],[v,x]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[y,"Meizu"],[v,O]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[y,h,[v,O]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[y,h,[v,x]],[/(surface duo)/i],[h,[y,D],[v,x]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[y,"Fairphone"],[v,O]],[/(u304aa)/i],[h,[y,"AT&T"],[v,O]],[/\bsie-(\w*)/i],[h,[y,"Siemens"],[v,O]],[/\b(rct\w+) b/i],[h,[y,"RCA"],[v,x]],[/\b(venue[\d ]{2,7}) b/i],[h,[y,"Dell"],[v,x]],[/\b(q(?:mv|ta)\w+) b/i],[h,[y,"Verizon"],[v,x]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[y,"Barnes & Noble"],[v,x]],[/\b(tm\d{3}\w+) b/i],[h,[y,"NuVision"],[v,x]],[/\b(k88) b/i],[h,[y,"ZTE"],[v,x]],[/\b(nx\d{3}j) b/i],[h,[y,"ZTE"],[v,O]],[/\b(gen\d{3}) b.+49h/i],[h,[y,"Swiss"],[v,O]],[/\b(zur\d{3}) b/i],[h,[y,"Swiss"],[v,x]],[/\b((zeki)?tb.*\b) b/i],[h,[y,"Zeki"],[v,x]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[y,"Dragon Touch"],h,[v,x]],[/\b(ns-?\w{0,9}) b/i],[h,[y,"Insignia"],[v,x]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[y,"NextBook"],[v,x]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[y,"Voice"],h,[v,O]],[/\b(lvtel\-)?(v1[12]) b/i],[[y,"LvTel"],h,[v,O]],[/\b(ph-1) /i],[h,[y,"Essential"],[v,O]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[y,"Envizen"],[v,x]],[/\b(trio[-\w\. ]+) b/i],[h,[y,"MachSpeed"],[v,x]],[/\btu_(1491) b/i],[h,[y,"Rotor"],[v,x]],[/(shield[\w ]+) b/i],[h,[y,"Nvidia"],[v,x]],[/(sprint) (\w+)/i],[y,h,[v,O]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[y,D],[v,O]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[y,I],[v,x]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[y,I],[v,O]],[/smart-tv.+(samsung)/i],[y,[v,B]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[y,F],[v,B]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[y,C],[v,B]],[/(apple) ?tv/i],[y,[h,ye+" TV"],[v,B]],[/crkey/i],[[h,Ie+"cast"],[y,we],[v,B]],[/droid.+aft(\w)( bui|\))/i],[h,[y,se],[v,B]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[h,[y,H],[v,B]],[/(bravia[\w ]+)( bui|\))/i],[h,[y,A],[v,B]],[/(mitv-\w{5}) bui/i],[h,[y,L],[v,B]],[/Hbbtv.*(technisat) (.*);/i],[y,h,[v,B]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[y,U],[h,U],[v,B]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[v,B]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[y,h,[v,R]],[/droid.+; (shield) bui/i],[h,[y,"Nvidia"],[v,R]],[/(playstation [345portablevi]+)/i],[h,[y,A],[v,R]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[y,D],[v,R]],[/((pebble))app/i],[y,h,[v,ie]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[h,[y,ye],[v,ie]],[/droid.+; (glass) \d/i],[h,[y,we],[v,ie]],[/droid.+; (wt63?0{2,3})\)/i],[h,[y,I],[v,ie]],[/(quest( 2| pro)?)/i],[h,[y,j],[v,ie]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[y,[v,ee]],[/(aeobc)\b/i],[h,[y,se],[v,ee]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[h,[v,O]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[v,x]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[v,x]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[v,O]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[y,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[T,[m,ge+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[T,[m,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[m,T],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[T,m]],os:[[/microsoft (windows) (vista|xp)/i],[m,T],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[m,[T,q,K]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,"Windows"],[T,q,K]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[T,/_/g,"."],[m,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[m,he],[T,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[T,m],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[m,T],[/\(bb(10);/i],[T,[m,ke]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[T,[m,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[T,[m,Oe+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[T,[m,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[T,[m,"watchOS"]],[/crkey\/([\d\.]+)/i],[T,[m,Ie+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[m,pe],T],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[m,T],[/(sunos) ?([\w\.\d]*)/i],[[m,"Solaris"],T],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[m,T]]},W=function(X,le){if(typeof X===c&&(le=X,X=n),!(this instanceof W))return new W(X,le).getResult();var ae=typeof i!==l&&i.navigator?i.navigator:n,Ee=X||(ae&&ae.userAgent?ae.userAgent:s),Fe=ae&&ae.userAgentData?ae.userAgentData:n,je=le?ue(z,le):z,ce=ae&&ae.userAgent==Ee;return this.getBrowser=function(){var Se={};return Se[m]=n,Se[T]=n,V.call(Se,Ee,je.browser),Se[d]=$(Se[T]),ce&&ae&&ae.brave&&typeof ae.brave.isBrave==a&&(Se[m]="Brave"),Se},this.getCPU=function(){var Se={};return Se[S]=n,V.call(Se,Ee,je.cpu),Se},this.getDevice=function(){var Se={};return Se[y]=n,Se[h]=n,Se[v]=n,V.call(Se,Ee,je.device),ce&&!Se[v]&&Fe&&Fe.mobile&&(Se[v]=O),ce&&Se[h]=="Macintosh"&&ae&&typeof ae.standalone!==l&&ae.maxTouchPoints&&ae.maxTouchPoints>2&&(Se[h]="iPad",Se[v]=x),Se},this.getEngine=function(){var Se={};return Se[m]=n,Se[T]=n,V.call(Se,Ee,je.engine),Se},this.getOS=function(){var Se={};return Se[m]=n,Se[T]=n,V.call(Se,Ee,je.os),ce&&!Se[m]&&Fe&&Fe.platform!="Unknown"&&(Se[m]=Fe.platform.replace(/chrome os/i,pe).replace(/macos/i,he)),Se},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ee},this.setUA=function(Se){return Ee=typeof Se===u&&Se.length>de?U(Se,de):Se,this},this.setUA(Ee),this};W.VERSION=r,W.BROWSER=ne([m,T,d]),W.CPU=ne([S]),W.DEVICE=ne([h,y,v,R,O,B,x,ie,ee]),W.ENGINE=W.OS=ne([m,T]),e.exports&&(t=e.exports=W),t.UAParser=W;var me=typeof i!==l&&(i.jQuery||i.Zepto);if(me&&!me.ua){var oe=new W;me.ua=oe.getResult(),me.ua.get=function(){return oe.getUA()},me.ua.set=function(X){oe.setUA(X);var le=oe.getResult();for(var ae in le)me.ua[ae]=le[ae]}}})(typeof window=="object"?window:yn)})(kh,kh.exports);var cl,RU=new Uint8Array(16);function PU(){if(!cl&&(cl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!cl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cl(RU)}const IU=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function OU(e){return typeof e=="string"&&IU.test(e)}var xt=[];for(var ad=0;ad<256;++ad)xt.push((ad+256).toString(16).substr(1));function DU(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(xt[e[t+0]]+xt[e[t+1]]+xt[e[t+2]]+xt[e[t+3]]+"-"+xt[e[t+4]]+xt[e[t+5]]+"-"+xt[e[t+6]]+xt[e[t+7]]+"-"+xt[e[t+8]]+xt[e[t+9]]+"-"+xt[e[t+10]]+xt[e[t+11]]+xt[e[t+12]]+xt[e[t+13]]+xt[e[t+14]]+xt[e[t+15]]).toLowerCase();if(!OU(i))throw TypeError("Stringified UUID is invalid");return i}function vr(e,t,i){e=e||{};var n=e.random||(e.rng||PU)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){i=i||0;for(var r=0;r<16;++r)t[i+r]=n[r];return t}return DU(n)}var Pa={exports:{}};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */(function(e,t){(function(i){var n=Object.hasOwnProperty,r=Array.isArray?Array.isArray:function(C){return Object.prototype.toString.call(C)==="[object Array]"},s=10,o=typeof process=="object"&&typeof process.nextTick=="function",a=typeof Symbol=="function",l=typeof Reflect=="object",c=typeof setImmediate=="function",u=c?setImmediate:setTimeout,d=a?l&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(E){var C=Object.getOwnPropertyNames(E);return C.push.apply(C,Object.getOwnPropertySymbols(E)),C}:Object.keys;function h(){this._events={},this._conf&&m.call(this,this._conf)}function m(E){E&&(this._conf=E,E.delimiter&&(this.delimiter=E.delimiter),E.maxListeners!==i&&(this._maxListeners=E.maxListeners),E.wildcard&&(this.wildcard=E.wildcard),E.newListener&&(this._newListener=E.newListener),E.removeListener&&(this._removeListener=E.removeListener),E.verboseMemoryLeak&&(this.verboseMemoryLeak=E.verboseMemoryLeak),E.ignoreErrors&&(this.ignoreErrors=E.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function v(E,C){var D="(node) warning: possible EventEmitter memory leak detected. "+E+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(D+=" Event name: "+C+"."),typeof process<"u"&&process.emitWarning){var N=new Error(D);N.name="MaxListenersExceededWarning",N.emitter=this,N.count=E,process.emitWarning(N)}else console.error(D),console.trace&&console.trace()}var y=function(E,C,D){var N=arguments.length;switch(N){case 0:return[];case 1:return[E];case 2:return[E,C];case 3:return[E,C,D];default:for(var M=new Array(N);N--;)M[N]=arguments[N];return M}};function T(E,C){for(var D={},N,M=E.length,F=C?C.length:0,H=0;H<M;H++)N=E[H],D[N]=H<F?C[H]:i;return D}function S(E,C,D){this._emitter=E,this._target=C,this._listeners={},this._listenersCount=0;var N,M;if((D.on||D.off)&&(N=D.on,M=D.off),C.addEventListener?(N=C.addEventListener,M=C.removeEventListener):C.addListener?(N=C.addListener,M=C.removeListener):C.on&&(N=C.on,M=C.off),!N&&!M)throw Error("target does not implement any known event API");if(typeof N!="function")throw TypeError("on method must be a function");if(typeof M!="function")throw TypeError("off method must be a function");this._on=N,this._off=M;var F=E._observers;F?F.push(this):E._observers=[this]}Object.assign(S.prototype,{subscribe:function(E,C,D){var N=this,M=this._target,F=this._emitter,H=this._listeners,A=function(){var L=y.apply(null,arguments),I={data:L,name:C,original:E};if(D){var j=D.call(M,I);j!==!1&&F.emit.apply(F,[I.name].concat(L));return}F.emit.apply(F,[C].concat(L))};if(H[E])throw Error("Event '"+E+"' is already listening");this._listenersCount++,F._newListener&&F._removeListener&&!N._onNewListener?(this._onNewListener=function(L){L===C&&H[E]===null&&(H[E]=A,N._on.call(M,E,A))},F.on("newListener",this._onNewListener),this._onRemoveListener=function(L){L===C&&!F.hasListeners(L)&&H[E]&&(H[E]=null,N._off.call(M,E,A))},H[E]=null,F.on("removeListener",this._onRemoveListener)):(H[E]=A,N._on.call(M,E,A))},unsubscribe:function(E){var C=this,D=this._listeners,N=this._emitter,M,F,H=this._off,A=this._target,L;if(E&&typeof E!="string")throw TypeError("event must be a string");function I(){C._onNewListener&&(N.off("newListener",C._onNewListener),N.off("removeListener",C._onRemoveListener),C._onNewListener=null,C._onRemoveListener=null);var j=de.call(N,C);N._observers.splice(j,1)}if(E){if(M=D[E],!M)return;H.call(A,E,M),delete D[E],--this._listenersCount||I()}else{for(F=d(D),L=F.length;L-- >0;)E=F[L],H.call(A,E,D[E]);this._listeners={},this._listenersCount=0,I()}}});function R(E,C,D,N){var M=Object.assign({},C);if(!E)return M;if(typeof E!="object")throw TypeError("options must be an object");var F=Object.keys(E),H=F.length,A,L,I;function j(he){throw Error('Invalid "'+A+'" option value'+(he?". Reason: "+he:""))}for(var pe=0;pe<H;pe++){if(A=F[pe],!N&&!n.call(C,A))throw Error('Unknown "'+A+'" option');L=E[A],L!==i&&(I=D[A],M[A]=I?I(L,j):L)}return M}function O(E,C){return(typeof E!="function"||!E.hasOwnProperty("prototype"))&&C("value must be a constructor"),E}function x(E){var C="value must be type of "+E.join("|"),D=E.length,N=E[0],M=E[1];return D===1?function(F,H){if(typeof F===N)return F;H(C)}:D===2?function(F,H){var A=typeof F;if(A===N||A===M)return F;H(C)}:function(F,H){for(var A=typeof F,L=D;L-- >0;)if(A===E[L])return F;H(C)}}var B=x(["function"]),ie=x(["object","function"]);function ee(E,C,D){var N,M,F=0,H,A=new E(function(L,I,j){D=R(D,{timeout:0,overload:!1},{timeout:function(ne,w){return ne*=1,(typeof ne!="number"||ne<0||!Number.isFinite(ne))&&w("timeout must be a positive number"),ne}}),N=!D.overload&&typeof E.prototype.cancel=="function"&&typeof j=="function";function pe(){M&&(M=null),F&&(clearTimeout(F),F=0)}var he=function(ne){pe(),L(ne)},ue=function(ne){pe(),I(ne)};N?C(he,ue,j):(M=[function(ne){ue(ne||Error("canceled"))}],C(he,ue,function(ne){if(H)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof ne!="function")throw TypeError("onCancel callback must be a function");M.push(ne)}),H=!0),D.timeout>0&&(F=setTimeout(function(){var ne=Error("timeout");ne.code="ETIMEDOUT",F=0,A.cancel(ne),I(ne)},D.timeout))});return N||(A.cancel=function(L){if(!!M){for(var I=M.length,j=1;j<I;j++)M[j](L);M[0](L),M=null}}),A}function de(E){var C=this._observers;if(!C)return-1;for(var D=C.length,N=0;N<D;N++)if(C[N]._target===E)return N;return-1}function se(E,C,D,N,M){if(!D)return null;if(N===0){var F=typeof C;if(F==="string"){var H,A,L=0,I=0,j=this.delimiter,pe=j.length;if((A=C.indexOf(j))!==-1){H=new Array(5);do H[L++]=C.slice(I,A),I=A+pe;while((A=C.indexOf(j,I))!==-1);H[L++]=C.slice(I),C=H,M=L}else C=[C],M=1}else F==="object"?M=C.length:(C=[C],M=1)}var he=null,ue,ne,w,P,$,U=C[N],V=C[N+1],q,Y;if(N===M)D._listeners&&(typeof D._listeners=="function"?(E&&E.push(D._listeners),he=[D]):(E&&E.push.apply(E,D._listeners),he=[D]));else if(U==="*"){for(q=d(D),A=q.length;A-- >0;)ue=q[A],ue!=="_listeners"&&(Y=se(E,C,D[ue],N+1,M),Y&&(he?he.push.apply(he,Y):he=Y));return he}else if(U==="**"){for($=N+1===M||N+2===M&&V==="*",$&&D._listeners&&(he=se(E,C,D,M,M)),q=d(D),A=q.length;A-- >0;)ue=q[A],ue!=="_listeners"&&(ue==="*"||ue==="**"?(D[ue]._listeners&&!$&&(Y=se(E,C,D[ue],M,M),Y&&(he?he.push.apply(he,Y):he=Y)),Y=se(E,C,D[ue],N,M)):ue===V?Y=se(E,C,D[ue],N+2,M):Y=se(E,C,D[ue],N,M),Y&&(he?he.push.apply(he,Y):he=Y));return he}else D[U]&&(he=se(E,C,D[U],N+1,M));if(ne=D["*"],ne&&se(E,C,ne,N+1,M),w=D["**"],w)if(N<M)for(w._listeners&&se(E,C,w,M,M),q=d(w),A=q.length;A-- >0;)ue=q[A],ue!=="_listeners"&&(ue===V?se(E,C,w[ue],N+2,M):ue===U?se(E,C,w[ue],N+1,M):(P={},P[ue]=w[ue],se(E,C,{"**":P},N+1,M)));else w._listeners?se(E,C,w,M,M):w["*"]&&w["*"]._listeners&&se(E,C,w["*"],M,M);return he}function ye(E,C,D){var N=0,M=0,F,H=this.delimiter,A=H.length,L;if(typeof E=="string")if((F=E.indexOf(H))!==-1){L=new Array(5);do L[N++]=E.slice(M,F),M=F+A;while((F=E.indexOf(H,M))!==-1);L[N++]=E.slice(M)}else L=[E],N=1;else L=E,N=E.length;if(N>1){for(F=0;F+1<N;F++)if(L[F]==="**"&&L[F+1]==="**")return}var I=this.listenerTree,j;for(F=0;F<N;F++)if(j=L[F],I=I[j]||(I[j]={}),F===N-1)return I._listeners?(typeof I._listeners=="function"&&(I._listeners=[I._listeners]),D?I._listeners.unshift(C):I._listeners.push(C),!I._listeners.warned&&this._maxListeners>0&&I._listeners.length>this._maxListeners&&(I._listeners.warned=!0,v.call(this,I._listeners.length,j))):I._listeners=C,!0;return!0}function Ae(E,C,D,N){for(var M=d(E),F=M.length,H,A,L,I=E._listeners,j;F-- >0;)A=M[F],H=E[A],A==="_listeners"?L=D:L=D?D.concat(A):[A],j=N||typeof A=="symbol",I&&C.push(j?L:L.join(this.delimiter)),typeof H=="object"&&Ae.call(this,H,C,L,j);return C}function ke(E){for(var C=d(E),D=C.length,N,M,F;D-- >0;)M=C[D],N=E[M],N&&(F=!0,M!=="_listeners"&&!ke(N)&&delete E[M]);return F}function _e(E,C,D){this.emitter=E,this.event=C,this.listener=D}_e.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function Ie(E,C,D){if(D===!0)M=!0;else if(D===!1)N=!0;else{if(!D||typeof D!="object")throw TypeError("options should be an object or true");var N=D.async,M=D.promisify,F=D.nextTick,H=D.objectify}if(N||F||M){var A=C,L=C._origin||C;if(F&&!o)throw Error("process.nextTick is not supported");M===i&&(M=C.constructor.name==="AsyncFunction"),C=function(){var I=arguments,j=this,pe=this.event;return M?F?Promise.resolve():new Promise(function(he){u(he)}).then(function(){return j.event=pe,A.apply(j,I)}):(F?process.nextTick:u)(function(){j.event=pe,A.apply(j,I)})},C._async=!0,C._origin=L}return[C,H?new _e(this,E,C):this]}function ge(E){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,m.call(this,E)}ge.EventEmitter2=ge,ge.prototype.listenTo=function(E,C,D){if(typeof E!="object")throw TypeError("target musts be an object");var N=this;D=R(D,{on:i,off:i,reducers:i},{on:B,off:B,reducers:ie});function M(F){if(typeof F!="object")throw TypeError("events must be an object");var H=D.reducers,A=de.call(N,E),L;A===-1?L=new S(N,E,D):L=N._observers[A];for(var I=d(F),j=I.length,pe,he=typeof H=="function",ue=0;ue<j;ue++)pe=I[ue],L.subscribe(pe,F[pe]||pe,he?H:H&&H[pe])}return r(C)?M(T(C)):M(typeof C=="string"?T(C.split(/\s+/)):C),this},ge.prototype.stopListeningTo=function(E,C){var D=this._observers;if(!D)return!1;var N=D.length,M,F=!1;if(E&&typeof E!="object")throw TypeError("target should be an object");for(;N-- >0;)M=D[N],(!E||M._target===E)&&(M.unsubscribe(C),F=!0);return F},ge.prototype.delimiter=".",ge.prototype.setMaxListeners=function(E){E!==i&&(this._maxListeners=E,this._conf||(this._conf={}),this._conf.maxListeners=E)},ge.prototype.getMaxListeners=function(){return this._maxListeners},ge.prototype.event="",ge.prototype.once=function(E,C,D){return this._once(E,C,!1,D)},ge.prototype.prependOnceListener=function(E,C,D){return this._once(E,C,!0,D)},ge.prototype._once=function(E,C,D,N){return this._many(E,1,C,D,N)},ge.prototype.many=function(E,C,D,N){return this._many(E,C,D,!1,N)},ge.prototype.prependMany=function(E,C,D,N){return this._many(E,C,D,!0,N)},ge.prototype._many=function(E,C,D,N,M){var F=this;if(typeof D!="function")throw new Error("many only accepts instances of Function");function H(){return--C===0&&F.off(E,H),D.apply(this,arguments)}return H._origin=D,this._on(E,H,N,M)},ge.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var E=arguments[0],C,D=this.wildcard,N,M,F,H,A;if(E==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(D&&(C=E,E!=="newListener"&&E!=="removeListener"&&typeof E=="object")){if(M=E.length,a){for(F=0;F<M;F++)if(typeof E[F]=="symbol"){A=!0;break}}A||(E=E.join(this.delimiter))}var L=arguments.length,I;if(this._all&&this._all.length)for(I=this._all.slice(),F=0,M=I.length;F<M;F++)switch(this.event=E,L){case 1:I[F].call(this,E);break;case 2:I[F].call(this,E,arguments[1]);break;case 3:I[F].call(this,E,arguments[1],arguments[2]);break;default:I[F].apply(this,arguments)}if(D)I=[],se.call(this,I,C,this.listenerTree,0,M);else if(I=this._events[E],typeof I=="function"){switch(this.event=E,L){case 1:I.call(this);break;case 2:I.call(this,arguments[1]);break;case 3:I.call(this,arguments[1],arguments[2]);break;default:for(N=new Array(L-1),H=1;H<L;H++)N[H-1]=arguments[H];I.apply(this,N)}return!0}else I&&(I=I.slice());if(I&&I.length){if(L>3)for(N=new Array(L-1),H=1;H<L;H++)N[H-1]=arguments[H];for(F=0,M=I.length;F<M;F++)switch(this.event=E,L){case 1:I[F].call(this);break;case 2:I[F].call(this,arguments[1]);break;case 3:I[F].call(this,arguments[1],arguments[2]);break;default:I[F].apply(this,N)}return!0}else if(!this.ignoreErrors&&!this._all&&E==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},ge.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var E=arguments[0],C=this.wildcard,D,N,M,F,H,A;if(E==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(C&&(D=E,E!=="newListener"&&E!=="removeListener"&&typeof E=="object")){if(F=E.length,a){for(H=0;H<F;H++)if(typeof E[H]=="symbol"){N=!0;break}}N||(E=E.join(this.delimiter))}var L=[],I=arguments.length,j;if(this._all)for(H=0,F=this._all.length;H<F;H++)switch(this.event=E,I){case 1:L.push(this._all[H].call(this,E));break;case 2:L.push(this._all[H].call(this,E,arguments[1]));break;case 3:L.push(this._all[H].call(this,E,arguments[1],arguments[2]));break;default:L.push(this._all[H].apply(this,arguments))}if(C?(j=[],se.call(this,j,D,this.listenerTree,0)):j=this._events[E],typeof j=="function")switch(this.event=E,I){case 1:L.push(j.call(this));break;case 2:L.push(j.call(this,arguments[1]));break;case 3:L.push(j.call(this,arguments[1],arguments[2]));break;default:for(M=new Array(I-1),A=1;A<I;A++)M[A-1]=arguments[A];L.push(j.apply(this,M))}else if(j&&j.length){if(j=j.slice(),I>3)for(M=new Array(I-1),A=1;A<I;A++)M[A-1]=arguments[A];for(H=0,F=j.length;H<F;H++)switch(this.event=E,I){case 1:L.push(j[H].call(this));break;case 2:L.push(j[H].call(this,arguments[1]));break;case 3:L.push(j[H].call(this,arguments[1],arguments[2]));break;default:L.push(j[H].apply(this,M))}}else if(!this.ignoreErrors&&!this._all&&E==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(L)},ge.prototype.on=function(E,C,D){return this._on(E,C,!1,D)},ge.prototype.prependListener=function(E,C,D){return this._on(E,C,!0,D)},ge.prototype.onAny=function(E){return this._onAny(E,!1)},ge.prototype.prependAny=function(E){return this._onAny(E,!0)},ge.prototype.addListener=ge.prototype.on,ge.prototype._onAny=function(E,C){if(typeof E!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),C?this._all.unshift(E):this._all.push(E),this},ge.prototype._on=function(E,C,D,N){if(typeof E=="function")return this._onAny(E,C),this;if(typeof C!="function")throw new Error("on only accepts instances of Function");this._events||h.call(this);var M=this,F;return N!==i&&(F=Ie.call(this,E,C,N),C=F[0],M=F[1]),this._newListener&&this.emit("newListener",E,C),this.wildcard?(ye.call(this,E,C,D),M):(this._events[E]?(typeof this._events[E]=="function"&&(this._events[E]=[this._events[E]]),D?this._events[E].unshift(C):this._events[E].push(C),!this._events[E].warned&&this._maxListeners>0&&this._events[E].length>this._maxListeners&&(this._events[E].warned=!0,v.call(this,this._events[E].length,E))):this._events[E]=C,M)},ge.prototype.off=function(E,C){if(typeof C!="function")throw new Error("removeListener only takes instances of Function");var D,N=[];if(this.wildcard){var M=typeof E=="string"?E.split(this.delimiter):E.slice();if(N=se.call(this,null,M,this.listenerTree,0),!N)return this}else{if(!this._events[E])return this;D=this._events[E],N.push({_listeners:D})}for(var F=0;F<N.length;F++){var H=N[F];if(D=H._listeners,r(D)){for(var A=-1,L=0,I=D.length;L<I;L++)if(D[L]===C||D[L].listener&&D[L].listener===C||D[L]._origin&&D[L]._origin===C){A=L;break}if(A<0)continue;return this.wildcard?H._listeners.splice(A,1):this._events[E].splice(A,1),D.length===0&&(this.wildcard?delete H._listeners:delete this._events[E]),this._removeListener&&this.emit("removeListener",E,C),this}else(D===C||D.listener&&D.listener===C||D._origin&&D._origin===C)&&(this.wildcard?delete H._listeners:delete this._events[E],this._removeListener&&this.emit("removeListener",E,C))}return this.listenerTree&&ke(this.listenerTree),this},ge.prototype.offAny=function(E){var C=0,D=0,N;if(E&&this._all&&this._all.length>0){for(N=this._all,C=0,D=N.length;C<D;C++)if(E===N[C])return N.splice(C,1),this._removeListener&&this.emit("removeListenerAny",E),this}else{if(N=this._all,this._removeListener)for(C=0,D=N.length;C<D;C++)this.emit("removeListenerAny",N[C]);this._all=[]}return this},ge.prototype.removeListener=ge.prototype.off,ge.prototype.removeAllListeners=function(E){if(E===i)return!this._events||h.call(this),this;if(this.wildcard){var C=se.call(this,null,E,this.listenerTree,0),D,N;if(!C)return this;for(N=0;N<C.length;N++)D=C[N],D._listeners=null;this.listenerTree&&ke(this.listenerTree)}else this._events&&(this._events[E]=null);return this},ge.prototype.listeners=function(E){var C=this._events,D,N,M,F,H;if(E===i){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!C)return[];for(D=d(C),F=D.length,M=[];F-- >0;)N=C[D[F]],typeof N=="function"?M.push(N):M.push.apply(M,N);return M}else{if(this.wildcard){if(H=this.listenerTree,!H)return[];var A=[],L=typeof E=="string"?E.split(this.delimiter):E.slice();return se.call(this,A,L,H,0),A}return C?(N=C[E],N?typeof N=="function"?[N]:N:[]):[]}},ge.prototype.eventNames=function(E){var C=this._events;return this.wildcard?Ae.call(this,this.listenerTree,[],null,E):C?d(C):[]},ge.prototype.listenerCount=function(E){return this.listeners(E).length},ge.prototype.hasListeners=function(E){if(this.wildcard){var C=[],D=typeof E=="string"?E.split(this.delimiter):E.slice();return se.call(this,C,D,this.listenerTree,0),C.length>0}var N=this._events,M=this._all;return!!(M&&M.length||N&&(E===i?d(N).length:N[E]))},ge.prototype.listenersAny=function(){return this._all?this._all:[]},ge.prototype.waitFor=function(E,C){var D=this,N=typeof C;return N==="number"?C={timeout:C}:N==="function"&&(C={filter:C}),C=R(C,{timeout:0,filter:i,handleError:!1,Promise,overload:!1},{filter:B,Promise:O}),ee(C.Promise,function(M,F,H){function A(){var L=C.filter;if(!(L&&!L.apply(D,arguments)))if(D.off(E,A),C.handleError){var I=arguments[0];I?F(I):M(y.apply(null,arguments).slice(1))}else M(y.apply(null,arguments))}H(function(){D.off(E,A)}),D._on(E,A,!1)},{timeout:C.timeout,overload:C.overload})};function Oe(E,C,D){D=R(D,{Promise,timeout:0,overload:!1},{Promise:O});var N=D.Promise;return ee(N,function(M,F,H){var A;if(typeof E.addEventListener=="function"){A=function(){M(y.apply(null,arguments))},H(function(){E.removeEventListener(C,A)}),E.addEventListener(C,A,{once:!0});return}var L=function(){I&&E.removeListener("error",I),M(y.apply(null,arguments))},I;C!=="error"&&(I=function(j){E.removeListener(C,L),F(j)},E.once("error",I)),H(function(){I&&E.removeListener("error",I),E.removeListener(C,L)}),E.once(C,L)},{timeout:D.timeout,overload:D.overload})}var we=ge.prototype;Object.defineProperties(ge,{defaultMaxListeners:{get:function(){return we._maxListeners},set:function(E){if(typeof E!="number"||E<0||Number.isNaN(E))throw TypeError("n must be a non-negative number");we._maxListeners=E},enumerable:!0},once:{value:Oe,writable:!0,configurable:!0}}),Object.defineProperties(we,{_maxListeners:{value:s,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof i=="function"&&i.amd?i(function(){return ge}):e.exports=ge})()})(Pa);const NU=Pa.exports;var x0={},hp={exports:{}},xy=hp.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=e.raddr!=null?" raddr %s rport %d":"%v%v",t+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(t+=" generation %d"),t+=e["network-id"]!=null?" network-id %d":"%v",t+=e["network-cost"]!=null?" network-cost %d":"%v",t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return e.attribute!=null&&(t+=" %s",e.value!=null&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=e.id!=null?"id=%s %s":"%v%s",t+=e.mediaClockValue!=null?"=%s":"",t+=e.rateNumerator!=null?" rate=%s":"",t+=e.rateDenominator!=null?"/%s":"",t}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(xy).forEach(function(e){var t=xy[e];t.forEach(function(i){i.reg||(i.reg=/(.*)/),i.format||(i.format="%s")})});(function(e){var t=function(a){return String(Number(a))===a?Number(a):a},i=function(a,l,c,u){if(u&&!c)l[u]=t(a[1]);else for(var d=0;d<c.length;d+=1)a[d+1]!=null&&(l[c[d]]=t(a[d+1]))},n=function(a,l,c){var u=a.name&&a.names;a.push&&!l[a.push]?l[a.push]=[]:u&&!l[a.name]&&(l[a.name]={});var d=a.push?{}:u?l[a.name]:l;i(c.match(a.reg),d,a.names,a.name),a.push&&l[a.push].push(d)},r=hp.exports,s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(a){var l={},c=[],u=l;return a.split(/(\r\n|\r|\n)/).filter(s).forEach(function(d){var h=d[0],m=d.slice(2);h==="m"&&(c.push({rtp:[],fmtp:[]}),u=c[c.length-1]);for(var v=0;v<(r[h]||[]).length;v+=1){var y=r[h][v];if(y.reg.test(m))return n(y,u,m)}}),l.media=c,l};var o=function(a,l){var c=l.split(/=(.+)/,2);return c.length===2?a[c[0]]=t(c[1]):c.length===1&&l.length>1&&(a[c[0]]=void 0),a};e.parseParams=function(a){return a.split(/;\s?/).reduce(o,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(a){return a.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(a){for(var l=[],c=a.split(" ").map(t),u=0;u<c.length;u+=3)l.push({component:c[u],ip:c[u+1],port:c[u+2]});return l},e.parseImageAttributes=function(a){return a.split(" ").map(function(l){return l.substring(1,l.length-1).split(",").reduce(o,{})})},e.parseSimulcastStreamList=function(a){return a.split(";").map(function(l){return l.split(",").map(function(c){var u,d=!1;return c[0]!=="~"?u=t(c):(u=t(c.substring(1,c.length)),d=!0),{scid:u,paused:d}})})}})(x0);var ld=hp.exports,LU=/%[sdv%]/g,xU=function(e){var t=1,i=arguments,n=i.length;return e.replace(LU,function(r){if(t>=n)return r;var s=i[t];switch(t+=1,r){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},Mo=function(e,t,i){var n=t.format instanceof Function?t.format(t.push?i:i[t.name]):t.format,r=[e+"="+n];if(t.names)for(var s=0;s<t.names.length;s+=1){var o=t.names[s];t.name?r.push(i[t.name][o]):r.push(i[t.names[s]])}else r.push(i[t.name]);return xU.apply(null,r)},MU=["v","o","s","i","u","e","p","c","b","t","r","z","a"],$U=["i","c","b","a"],UU=function(e,t){t=t||{},e.version==null&&(e.version=0),e.name==null&&(e.name=" "),e.media.forEach(function(s){s.payloads==null&&(s.payloads="")});var i=t.outerOrder||MU,n=t.innerOrder||$U,r=[];return i.forEach(function(s){ld[s].forEach(function(o){o.name in e&&e[o.name]!=null?r.push(Mo(s,o,e)):o.push in e&&e[o.push]!=null&&e[o.push].forEach(function(a){r.push(Mo(s,o,a))})})}),e.media.forEach(function(s){r.push(Mo("m",ld.m[0],s)),n.forEach(function(o){ld[o].forEach(function(a){a.name in s&&s[a.name]!=null?r.push(Mo(o,a,s)):a.push in s&&s[a.push]!=null&&s[a.push].forEach(function(l){r.push(Mo(o,a,l))})})})}),r.join(`\r
`)+`\r
`},rs=x0,BU=UU,FU=BU,M0=rs.parse;rs.parseParams;rs.parseFmtpConfig;rs.parsePayloads;rs.parseRemoteCandidates;rs.parseImageAttributes;rs.parseSimulcastStreamList;var jU=Object.defineProperty,VU=Object.defineProperties,GU=Object.getOwnPropertyDescriptors,nc=Object.getOwnPropertySymbols,$0=Object.prototype.hasOwnProperty,U0=Object.prototype.propertyIsEnumerable,My=(e,t,i)=>t in e?jU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Re=(e,t)=>{for(var i in t||(t={}))$0.call(t,i)&&My(e,i,t[i]);if(nc)for(var i of nc(t))U0.call(t,i)&&My(e,i,t[i]);return e},Ot=(e,t)=>VU(e,GU(t)),$y=(e,t)=>{var i={};for(var n in e)$0.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&nc)for(var n of nc(e))t.indexOf(n)<0&&U0.call(e,n)&&(i[n]=e[n]);return i},HU=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),_=(e,t,i)=>new Promise((n,r)=>{var s=l=>{try{a(i.next(l))}catch(c){r(c)}},o=l=>{try{a(i.throw(l))}catch(c){r(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);a((i=i.apply(e,t)).next())}),KU=HU((e,t)=>{t.exports={name:"@100mslive/hms-video",version:"0.9.2",license:"MIT",main:"dist/index.cjs.js",typings:"dist/index.d.ts",module:"dist/index.js",files:["dist","src"],engines:{node:">=10"},exports:{".":{require:"./dist/index.cjs.js",import:"./dist/index.js",default:"./dist/index.js"}},scripts:{prestart:"rm -rf dist && yarn types:build",start:'concurrently "yarn dev" "yarn types"',dev:"node ../../scripts/dev","build:only":"node ../../scripts/build",build:"yarn build:only && yarn types:build",types:"tsc -w","types:build":"tsc -p tsconfig.json",test:"jest --maxWorkers=1",lint:"eslint -c ../../.eslintrc .","lint:fix":"yarn lint --fix",prepare:"yarn build",size:"size-limit",analyze:"size-limit --why",format:"prettier --write src/**/*.ts"},author:"100ms <tech-common@100ms.live>",devDependencies:{"@types/dom-screen-wake-lock":"^1.0.1","@types/sdp-transform":"^2.4.4","@types/ua-parser-js":"^0.7.36","@types/uuid":"^8.3.0","jest-canvas-mock":"^2.3.1",tslib:"^2.2.0"},dependencies:{eventemitter2:"^6.4.7","sdp-transform":"^2.14.1","ua-parser-js":"^1.0.1",uuid:"^8.3.2","webrtc-adapter":"^8.0.0"},gitHead:"4e000fbf8980a6815e2b0c50e0b287472ee22fd5"}}),jc=class{constructor(e){this.key=e,this.storage=null}getStorage(){return ki&&!this.storage&&(YU(),this.storage=window.localStorage),this.storage}get(){var e;let t=(e=this.getStorage())==null?void 0:e.getItem(this.key);return t?JSON.parse(t):void 0}set(e){var t;let i=JSON.stringify(e);(t=this.getStorage())==null||t.setItem(this.key,i)}clear(){var e;(e=this.getStorage())==null||e.removeItem(this.key)}},Ms=new kh.exports.UAParser,Uy,fp=typeof window>"u"&&!((Uy=Ms.getBrowser().name)!=null&&Uy.toLowerCase().includes("electron")),ki=typeof window<"u",li;(function(e){e.PROD="prod",e.QA="qa",e.DEV="dev"})(li||(li={}));var WU=()=>Ms.getDevice().type==="mobile",qU=()=>{let e,t=new jc("hms-analytics-deviceId"),i=t.get();return i?e=i:(e=vr(),t.set(e)),e},zU=()=>typeof document<"u"&&document.hidden,By=()=>{var e;return((e=Ms.getOS().name)==null?void 0:e.toLowerCase())==="ios"},JU=class{constructor(){this.valuesMap=new Map}getItem(e){return this.valuesMap.has(e)?String(this.valuesMap.get(e)):null}setItem(e,t){this.valuesMap.set(e,t)}removeItem(e){this.valuesMap.delete(e)}clear(){this.valuesMap.clear()}key(e){if(arguments.length===0)throw new TypeError("Failed to execute 'key' on 'Storage': 1 argument required, but only 0 present.");return Array.from(this.valuesMap.keys())[e]}get length(){return this.valuesMap.size}},YU=()=>{ki&&!localStorage&&(window.localStorage=new JU)},Tt;(function(e){e[e.VERBOSE=0]="VERBOSE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.TIME=4]="TIME",e[e.TIMEEND=5]="TIMEEND",e[e.ERROR=6]="ERROR",e[e.NONE=7]="NONE"})(Tt||(Tt={}));var XU=typeof window<"u"&&typeof window.expect<"u",b=class{static v(e,...t){this.log(0,e,...t)}static d(e,...t){this.log(1,e,...t)}static i(e,...t){this.log(2,e,...t)}static w(e,...t){this.log(3,e,...t)}static e(e,...t){this.log(6,e,...t)}static time(e){this.log(4,"[HMSPerformanceTiming]",e)}static timeEnd(e){this.log(5,"[HMSPerformanceTiming]",e,e)}static cleanUp(){performance.clearMarks(),performance.clearMeasures()}static log(e,t,...i){if(!(this.level.valueOf()>e.valueOf()))switch(e){case 0:{console.log(t,...i);break}case 1:{console.debug(t,...i);break}case 2:{console.info(t,...i);break}case 3:{console.warn(t,...i);break}case 6:{console.error(t,...i);break}case 4:{performance.mark(i[0]);break}case 5:{let n=i[0];try{let r=performance.measure(n,n);this.log(1,t,n,r==null?void 0:r.duration),performance.clearMarks(n),performance.clearMeasures(n)}catch(r){this.log(1,t,n,r)}break}}}};b.level=XU?7:0;var B0=class{constructor({sender:e,message:t,type:i="chat",recipientPeer:n,recipientRoles:r,time:s}){this.sender=e,this.message=t,this.type=i,this.recipientPeer=n,this.recipientRoles=r,this.time=s}toSignalParams(){var e,t;let i=(e=this.recipientRoles)==null?void 0:e.map(s=>s.name),n=(t=this.recipientPeer)==null?void 0:t.peerId,r={info:{message:this.message,type:this.type}};return i!=null&&i.length&&(r.roles=i),n&&(r.peer_id=n),r}toString(){var e;return`{
      sender: ${this.sender};
      recipientPeer: ${this.recipientPeer};
      recipientRoles: ${(e=this.recipientRoles)==null?void 0:e.map(t=>t.name)};
      message: ${this.message};
      time: ${this.time};
      type: ${this.type};
    }`}},ZU=class{constructor(e,t){this.id=e,this.store=t,this.recording={server:{running:!1},browser:{running:!1},hls:{running:!1}},this.rtmp={running:!1},this.hls={running:!1,variants:[]}}get localPeer(){return this.store.getLocalPeer()}get peers(){return this.store.getPeers()}},pp=class{constructor({peerId:e,name:t,isLocal:i,customerUserId:n,metadata:r,role:s,joinedAt:o}){this.customerUserId="",this.metadata="",this.auxiliaryTracks=[],this.name=t,this.peerId=e,this.isLocal=i,this.customerUserId=n,this.metadata=r,this.joinedAt=o,s&&(this.role=s)}updateRole(e){this.role=e}updateName(e){this.name=e}updateMetadata(e){this.metadata=e}toString(){var e,t,i;return`{
      name: ${this.name};
      role: ${(e=this.role)==null?void 0:e.name};
      peerId: ${this.peerId};
      customerUserId: ${this.customerUserId};
      ${this.audioTrack?`audioTrack: ${(t=this.audioTrack)==null?void 0:t.trackId};`:""}
      ${this.videoTrack?`videoTrack: ${(i=this.videoTrack)==null?void 0:i.trackId};`:""}
    }`}},F0=class{};F0.makePeerId=()=>vr();var QU=class extends pp{constructor(e){super(Ot(Re({},e),{peerId:F0.makePeerId(),isLocal:!0})),this.isLocal=!0,this.auxiliaryTracks=[],this.asRole=e.asRole}isInPreview(){return!!this.asRole}toString(){var e,t,i;return`{
      name: ${this.name};
      role: ${(e=this.role)==null?void 0:e.name};
      peerId: ${this.peerId};
      customerUserId: ${this.customerUserId};
      ${this.asRole?`asRole: ${this.asRole.name};`:""}
      ${this.audioTrack?`audioTrack: ${(t=this.audioTrack)==null?void 0:t.trackId};`:""}
      ${this.videoTrack?`videoTrack: ${(i=this.videoTrack)==null?void 0:i.trackId};`:""}
    }`}},eB=class extends pp{constructor(e){super(Ot(Re({},e),{isLocal:!1})),this.isLocal=!1,this.auxiliaryTracks=[],this.fromRoomState=!1,this.fromRoomState=!!e.fromRoomState}},Mr;(function(e){e.CUSTOM="CUSTOM",e.LOCAL="LOCAL",e.HMS="HMS"})(Mr||(Mr={}));function tB(){if(ki&&window){let e=window.location.hostname;return e==="localhost"||e==="127.0.0.1"?Mr.LOCAL:e.includes("app.100ms.live")?Mr.HMS:Mr.CUSTOM}return Mr.CUSTOM}var Ol=tB(),Fy=KU().version;function Ch(e=li.PROD,t){let i="web",n=Ol!==Mr.LOCAL&&e===li.PROD?"prod":"debug";if(fp)return jy({os:"web_nodejs",os_version:process.version,sdk:i,sdk_version:Fy,env:n,domain:Ol,framework:"node",framework_version:process.version,framework_sdk_version:t==null?void 0:t.sdkVersion});let r=Ms.getOS(),s=Ms.getDevice(),o=Ms.getBrowser(),a=cd(`web_${r.name}`),l=r.version||"",c=cd(`${o.name}_${o.version}`),u=c;return s.type&&(u=`${cd(`${s.vendor}_${s.type}`)}/${c}`),jy({os:a,os_version:l,sdk:i,sdk_version:Fy,device_model:u,env:n,domain:Ol,framework:t==null?void 0:t.type,framework_version:t==null?void 0:t.version,framework_sdk_version:t==null?void 0:t.sdkVersion})}function cd(e){return e.replace(/ /g,"_")}var jy=(e,t=",")=>Object.keys(e).filter(i=>!!e[i]).map(i=>`${i}:${e[i]}`).join(t),mt=class{constructor({name:e,level:t,properties:i,includesPII:n,timestamp:r}){this.metadata={peer:{},userAgent:Ch()},this.name=e,this.level=t,this.includesPII=n||!1,this.properties=i||{},this.timestamp=r||new Date().getTime(),this.event_id=vr(),this.device_id=qU()}toSignalParams(){return{name:this.name,info:Ot(Re({},this.properties),{timestamp:this.timestamp,domain:Ol}),timestamp:new Date().getTime()}}},Ah;(function(e){e[e.VERBOSE=0]="VERBOSE",e[e.INFO=1]="INFO",e[e.ERROR=2]="ERROR",e[e.OFF=3]="OFF"})(Ah||(Ah={}));var Qe;(function(e){e[e.VERBOSE=0]="VERBOSE",e[e.INFO=1]="INFO",e[e.ERROR=2]="ERROR",e[e.OFF=3]="OFF"})(Qe||(Qe={}));var Te=class extends Error{constructor(e,t,i,n,r,s=!1){super(n),this.code=e,this.name=t,this.message=n,this.description=r,this.isTerminal=s,Object.setPrototypeOf(this,Te.prototype),this.action=i.toString()}toAnalyticsProperties(){return{error_name:this.name,error_code:this.code,error_message:this.message,error_description:this.description,action:this.action,is_terminal:this.isTerminal}}addNativeError(e){this.nativeError=e}toString(){var e;return`{
      code: ${this.code};
      name: ${this.name};
      action: ${this.action};
      message: ${this.message};
      description: ${this.description};
      isTerminal: ${this.isTerminal};
      nativeError: ${(e=this.nativeError)==null?void 0:e.message};
    }`}},it=class{static connect(e,t,i=new Date,n=new Date,r){let s=this.eventNameFor("connect",e===void 0),o=e?Qe.ERROR:Qe.INFO,a=this.getPropertiesWithError(Ot(Re({},t),{[this.KEY_REQUESTED_AT]:i==null?void 0:i.getTime(),[this.KEY_RESPONDED_AT]:n==null?void 0:n.getTime(),endpoint:r}),e);return new mt({name:s,level:o,properties:a})}static disconnect(e,t){let i="disconnected",n=e?Qe.ERROR:Qe.INFO,r=this.getPropertiesWithError(t,e);return new mt({name:i,level:n,properties:r})}static preview(e){var t=e,{error:i}=t,n=$y(t,["error"]);let r=this.eventNameFor("preview",i===void 0),s=i?Qe.ERROR:Qe.INFO,o=this.getPropertiesWithError(n,i);return new mt({name:r,level:s,properties:o})}static join(e){var t=e,{error:i}=t,n=$y(t,["error"]);let r=this.eventNameFor("join",i===void 0),s=i?Qe.ERROR:Qe.INFO,o=this.getPropertiesWithError(Ot(Re({},n),{is_preview_called:!!n.is_preview_called}),i);return new mt({name:r,level:s,properties:o})}static publish({devices:e,settings:t,error:i}){let n=this.eventNameFor("publish",i===void 0),r=i?Qe.ERROR:Qe.INFO,s=this.getPropertiesWithError({devices:e,audio:t==null?void 0:t.audio,video:t==null?void 0:t.video},i);return new mt({name:n,level:r,properties:s})}static hlsPlayerError(e){return new mt({name:"hlsPlayerError",level:Qe.ERROR,properties:this.getErrorProperties(e)})}static subscribeFail(e){let t=this.eventNameFor("subscribe",!1),i=Qe.ERROR,n=this.getErrorProperties(e);return new mt({name:t,level:i,properties:n})}static leave(){return new mt({name:"leave",level:Qe.INFO})}static autoplayError(){return new mt({name:"autoplayError",level:Qe.ERROR})}static audioPlaybackError(e){return new mt({name:"audioPlaybackError",level:Qe.ERROR,properties:this.getErrorProperties(e)})}static deviceChange({selection:e,type:t,devices:i,error:n}){let r=this.eventNameFor(n?"publish":`device.${t}`,n===void 0),s=n?Qe.ERROR:Qe.INFO,o=this.getPropertiesWithError({selection:e,devices:i},n);return new mt({name:r,level:s,properties:o})}static performance(e){let t="perf.stats",i=Qe.INFO,n=e.toAnalyticsProperties();return new mt({name:t,level:i,properties:n})}static rtcStats(e){let t="rtc.stats",i=Qe.INFO,n=e.toAnalyticsProperties();return new mt({name:t,level:i,properties:n})}static degradationStats(e,t){let i="video.degradation.stats",n=Qe.INFO,r={degradedAt:e.degradedAt,trackId:e.trackId};if(!t&&e.degradedAt instanceof Date){let s=new Date,o=s.valueOf()-e.degradedAt.valueOf();r=Ot(Re({},r),{duration:o,restoredAt:s})}return new mt({name:i,level:n,properties:r})}static audioDetectionFail(e,t){let i=this.getPropertiesWithError({device:t},e),n=Qe.ERROR,r="audiopresence.failed";return new mt({name:r,level:n,properties:i})}static previewNetworkQuality(e){return new mt({name:"perf.networkquality.preview",level:e.error?Qe.ERROR:Qe.INFO,properties:e})}static eventNameFor(e,t){return`${e}.${t?"success":"failed"}`}static getPropertiesWithError(e,t){let i=this.getErrorProperties(t);return e=Re(Re({},i),e),e}static getErrorProperties(e){return e?e instanceof Te?e.toAnalyticsProperties():{error_name:e.name,error_message:e.message,error_description:e.cause}:{}}};it.KEY_REQUESTED_AT="requested_at",it.KEY_RESPONDED_AT="responded_at";var Le;(function(e){e.INIT="init_response_time",e.WEBSOCKET_CONNECT="ws_connect_time",e.ON_POLICY_CHANGE="on_policy_change_time",e.LOCAL_AUDIO_TRACK="local_audio_track_time",e.LOCAL_VIDEO_TRACK="local_video_track_time",e.JOIN="join_time",e.PREVIEW="preview_time",e.PEER_LIST="peer_list_time",e.ROOM_STATE="room_state_time",e.JOIN_RESPONSE="join_response_time",e.GET_TOKEN="GET_TOKEN"})(Le||(Le={}));var iB=[Le.INIT,Le.WEBSOCKET_CONNECT,Le.ON_POLICY_CHANGE,Le.LOCAL_AUDIO_TRACK,Le.LOCAL_VIDEO_TRACK,Le.PEER_LIST,Le.ROOM_STATE,Le.JOIN_RESPONSE],nB=class{constructor(){this.eventPerformanceMeasures={}}start(e){performance.mark(e)}end(e){var t;try{this.eventPerformanceMeasures[e]=performance.measure(e,e),b.d("[HMSPerformanceTiming]",e,(t=this.eventPerformanceMeasures[e])==null?void 0:t.duration)}catch(i){b.w("[AnalyticsTimer]",`Error in measuring performance for event ${e}`,{error:i})}}getTimeTaken(e){var t;return(t=this.eventPerformanceMeasures[e])==null?void 0:t.duration}getTimes(...e){return[...iB,...e].reduce((t,i)=>Ot(Re({},t),{[i]:this.getTimeTaken(i)}),{})}cleanUp(){this.eventPerformanceMeasures={}}},Ce={WebSocketConnectionErrors:{FAILED_TO_CONNECT:1e3,WEBSOCKET_CONNECTION_LOST:1003,ABNORMAL_CLOSE:1006},APIErrors:{SERVER_ERRORS:2e3,INIT_CONFIG_NOT_AVAILABLE:2002,ENDPOINT_UNREACHABLE:2003,INVALID_TOKEN_FORMAT:2004},TracksErrors:{GENERIC_TRACK:3e3,CANT_ACCESS_CAPTURE_DEVICE:3001,DEVICE_NOT_AVAILABLE:3002,DEVICE_IN_USE:3003,DEVICE_LOST_MIDWAY:3008,NOTHING_TO_RETURN:3005,INVALID_VIDEO_SETTINGS:3006,CODEC_CHANGE_NOT_PERMITTED:3007,AUTOPLAY_ERROR:3008,OVER_CONSTRAINED:3009,NO_AUDIO_DETECTED:3010,SYSTEM_DENIED_PERMISSION:3011,CURRENT_TAB_NOT_SHARED:3012,AUDIO_PLAYBACK_ERROR:3013},WebrtcErrors:{CREATE_OFFER_FAILED:4001,CREATE_ANSWER_FAILED:4002,SET_LOCAL_DESCRIPTION_FAILED:4003,SET_REMOTE_DESCRIPTION_FAILED:4004,ICE_FAILURE:4005,ICE_DISCONNECTED:4006},WebsocketMethodErrors:{SERVER_ERRORS:5e3,ALREADY_JOINED:5001,CANNOT_JOIN_PREVIEW_IN_PROGRESS:5002},GenericErrors:{NOT_CONNECTED:6e3,SIGNALLING:6001,UNKNOWN:6002,NOT_READY:6003,JSON_PARSING_FAILED:6004,TRACK_METADATA_MISSING:6005,RTC_TRACK_MISSING:6006,PEER_METADATA_MISSING:6007,INVALID_ROLE:6008,PREVIEW_IN_PROGRESS:6009,MISSING_MEDIADEVICES:6010,MISSING_RTCPEERCONNECTION:6011},PlaylistErrors:{NO_ENTRY_TO_PLAY:8001,NO_ENTRY_IS_PLAYING:8002}},Ue;(function(e){e.JOIN="join",e.OFFER="offer",e.ANSWER="answer",e.TRICKLE="trickle",e.TRACK_UPDATE="track-update",e.BROADCAST="broadcast",e.ANALYTICS="analytics",e.SERVER_ERROR="on-error",e.SERVER_WARNING="on-warning",e.SDK_NOTIFICATION="sdk-notification",e.LEAVE="leave",e.END_ROOM="end-room",e.PING="ping",e.ROLE_CHANGE_REQUEST="role-change-request",e.ROLE_CHANGE="role-change",e.TRACK_UPDATE_REQUEST="track-update-request",e.PEER_LEAVE_REQUEST="peer-leave-request",e.CHANGE_TRACK_MUTE_STATE_REQUEST="change-track-mute-state-request",e.START_RTMP_OR_RECORDING_REQUEST="rtmp-start",e.STOP_RTMP_AND_RECORDING_REQUEST="rtmp-stop",e.UPDATE_PEER_METADATA="peer-update",e.START_HLS_STREAMING="hls-start",e.STOP_HLS_STREAMING="hls-stop",e.HLS_TIMED_METADATA="hls-timed-metadata",e.SET_METADATA="set-metadata",e.GET_METADATA="get-metadata",e.LISTEN_METADATA_CHANGE="listen-metadata-change"})(Ue||(Ue={}));function Vy(e){switch(e){case Ue.JOIN:return Q.JOIN;case Ue.OFFER:return Q.PUBLISH;case Ue.ANSWER:return Q.SUBSCRIBE;case Ue.TRACK_UPDATE:return Q.TRACK;default:return Q.NONE}}var Q;(function(e){e.NONE="NONE",e.TRACK="TRACK",e.INIT="INIT",e.GET_TOKEN="GET_TOKEN",e.PUBLISH="PUBLISH",e.UNPUBLISH="UNPUBLISH",e.JOIN="JOIN",e.SUBSCRIBE="SUBSCRIBE",e.DATA_CHANNEL_SEND="DATA_CHANNEL_SEND",e.RESTART_ICE="RESTART_ICE",e.VIDEO_PLUGINS="VIDEO_PLUGINS",e.AUDIO_PLUGINS="AUDIO_PLUGINS",e.AUTOPLAY="AUTOPLAY",e.RECONNECT_SIGNAL="RECONNECT_SIGNAL",e.VALIDATION="VALIDATION",e.PLAYLIST="PLAYLIST",e.PREVIEW="PREVIEW"})(Q||(Q={}));var rB=[Ue.JOIN,Ue.OFFER,Ue.ANSWER,Ue.TRICKLE,Q.JOIN],te={WebSocketConnectionErrors:{FailedToConnect(e,t=""){return new Te(Ce.WebSocketConnectionErrors.FAILED_TO_CONNECT,"WebsocketFailedToConnect",e,`[WS]: ${t}`,`[WS]: ${t}`)},WebSocketConnectionLost(e,t=""){return new Te(Ce.WebSocketConnectionErrors.WEBSOCKET_CONNECTION_LOST,"WebSocketConnectionLost",e,"Network connection lost ",t)},AbnormalClose(e,t=""){return new Te(Ce.WebSocketConnectionErrors.ABNORMAL_CLOSE,"WebSocketAbnormalClose",e,"Websocket closed abnormally",t)}},APIErrors:{ServerErrors(e,t,i="",n=!0){return new Te(e,"ServerErrors",t,`[${t}]: Server error ${i}`,i,n)},EndpointUnreachable(e,t=""){return new Te(Ce.APIErrors.ENDPOINT_UNREACHABLE,"EndpointUnreachable",e,`Endpoint is not reachable - ${t}`,t)},InvalidTokenFormat(e,t=""){return new Te(Ce.APIErrors.INVALID_TOKEN_FORMAT,"InvalidTokenFormat",e,`Token is not in proper JWT format - ${t}`,t,!0)},InitConfigNotAvailable(e,t=""){return new Te(Ce.APIErrors.INIT_CONFIG_NOT_AVAILABLE,"InitError",e,`[INIT]: ${t}`,`[INIT]: ${t}`)}},TracksErrors:{GenericTrack(e,t=""){return new Te(Ce.TracksErrors.GENERIC_TRACK,"GenericTrack",e,`[TRACK]: ${t}`,`[TRACK]: ${t}`)},CantAccessCaptureDevice(e,t,i=""){return new Te(Ce.TracksErrors.CANT_ACCESS_CAPTURE_DEVICE,"CantAccessCaptureDevice",e,`User denied permission to access capture device - ${t}`,i)},DeviceNotAvailable(e,t,i=""){return new Te(Ce.TracksErrors.DEVICE_NOT_AVAILABLE,"DeviceNotAvailable",e,`[TRACK]: Capture device is no longer available - ${t}`,i)},DeviceInUse(e,t,i=""){return new Te(Ce.TracksErrors.DEVICE_IN_USE,"DeviceInUse",e,`[TRACK]: Capture device is in use by another application - ${t}`,i)},DeviceLostMidway(e,t,i=""){return new Te(Ce.TracksErrors.DEVICE_LOST_MIDWAY,"DeviceLostMidway",e,`Lost access to capture device midway - ${t}`,i)},NothingToReturn(e,t="",i="There is no media to return. Please select either video or audio or both."){return new Te(Ce.TracksErrors.NOTHING_TO_RETURN,"NothingToReturn",e,i,t)},InvalidVideoSettings(e,t=""){return new Te(Ce.TracksErrors.INVALID_VIDEO_SETTINGS,"InvalidVideoSettings",e,"Cannot enable simulcast when no video settings are provided",t)},AutoplayBlocked(e,t=""){return new Te(Ce.TracksErrors.AUTOPLAY_ERROR,"AutoplayBlocked",e,"Autoplay blocked because the user didn't interact with the document first",t)},CodecChangeNotPermitted(e,t=""){return new Te(Ce.TracksErrors.CODEC_CHANGE_NOT_PERMITTED,"CodecChangeNotPermitted",e,"Codec can't be changed mid call.",t)},OverConstrained(e,t,i=""){return new Te(Ce.TracksErrors.OVER_CONSTRAINED,"OverConstrained",e,`[TRACK]: Requested constraints cannot be satisfied with the device hardware - ${t}`,i)},NoAudioDetected(e,t="Please check the mic or use another audio input"){return new Te(Ce.TracksErrors.NO_AUDIO_DETECTED,"NoAudioDetected",e,"No audio input detected from microphone",t)},SystemDeniedPermission(e,t,i=""){return new Te(Ce.TracksErrors.SYSTEM_DENIED_PERMISSION,"SystemDeniedPermission",e,`Operating System denied permission to access capture device - ${t}`,i)},CurrentTabNotShared(){return new Te(Ce.TracksErrors.CURRENT_TAB_NOT_SHARED,"CurrentTabNotShared",Q.TRACK,"The app requires you to share the current tab","You must screen share the current tab in order to proceed")},AudioPlaybackError(e){return new Te(Ce.TracksErrors.AUDIO_PLAYBACK_ERROR,"Audio playback error",Q.TRACK,e,e)}},WebrtcErrors:{CreateOfferFailed(e,t=""){return new Te(Ce.WebrtcErrors.CREATE_OFFER_FAILED,"CreateOfferFailed",e,`[${e.toString()}]: Failed to create offer. `,t)},CreateAnswerFailed(e,t=""){return new Te(Ce.WebrtcErrors.CREATE_ANSWER_FAILED,"CreateAnswerFailed",e,`[${e.toString()}]: Failed to create answer. `,t)},SetLocalDescriptionFailed(e,t=""){return new Te(Ce.WebrtcErrors.SET_LOCAL_DESCRIPTION_FAILED,"SetLocalDescriptionFailed",e,`[${e.toString()}]: Failed to set offer. `,t)},SetRemoteDescriptionFailed(e,t=""){return new Te(Ce.WebrtcErrors.SET_REMOTE_DESCRIPTION_FAILED,"SetRemoteDescriptionFailed",e,`[${e.toString()}]: Failed to set answer. `,t,!0)},ICEFailure(e,t=""){return new Te(Ce.WebrtcErrors.ICE_FAILURE,"ICEFailure",e,`[${e.toString()}]: Ice connection state FAILED`,t)},ICEDisconnected(e,t=""){return new Te(Ce.WebrtcErrors.ICE_DISCONNECTED,"ICEDisconnected",e,`[${e.toString()}]: Ice connection state DISCONNECTED`,t)}},WebsocketMethodErrors:{ServerErrors(e,t,i){return new Te(e,"ServerErrors",t,i,i,rB.includes(t))},AlreadyJoined(e,t=""){return new Te(Ce.WebsocketMethodErrors.ALREADY_JOINED,"AlreadyJoined",e,"[JOIN]: You have already joined this room.",t)},CannotJoinPreviewInProgress(e,t=""){return new Te(Ce.WebsocketMethodErrors.CANNOT_JOIN_PREVIEW_IN_PROGRESS,"CannotJoinPreviewInProgress",e,"[JOIN]: Cannot join if preview is in progress",t)}},GenericErrors:{NotConnected(e,t=""){return new Te(Ce.GenericErrors.NOT_CONNECTED,"NotConnected",e,"Client is not connected",t)},Signalling(e,t){return new Te(Ce.GenericErrors.SIGNALLING,"Signalling",e,`Unknown signalling error: ${e.toString()} ${t} `,t)},Unknown(e,t){return new Te(Ce.GenericErrors.UNKNOWN,"Unknown",e,`Unknown exception: ${t}`,t)},NotReady(e,t=""){return new Te(Ce.GenericErrors.NOT_READY,"NotReady",e,t,t)},JsonParsingFailed(e,t,i=""){return new Te(Ce.GenericErrors.JSON_PARSING_FAILED,"JsonParsingFailed",e,`Failed to parse JSON message - ${t}`,i)},TrackMetadataMissing(e,t=""){return new Te(Ce.GenericErrors.TRACK_METADATA_MISSING,"TrackMetadataMissing",e,"Track Metadata Missing",t)},RTCTrackMissing(e,t=""){return new Te(Ce.GenericErrors.RTC_TRACK_MISSING,"RTCTrackMissing",e,"RTC Track missing",t)},PeerMetadataMissing(e,t=""){return new Te(Ce.GenericErrors.PEER_METADATA_MISSING,"PeerMetadataMissing",e,"Peer Metadata Missing",t)},ValidationFailed(e,t){return new Te(Ce.GenericErrors.INVALID_ROLE,"ValidationFailed",Q.VALIDATION,e,t?JSON.stringify(t):"")},InvalidRole(e,t){return new Te(Ce.GenericErrors.INVALID_ROLE,"InvalidRole",e,"Invalid role. Join with valid role",t,!0)},PreviewAlreadyInProgress(e,t=""){return new Te(Ce.GenericErrors.PREVIEW_IN_PROGRESS,"PreviewAlreadyInProgress",e,"[Preview]: Cannot join if preview is in progress",t)},MissingMediaDevices(){return new Te(Ce.GenericErrors.MISSING_MEDIADEVICES,"MissingMediaDevices",Q.JOIN,"navigator.mediaDevices is undefined. 100ms SDK won't work on this website as WebRTC is not supported on HTTP endpoints(missing navigator.mediaDevices). Please ensure you're using the SDK either on localhost or a valid HTTPS endpoint.","",!0)},MissingRTCPeerConnection(){return new Te(Ce.GenericErrors.MISSING_RTCPEERCONNECTION,"MissingRTCPeerConnection",Q.JOIN,"RTCPeerConnection which is a core requirement for WebRTC call was not found, this could be due to an unsupported browser or browser extensions blocking WebRTC","",!0)}},MediaPluginErrors:{PlatformNotSupported(e,t=""){return new Te(7001,"PlatformNotSupported",e,"Check HMS Docs to see the list of supported platforms",t)},InitFailed(e,t=""){return new Te(7002,"InitFailed",e,"Plugin init failed",t)},ProcessingFailed(e,t=""){return new Te(7003,"ProcessingFailed",e,"Plugin processing failed",t)},AddAlreadyInProgress(e,t=""){return new Te(7004,"AddAlreadyInProgress",e,"Plugin add already in progress",t)},DeviceNotSupported(e,t=""){return new Te(7005,"DeviceNotSupported",e,"Check HMS Docs to see the list of supported devices",t)}},PlaylistErrors:{NoEntryToPlay(e,t){return new Te(Ce.PlaylistErrors.NO_ENTRY_TO_PLAY,"NoEntryToPlay",e,"Reached end of playlist",t)},NoEntryPlaying(e,t){return new Te(Ce.PlaylistErrors.NO_ENTRY_IS_PLAYING,"NoEntryIsPlaying",e,"No entry is playing at this time",t)}}},_n;(function(e){e.UNKNOWN="unknown(video or audio)",e.AUDIO="audio",e.VIDEO="video",e.AV="audio, video",e.SCREEN="screen"})(_n||(_n={}));function sB(e,t){let i=e.toLowerCase();return i.includes("device not found")?te.TracksErrors.DeviceNotAvailable(Q.TRACK,t,e):i.includes("permission denied")?te.TracksErrors.CantAccessCaptureDevice(Q.TRACK,t,e):te.TracksErrors.GenericTrack(Q.TRACK,e)}function oB(e,t=""){if(ic.browserDetails.browser==="chrome"&&e.name==="NotAllowedError"&&e.message.includes("denied by system"))return te.TracksErrors.SystemDeniedPermission(Q.TRACK,t,e.message);if(ic.browserDetails.browser==="firefox"&&e.name==="NotFoundError"){let i=te.TracksErrors.SystemDeniedPermission(Q.TRACK,t,e.message);return i.description=`Capture device is either blocked at Operating System level or not available - ${t}`,i}switch(e.name){case"OverconstrainedError":return te.TracksErrors.OverConstrained(Q.TRACK,t,e.constraint);case"NotAllowedError":return te.TracksErrors.CantAccessCaptureDevice(Q.TRACK,t,e.message);case"NotFoundError":return te.TracksErrors.DeviceNotAvailable(Q.TRACK,t,e.message);case"NotReadableError":return te.TracksErrors.DeviceInUse(Q.TRACK,t,e.message);case"TypeError":return te.TracksErrors.NothingToReturn(Q.TRACK,e.message);default:return sB(e.message,t)}}function rc(e,t){let i=oB(e,t);return i.addNativeError(e),i}var Nr;(function(e){e.RECORDING_STATE_UPDATED="RECORDING_STATE_UPDATED",e.BROWSER_RECORDING_STATE_UPDATED="BROWSER_RECORDING_STATE_UPDATED",e.SERVER_RECORDING_STATE_UPDATED="SERVER_RECORDING_STATE_UPDATED",e.RTMP_STREAMING_STATE_UPDATED="RTMP_STREAMING_STATE_UPDATED",e.HLS_STREAMING_STATE_UPDATED="HLS_STREAMING_STATE_UPDATED"})(Nr||(Nr={}));var yt;(function(e){e[e.PEER_JOINED=0]="PEER_JOINED",e[e.PEER_LEFT=1]="PEER_LEFT",e[e.AUDIO_TOGGLED=2]="AUDIO_TOGGLED",e[e.VIDEO_TOGGLED=3]="VIDEO_TOGGLED",e[e.BECAME_DOMINANT_SPEAKER=4]="BECAME_DOMINANT_SPEAKER",e[e.RESIGNED_DOMINANT_SPEAKER=5]="RESIGNED_DOMINANT_SPEAKER",e[e.STARTED_SPEAKING=6]="STARTED_SPEAKING",e[e.STOPPED_SPEAKING=7]="STOPPED_SPEAKING",e[e.ROLE_UPDATED=8]="ROLE_UPDATED",e[e.PEER_LIST=9]="PEER_LIST",e[e.NAME_UPDATED=10]="NAME_UPDATED",e[e.METADATA_UPDATED=11]="METADATA_UPDATED"})(yt||(yt={}));var Ye;(function(e){e[e.TRACK_ADDED=0]="TRACK_ADDED",e[e.TRACK_REMOVED=1]="TRACK_REMOVED",e[e.TRACK_MUTED=2]="TRACK_MUTED",e[e.TRACK_UNMUTED=3]="TRACK_UNMUTED",e[e.TRACK_DESCRIPTION_CHANGED=4]="TRACK_DESCRIPTION_CHANGED",e[e.TRACK_DEGRADED=5]="TRACK_DEGRADED",e[e.TRACK_RESTORED=6]="TRACK_RESTORED"})(Ye||(Ye={}));var St;(function(e){e.NONE="none",e.LOW="low",e.MEDIUM="medium",e.HIGH="high"})(St||(St={}));var aB={f:St.HIGH,h:St.MEDIUM,q:St.LOW},Rh;(function(e){e.VP8="vp8",e.VP9="vp9",e.H264="h264"})(Rh||(Rh={}));var Ph;(function(e){e.OPUS="opus"})(Ph||(Ph={}));var Zo;(function(e){e.USER="user",e.ENVIRONMENT="environment",e.LEFT="left",e.RIGHT="right"})(Zo||(Zo={}));var Gy;(function(e){e.videoInput="videoInput",e.audioInput="audioInput",e.audioOutput="audioOutput"})(Gy||(Gy={}));var $e;(function(e){e.audio="audio",e.video="video"})($e||($e={}));var ga=class{constructor(){this._volume=1,this._codec=Ph.OPUS,this._maxBitrate=32,this._deviceId="default",this._advanced=[{googEchoCancellation:{exact:!0}},{googExperimentalEchoCancellation:{exact:!0}},{autoGainControl:{exact:!0}},{noiseSuppression:{exact:!0}},{googHighpassFilter:{exact:!0}},{googAudioMirroring:{exact:!0}}]}volume(e){if(!(0<=e&&e<=1))throw Error("volume can only be in range [0.0, 1.0]");return this._volume=e,this}codec(e){return this._codec=e,this}maxBitrate(e){if(e&&e<=0)throw Error("maxBitrate should be >= 1");return this._maxBitrate=e,this}deviceId(e){return this._deviceId=e,this}advanced(e){return this._advanced=e,this}build(){return new mp(this._volume,this._codec,this._maxBitrate,this._deviceId,this._advanced)}},mp=class{constructor(e,t,i,n,r){this.volume=e,this.codec=t,this.maxBitrate=i,this.deviceId=n,this.advanced=r}toConstraints(){return{deviceId:this.deviceId,advanced:this.advanced}}toAnalyticsProperties(){return{audio_bitrate:this.maxBitrate,audio_codec:this.codec}}},no=class{constructor(){this._width=320,this._height=180,this._codec=Rh.VP8,this._maxFramerate=30,this._maxBitrate=150,this._advanced=[]}setWidth(e){return this._width=e,this}setHeight(e){return this._height=e,this}codec(e){return this._codec=e,this}maxFramerate(e){if(e&&e<=0)throw Error("maxFramerate should be >= 1");return this._maxFramerate=e,this}maxBitrate(e,t=!0){if(typeof e=="number"&&e<=0)throw Error("maxBitrate should be >= 1");return this._maxBitrate=e,!this._maxBitrate&&t&&(this._maxBitrate=15e4),this}deviceId(e){return this._deviceId=e,this}advanced(e){return this._advanced=e,this}facingMode(e){return this._facingMode=e,this}build(){return new gp(this._width,this._height,this._codec,this._maxFramerate,this._deviceId,this._advanced,this._maxBitrate,this._facingMode)}},gp=class{constructor(e,t,i,n,r,s,o,a){this.width=e,this.height=t,this.codec=i,this.maxFramerate=n,this.maxBitrate=o,this.deviceId=r,this.advanced=s,this.facingMode=a}toConstraints(e){let t="ideal";return e&&(t="max"),{width:{[t]:this.width},height:{[t]:this.height},frameRate:this.maxFramerate,deviceId:this.deviceId,facingMode:this.facingMode}}toAnalyticsProperties(){return{width:this.width,height:this.height,video_bitrate:this.maxBitrate,framerate:this.maxFramerate,video_codec:this.codec,facingMode:this.facingMode}}},Hy=class{constructor(){this._video=new no().build(),this._audio=new ga().build(),this._screen=new no().build(),this._simulcast=!1}video(e){return this._video=e,this}audio(e){return this._audio=e,this}screen(e){return this._screen=e,this}simulcast(e){return this._simulcast=e,this}build(){if(this._audio===null&&this._video===null)throw te.TracksErrors.NothingToReturn(Q.TRACK);if(this._video===null&&this._simulcast)throw te.TracksErrors.InvalidVideoSettings(Q.TRACK,"Cannot enable simulcast when no video settings are provided");return new Ih(this._video,this._audio,this._simulcast,this._screen||void 0)}},Ih=class{constructor(e,t,i,n=null){this.video=e,this.audio=t,this.simulcast=i,this.screen=n}toAnalyticsProperties(){let e={audio_enabled:this.audio!==null,video_enabled:this.video!==null};return this.audio&&(e=Re(Re({},this.audio.toAnalyticsProperties()),e)),this.video&&(e=Re(Re({},this.video.toAnalyticsProperties()),e)),e}},j0=class{constructor(e){this.tracks=new Array,this.nativeStream=e,this.id=e.id}},Qo=e=>e?`{
    trackId: ${e.id};
    kind: ${e.kind};
    enabled: ${e.enabled};
    muted: ${e.muted};
    readyState: ${e.readyState};
  }`:"",vp=class{constructor(e,t,i){this.logIdentifier="",this.stream=e,this.nativeTrack=t,this.source=i}get enabled(){return this.nativeTrack.enabled}get trackId(){return this.firstTrackId||this.sdpTrackId||this.nativeTrack.id}getMediaTrackSettings(){return this.nativeTrack.getSettings()}setEnabled(e){return _(this,null,function*(){this.nativeTrack.enabled=e})}setSdpTrackId(e){this.sdpTrackId=e}setFirstTrackId(e){this.firstTrackId=e}cleanup(){var e;b.d("[HMSTrack]","Stopping track",this.toString()),(e=this.nativeTrack)==null||e.stop()}toString(){var e;return`{
      streamId: ${this.stream.id};
      peerId: ${this.peerId};
      trackId: ${this.trackId};
      mid: ${((e=this.transceiver)==null?void 0:e.mid)||"-"};
      logIdentifier: ${this.logIdentifier};
      source: ${this.source};
      enabled: ${this.enabled};
      nativeTrack: ${Qo(this.nativeTrack)};
    }`}},wt;(function(e){e.AUDIO="audio",e.VIDEO="video"})(wt||(wt={}));var V0=class extends j0{constructor(e,t){super(e),this.audio=!0,this.video=St.NONE,this.connection=t}setAudio(e,t,i){return _(this,null,function*(){this.audio!==e&&(this.audio=e,b.d(`[Remote stream] ${i||""} 
    streamId=${this.id}
    trackId=${t}
    subscribing audio - ${this.audio}`),yield this.connection.sendOverApiDataChannelWithResponse({params:{subscribed:this.audio,track_id:t},method:"prefer-audio-track-state"}))})}setVideoLayerLocally(e,t,i){this.video=e,b.d(`[Remote stream] ${t}
    streamId=${this.id}
    source: ${i}
    Setting layer field to=${e}`)}setVideoLayer(e,t,i,n){return b.d(`[Remote stream] ${i} 
      streamId=${this.id}
      trackId=${t} 
      source: ${n} request ${e} layer`),this.setVideoLayerLocally(e,i,n),this.connection.sendOverApiDataChannelWithResponse({params:{max_spatial_layer:this.video,track_id:t},method:"prefer-video-track-state"})}getSimulcastLayer(){return this.video}getVideoLayer(){return this.video}isAudioSubscribed(){return this.audio}},yp=class extends vp{constructor(e,t,i){if(super(e,t,i),this.type=wt.AUDIO,this.audioElement=null,t.kind!=="audio")throw new Error("Expected 'track' kind = 'audio'")}getVolume(){return this.audioElement?this.audioElement.volume*100:null}setVolume(e){return _(this,null,function*(){if(e<0||e>100)throw Error("Please pass a valid number between 0-100");yield this.subscribeToAudio(e===0?!1:this.enabled),this.audioElement&&(this.audioElement.volume=e/100)})}setAudioElement(e){b.d("[HMSAudioTrack]",this.logIdentifier,"adding audio element",`${this}`,e),this.audioElement=e}getAudioElement(){return this.audioElement}getOutputDevice(){return this.outputDevice}cleanup(){super.cleanup(),this.audioElement&&(this.audioElement.srcObject=null,this.audioElement.remove(),this.audioElement=null)}setOutputDevice(e){return _(this,null,function*(){var t;if(!e){b.d("[HMSAudioTrack]",this.logIdentifier,"device is null",`${this}`);return}if(!this.audioElement){b.d("[HMSAudioTrack]",this.logIdentifier,"no audio element to set output",`${this}`),this.outputDevice=e;return}try{typeof this.audioElement.setSinkId=="function"&&(yield(t=this.audioElement)==null?void 0:t.setSinkId(e.deviceId),this.outputDevice=e)}catch(i){b.d("[HMSAudioTrack]","error in setSinkId",i)}})}subscribeToAudio(e){return _(this,null,function*(){this.stream instanceof V0&&(yield this.stream.setAudio(e,this.trackId,this.logIdentifier))})}},lB=class{constructor(){this.storage=new jc("hms-device-selection"),this.remember=!1,this.TAG="[HMSDeviceStorage]"}setDevices(e){this.devices=e}rememberDevices(e){this.remember=e}updateSelection(e,{deviceId:t,groupId:i}){if(!this.devices||!this.remember)return;let n=this.devices[e].find(s=>this.isSame({deviceId:t,groupId:i},s));if(!n){b.w(this.TAG,`Could not find device with deviceId: ${t}, groupId: ${i}`);return}let r=this.storage.get()||{};r[e]=n,this.storage.set(r)}getSelection(){if(this.remember)return this.storage.get()}cleanup(){this.remember=!1,this.devices=void 0}isSame(e,t){return e.deviceId===t.deviceId&&(e.groupId===t.groupId||!e.groupId)}},Mn=new lB,Ky;(function(e){e.TRANSFORM="TRANSFORM",e.ANALYZE="ANALYZE"})(Ky||(Ky={}));var ro;(function(e){e.PLATFORM_NOT_SUPPORTED="PLATFORM_NOT_SUPPORTED",e.DEVICE_NOT_SUPPORTED="DEVICE_NOT_SUPPORTED"})(ro||(ro={}));var sc=class{static failure(e,t){let i="mediaPlugin.failed",n=Qe.ERROR,r=Re({plugin_name:e},t.toAnalyticsProperties());return new mt({name:i,level:n,properties:r})}static audioPluginFailure(e,t,i){let n="mediaPlugin.failed",r=Qe.ERROR,s=Re({plugin_name:e,sampleRate:t},i.toAnalyticsProperties());return new mt({name:n,level:r,properties:s})}static audioPluginStats({pluginName:e,duration:t,loadTime:i,sampleRate:n}){let r="mediaPlugin.stats",s=Qe.INFO,o={plugin_name:e,duration:t,load_time:i,sampleRate:n};return new mt({name:r,level:s,properties:o})}static stats({pluginName:e,duration:t,loadTime:i,avgPreProcessingTime:n,avgProcessingTime:r,inputFrameRate:s,pluginFrameRate:o}){let a="mediaPlugin.stats",l=Qe.INFO,c={plugin_name:e,duration:t,load_time:i,avg_preprocessing_time:n,avg_processing_time:r,input_frame_rate:s,plugin_frame_rate:o};return new mt({name:a,level:l,properties:c})}},cB=class{constructor(e){this.eventBus=e,this.TAG="[AudioPluginsAnalytics]",this.initTime={},this.addedTimestamps={},this.pluginAdded={},this.pluginSampleRate={}}added(e,t){this.pluginAdded[e]=!0,this.addedTimestamps[e]=Date.now(),this.initTime[e]=0,this.pluginSampleRate[e]=t}removed(e){if(this.pluginAdded[e]){let t={pluginName:e,duration:Math.floor((Date.now()-this.addedTimestamps[e])/1e3),loadTime:this.initTime[e],sampleRate:this.pluginSampleRate[e]};this.eventBus.analytics.publish(sc.audioPluginStats(t)),this.clean(e)}}failure(e,t){this.pluginAdded[e]&&(this.eventBus.analytics.publish(sc.audioPluginFailure(e,this.pluginSampleRate[e],t)),this.clean(e))}initWithTime(e,t){return _(this,null,function*(){if(this.initTime[e]){b.i(this.TAG,`Plugin Already loaded ${e}, time it took: ${this.initTime[e]}`);return}let i;try{i=yield this.timeInMs(t),b.i(this.TAG,`Time taken for Plugin ${e} initialization : ${i}`)}catch(n){let r=te.MediaPluginErrors.InitFailed(Q.AUDIO_PLUGINS,`failed during initialization of plugin${n.message||n}`);throw b.e(this.TAG,r),this.failure(e,r),r}i&&(this.initTime[e]=i)})}timeInMs(e){return _(this,null,function*(){let t=Date.now();return yield e(),Math.floor(Date.now()-t)})}clean(e){delete this.addedTimestamps[e],delete this.initTime[e],delete this.pluginAdded[e],delete this.pluginSampleRate[e]}},uB=48e3,dB=()=>navigator.userAgent.indexOf("Firefox")!==-1,hB=class{constructor(e,t){this.TAG="[AudioPluginsManager]",this.pluginAddInProgress=!1,this.hmsTrack=e,this.pluginsMap=new Map,this.analytics=new cB(t),this.createAudioContext()}getPlugins(){return Array.from(this.pluginsMap.keys())}addPlugin(e){return _(this,null,function*(){var t;let i=(t=e.getName)==null?void 0:t.call(e);if(!i){b.w("no name provided by the plugin");return}if(this.pluginAddInProgress){let n=te.MediaPluginErrors.AddAlreadyInProgress(Q.AUDIO_PLUGINS,"Add Plugin is already in Progress");throw this.analytics.added(i,this.audioContext.sampleRate),this.analytics.failure(i,n),b.w("can't add another plugin when previous add is in progress"),n}this.pluginAddInProgress=!0;try{yield this.addPluginInternal(e)}finally{this.pluginAddInProgress=!1}})}addPluginInternal(e){return _(this,null,function*(){var t;let i=(t=e.getName)==null?void 0:t.call(e);if(this.pluginsMap.get(i)){b.w(this.TAG,`plugin - ${i} already added.`);return}yield this.validateAndThrow(i,e);try{this.pluginsMap.size===0?yield this.initAudioNodes():this.prevAudioNode&&this.prevAudioNode.disconnect(),this.analytics.added(i,this.audioContext.sampleRate),yield this.analytics.initWithTime(i,()=>_(this,null,function*(){return e.init()})),this.pluginsMap.set(i,e),yield this.processPlugin(e),yield this.connectToDestination()}catch(n){throw b.e(this.TAG,"failed to add plugin",n),n}})}validatePlugin(e){return e.checkSupport(this.audioContext)}validateAndThrow(e,t){return _(this,null,function*(){let i=this.validatePlugin(t);if(i.isSupported)b.i(this.TAG,`plugin is supported,- ${t.getName()}`);else if(this.analytics.added(e,this.audioContext.sampleRate),i.errType===ro.PLATFORM_NOT_SUPPORTED){let n=te.MediaPluginErrors.PlatformNotSupported(Q.AUDIO_PLUGINS,"platform not supported, see docs");throw this.analytics.failure(e,n),yield this.cleanup(),n}else if(i.errType===ro.DEVICE_NOT_SUPPORTED){let n=te.MediaPluginErrors.DeviceNotSupported(Q.AUDIO_PLUGINS,"audio device not supported, see docs");throw this.analytics.failure(e,n),yield this.cleanup(),n}})}removePlugin(e){return _(this,null,function*(){yield this.removePluginInternal(e),this.pluginsMap.size===0?(yield this.cleanup(),b.i(this.TAG,"No plugins left, stopping plugins loop"),yield this.hmsTrack.setProcessedTrack(void 0)):yield this.reprocessPlugins()})}cleanup(){return _(this,null,function*(){var e,t,i;for(let n of this.pluginsMap.values())yield this.removePluginInternal(n);yield this.hmsTrack.setProcessedTrack(void 0),(e=this.sourceNode)==null||e.disconnect(),(t=this.prevAudioNode)==null||t.disconnect(),(i=this.outputTrack)==null||i.stop(),this.sourceNode=void 0,this.destinationNode=void 0,this.prevAudioNode=void 0,this.outputTrack=void 0})}closeContext(){return _(this,null,function*(){var e;(e=this.audioContext)==null||e.close(),this.audioContext=void 0})}reprocessPlugins(){return _(this,null,function*(){if(this.pluginsMap.size===0||!this.sourceNode)return;let e=Array.from(this.pluginsMap.values());yield this.cleanup(),yield this.initAudioNodes();for(let t of e)yield this.addPlugin(t)})}initAudioNodes(){return _(this,null,function*(){if(this.audioContext){if(!this.sourceNode){let e=new MediaStream([this.hmsTrack.nativeTrack]);this.sourceNode=this.audioContext.createMediaStreamSource(e)}if(!this.destinationNode){this.destinationNode=this.audioContext.createMediaStreamDestination(),this.outputTrack=this.destinationNode.stream.getAudioTracks()[0];try{yield this.hmsTrack.setProcessedTrack(this.outputTrack)}catch(e){throw b.e(this.TAG,"error in setting processed track",e),e}}}})}processPlugin(e){return _(this,null,function*(){try{let t=yield e.processAudioTrack(this.audioContext,this.prevAudioNode||this.sourceNode);this.prevAudioNode&&this.prevAudioNode.connect(t),this.prevAudioNode=t}catch(t){let i=e.getName();b.e(this.TAG,`error in processing plugin ${i}`,t),yield this.removePluginInternal(e)}})}connectToDestination(){return _(this,null,function*(){try{this.prevAudioNode&&this.destinationNode&&this.prevAudioNode.context===this.destinationNode.context&&this.prevAudioNode.connect(this.destinationNode)}catch(e){b.e(this.TAG,"error in connecting to destination node",e)}})}removePluginInternal(e){return _(this,null,function*(){var t;let i=(t=e.getName)==null?void 0:t.call(e);if(!this.pluginsMap.get(i)){b.w(this.TAG,`plugin - ${i} not found to remove.`);return}b.i(this.TAG,`removing plugin ${i}`),this.pluginsMap.delete(i),e.stop(),this.analytics.removed(i)})}createAudioContext(){this.audioContext||(dB()?this.audioContext=new AudioContext:this.audioContext=new AudioContext({sampleRate:uB}))}};function fB(e){return _(this,null,function*(){try{return(yield navigator.mediaDevices.getUserMedia({audio:e?e.toConstraints():!1})).getAudioTracks()[0]}catch(t){throw rc(t,_n.AUDIO)}})}function pB(e){return _(this,null,function*(){try{return(yield navigator.mediaDevices.getUserMedia({video:e?e.toConstraints():!1})).getVideoTracks()[0]}catch(t){throw rc(t,_n.VIDEO)}})}function ud(e){return"canvas"in e||e.label==="MediaStreamAudioDestinationNode"||e.label===""}var Vc={audioContext:null,getAudioContext(){return this.audioContext||(this.audioContext=new AudioContext),this.audioContext},resumeContext(){return _(this,null,function*(){try{return yield this.getAudioContext().resume()}catch(e){b.e("AudioContext",e)}})}},bp=class{constructor(e=1/0){this.capacity=e,this.storage=[]}size(){return this.storage.length}toList(){return this.storage.slice(0)}enqueue(e){this.size()===this.capacity&&this.dequeue(),this.storage.push(e)}dequeue(){return this.storage.shift()}aggregate(e){return e(this.storage)}};function ji(e){if(e<0)throw Error("`ms` should be a positive integer");return new Promise(t=>setTimeout(t,e))}function G0(e,t=300){let i;return function(...n){clearTimeout(i),i=void 0;let r=this;i=setTimeout(()=>{e.apply(r,n)},t)}}var mB=35,gB=5,vB=class{constructor(e,t,i){this.track=e,this.audioLevelEvent=t,this.silenceEvent=i,this.TAG="[TrackAudioLevelMonitor]",this.audioLevel=0,this.isMonitored=!1,this.interval=100,this.historyInterval=700,this.history=new bp(this.historyInterval/this.interval),this.detectSilence=()=>_(this,null,function*(){let n=20,r=50,s=0;for(;this.isMonitored;){if(this.track.enabled)if(this.isSilentThisInstant()){if(s++,s>r){this.silenceEvent.publish({track:this.track});break}}else break;yield ji(n)}});try{let n=new MediaStream([this.track.nativeTrack]);this.analyserNode=this.createAnalyserNodeForStream(n)}catch(n){b.w(this.TAG,"Unable to initialize AudioContext",n)}}start(){this.stop(),this.isMonitored=!0,b.d(this.TAG,"Starting track Monitor",`${this.track}`),this.loop().then(()=>b.d(this.TAG,"Stopping track Monitor",`${this.track}`))}stop(){if(!this.analyserNode){b.d(this.TAG,"AudioContext not initialized");return}this.sendAudioLevel(0),this.isMonitored=!1}loop(){return _(this,null,function*(){for(;this.isMonitored;)this.sendAudioLevel(this.getMaxAudioLevelOverPeriod()),yield ji(this.interval)})}sendAudioLevel(e=0){if(e=e>mB?e:0,Math.abs(this.audioLevel-e)>gB){this.audioLevel=e;let t={track:this.track,audioLevel:this.audioLevel};this.audioLevelEvent.publish(t)}}getMaxAudioLevelOverPeriod(){if(!this.analyserNode){b.d(this.TAG,"AudioContext not initialized");return}let e=this.calculateAudioLevel();return e!==void 0&&this.history.enqueue(e),this.history.aggregate(t=>Math.max(...t))}calculateAudioLevel(){if(!this.analyserNode){b.d(this.TAG,"AudioContext not initialized");return}let e=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(e);let t=.009,i=t;for(let r of e)i=Math.max(i,(r-128)/128);let n=(Math.log(t)-Math.log(i))/Math.log(t);return Math.ceil(Math.min(Math.max(n*100,0),100))}isSilentThisInstant(){if(!this.analyserNode){b.d(this.TAG,"AudioContext not initialized");return}let e=new Uint8Array(this.analyserNode.fftSize);return this.analyserNode.getByteTimeDomainData(e),!e.some(t=>t!==128&&t!==0)}createAnalyserNodeForStream(e){let t=Vc.getAudioContext(),i=t.createAnalyser();return t.createMediaStreamSource(e).connect(i),i}};function Wy(e,t){return function(i){return i in e&&e[i]!==t[i]}}var $s=class extends yp{constructor(e,t,i,n,r=new ga().build()){super(e,t,i),this.eventBus=n,this.TAG="[HMSLocalAudioTrack]",this.isPublished=!1,this.handleVisibilityChange=()=>_(this,null,function*(){document.visibilityState==="visible"&&(yield this.replaceTrackWith(this.settings))}),this.handleSettingsChange=s=>_(this,null,function*(){let o=this.stream,a=Wy(s,this.settings);a("maxBitrate")&&s.maxBitrate&&(yield o.setMaxBitrateAndFramerate(this)),a("advanced")&&(yield this.replaceTrackWith(s))}),this.handleDeviceChange=(s,o=!1)=>_(this,null,function*(){Wy(s,this.settings)("deviceId")&&(yield this.replaceTrackWith(s),o||Mn.updateSelection("audioInput",{deviceId:s.deviceId,groupId:this.nativeTrack.getSettings().groupId}))}),e.tracks.push(this),this.settings=r,r.deviceId!==t.getSettings().deviceId&&!ud(t)&&(this.settings=this.buildNewSettings({deviceId:t.getSettings().deviceId})),this.pluginsManager=new hB(this,n),this.setFirstTrackId(t.id),By()&&ki&&document.addEventListener("visibilitychange",this.handleVisibilityChange)}replaceTrackWith(e){return _(this,null,function*(){let t=this.nativeTrack;t==null||t.stop();let i=Boolean(this.audioLevelMonitor),n=yield fB(e);n.enabled=this.enabled,b.d(this.TAG,"replaceTrack, Previous track stopped",t,"newTrack",n);let r=this.stream;yield r.replaceSenderTrack(t,this.processedTrack||n),yield r.replaceStreamTrack(t,n),this.nativeTrack=n,i&&this.initAudioLevelMonitor();try{yield this.pluginsManager.reprocessPlugins()}catch(s){this.eventBus.audioPluginFailed.publish(s)}})}setEnabled(e){var t=i=>super[i];return _(this,null,function*(){e!==this.enabled&&(e&&ud(this.nativeTrack)&&(yield this.replaceTrackWith(this.settings)),yield t("setEnabled").call(this,e),e&&(this.settings=this.buildNewSettings({deviceId:this.nativeTrack.getSettings().deviceId})),this.eventBus.localAudioEnabled.publish({enabled:e,track:this}))})}isPublishedTrackId(e){return this.publishedTrackId===e}setSettings(e,t=!1){return _(this,null,function*(){let i=this.buildNewSettings(e);if(ud(this.nativeTrack)){this.settings=i;return}yield this.handleDeviceChange(i,t),yield this.handleSettingsChange(i),this.settings=i})}getPlugins(){return this.pluginsManager.getPlugins()}addPlugin(e){return _(this,null,function*(){return this.pluginsManager.addPlugin(e)})}removePlugin(e){return _(this,null,function*(){return this.pluginsManager.removePlugin(e)})}validatePlugin(e){return this.pluginsManager.validatePlugin(e)}setProcessedTrack(e){return _(this,null,function*(){if(!e){this.processedTrack&&(yield this.stream.replaceSenderTrack(this.processedTrack,this.nativeTrack)),this.processedTrack=void 0;return}e!==this.processedTrack&&(this.processedTrack?yield this.stream.replaceSenderTrack(this.processedTrack,e):yield this.stream.replaceSenderTrack(this.nativeTrack,e),this.processedTrack=e)})}initAudioLevelMonitor(){this.audioLevelMonitor&&this.destroyAudioLevelMonitor(),b.d(this.TAG,"Monitor Audio Level for",this,this.getMediaTrackSettings().deviceId),this.audioLevelMonitor=new vB(this,this.eventBus.trackAudioLevelUpdate,this.eventBus.localAudioSilence),this.audioLevelMonitor.start(),this.audioLevelMonitor.detectSilence()}destroyAudioLevelMonitor(){var e;(e=this.audioLevelMonitor)==null||e.stop(),this.audioLevelMonitor=void 0}cleanup(){var e=t=>super[t];return _(this,null,function*(){var t;e("cleanup").call(this),yield this.pluginsManager.cleanup(),yield this.pluginsManager.closeContext(),this.transceiver=void 0,(t=this.processedTrack)==null||t.stop(),this.isPublished=!1,this.destroyAudioLevelMonitor(),By()&&ki&&document.removeEventListener("visibilitychange",this.handleVisibilityChange)})}getTrackIDBeingSent(){return this.processedTrack?this.processedTrack.id:this.nativeTrack.id}getTrackBeingSent(){return this.processedTrack||this.nativeTrack}buildNewSettings(e){let{volume:t,codec:i,maxBitrate:n,deviceId:r,advanced:s}=Re(Re({},this.settings),e);return new mp(t,i,n,r,s)}},Ia=class extends yp{setEnabled(e){var t=i=>super[i];return _(this,null,function*(){e!==this.enabled&&(yield t("setEnabled").call(this,e),yield this.subscribeToAudio(e))})}},H0=class extends vp{constructor(e,t,i){if(super(e,t,i),this.type=wt.VIDEO,this.sinkCount=0,t.kind!=="video")throw new Error("Expected 'track' kind = 'video'")}setVideoHandler(e){this.videoHandler=e}hasSinks(){return this.sinkCount>0}getSinks(){return this.videoHandler.getVideoElements()||[]}attach(e){this.videoHandler.addVideoElement(e)}detach(e){this.videoHandler.removeVideoElement(e)}addSink(e){this.addSinkInternal(e,this.nativeTrack)}removeSink(e){b.d(`[HMSVideoTrack] removing sink video element - ${e}`),e.srcObject!==null&&(e.srcObject=null,this.sinkCount>0&&this.sinkCount--)}cleanup(){super.cleanup(),this.videoHandler.cleanup()}addSinkInternal(e,t){var i;b.d(`[HMSVideoTrack] adding sink internal video - ${e} track - ${t}`);let n=e.srcObject;n!==null&&n instanceof MediaStream&&((i=n.getVideoTracks()[0])==null?void 0:i.id)===t.id||(e.srcObject=new MediaStream([t]),this.sinkCount++)}},oc={[St.NONE]:-1,[St.LOW]:0,[St.MEDIUM]:1,[St.HIGH]:2},yB=.5,bB=(e,t)=>{let i=St.HIGH,n=t.width>t.height?"width":"height",r=[...e].sort((o,a)=>oc[o.layer]-oc[a.layer]),s=t[n]*((window==null?void 0:window.devicePixelRatio)||1);for(let o=0;o<r.length;o++){let{resolution:a,layer:l}=r[o],c=a[n];if(s<=c){i=l;break}else{let u=r[o+1],d=u?u.resolution[n]:Number.POSITIVE_INFINITY;if((s-c)/(d-c)<yB){i=l;break}}}return i},EB=class{constructor(){this.TAG="[HMSIntersectionObserverWrapper]",this.listeners=new Map,this.observe=(e,t)=>{var i;this.createObserver(),this.unobserve(e),(i=this.intersectionObserver)==null||i.observe(e),this.listeners.set(e,t)},this.unobserve=e=>{var t;(t=this.intersectionObserver)==null||t.unobserve(e),this.listeners.has(e)&&this.listeners.delete(e)},this.createObserver=()=>{this.isSupported()&&!this.intersectionObserver&&(this.intersectionObserver=new IntersectionObserver(this.handleIntersection))},this.handleIntersection=e=>{var t;for(let i of e)this.listeners.has(i.target)&&((t=this.listeners.get(i.target))==null||t(i))},this.createObserver()}isSupported(){let e=ki&&typeof window.IntersectionObserver<"u";return e||b.w(this.TAG,"IntersectionObserver is not supported, fallback will be used instead"),e}},TB=new EB,_B=class{constructor(){this.TAG="[HMSResizeObserverWrapper]",this.listeners=new Map,this.observe=(e,t,i={box:"border-box"})=>{var n;this.createObserver(),this.unobserve(e),(n=this.resizeObserver)==null||n.observe(e,i),this.listeners.set(e,t)},this.unobserve=e=>{var t;(t=this.resizeObserver)==null||t.unobserve(e),this.listeners.has(e)&&this.listeners.delete(e)},this.createObserver=()=>{this.isSupported()&&!this.resizeObserver&&(this.resizeObserver=new ResizeObserver(G0(this.handleResize,300)))},this.handleResize=e=>{var t;for(let i of e)this.listeners.has(i.target)&&((t=this.listeners.get(i.target))==null||t(i))},this.createObserver()}isSupported(){let e=ki&&typeof window.ResizeObserver<"u";return e||b.w(this.TAG,"Resize Observer is not supported"),e}},wB=new _B,K0=class{constructor(e){this.track=e,this.TAG="[VideoElementManager]",this.videoElements=new Set,this.entries=new Map,this.handleIntersection=t=>_(this,null,function*(){let i=getComputedStyle(t.target).visibility==="visible";this.track.enabled&&(t.isIntersecting&&i||!document.contains(t.target))?(b.d(this.TAG,"add sink intersection",this.track,this.id),yield this.track.addSink(t.target)):(b.d(this.TAG,"remove sink intersection",this.track,this.id),yield this.track.removeSink(t.target)),this.entries.set(t.target,t.boundingClientRect),yield this.selectMaxLayer()}),this.handleResize=t=>_(this,null,function*(){!this.track.enabled||!(this.track instanceof Vi)||(this.entries.set(t.target,t.contentRect),yield this.selectMaxLayer())}),this.cleanup=()=>{this.videoElements.forEach(t=>{var i,n;t.srcObject=null,(i=this.resizeObserver)==null||i.unobserve(t),(n=this.intersectionObserver)==null||n.unobserve(t)}),this.videoElements.clear(),this.resizeObserver=void 0,this.intersectionObserver=void 0},this.init(),this.id=vr()}updateSinks(){for(let e of this.videoElements)this.track.enabled?this.track.addSink(e):this.track.removeSink(e)}addVideoElement(e){return _(this,null,function*(){var t;this.videoElements.has(e)||(this.init(),b.d(this.TAG,`Adding video element: ${e} for ${this.track}`,this.id),this.videoElements.add(e),this.videoElements.size>=10&&b.w(this.TAG,`${this.track}`,`the track is added to ${this.videoElements.size} video elements, while this may be intentional, it's likely that there is a bug leading to unnecessary creation of video elements in the UI`),(t=this.intersectionObserver)!=null&&t.isSupported()?this.intersectionObserver.observe(e,this.handleIntersection):ki&&(this.isElementInViewport(e)?this.track.addSink(e):this.track.removeSink(e)),this.resizeObserver?this.resizeObserver.observe(e,this.handleResize):this.track instanceof Vi&&(yield this.track.setPreferredLayer(this.track.getPreferredLayer())))})}removeVideoElement(e){var t,i;this.track.removeSink(e),this.videoElements.delete(e),this.entries.delete(e),(t=this.resizeObserver)==null||t.unobserve(e),(i=this.intersectionObserver)==null||i.unobserve(e),b.d(this.TAG,`Removing video element: ${e} for ${this.track}`)}getVideoElements(){return Array.from(this.videoElements)}init(){ki&&(this.resizeObserver=wB,this.intersectionObserver=TB)}isElementInViewport(e){let t=e.offsetTop,i=e.offsetLeft,n=e.offsetWidth,r=e.offsetHeight,{hidden:s}=e,{opacity:o,display:a}=getComputedStyle(e);for(;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop,i+=e.offsetLeft;return t<window.pageYOffset+window.innerHeight&&i<window.pageXOffset+window.innerWidth&&t+r>window.pageYOffset&&i+n>window.pageXOffset&&!s&&(o!==""?parseFloat(o)>0:!0)&&a!=="none"}selectMaxLayer(){return _(this,null,function*(){let e;if(this.track instanceof Vi){for(let t of this.entries.values()){let{width:i,height:n}=t,r=bB(this.track.getSimulcastDefinitions(),{width:i,height:n});e?e=oc[r]>oc[e]?r:e:e=r}b.d(this.TAG,`selecting max layer ${e} for the track`,`${this.track}`),yield this.track.setPreferredLayer(e)}})}},ac;(function(e){e.TRANSFORM="TRANSFORM",e.ANALYZE="ANALYZE"})(ac||(ac={}));var Oh;(function(e){e["2D"]="2d",e.WEBGL="webgl",e.WEBGL2="webgl2"})(Oh||(Oh={}));var qy=class{constructor(){this.total=0,this.count=0}add(e){this.count++,this.total+=e}getAvg(){return Math.floor(this.total/this.count)}reset(){this.total=0,this.count=0}},SB=class{constructor(e){this.eventBus=e,this.TAG="[VideoPluginsAnalytics]",this.initTime={},this.preProcessingAvgs=new qy,this.addedTimestamps={},this.processingAvgs={},this.pluginAdded={},this.pluginInputFrameRate={},this.pluginFrameRate={}}added(e,t,i){this.pluginAdded[e]=!0,this.addedTimestamps[e]=Date.now(),this.initTime[e]=0,this.processingAvgs[e]=new qy,this.pluginInputFrameRate[e]=t,this.pluginFrameRate[e]=i||t}removed(e){var t;if(this.pluginAdded[e]){let i={pluginName:e,duration:Math.floor((Date.now()-this.addedTimestamps[e])/1e3),loadTime:this.initTime[e],avgPreProcessingTime:this.preProcessingAvgs.getAvg(),avgProcessingTime:(t=this.processingAvgs[e])==null?void 0:t.getAvg(),inputFrameRate:this.pluginInputFrameRate[e],pluginFrameRate:this.pluginFrameRate[e]};this.eventBus.analytics.publish(sc.stats(i)),this.clean(e)}}failure(e,t){this.pluginAdded[e]&&(this.eventBus.analytics.publish(sc.failure(e,t)),this.clean(e))}initWithTime(e,t){return _(this,null,function*(){if(this.initTime[e]){b.i(this.TAG,`Plugin Already loaded ${e}, time it took: ${this.initTime[e]}`);return}let i;try{i=yield this.timeInMs(t),b.i(this.TAG,`Time taken for Plugin ${e} initialization : ${i}`)}catch(n){let r=te.MediaPluginErrors.InitFailed(Q.VIDEO_PLUGINS,`failed during initialization of plugin${n.message||n}`);throw b.e(this.TAG,r),this.failure(e,r),r}i&&(this.initTime[e]=i)})}preProcessWithTime(e){return _(this,null,function*(){let t=yield this.timeInMs(e);this.preProcessingAvgs.add(t)})}processWithTime(e,t){return _(this,null,function*(){var i;let n;try{n=yield this.timeInMs(t)}catch(r){let s=te.MediaPluginErrors.ProcessingFailed(Q.VIDEO_PLUGINS,`Failed during processing of plugin${r.message||r}`);throw b.e(this.TAG,s),this.failure(e,s),s}n&&((i=this.processingAvgs[e])==null||i.add(n))})}timeInMs(e){return _(this,null,function*(){let t=Date.now();return yield e(),Math.floor(Date.now()-t)})}clean(e){delete this.addedTimestamps[e],delete this.initTime[e],delete this.processingAvgs[e],delete this.pluginAdded[e],delete this.pluginInputFrameRate[e],delete this.pluginFrameRate[e]}},zy=24,kB=320,CB=240,AB=class{constructor(e,t){this.TAG="[VideoPluginsManager]",this.pluginsLoopRunning=!1,this.pluginsLoopState="paused",this.pluginAddInProgress=!1,this.hmsTrack=e,this.pluginsMap=new Map,this.pluginNumFramesToSkip={},this.pluginNumFramesSkipped={},this.analytics=new SB(t),this.canvases=new Array}getPlugins(){return Array.from(this.pluginsMap.keys())}addPlugin(e,t){return _(this,null,function*(){var i;if(this.pluginAddInProgress){let n=(i=e.getName)==null?void 0:i.call(e);if(!n||n===""){b.w("no name provided by the plugin");return}let r=te.MediaPluginErrors.AddAlreadyInProgress(Q.VIDEO_PLUGINS,"Add Plugin is already in Progress");throw this.analytics.failure(n,r),b.w("can't add another plugin when previous add is in progress"),r}this.pluginAddInProgress=!0;try{yield this.addPluginInternal(e,t)}finally{this.pluginAddInProgress=!1}})}addPluginInternal(e,t){return _(this,null,function*(){var i,n;let r=(i=e.getName)==null?void 0:i.call(e);if(!r||r===""){b.w("no name provided by the plugin");return}if(this.pluginsMap.has(r)){b.w(this.TAG,`plugin - ${e.getName()} already added.`);return}let s=this.hmsTrack.getMediaTrackSettings().frameRate||zy,o=0;t&&t>0?(b.i(this.TAG,`adding plugin ${e.getName()} with framerate ${t}`),t<s&&(o=Math.ceil(s/t)-1),this.analytics.added(r,s,t)):(b.i(this.TAG,`adding plugin ${e.getName()}`),this.analytics.added(r,s)),b.i(this.TAG,"numFrames to skip processing",o),this.pluginNumFramesToSkip[r]=o,this.pluginNumFramesSkipped[r]=o,this.validateAndThrow(r,e);try{if(yield this.analytics.initWithTime(r,()=>_(this,null,function*(){return yield e.init()})),this.pluginsMap.set(r,e),this.pluginsMap.size+1>this.canvases.length)for(let a=this.canvases.length;a<=this.pluginsMap.size;a++)this.canvases[a]=document.createElement("canvas");yield this.startPluginsLoop((n=e.getContextType)==null?void 0:n.call(e))}catch(a){throw b.e(this.TAG,"failed to add plugin",a),yield this.removePlugin(e),a}})}validatePlugin(e){return e.checkSupport()}validateAndThrow(e,t){let i=this.validatePlugin(t);if(i.isSupported)b.i(this.TAG,`plugin is supported,- ${t.getName()}`);else{let n;switch(i.errType){case ro.PLATFORM_NOT_SUPPORTED:throw n=te.MediaPluginErrors.PlatformNotSupported(Q.VIDEO_PLUGINS,"platform not supported, see docs"),this.analytics.failure(e,n),n;case ro.DEVICE_NOT_SUPPORTED:throw n=te.MediaPluginErrors.DeviceNotSupported(Q.VIDEO_PLUGINS,"video device not supported, see docs"),this.analytics.failure(e,n),n}}}removePlugin(e){return _(this,null,function*(){let t=e.getName();if(!this.pluginsMap.get(t)){b.w(this.TAG,`plugin - ${t} not found to remove.`);return}b.i(this.TAG,`removing plugin ${t}`),this.removePluginEntry(t),this.pluginsMap.size===0&&(b.i(this.TAG,"No plugins left, stopping plugins loop"),yield this.stopPluginsLoop()),e.stop(),this.analytics.removed(t)})}removePluginEntry(e){this.pluginsMap.delete(e),this.pluginNumFramesToSkip[e]&&delete this.pluginNumFramesToSkip[e],this.pluginNumFramesSkipped[e]&&delete this.pluginNumFramesSkipped[e]}waitForRestart(){return _(this,null,function*(){if(!(!this.pluginsLoopRunning||this.pluginsLoopState==="running"))for(;this.pluginsLoopState==="paused";)yield ji(100)})}cleanup(){return _(this,null,function*(){var e;for(let t of this.pluginsMap.values())yield this.removePlugin(t);(e=this.outputTrack)==null||e.stop()})}initElementsAndStream(e){this.inputCanvas||(this.inputCanvas=document.createElement("canvas")),this.outputCanvas=document.createElement("canvas"),this.inputVideo||(this.inputVideo=document.createElement("video")),this.inputCanvas.getContext("2d"),this.outputCanvas.getContext(e||Oh["2D"]);let t=this.outputCanvas.captureStream();this.outputTrack=t.getVideoTracks()[0]}startPluginsLoop(e){return _(this,null,function*(){if(!this.pluginsLoopRunning){this.initElementsAndStream(e),this.pluginsLoopRunning=!0;try{yield this.hmsTrack.setProcessedTrack(this.outputTrack)}catch(t){throw this.pluginsLoopRunning=!1,b.e(this.TAG,"error in setting processed track",t),t}this.pluginsLoop().then(()=>{b.d(this.TAG,"processLoop stopped")})}})}stopPluginsLoop(){return _(this,null,function*(){var e;this.pluginsLoopRunning=!1,yield this.hmsTrack.setProcessedTrack(void 0),this.resetCanvases(),(e=this.outputTrack)==null||e.stop(),this.inputVideo&&(this.inputVideo.srcObject=null,this.inputVideo=void 0)})}pluginsLoop(){return _(this,null,function*(){for(;this.pluginsLoopRunning;){let e=this.hmsTrack.getMediaTrackSettings().frameRate||zy,t=Math.floor(1e3/e);if(!this.hmsTrack.enabled||this.hmsTrack.nativeTrack.readyState==="ended"){this.pluginsLoopState==="running"&&this.resetCanvases(),this.pluginsLoopState="paused",yield ji(t);continue}let i=0;try{yield this.analytics.preProcessWithTime(()=>_(this,null,function*(){return yield this.doPreProcessing()}));let n=Date.now();yield this.processFramesThroughPlugins(),i=Math.floor(Date.now()-n),i>t&&(i=t)}catch(n){b.e(this.TAG,"error in plugins loop",n)}this.pluginsLoopState="running",yield ji(t-i)}})}doPreProcessing(){return _(this,null,function*(){yield this.addTrackToVideo(),yield this.updateInputCanvas()})}processFramesThroughPlugins(){return _(this,null,function*(){this.canvases[0]=this.inputCanvas;let e=0;for(let t of this.pluginsMap.values()){let i=t.getName();if(t){try{let n=this.checkIfSkipRequired(i);if(t.getPluginType()===ac.TRANSFORM){let r=(s,o)=>_(this,null,function*(){try{yield t.processVideoFrame(s,o,n)}catch(a){b.e(this.TAG,`error in processing plugin ${i}`,a)}});if(n)e===this.pluginsMap.size-1?yield r(this.canvases[e],this.outputCanvas):yield r(this.canvases[e],this.canvases[e+1]);else{let s=this.canvases[e],o=this.canvases[e+1];e===this.pluginsMap.size-1?yield this.analytics.processWithTime(i,()=>_(this,null,function*(){return r(s,this.outputCanvas)})):yield this.analytics.processWithTime(i,()=>_(this,null,function*(){return r(s,o)}))}}else t.getPluginType()===ac.ANALYZE&&!n&&(yield this.analytics.processWithTime(i,()=>_(this,null,function*(){return yield t.processVideoFrame(this.inputCanvas)})))}catch(n){b.e(this.TAG,`error in processing plugin ${i}`,n),yield this.removePlugin(t)}e++}}})}addTrackToVideo(){return _(this,null,function*(){var e;if(!this.inputVideo)return;let t=this.inputVideo.srcObject;t!==null&&t instanceof MediaStream&&((e=t.getVideoTracks()[0])==null?void 0:e.id)===this.hmsTrack.nativeTrack.id||(this.inputVideo.pause(),this.inputVideo.srcObject=new MediaStream([this.hmsTrack.nativeTrack]),this.inputVideo.muted=!0,this.inputVideo.playsInline=!0,yield this.inputVideo.play())})}updateInputCanvas(){return _(this,null,function*(){if(!this.inputCanvas||!this.inputVideo)return;let{width:e=kB,height:t=CB}=this.hmsTrack.getMediaTrackSettings();this.inputCanvas.height!==t&&(this.inputCanvas.height=t),this.inputCanvas.width!==e&&(this.inputCanvas.width=e),this.inputCanvas.getContext("2d").drawImage(this.inputVideo,0,0,e,t)})}resetCanvases(){if(!this.outputCanvas||!this.inputCanvas)return;let e=this.inputCanvas.getContext("2d");e&&(e.fillStyle="rgb(0, 0, 0)",e.fillRect(0,0,this.outputCanvas.width,this.outputCanvas.height)),this.canvases=[]}checkIfSkipRequired(e){let t=!1;return this.pluginNumFramesSkipped[e]<this.pluginNumFramesToSkip[e]?(this.pluginNumFramesSkipped[e]++,t=!0):(t=!1,this.pluginNumFramesSkipped[e]=0),t}};function Jy(e,t){return function(i){return i in e&&e[i]!==t[i]}}var Li=class extends H0{constructor(e,t,i,n,r=new no().build()){super(e,t,i),this.eventBus=n,this._layerDefinitions=[],this.TAG="[HMSLocalVideoTrack]",this.isCurrentTab=!1,this.isPublished=!1,this.buildNewSettings=s=>{let{width:o,height:a,codec:l,maxFramerate:c,maxBitrate:u,deviceId:d,advanced:h,facingMode:m}=Re(Re({},this.settings),s);return new gp(o,a,l,c,d,h,u,m)},this.handleSettingsChange=s=>_(this,null,function*(){let o=this.stream,a=Jy(s,this.settings);a("maxBitrate")&&s.maxBitrate&&(yield o.setMaxBitrateAndFramerate(this)),(a("width")||a("height")||a("advanced"))&&(yield this.nativeTrack.applyConstraints(s.toConstraints()))}),this.handleDeviceChange=(s,o=!1)=>_(this,null,function*(){if(Jy(s,this.settings)("deviceId")&&this.source==="regular"){if(this.enabled){delete s.facingMode;let a=yield this.replaceTrackWith(s);yield this.replaceSender(a,this.enabled),this.nativeTrack=a,this.videoHandler.updateSinks()}o||Mn.updateSelection("videoInput",{deviceId:s.deviceId,groupId:this.nativeTrack.getSettings().groupId})}}),this.removeOrReplaceProcessedTrack=s=>_(this,null,function*(){s?s!==this.processedTrack&&(this.processedTrack?yield this.stream.replaceSenderTrack(this.processedTrack,s):yield this.stream.replaceSenderTrack(this.nativeTrack,s),this.processedTrack=s):(this.processedTrack&&(yield this.stream.replaceSenderTrack(this.processedTrack,this.nativeTrack)),this.processedTrack=void 0)}),e.tracks.push(this),this.setVideoHandler(new K0(this)),this.settings=r,r.deviceId!==t.getSettings().deviceId&&t.enabled&&(this.settings=this.buildNewSettings({deviceId:t.getSettings().deviceId})),this.pluginsManager=new AB(this,n),this.setFirstTrackId(this.trackId)}setSimulcastDefinitons(e){this._layerDefinitions=e}getSimulcastDefinitions(){return this._layerDefinitions}setEnabled(e){var t=i=>super[i];return _(this,null,function*(){var i;if(e!==this.enabled){if(t("setEnabled").call(this,e),this.source==="regular"){let n;e?n=yield this.replaceTrackWith(this.settings):n=yield this.replaceTrackWithBlank(),yield this.replaceSender(n,e),(i=this.nativeTrack)==null||i.stop(),this.nativeTrack=n,e&&(yield this.pluginsManager.waitForRestart(),this.settings=this.buildNewSettings({deviceId:n.getSettings().deviceId})),this.videoHandler.updateSinks()}this.eventBus.localVideoEnabled.publish({enabled:e,track:this})}})}isPublishedTrackId(e){return this.publishedTrackId===e}addSink(e){this.addSinkInternal(e,this.processedTrack||this.nativeTrack)}setSettings(e,t=!1){return _(this,null,function*(){let i=this.buildNewSettings(e);if(yield this.handleDeviceChange(i,t),!this.enabled){this.settings=i;return}yield this.handleSettingsChange(i),this.settings=i})}getPlugins(){return this.pluginsManager.getPlugins()}addPlugin(e,t){return _(this,null,function*(){return this.pluginsManager.addPlugin(e,t)})}removePlugin(e){return _(this,null,function*(){return this.pluginsManager.removePlugin(e)})}validatePlugin(e){return this.pluginsManager.validatePlugin(e)}cleanup(){var e=t=>super[t];return _(this,null,function*(){var t;e("cleanup").call(this),this.transceiver=void 0,yield this.pluginsManager.cleanup(),(t=this.processedTrack)==null||t.stop(),this.isPublished=!1})}cropTo(e){return _(this,null,function*(){if(!!e&&this.source==="screen")try{this.nativeTrack.cropTo&&(yield this.nativeTrack.cropTo(e))}catch(t){throw b.e(this.TAG,"failed to crop screenshare capture - ",t),te.TracksErrors.GenericTrack(Q.TRACK,"failed to crop screenshare capture")}})}getCaptureHandle(){if(this.nativeTrack.getCaptureHandle)return this.nativeTrack.getCaptureHandle()}setProcessedTrack(e){return _(this,null,function*(){if(!this.nativeTrack.enabled){this.processedTrack=e;return}yield this.removeOrReplaceProcessedTrack(e),this.videoHandler.updateSinks()})}getTrackIDBeingSent(){return this.getTrackBeingSent().id}getTrackBeingSent(){return this.enabled?this.processedTrack||this.nativeTrack:this.nativeTrack}switchCamera(){return _(this,null,function*(){var e;let t=this.getMediaTrackSettings().facingMode;if(!t||this.source!=="regular"){b.d(this.TAG,"facingMode not supported");return}let i=t===Zo.ENVIRONMENT?Zo.USER:Zo.ENVIRONMENT;(e=this.nativeTrack)==null||e.stop();let n=yield this.replaceTrackWith(this.buildNewSettings({facingMode:i,deviceId:void 0}));yield this.replaceSender(n,this.enabled),this.nativeTrack=n,this.videoHandler.updateSinks(),this.settings=this.buildNewSettings({deviceId:this.nativeTrack.getSettings().deviceId,facingMode:i}),Mn.updateSelection("videoInput",{deviceId:this.settings.deviceId,groupId:this.nativeTrack.getSettings().groupId})})}replaceTrackWith(e){return _(this,null,function*(){let t=this.nativeTrack;t==null||t.stop();let i=yield pB(e);return b.d(this.TAG,"replaceTrack, Previous track stopped",t,"newTrack",i),this.settings.deviceId==="default"&&(this.settings=this.buildNewSettings({deviceId:this.nativeTrack.getSettings().deviceId})),i})}replaceTrackWithBlank(){return _(this,null,function*(){let e=this.nativeTrack,t=lc.getEmptyVideoTrack(e);return e==null||e.stop(),b.d(this.TAG,"replaceTrackWithBlank, Previous track stopped",e,"newTrack",t),t})}replaceSender(e,t){return _(this,null,function*(){let i=this.stream;t?yield i.replaceSenderTrack(this.nativeTrack,this.processedTrack||e):yield i.replaceSenderTrack(this.processedTrack||this.nativeTrack,e),yield i.replaceStreamTrack(this.nativeTrack,e)})}},$o="renegotiation-callback-id",W0="ion-sfu",q0=100,Dh=5,RB=60,PB=12e3,IB=1e3,OB=5,Uo="SUBSCRIBE_ICE_CONNECTION_CALLBACK_ID",DB=6e4,Yy=5e3,NB=1e3,LB="https://event.100ms.live/v2/client/report",xB="https://event-nonprod.100ms.live/v2/client/report",MB=100,Nt={DEVICE_CHANGE:"device-change",LOCAL_AUDIO_ENABLED:"local-audio-enabled",LOCAL_VIDEO_ENABLED:"local-video-enabled",STATS_UPDATE:"stats-update",RTC_STATS_UPDATE:"rtc-stats-update",TRACK_DEGRADED:"track-degraded",TRACK_RESTORED:"track-restored",TRACK_AUDIO_LEVEL_UPDATE:"track-audio-level-update",LOCAL_AUDIO_SILENCE:"local-audio-silence",ANALYTICS:"analytics",AUDIO_PLUGIN_FAILED:"audio-plugin-failed",POLICY_CHANGE:"policy-change",LOCAL_ROLE_UPDATE:"local-role-update",AUDIO_TRACK_UPDATE:"audio-track-update",AUDIO_TRACK_ADDED:"audio-track-added",AUDIO_TRACK_REMOVED:"audio-track-removed",AUTOPLAY_ERROR:"autoplay-error",LEAVE:"leave"},Vi=class extends H0{constructor(e,t,i){super(e,t,i),this._degraded=!1,this._degradedAt=null,this._layerDefinitions=[],this.history=new $B,this.preferredLayer=St.HIGH,this.setVideoHandler(new K0(this))}get degraded(){return this._degraded}get degradedAt(){return this._degradedAt}setEnabled(e){var t=i=>super[i];return _(this,null,function*(){e!==this.enabled&&(t("setEnabled").call(this,e),this.videoHandler.updateSinks())})}setPreferredLayer(e){return _(this,null,function*(){if(e===St.NONE){b.w(`layer ${St.NONE} will be ignored`);return}if(this.preferredLayer=e,!!this.shouldSendVideoLayer(e,"preferLayer")){if(!this.hasSinks()){b.d(`[Remote Track] ${this.logIdentifier}
        streamId=${this.stream.id} 
        trackId=${this.trackId}
        saving ${e}, source=${this.source}
        Track does not have any sink`);return}yield this.requestLayer(e,"preferLayer"),this.pushInHistory(`uiPreferLayer-${e}`)}})}getSimulcastLayer(){return this.stream.getSimulcastLayer()}getLayer(){return this.stream.getVideoLayer()}getPreferredLayer(){return this.preferredLayer}addSink(e){var t=i=>super[i];return _(this,null,function*(){t("addSink").call(this,e),yield this.updateLayer("addSink"),this.pushInHistory("uiSetLayer-high")})}removeSink(e){var t=i=>super[i];return _(this,null,function*(){t("removeSink").call(this,e),yield this.updateLayer("removeSink"),this._degraded=!1,this.pushInHistory("uiSetLayer-none")})}getSimulcastDefinitions(){return[...this._layerDefinitions]}setSimulcastDefinitons(e){this._layerDefinitions=e}setLayerFromServer(e){this._degraded=(e.publisher_degraded||e.subscriber_degraded)&&e.current_layer===St.NONE,this._degradedAt=this._degraded?new Date:this._degradedAt;let t=e.current_layer;return b.d(`[Remote Track] ${this.logIdentifier} 
      streamId=${this.stream.id} 
      trackId=${this.trackId}
      layer update from sfu
      currLayer=${e.current_layer}
      preferredLayer=${e.expected_layer}
      sub_degraded=${e.subscriber_degraded}
      pub_degraded=${e.publisher_degraded}
      isDegraded=${this._degraded}`),this.stream.setVideoLayerLocally(t,this.logIdentifier,"setLayerFromServer"),this.pushInHistory(`sfuLayerUpdate-${t}`),this._degraded}setDegradedFromSdk(e){this._degraded=e,this._degradedAt=e?new Date:this._degradedAt,this.updateLayer("sdkDegradation"),this.pushInHistory(e?"sdkDegraded-none":"sdkRecovered-high")}updateLayer(e){return _(this,null,function*(){let t=this.degraded||!this.hasSinks()?St.NONE:this.preferredLayer;!this.shouldSendVideoLayer(t,e)||(yield this.requestLayer(t,e))})}pushInHistory(e){}requestLayer(e,t){return _(this,null,function*(){try{let i=yield this.stream.setVideoLayer(e,this.trackId,this.logIdentifier,t);return b.d(`[Remote Track] ${this.logIdentifier} 
      streamId=${this.stream.id}
      trackId=${this.trackId}
      Requested layer ${e}, source=${t}`),i}catch(i){throw b.d(`[Remote Track] ${this.logIdentifier} 
      streamId=${this.stream.id}
      trackId=${this.trackId}
      Failed to set layer ${e}, source=${t}
      error=${i.message}`),i}})}shouldSendVideoLayer(e,t){let i=this.getLayer();return this.degraded&&e===St.NONE?!0:i===e?(b.d(`[Remote Track] ${this.logIdentifier}`,`Not sending update, already on layer ${e}, source=${t}`),!1):!0}},$B=class{constructor(){this.history=[]}push(e){e.time=new Date().toISOString().split("T")[1],this.history.push(e)}},Nh=class extends j0{constructor(){super(...arguments),this.TAG="[HMSLocalStream]",this.connection=null}setConnection(e){this.connection=e}addTransceiver(e,t){let i=this.connection.addTransceiver(e.getTrackBeingSent(),{streams:[this.nativeStream],direction:"sendonly",sendEncodings:this.getTrackEncodings(e,t)});return this.setPreferredCodec(i,e.nativeTrack.kind),e.transceiver=i,i}setMaxBitrateAndFramerate(e){return _(this,null,function*(){var t;yield(t=this.connection)==null?void 0:t.setMaxBitrateAndFramerate(e)})}setPreferredCodec(e,t){}replaceStreamTrack(e,t){this.nativeStream.addTrack(t),this.nativeStream.removeTrack(e),b.d(this.TAG,"Native stream tracks after replace",this.nativeStream.getAudioTracks().map(Qo),`prev Track - ${Qo(e)}`,`new Track - ${Qo(t)}`)}replaceSenderTrack(e,t){return _(this,null,function*(){if(!this.connection||this.connection.connectionState==="closed"){b.d(this.TAG,"publish connection is not initialised or closed");return}let i=this.connection.getSenders().find(n=>n.track&&n.track.id===e.id);if(i===void 0){b.w(this.TAG,`No sender found for trackId=${e.id}`);return}yield i.replaceTrack(t)})}removeSender(e){var t,i;if(!this.connection||this.connection.connectionState==="closed"){b.d(this.TAG,"publish connection is not initialised or closed");return}let n=(t=e.transceiver)==null?void 0:t.sender;if(!n){b.e(this.TAG,`No sender found for trackId=${e.trackId}`);return}(i=this.connection)==null||i.removeTrack(n);let r=this.tracks.indexOf(e);r!==-1?this.tracks.splice(r,1):b.e(this.TAG,`Cannot find ${e.trackId} in locally stored tracks`)}getTrackEncodings(e,t){let i=[];if(e instanceof Li)if(t.length>0)b.v(this.TAG,"Simulcast enabled with layers",t),i.push(...t);else{let n={active:this.nativeStream.active};e.settings.maxBitrate&&!fp&&(n.maxBitrate=e.settings.maxBitrate),i.push(n)}return i}},dd={isAudioMuted:!1,isVideoMuted:!1,audioInputDeviceId:"default",audioOutputDeviceId:"default",videoDeviceId:"default"},kr,lc=class{constructor(e,t,i,n,r){this.store=e,this.observer=t,this.deviceManager=i,this.eventBus=n,this.analyticsTimer=r,this.TAG="[LocalTrackManager]",this.setScreenCaptureHandleConfig()}getTracksToPublish(){return _(this,arguments,function*(e=dd){let t=this.getAVTrackSettings(e);if(!t)return[];let i=!!t.audio,n=!!t.video,r=[],{videoTrack:s,audioTrack:o}=yield this.updateCurrentLocalTrackSettings(t),a=(s==null?void 0:s.stream)||(o==null?void 0:o.stream),l=Boolean(s&&this.store.getTrackById(s.trackId)),c=Boolean(o&&this.store.getTrackById(o.trackId));if(l&&c)return[];let u={audio:i&&!o&&(e.isAudioMuted?"empty":!0),video:n&&!s&&(e.isVideoMuted?"empty":!0)};u.audio&&this.analyticsTimer.start(Le.LOCAL_AUDIO_TRACK),u.video&&this.analyticsTimer.start(Le.LOCAL_VIDEO_TRACK);try{b.d(this.TAG,"Init Local Tracks",{fetchTrackOptions:u}),r=yield this.getLocalTracks(u,t,a)}catch(d){r=yield this.retryGetLocalTracks(d,t,u,a)}return u.audio&&this.analyticsTimer.end(Le.LOCAL_AUDIO_TRACK),u.video&&this.analyticsTimer.end(Le.LOCAL_VIDEO_TRACK),s&&n&&!l&&r.push(s),o&&i&&!c&&r.push(o),r})}getLocalTracks(){return _(this,arguments,function*(e={audio:!0,video:!0},t,i){try{let n=yield this.getNativeLocalTracks(e,t);return this.createHMSLocalTracks(n,t,i)}catch(n){throw this.eventBus.analytics.publish(it.publish({devices:this.deviceManager.getDevices(),error:n,settings:t})),n}})}getNativeLocalTracks(){return _(this,arguments,function*(e={audio:!1,video:!1},t){let i=new Ih(e.video===!0?t.video:null,e.audio===!0?t.audio:null,t.simulcast),n=[];return(i.audio||i.video)&&n.push(...yield this.getAVTracks(i)),n.push(...this.getEmptyTracks(e)),n})}getLocalScreen(e){return _(this,null,function*(){var t;let i=yield this.getOrDefaultScreenshareConfig(e),n=this.getScreenshareSettings(i.videoOnly),r={video:Ot(Re({},n==null?void 0:n.video.toConstraints(!0)),{displaySurface:i.displaySurface}),preferCurrentTab:i.preferCurrentTab,selfBrowserSurface:i.selfBrowserSurface,surfaceSwitching:i.surfaceSwitching,systemAudio:i.systemAudio};if(n!=null&&n.audio){let d=(t=n==null?void 0:n.audio)==null?void 0:t.toConstraints();delete d.advanced,r.audio=Ot(Re({},d),{autoGainControl:!1,noiseSuppression:!1,googAutoGainControl:!1,echoCancellation:!1})}let s;try{b.d("retrieving screenshare with ",{config:i},{constraints:r}),s=yield navigator.mediaDevices.getDisplayMedia(r)}catch(d){b.w(this.TAG,"error in getting screenshare - ",d);let h=rc(d,_n.SCREEN);throw this.eventBus.analytics.publish(it.publish({error:h,devices:this.deviceManager.getDevices(),settings:new Ih(n==null?void 0:n.video,n==null?void 0:n.audio,!1)})),h}let o=[],a=new Nh(s),l=s.getVideoTracks()[0],c=new Li(a,l,"screen",this.eventBus,n==null?void 0:n.video);c.setSimulcastDefinitons(this.store.getSimulcastDefinitionsForPeer(this.store.getLocalPeer(),"screen"));try{let d=this.validateCurrentTabCapture(c,i.forceCurrentTab);c.isCurrentTab=d,yield c.cropTo(i.cropTarget)}catch(d){throw s.getTracks().forEach(h=>h.stop()),d}o.push(c);let u=s.getAudioTracks()[0];if(u){let d=new $s(a,u,"screen",this.eventBus,n==null?void 0:n.audio);o.push(d)}return b.v(this.TAG,"getLocalScreen",o),o})}setScreenCaptureHandleConfig(e){var t;!((t=navigator.mediaDevices)!=null&&t.setCaptureHandleConfig)||this.isInIframe()||(e=e||{},Object.assign(e,{handle:vr(),exposeOrigin:!1,permittedOrigins:[window.location.origin]}),b.d("setting capture handle - ",e.handle),navigator.mediaDevices.setCaptureHandleConfig(e),this.captureHandleIdentifier=e.handle)}validateCurrentTabCapture(e,t){let i=e.getCaptureHandle(),n=!!(this.captureHandleIdentifier&&(i==null?void 0:i.handle)===this.captureHandleIdentifier);if(t&&!n)throw b.e(this.TAG,"current tab was not shared with forceCurrentTab as true"),te.TracksErrors.CurrentTabNotShared();return n}requestPermissions(){return _(this,null,function*(){try{(yield navigator.mediaDevices.getUserMedia({audio:!0,video:!0})).getTracks().forEach(e=>e.stop())}catch(e){b.e(this.TAG,e)}})}static getEmptyVideoTrack(e){var t,i,n;let r=((t=e==null?void 0:e.getSettings())==null?void 0:t.width)||320,s=((i=e==null?void 0:e.getSettings())==null?void 0:i.height)||240,o=10;kr||(kr=document.createElement("canvas"),kr.width=r,kr.height=s,(n=kr.getContext("2d",{willReadFrequently:!0}))==null||n.fillRect(0,0,r,s));let a=kr.captureStream(o).getVideoTracks()[0],l=setInterval(()=>{if(a.readyState==="ended"){clearInterval(l);return}let c=kr.getContext("2d");if(c){let u=c.getImageData(0,0,1,1).data[0]===0?1:0;c.fillStyle=`rgb(${u}, 0, 0)`,c.fillRect(0,0,1,1)}},1e3/o);return a.onended=()=>{clearInterval(l)},a.enabled=!1,a}static getEmptyAudioTrack(){let e=Vc.getAudioContext(),t=e.createOscillator(),i=e.createMediaStreamDestination();t.connect(i),t.start();let n=i.stream.getAudioTracks()[0];return n.enabled=!1,n}getAVTracks(e){return _(this,null,function*(){try{let t=yield navigator.mediaDevices.getUserMedia({audio:e.audio?e.audio.toConstraints():!1,video:e.video?e.video.toConstraints():!1});return t.getVideoTracks().concat(t.getAudioTracks())}catch(t){yield this.deviceManager.init();let i=!!(!this.deviceManager.hasWebcamPermission&&e.video),n=!!(!this.deviceManager.hasMicrophonePermission&&e.audio),r=this.getErrorType(i,n);throw rc(t,r)}})}getAVTrackSettings(e){let t=this.getAudioSettings(e),i=this.getVideoSettings(e);return!t&&!i?null:new Hy().video(i).audio(t).build()}isInIframe(){try{return window.self!==window.top}catch{return!0}}retryGetLocalTracks(e,t,i,n){return _(this,null,function*(){if(e instanceof Te&&e.action===Q.TRACK){this.observer.onFailure(e);let r=e.code===Ce.TracksErrors.OVER_CONSTRAINED,s=e.message.includes("audio"),o=e.message.includes("video");if(r){let a=new Hy().video(new gp).audio(new mp).build();b.w(this.TAG,"Fetch AV Tracks failed with overconstrained error",{fetchTrackOptions:i},{error:e});try{return yield this.getLocalTracks(i,a,n)}catch(l){let c=l instanceof Te?l.nativeError:l,u=l;if((c==null?void 0:c.name)==="OverconstrainedError"){let d=te.TracksErrors.GenericTrack(Q.TRACK,"Overconstrained error after dropping all constraints");d.addNativeError(c),u=d}return yield this.retryGetLocalTracks(u,t,i,n)}}i.audio=s?"empty":i.audio,i.video=o?"empty":i.video,b.w(this.TAG,"Fetch AV Tracks failed",{fetchTrackOptions:i},e);try{return yield this.getLocalTracks(i,t,n)}catch(a){return b.w(this.TAG,"Fetch empty tacks failed",a),i.audio=i.audio&&"empty",i.video=i.video&&"empty",this.observer.onFailure(a),yield this.getLocalTracks(i,t,n)}}else return b.w(this.TAG,"Fetch AV Tracks failed - unknown exception",e),this.observer.onFailure(e),[]})}getErrorType(e,t){return e&&t?_n.AV:e?_n.VIDEO:t?_n.AUDIO:_n.UNKNOWN}getEmptyTracks(e){let t=[];return e.audio==="empty"&&t.push(lc.getEmptyAudioTrack()),e.video==="empty"&&t.push(lc.getEmptyVideoTrack()),t}updateCurrentLocalTrackSettings(e){return _(this,null,function*(){let t=this.store.getLocalPeerTracks(),i=t.find(o=>o.type===wt.VIDEO&&o.source==="regular"),n=t.find(o=>o.type===wt.AUDIO&&o.source==="regular"),r=t.find(o=>o.type===wt.VIDEO&&o.source==="screen");e!=null&&e.video&&(yield i==null?void 0:i.setSettings(e.video)),e!=null&&e.audio&&(yield n==null?void 0:n.setSettings(e.audio));let s=this.getScreenshareSettings(!0);return s!=null&&s.video&&(yield r==null?void 0:r.setSettings(s==null?void 0:s.video)),{videoTrack:i,audioTrack:n}})}getAudioSettings(e){var t;let i=this.store.getPublishParams();if(!i||!((t=i.allowed)!=null&&t.includes("audio")))return null;let n=this.store.getLocalPeer(),r=n==null?void 0:n.audioTrack,s=(r==null?void 0:r.settings.deviceId)||e.audioInputDeviceId;return new ga().codec(i.audio.codec).maxBitrate(i.audio.bitRate).deviceId(s||dd.audioInputDeviceId).build()}getVideoSettings(e){var t;let i=this.store.getPublishParams();if(!i||!((t=i.allowed)!=null&&t.includes("video")))return null;let n=this.store.getLocalPeer(),r=n==null?void 0:n.videoTrack,s=(r==null?void 0:r.settings.deviceId)||e.videoDeviceId,o=i.video;return new no().codec(o.codec).maxBitrate(o.bitRate).maxFramerate(o.frameRate).setWidth(o.width).setHeight(o.height).deviceId(s||dd.videoDeviceId).build()}getScreenshareSettings(e=!1){var t;let i=this.store.getPublishParams();if(!i||!((t=i.allowed)!=null&&t.includes("screen")))return null;let n=i.screen;return{video:new no().maxBitrate(n.bitRate,!1).codec(n.codec).maxFramerate(n.frameRate).setWidth(n.width).setHeight(n.height).build(),audio:e?void 0:new ga().build()}}getOrDefaultScreenshareConfig(e){return _(this,null,function*(){var t;let i=Object.assign({videoOnly:!1,audioOnly:!1,forceCurrentTab:!1,preferCurrentTab:!1,selfBrowserSurface:"exclude",surfaceSwitching:"include",systemAudio:"exclude",displaySurface:"monitor"},e||{});return i.forceCurrentTab&&(i.videoOnly=!0,i.preferCurrentTab=!0,i.selfBrowserSurface="include",i.surfaceSwitching="exclude"),i.preferCurrentTab&&(i.selfBrowserSurface="include",i.displaySurface=void 0),i.cropElement&&((t=window.CropTarget)==null?void 0:t.fromElement)&&(i.cropTarget=yield window.CropTarget.fromElement(i.cropElement)),i})}createHMSLocalTracks(e,t,i){let n=e.find(o=>o.kind==="video"),r=e.find(o=>o.kind==="audio");i?e.forEach(o=>i==null?void 0:i.nativeStream.addTrack(o)):i=new Nh(new MediaStream(e));let s=[];if(r&&(t==null?void 0:t.audio)){let o=new $s(i,r,"regular",this.eventBus,t.audio);s.push(o)}if(n&&(t==null?void 0:t.video)){let o=new Li(i,n,"regular",this.eventBus,t.video);o.setSimulcastDefinitons(this.store.getSimulcastDefinitionsForPeer(this.store.getLocalPeer(),"regular")),s.push(o)}return s}},UB=class{constructor(e,t){this.eventBus=e,this.listener=t,this.TAG="[NetworkTestManager]",this.controller=new AbortController,this.start=i=>_(this,null,function*(){var n;if(!i)return;let{url:r,timeout:s,scoreMap:o}=i,a=this.controller.signal,l=Date.now(),c=0,u=ji(s).then(()=>{this.controller.abort()});try{let d=(n=(yield fetch(`${r}?${Date.now()}`,{signal:a})).body)==null?void 0:n.getReader();if(!d)throw Error("unable to process request");let h=()=>_(this,null,function*(){if(d)try{let m=!1;for(;!m;){let{value:v,done:y}=yield d.read();m=y,v&&(c+=v.byteLength,this.sendScore({scoreMap:o,downloadedSize:c,startTime:l}))}}catch(m){m.name!=="AbortError"&&b.d(this.TAG,m)}});return Promise.race([h(),u]).then(()=>{this.sendScore({scoreMap:o,downloadedSize:c,startTime:l,finished:!0})}).catch(m=>{b.e(this.TAG,m),this.updateScoreToListener(0),this.eventBus.analytics.publish(it.previewNetworkQuality({error:m.message}))})}catch(d){d.name!=="AbortError"?(b.d(this.TAG,d),this.updateScoreToListener(0),this.eventBus.analytics.publish(it.previewNetworkQuality({error:d.message}))):b.d(this.TAG,d)}}),this.stop=()=>{this.controller.signal.aborted||this.controller.abort()},this.sendScore=({scoreMap:i,downloadedSize:n,startTime:r,finished:s=!1})=>{let o=(Date.now()-r)/1e3,a=n/1024/o*8,l=-1;for(let c in i){let u=i[c];a>=u.low&&(!u.high||a<=u.high)&&(l=Number(c))}this.updateScoreToListener(l),s&&this.eventBus.analytics.publish(it.previewNetworkQuality({score:l,downLink:a.toFixed(2)}))}}updateScoreToListener(e){var t,i;e!==this.score&&(this.score=e,(i=(t=this.listener)==null?void 0:t.onNetworkQuality)==null||i.call(t,e))}},BB=class{constructor(e,t,i,n,r){this.store=e,this.transport=t,this.publish=i,this.removeAuxiliaryTrack=n,this.listener=r,this.handleLocalPeerRoleUpdate=s=>_(this,[s],function*({oldRole:o,newRole:a}){var l;let c=this.store.getLocalPeer();!c||(yield this.diffRolesAndPublishTracks({oldRole:o,newRole:a}),(l=this.listener)==null||l.onPeerUpdate(yt.ROLE_UPDATED,c))}),this.diffRolesAndPublishTracks=s=>_(this,[s],function*({oldRole:o,newRole:a}){var l,c,u,d,h,m,v;let y=new Set(o.publishParams.allowed),T=new Set(a.publishParams.allowed),S=this.removeTrack(y,T,"video"),R=this.removeTrack(y,T,"audio"),O=this.removeTrack(y,T,"screen"),x=this.hasSimulcastDifference((l=o.publishParams.simulcast)==null?void 0:l.video,(c=a.publishParams.simulcast)==null?void 0:c.video),B=this.hasSimulcastDifference((u=o.publishParams.simulcast)==null?void 0:u.screen,(d=a.publishParams.simulcast)==null?void 0:d.screen),ie=(m=(h=this.store.getLocalPeer())==null?void 0:h.videoTrack)==null?void 0:m.enabled;yield this.removeAudioTrack(R),yield this.removeVideoTracks(S||x),yield this.removeScreenTracks(O||B);let ee=((v=this.store.getConfig())==null?void 0:v.settings)||{isAudioMuted:!0,isVideoMuted:!0,audioInputDeviceId:"default",videoDeviceId:"default",audioOutputDeviceId:"default"};x&&(ee.isVideoMuted=!ie),yield this.publish(ee)})}removeVideoTracks(e){return _(this,null,function*(){var t;if(!e)return;let i=this.store.getLocalPeer();i!=null&&i.videoTrack&&(i.videoTrack.isPublished?yield this.transport.unpublish([i.videoTrack]):yield i.videoTrack.cleanup(),(t=this.listener)==null||t.onTrackUpdate(Ye.TRACK_REMOVED,i.videoTrack,i),i.videoTrack=void 0),yield this.removeAuxTracks(n=>n.source!=="screen"&&n.type==="video")})}removeAudioTrack(e){return _(this,null,function*(){var t;if(!e)return;let i=this.store.getLocalPeer();i!=null&&i.audioTrack&&(i.audioTrack.isPublished?yield this.transport.unpublish([i.audioTrack]):yield i.audioTrack.cleanup(),(t=this.listener)==null||t.onTrackUpdate(Ye.TRACK_REMOVED,i.audioTrack,i),i.audioTrack=void 0),yield this.removeAuxTracks(n=>n.source!=="screen"&&n.type==="audio")})}removeScreenTracks(e){return _(this,null,function*(){!e||(yield this.removeAuxTracks(t=>t.source==="screen"))})}removeAuxTracks(e){return _(this,null,function*(){let t=this.store.getLocalPeer();if(t!=null&&t.auxiliaryTracks){let i=[...t.auxiliaryTracks];for(let n of i)e(n)&&(yield this.removeAuxiliaryTrack(n.trackId))}})}removeTrack(e,t,i){return e.has(i)&&!t.has(i)}hasSimulcastDifference(e,t){var i,n,r;return!e&&!t?!1:((i=e==null?void 0:e.layers)==null?void 0:i.length)!==((n=t==null?void 0:t.layers)==null?void 0:n.length)?!0:!!((r=e==null?void 0:e.layers)!=null&&r.some(s=>{var o;let a=(o=t==null?void 0:t.layers)==null?void 0:o.find(l=>l.rid===s.rid);return(a==null?void 0:a.maxBitrate)!==s.maxBitrate||(a==null?void 0:a.maxFramerate)!==s.maxFramerate}))}},FB=class{constructor(){this.TAG="[HTTPAnalyticsTransport]",this.failedEvents=new jc("client-events"),this.isConnected=!0,this.env=null,this.websocketURL=""}setEnv(e){this.env=e,this.flushFailedEvents()}setWebsocketEndpoint(e){this.websocketURL=e}sendEvent(e){if(!this.env||!this.websocketURL){this.addEventToStorage(e);return}let t={event:e.name,payload:e.properties,event_id:String(e.timestamp),peer:e.metadata.peer,timestamp:e.timestamp,device_id:e.device_id,cluster:{websocket_url:this.websocketURL}},i=this.env===li.PROD?LB:xB;fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.metadata.token}`,user_agent_v2:e.metadata.userAgent},body:JSON.stringify(t)}).then(n=>{if(n.status===401){this.removeFromStorage(e);return}if(n.status!==200)throw Error(n.statusText);this.removeFromStorage(e)}).catch(n=>{b.v(this.TAG,"Failed to send event",n,e),this.addEventToStorage(e)})}flushFailedEvents(){let e=this.failedEvents.get();e==null||e.forEach(t=>this.sendEvent(t))}addEventToStorage(e){let t=this.failedEvents.get()||[];t.find(i=>i.timestamp===e.timestamp)||(t.length===MB&&t.shift(),t.push(e),this.failedEvents.set(t))}removeFromStorage(e){let t=this.failedEvents.get()||[],i=t.findIndex(n=>n.timestamp===e.timestamp);i>-1&&(t.splice(i,1),this.failedEvents.set(t))}},va=new FB,jB=class{constructor(){this.knownRoles={},this.peers={},this.tracks=new Map,this.peerTrackStates={},this.speakers=[],this.roleDetailsArrived=!1,this.env=li.PROD,this.simulcastEnabled=!1,this.userAgent=Ch(this.env)}getConfig(){return this.config}setSimulcastEnabled(e){this.simulcastEnabled=e}getEnv(){return this.env}getPublishParams(){let e=this.getLocalPeer(),t=(e==null?void 0:e.asRole)||(e==null?void 0:e.role);return t==null?void 0:t.publishParams}getRoom(){return this.room}getPolicyForRole(e){return this.knownRoles[e]}getKnownRoles(){return this.knownRoles}getTemplateAppData(){return this.templateAppData}getLocalPeer(){if(this.localPeerId&&this.peers[this.localPeerId])return this.peers[this.localPeerId]}getRemotePeers(){return Object.values(this.peers).filter(e=>!e.isLocal)}getPeers(){return Object.values(this.peers)}getPeerById(e){if(this.peers[e])return this.peers[e]}getTracksMap(){return this.tracks}getTracks(){return Array.from(this.tracks.values())}getVideoTracks(){return this.getTracks().filter(e=>e.type===wt.VIDEO)}getRemoteVideoTracks(){return this.getTracks().filter(e=>e instanceof Vi)}getAudioTracks(){return this.getTracks().filter(e=>e.type===wt.AUDIO)}getPeerTracks(e){let t=e?this.peers[e]:void 0,i=[];return t!=null&&t.videoTrack&&i.push(t.videoTrack),t!=null&&t.audioTrack&&i.push(t.audioTrack),i.concat((t==null?void 0:t.auxiliaryTracks)||[])}getLocalPeerTracks(){return this.getPeerTracks(this.localPeerId)}hasTrack(e){return this.tracks.has(e)}getTrackById(e){var t,i;let n=Array.from(this.tracks.values()).find(s=>s.trackId===e);if(n)return n;let r=this.getLocalPeer();if(r){if((t=r.audioTrack)!=null&&t.isPublishedTrackId(e))return r.audioTrack;if((i=r.videoTrack)!=null&&i.isPublishedTrackId(e))return r.videoTrack}}getPeerByTrackId(e){let t=Array.from(this.tracks.values()).find(i=>i.trackId===e);return t!=null&&t.peerId?this.peers[t.peerId]:void 0}getSpeakers(){return this.speakers}getSpeakerPeers(){return this.speakers.map(e=>e.peer)}getUserAgent(){return this.userAgent}createAndSetUserAgent(e){this.userAgent=Ch(this.env,e)}setRoom(e){this.room=e}setKnownRoles(e){var t,i;if(this.knownRoles=e.known_roles,this.roleDetailsArrived=!0,this.templateAppData=e.app_data,!this.simulcastEnabled)return;let n=(t=this.knownRoles[e.name])==null?void 0:t.publishParams;this.videoLayers=this.convertSimulcastLayers((i=n.simulcast)==null?void 0:i.video),this.updatePeersPolicy()}hasRoleDetailsArrived(){return this.roleDetailsArrived}setConfig(e){var t,i,n;if(Mn.rememberDevices(Boolean(e.rememberDeviceSelection)),e.rememberDeviceSelection){let r=Mn.getSelection();r&&(e.settings||(e.settings={}),(t=r.audioInput)!=null&&t.deviceId&&(e.settings.audioInputDeviceId=e.settings.audioInputDeviceId||r.audioInput.deviceId),(i=r.audioOutput)!=null&&i.deviceId&&(e.settings.audioOutputDeviceId=e.settings.audioOutputDeviceId||r.audioOutput.deviceId),(n=r.videoInput)!=null&&n.deviceId&&(e.settings.videoDeviceId=e.settings.videoDeviceId||r.videoInput.deviceId))}e.autoManageVideo=e.autoManageVideo!==!1,e.autoManageWakeLock=e.autoManageWakeLock!==!1,this.config=e,this.setEnv()}addPeer(e){this.peers[e.peerId]=e,e.isLocal&&(this.localPeerId=e.peerId)}addTrack(e){this.tracks.set(e,e)}getTrackState(e){return this.peerTrackStates[e]}setTrackState(e){this.peerTrackStates[e.trackInfo.track_id]=e}removePeer(e){this.localPeerId===e&&(this.localPeerId=void 0),delete this.peers[e]}removeTrack(e){this.tracks.delete(e)}updateSpeakers(e){this.speakers=e}updateAudioOutputVolume(e){return _(this,null,function*(){for(let t of this.getAudioTracks())yield t.setVolume(e)})}updateAudioOutputDevice(e){return _(this,null,function*(){let t=[];this.getAudioTracks().forEach(i=>{i instanceof Ia&&t.push(i.setOutputDevice(e))}),yield Promise.all(t)})}getSimulcastLayers(e){var t;return!this.simulcastEnabled||!["screen","regular"].includes(e)?[]:e==="screen"?[]:((t=this.videoLayers)==null?void 0:t.layers)||[]}convertSimulcastLayers(e){if(e)return Ot(Re({},e),{layers:(e.layers||[]).map(t=>Ot(Re({},t),{maxBitrate:t.maxBitrate*1e3}))})}getSimulcastDefinitionsForPeer(e,t){var i,n,r;if([!e||!e.role,t==="screen",!this.simulcastEnabled].some(c=>!!c))return[];let s=this.getPolicyForRole(e.role.name).publishParams,o,a,l;return t==="regular"?(o=(i=s.simulcast)==null?void 0:i.video,a=s.video.width,l=s.video.height):t==="screen"&&(o=(n=s.simulcast)==null?void 0:n.screen,a=s.screen.width,l=s.screen.height),((r=o==null?void 0:o.layers)==null?void 0:r.map(c=>{let u=aB[c.rid],d={width:a/c.scaleResolutionDownBy,height:l/c.scaleResolutionDownBy};return{layer:u,resolution:d}}))||[]}getErrorListener(){return this.errorListener}cleanUp(){let e=this.getTracks();for(let t of e)t.cleanup();this.room=void 0,this.config=void 0,this.localPeerId=void 0,this.roleDetailsArrived=!1}setErrorListener(e){this.errorListener=e}updatePeersPolicy(){this.getPeers().forEach(e=>{var t;if(!e.role){(t=this.errorListener)==null||t.onError(te.GenericErrors.InvalidRole(Q.VALIDATION,""));return}e.role=this.getPolicyForRole(e.role.name)})}setEnv(){var e;let t=((e=this.config)==null?void 0:e.initEndpoint).split("https://")[1],i=li.PROD;t.startsWith(li.PROD)?i=li.PROD:t.startsWith(li.QA)?i=li.QA:t.startsWith(li.DEV)&&(i=li.DEV),this.env=i,va.setEnv(i)}},VB=class{constructor(){this.TAG="[WakeLockManager]",this.wakeLock=null,this.acquireLock=()=>_(this,null,function*(){yield this.requestWakeLock(),document==null||document.addEventListener("visibilitychange",this.visibilityHandler)}),this.cleanup=()=>_(this,null,function*(){if(this.wakeLock&&!this.wakeLock.released)try{yield this.wakeLock.release(),b.d(this.TAG,"Wake lock released")}catch(e){let t=e;b.e(this.TAG,"Error while releasing wake lock",`name=${t.name}, message=${t.message}`)}this.wakeLock=null}),this.visibilityHandler=()=>_(this,null,function*(){(document==null?void 0:document.visibilityState)==="visible"&&(!this.wakeLock||this.wakeLock.released)&&(b.d(this.TAG,"Re-acquiring wake lock due to visibility change"),yield this.requestWakeLock())}),this.requestWakeLock=()=>_(this,null,function*(){try{if(!("wakeLock"in navigator)){b.d(this.TAG,"Wake lock feature not supported");return}this.wakeLock=yield navigator.wakeLock.request("screen"),b.d(this.TAG,"Wake lock acquired")}catch(e){let t=e;b.e(this.TAG,"Error acquiring wake lock",`name=${t.name}, message=${t.message}`)}})}},GB=class{constructor(e){this.store=e,this.bufferSize=q0,this.TAG="[AnalyticsEventsService]",this.transport=null,this.pendingEvents=[],this.level=Ah.INFO}setTransport(e){this.transport=e}reset(){this.transport=null,this.pendingEvents=[]}queue(e){if(e.level>=this.level&&(this.pendingEvents.push(e),this.pendingEvents.length>this.bufferSize)){let t=this.pendingEvents.shift();b.d(this.TAG,"Max buffer size reached","Removed event to accommodate new events",t)}return this}flushFailedClientEvents(){va.flushFailedEvents()}flush(){var e;try{for(;this.pendingEvents.length>0;){let t=this.pendingEvents.shift();t&&(t.metadata.peer.peer_id=(e=this.store.getLocalPeer())==null?void 0:e.peerId,t.metadata.userAgent=this.store.getUserAgent(),this.transport&&this.transport.transportProvider.isConnected?this.transport.sendEvent(t):this.sendClientEventOnHTTP(t))}}catch(t){b.w(this.TAG,"Flush Failed",t)}}sendClientEventOnHTTP(e){var t,i,n,r;let s=this.store.getRoom(),o=this.store.getLocalPeer();e.metadata.token=(t=this.store.getConfig())==null?void 0:t.authToken,e.metadata.peer={session_id:s==null?void 0:s.sessionId,room_id:s==null?void 0:s.id,room_name:s==null?void 0:s.name,template_id:s==null?void 0:s.templateId,joined_at:(i=s==null?void 0:s.joinedAt)==null?void 0:i.getTime(),session_started_at:(n=s==null?void 0:s.startedAt)==null?void 0:n.getTime(),role:(r=o==null?void 0:o.role)==null?void 0:r.name,user_name:o==null?void 0:o.name,user_data:o==null?void 0:o.metadata},va.sendEvent(e)}},Xy={autoplayFailed:void 0,initialized:!1,autoplayCheckPromise:void 0},HB=class{constructor(e,t,i){this.store=e,this.deviceManager=t,this.eventBus=i,this.autoPausedTracks=new Set,this.TAG="[AudioSinkManager]:",this.volume=100,this.state=Re({},Xy),this.handleAudioPaused=n=>_(this,null,function*(){var r;let s=(r=n.target.srcObject)==null?void 0:r.getAudioTracks()[0];if(!(s!=null&&s.enabled))return;b.d(this.TAG,"Audio Paused",n.target.id);let o=this.store.getTrackById(n.target.id);o&&(WU()?(yield ji(500),this.playAudioFor(o)):this.autoPausedTracks.add(o))}),this.handleTrackUpdate=({track:n})=>{b.d(this.TAG,"Track updated",`${n}`)},this.handleTrackAdd=n=>_(this,[n],function*({track:r,peer:s,callListener:o=!0}){var a,l;let c=document.createElement("audio");c.style.display="none",c.id=r.trackId,c.addEventListener("pause",this.handleAudioPaused),c.onerror=()=>_(this,null,function*(){var u,d;b.e(this.TAG,"error on audio element",c.error);let h=te.TracksErrors.AudioPlaybackError(`Audio playback error for track - ${r.trackId} code - ${(u=c==null?void 0:c.error)==null?void 0:u.code}`);this.eventBus.analytics.publish(it.audioPlaybackError(h)),((d=c==null?void 0:c.error)==null?void 0:d.code)===MediaError.MEDIA_ERR_DECODE&&(this.removeAudioElement(c,r),yield ji(500),yield this.handleTrackAdd({track:r,peer:s,callListener:!1}))}),r.setAudioElement(c),r.setVolume(this.volume),b.d(this.TAG,"Audio track added",`${r}`),this.init(),(a=this.audioSink)==null||a.append(c),this.outputDevice&&(yield r.setOutputDevice(this.outputDevice)),c.srcObject=new MediaStream([r.nativeTrack]),o&&((l=this.listener)==null||l.onTrackUpdate(Ye.TRACK_ADDED,r,s)),yield this.handleAutoplayError(r)}),this.handleAutoplayError=n=>_(this,null,function*(){if(this.state.autoplayFailed===void 0&&(this.state.autoplayCheckPromise||(this.state.autoplayCheckPromise=new Promise(r=>{this.playAudioFor(n).then(r)})),yield this.state.autoplayCheckPromise),this.state.autoplayFailed){this.autoPausedTracks.add(n);return}yield this.playAudioFor(n)}),this.handleAudioDeviceChange=n=>{n.error||!n.selection||n.type==="video"||this.unpauseAudioTracks()},this.handleTrackRemove=n=>{this.autoPausedTracks.delete(n);let r=document.getElementById(n.trackId);r&&this.removeAudioElement(r,n),this.audioSink&&this.audioSink.childElementCount===0&&(this.state.autoplayCheckPromise=void 0,this.state.autoplayFailed=void 0),b.d(this.TAG,"Audio track removed",`${n}`)},this.unpauseAudioTracks=()=>_(this,null,function*(){let n=[];this.autoPausedTracks.forEach(r=>{n.push(this.playAudioFor(r))}),yield Promise.all(n)}),this.removeAudioElement=(n,r)=>{n&&(b.d(this.TAG,"removing audio element",`${r}`),n.removeEventListener("pause",this.handleAudioPaused),n.srcObject=null,n.remove(),r.setAudioElement(null))},this.eventBus.audioTrackAdded.subscribe(this.handleTrackAdd),this.eventBus.audioTrackRemoved.subscribe(this.handleTrackRemove),this.eventBus.audioTrackUpdate.subscribe(this.handleTrackUpdate),this.eventBus.deviceChange.subscribe(this.handleAudioDeviceChange)}setListener(e){this.listener=e}get outputDevice(){return this.deviceManager.outputDevice}getVolume(){return this.volume}setVolume(e){return _(this,null,function*(){yield this.store.updateAudioOutputVolume(e),this.volume=e})}unblockAutoplay(){return _(this,null,function*(){this.autoPausedTracks.size>0&&this.unpauseAudioTracks()})}init(e){if(this.state.initialized||this.audioSink)return;this.state.initialized=!0;let t=document.createElement("div");t.id=`HMS-SDK-audio-sink-${vr()}`,(e&&document.getElementById(e)||document.body).append(t),this.audioSink=t,b.d(this.TAG,"audio sink created",this.audioSink)}cleanUp(){var e;(e=this.audioSink)==null||e.remove(),this.audioSink=void 0,this.eventBus.audioTrackAdded.unsubscribe(this.handleTrackAdd),this.eventBus.audioTrackRemoved.unsubscribe(this.handleTrackRemove),this.eventBus.audioTrackUpdate.unsubscribe(this.handleTrackUpdate),this.eventBus.deviceChange.unsubscribe(this.handleAudioDeviceChange),this.autoPausedTracks=new Set,this.state=Re({},Xy)}playAudioFor(e){return _(this,null,function*(){let t=e.getAudioElement();if(!t){b.w(this.TAG,"No audio element found on track",e.trackId);return}try{yield t.play(),this.state.autoplayFailed=!1,this.autoPausedTracks.delete(e),b.d(this.TAG,"Played track",`${e}`)}catch(i){this.autoPausedTracks.add(e),b.e(this.TAG,"Failed to play track",`${e}`,i);let n=i;if(!this.state.autoplayFailed&&n.name==="NotAllowedError"){this.state.autoplayFailed=!0;let r=te.TracksErrors.AutoplayBlocked(Q.AUTOPLAY,"");r.addNativeError(n),this.eventBus.analytics.publish(it.autoplayError()),this.eventBus.autoplayError.publish(r)}}})}},KB=class{constructor(e,t){this.store=e,this.eventBus=t,this.audioInput=[],this.audioOutput=[],this.videoInput=[],this.hasWebcamPermission=!1,this.hasMicrophonePermission=!1,this.TAG="[Device Manager]:",this.initialized=!1,this.videoInputChanged=!1,this.audioInputChanged=!1,this.updateOutputDevice=n=>_(this,null,function*(){let r=this.audioOutput.find(s=>s.deviceId===n);return r&&(this.outputDevice=r,yield this.store.updateAudioOutputDevice(r),Mn.updateSelection("audioOutput",{deviceId:r.deviceId,groupId:r.groupId})),r}),this.getCurrentSelection=()=>{var n,r;let s=this.store.getLocalPeer(),o=this.createIdentifier((n=s==null?void 0:s.audioTrack)==null?void 0:n.getMediaTrackSettings()),a=this.createIdentifier((r=s==null?void 0:s.videoTrack)==null?void 0:r.getMediaTrackSettings()),l=this.audioInput.find(u=>this.createIdentifier(u)===o),c=this.videoInput.find(u=>this.createIdentifier(u)===a);return{audioInput:l,videoInput:c,audioOutput:this.outputDevice}},this.computeChange=(n,r)=>n.length!==r.length?!0:r.some(s=>!n.includes(this.createIdentifier(s))),this.enumerateDevices=()=>_(this,null,function*(){try{let n=yield navigator.mediaDevices.enumerateDevices(),r=this.videoInput.map(this.createIdentifier),s=this.audioInput.map(this.createIdentifier);this.audioInput=[],this.audioOutput=[],this.videoInput=[],n.forEach(o=>{o.kind==="audioinput"&&o.label?(this.hasMicrophonePermission=!0,this.audioInput.push(o)):o.kind==="audiooutput"?this.audioOutput.push(o):o.kind==="videoinput"&&o.label&&(this.hasWebcamPermission=!0,this.videoInput.push(o))}),this.videoInputChanged=this.computeChange(r,this.videoInput),this.audioInputChanged=this.computeChange(s,this.audioInput),Mn.setDevices({videoInput:[...this.videoInput],audioInput:[...this.audioInput],audioOutput:[...this.audioOutput]}),this.logDevices("Enumerate Devices")}catch(n){b.e(this.TAG,"Failed enumerating devices",n)}}),this.handleDeviceChange=G0(()=>_(this,null,function*(){yield this.enumerateDevices(),this.logDevices("After Device Change");let n=this.store.getLocalPeer();yield this.setOutputDevice(!0),yield this.handleAudioInputDeviceChange(n==null?void 0:n.audioTrack),yield this.handleVideoInputDeviceChange(n==null?void 0:n.videoTrack),this.eventBus.analytics.publish(it.deviceChange({selection:this.getCurrentSelection(),type:"change",devices:this.getDevices()}))}),500).bind(this),this.handleAudioInputDeviceChange=n=>_(this,null,function*(){if(!n){b.d(this.TAG,"No Audio track on local peer");return}if(!this.audioInputChanged){b.d(this.TAG,"No Change in AudioInput Device");return}let r=this.getNewAudioInputDevice();if(!r||!r.deviceId){this.eventBus.analytics.publish(it.deviceChange({selection:{audioInput:r},error:new Error("Audio device not found"),devices:this.getDevices(),type:"audioInput"})),b.w(this.TAG,"Audio device not found");return}let{settings:s}=n,o=new ga().codec(s.codec).maxBitrate(s.maxBitrate).deviceId(r.deviceId).build();try{yield n.setSettings(o,!0),this.eventBus.deviceChange.publish({devices:this.getDevices(),selection:r,type:"audioInput"}),this.logDevices("Audio Device Change Success")}catch(a){b.e(this.TAG,"[Audio Device Change]",a),this.eventBus.analytics.publish(it.deviceChange({selection:{audioInput:r},devices:this.getDevices(),type:"audioInput",error:a})),this.eventBus.deviceChange.publish({error:a,selection:r,type:"audioInput",devices:this.getDevices()})}}),this.handleVideoInputDeviceChange=n=>_(this,null,function*(){if(!n){b.d(this.TAG,"No video track on local peer");return}if(!this.videoInputChanged){b.d(this.TAG,"No Change in VideoInput Device");return}let r=this.videoInput[0];if(!r||!r.deviceId){this.eventBus.analytics.publish(it.deviceChange({selection:{videoInput:r},error:new Error("Video device not found"),devices:this.getDevices(),type:"video"})),b.w(this.TAG,"Video device not found");return}let{settings:s}=n,o=new no().codec(s.codec).maxBitrate(s.maxBitrate).maxFramerate(s.maxFramerate).setWidth(s.width).setHeight(s.height).deviceId(r.deviceId).build();try{yield n.setSettings(o,!0),this.eventBus.deviceChange.publish({devices:this.getDevices(),selection:r,type:"video"}),this.logDevices("Video Device Change Success")}catch(a){b.e(this.TAG,"[Video Device Change]",a),this.eventBus.analytics.publish(it.deviceChange({selection:{videoInput:r},devices:this.getDevices(),type:"video",error:a})),this.eventBus.deviceChange.publish({error:a,type:"video",selection:r,devices:this.getDevices()})}});let i=({enabled:n,track:r})=>n&&r.source==="regular";this.eventBus.localVideoEnabled.waitFor(i).then(()=>_(this,null,function*(){yield this.enumerateDevices(),this.videoInputChanged&&this.eventBus.deviceChange.publish({devices:this.getDevices()})})),this.eventBus.localAudioEnabled.waitFor(i).then(()=>_(this,null,function*(){yield this.enumerateDevices(),this.audioInputChanged&&this.eventBus.deviceChange.publish({devices:this.getDevices()})}))}init(e=!1){return _(this,null,function*(){this.initialized&&!e||(!this.initialized&&navigator.mediaDevices.addEventListener("devicechange",this.handleDeviceChange),this.initialized=!0,yield this.enumerateDevices(),this.logDevices("Init"),yield this.setOutputDevice(),this.eventBus.deviceChange.publish({devices:this.getDevices()}),this.eventBus.analytics.publish(it.deviceChange({selection:this.getCurrentSelection(),type:"list",devices:this.getDevices()})))})}getDevices(){return{audioInput:this.audioInput,audioOutput:this.audioOutput,videoInput:this.videoInput}}cleanUp(){this.initialized=!1,this.audioInput=[],this.audioOutput=[],this.videoInput=[],this.outputDevice=void 0,navigator.mediaDevices.removeEventListener("devicechange",this.handleDeviceChange)}createIdentifier(e){return e?`${e.deviceId}${e.groupId}`:""}getNewAudioInputDevice(){let e=this.audioInput.find(t=>t.deviceId==="default");return e?this.audioInput.find(t=>t.deviceId!=="default"&&e.label.includes(t.label)):this.audioInput[0]}setOutputDevice(e=!1){return _(this,null,function*(){let t=this.getNewAudioInputDevice(),i=this.createIdentifier(this.outputDevice);this.outputDevice=this.getAudioOutputDeviceMatchingInput(t),this.outputDevice||(this.outputDevice=this.audioOutput.find(n=>this.createIdentifier(n)===i),this.outputDevice||(this.outputDevice=this.audioOutput.find(n=>n.deviceId==="default")||this.audioOutput[0])),yield this.store.updateAudioOutputDevice(this.outputDevice),e&&i!==this.createIdentifier(this.outputDevice)&&(this.eventBus.analytics.publish(it.deviceChange({selection:{audioOutput:this.outputDevice},devices:this.getDevices(),type:"audioOutput"})),this.eventBus.deviceChange.publish({selection:this.outputDevice,type:"audioOutput",devices:this.getDevices()}))})}getAudioOutputDeviceMatchingInput(e){var t,i;let n=((i=(t=this.store.getConfig())==null?void 0:t.settings)==null?void 0:i.speakerAutoSelectionBlacklist)||[];if(n==="all")return;let r=(e==null?void 0:e.label.toLowerCase())||"";if(!n.some(s=>r.includes(s.toLowerCase()))&&(e==null?void 0:e.groupId))return this.audioOutput.find(s=>e.deviceId!=="default"&&s.label===e.label)}logDevices(e=""){b.d(this.TAG,e,JSON.stringify({videoInput:[...this.videoInput],audioInput:[...this.audioInput],audioOutput:[...this.audioOutput],selected:this.getCurrentSelection()},null,4))}},WB=class{constructor(e,t){this.deviceManager=e,this.audioSinkManager=t}getVolume(){return this.audioSinkManager.getVolume()}setVolume(e){if(e<0||e>100)throw Error("Please pass a valid number between 0-100");this.audioSinkManager.setVolume(e)}getDevice(){return this.deviceManager.outputDevice}setDevice(e){return this.deviceManager.updateOutputDevice(e)}unblockAutoplay(){return _(this,null,function*(){yield this.audioSinkManager.unblockAutoplay(),yield Vc.resumeContext()})}},Lt=class{constructor(e,t){this.eventName=e,this.eventEmitter=t,this.publish=i=>{this.eventEmitter.emit(this.eventName,i)},this.subscribe=i=>{this.eventEmitter.on(this.eventName,i)},this.subscribeOnce=i=>{this.eventEmitter.once(this.eventName,i)},this.unsubscribe=i=>{this.eventEmitter.off(this.eventName,i)},this.waitFor=i=>this.eventEmitter.waitFor(this.eventName,{filter:i}),this.removeAllListeners=()=>{this.eventEmitter.removeAllListeners(this.eventName)}}},qB=class{constructor(){this.eventEmitter=new Pa.exports.EventEmitter2,this.deviceChange=new Lt(Nt.DEVICE_CHANGE,this.eventEmitter),this.localAudioEnabled=new Lt(Nt.LOCAL_AUDIO_ENABLED,this.eventEmitter),this.localVideoEnabled=new Lt(Nt.LOCAL_VIDEO_ENABLED,this.eventEmitter),this.statsUpdate=new Lt(Nt.STATS_UPDATE,this.eventEmitter),this.trackDegraded=new Lt(Nt.TRACK_DEGRADED,this.eventEmitter),this.trackRestored=new Lt(Nt.TRACK_RESTORED,this.eventEmitter),this.trackAudioLevelUpdate=new Lt(Nt.TRACK_AUDIO_LEVEL_UPDATE,this.eventEmitter),this.audioPluginFailed=new Lt(Nt.AUDIO_PLUGIN_FAILED,this.eventEmitter),this.localAudioSilence=new Lt(Nt.LOCAL_AUDIO_SILENCE,this.eventEmitter),this.analytics=new Lt(Nt.ANALYTICS,this.eventEmitter),this.policyChange=new Lt(Nt.POLICY_CHANGE,this.eventEmitter),this.localRoleUpdate=new Lt(Nt.LOCAL_ROLE_UPDATE,this.eventEmitter),this.audioTrackUpdate=new Lt(Nt.AUDIO_TRACK_UPDATE,this.eventEmitter),this.audioTrackAdded=new Lt(Nt.AUDIO_TRACK_ADDED,this.eventEmitter),this.audioTrackRemoved=new Lt(Nt.AUDIO_TRACK_REMOVED,this.eventEmitter),this.autoplayError=new Lt(Nt.AUTOPLAY_ERROR,this.eventEmitter),this.leave=new Lt(Nt.LEAVE,this.eventEmitter)}},zB=class{constructor(e,t,i){this.store=e,this.listener=t,this.audioListener=i}handleActiveSpeakers(e){var t,i,n;let r=e["speaker-list"],s=r.map(a=>({audioLevel:a.level,peer:this.store.getPeerById(a.peer_id),track:this.store.getTrackById(a.track_id)}));(t=this.audioListener)==null||t.onAudioLevelUpdate(s),this.store.updateSpeakers(s);let o=r[0];if(o){let a=this.store.getPeerById(o.peer_id);(i=this.listener)==null||i.onPeerUpdate(yt.BECAME_DOMINANT_SPEAKER,a)}else(n=this.listener)==null||n.onPeerUpdate(yt.RESIGNED_DOMINANT_SPEAKER,null)}},Ge;(function(e){e.ROOM_STATE="room-state",e.PEER_JOIN="on-peer-join",e.PEER_LEAVE="on-peer-leave",e.PEER_LIST="peer-list",e.TRACK_METADATA_ADD="on-track-add",e.TRACK_UPDATE="on-track-update",e.CHANGE_TRACK_MUTE_STATE_UPDATE="on-change-track-mute-state-request",e.ACTIVE_SPEAKERS="active-speakers",e.CONNECTION_QUALITY="on-connection-quality-update",e.SFU_STATS="sfu-stats",e.ON_SFU_TRACK_LAYER_UPDATE="on-track-layer-update",e.BROADCAST="on-broadcast",e.ROLE_CHANGE="on-role-change",e.POLICY_CHANGE="on-policy-change",e.ROLE_CHANGE_REQUEST="on-role-change-request",e.TRACK_UPDATE_REQUEST="on-track-update-request",e.PEER_UPDATE="on-peer-update",e.PEER_LEAVE_REQUEST="on-peer-leave-request",e.UNSUPPORTED="unsupported",e.RTMP_START="on-rtmp-start",e.RTMP_STOP="on-rtmp-stop",e.RECORDING_START="on-record-start",e.RECORDING_STOP="on-record-stop",e.HLS_START="on-hls-start",e.HLS_STOP="on-hls-stop",e.METADATA_CHANGE="on-metadata-change"})(Ge||(Ge={}));var JB=class{constructor(e,t){this.store=e,this.listener=t,this.TAG="[BroadcastManager]"}handleNotification(e,t){e===Ge.BROADCAST&&this.handleBroadcast(t)}handleBroadcast(e){var t;let i=e.peer,n=e.info,r=e.roles,s=this.getSender(i),o=e.private?this.store.getLocalPeer():void 0,a=[];if(r!=null&&r.length){let c=this.store.getKnownRoles();for(let u of r)c[u]&&a.push(c[u])}let l=new B0(Ot(Re({},n),{sender:s,recipientRoles:a,recipientPeer:o,time:new Date(e.timestamp)}));b.d(this.TAG,`Received Message from sender=${i==null?void 0:i.peer_id}: ${l}`),(t=this.listener)==null||t.onMessageReceived(l)}getSender(e){let t=e?this.store.getPeerById(e.peer_id):void 0;return!t&&e&&(t=new pp({peerId:e.peer_id,name:e.info.name,isLocal:!1,customerUserId:e.info.user_id,metadata:e.info.data})),t}},YB=class{constructor(e){this.listener=e}handleQualityUpdate(e){var t;let i=e.peers.map(n=>({peerID:n.peer_id,downlinkQuality:n.downlink_score}));(t=this.listener)==null||t.onConnectionQualityUpdate(i)}},XB=class{constructor(e,t,i,n){this.store=e,this.peerManager=t,this.trackManager=i,this.listener=n,this.TAG="[PeerListManager]",this.handleInitialPeerList=r=>{let s=Object.values(r.peers);this.peerManager.handlePeerList(s)},this.handleReconnectPeerList=r=>{this.handleRepeatedPeerList(r.peers)},this.handlePreviewRoomState=r=>{if(!this.store.hasRoleDetailsArrived())return;let s=r.peers;if(s==null){r.peer_count===0&&this.handleRepeatedPeerList({});return}Object.keys(s).forEach(o=>{s[o].tracks={},s[o].is_from_room_state=!0}),this.handleRepeatedPeerList(s)},this.handleRepeatedPeerList=r=>{let s=this.store.getRemotePeers(),o=Object.values(r),a=s.filter(c=>!r[c.peerId]);a.length>0&&b.d(this.TAG,`${a}`),a.forEach(c=>{var u;let d={peer_id:c.peerId,role:((u=c.role)==null?void 0:u.name)||"",info:{name:c.name,data:c.metadata||"",user_id:c.customerUserId||""},tracks:{}};this.peerManager.handlePeerLeave(d)});let l=[];o.forEach(c=>{let u=this.store.getPeerById(c.peer_id),d=Object.values(c.tracks);u&&(this.store.getPeerTracks(u.peerId).forEach(h=>{var m;c.tracks[h.trackId]||(this.removePeerTrack(u,h.trackId),(m=this.listener)==null||m.onTrackUpdate(Ye.TRACK_REMOVED,h,u))}),d.forEach(h=>{this.store.getTrackById(h.track_id)||this.store.setTrackState({peerId:u.peerId,trackInfo:h})}),this.trackManager.handleTrackUpdate({peer:{info:c.info,peer_id:c.peer_id},tracks:c.tracks}),this.peerManager.handlePeerUpdate(c)),l.push(c)}),l.length>0&&this.peerManager.handlePeerList(l)}}handleNotification(e,t,i){if(e===Ge.PEER_LIST){let n=t;i?(b.d(this.TAG,"RECONNECT_PEER_LIST event",JSON.stringify(n,null,2)),this.handleReconnectPeerList(n)):(b.d(this.TAG,"PEER_LIST event",JSON.stringify(n,null,2)),this.handleInitialPeerList(n))}else if(e===Ge.ROOM_STATE){let n=t;this.handlePreviewRoomState(n)}}removePeerTrack(e,t){var i,n;if(b.d(this.TAG,`removing track - ${t} from ${e}`),((i=e.audioTrack)==null?void 0:i.trackId)===t)e.audioTrack=void 0;else if(((n=e.videoTrack)==null?void 0:n.trackId)===t)e.videoTrack=void 0;else{let r=e.auxiliaryTracks.findIndex(s=>s.trackId===t);r>=0&&e.auxiliaryTracks.splice(r,1)}}},ti=e=>e?new Date(e):void 0,ZB=class{constructor(e,t,i){this.store=e,this.trackManager=t,this.listener=i,this.TAG="[PeerManager]",this.handlePeerList=n=>{var r,s;if(n.length===0){(r=this.listener)==null||r.onPeerUpdate(yt.PEER_LIST,[]);return}let o=[],a=new Set(n.map(l=>l.peer_id));this.store.getRemotePeers().forEach(({peerId:l,fromRoomState:c})=>{!a.has(l)&&c&&this.store.removePeer(l)});for(let l of n)o.push(this.makePeer(l));(s=this.listener)==null||s.onPeerUpdate(yt.PEER_LIST,o),this.trackManager.processPendingTracks()},this.handlePeerJoin=n=>{var r;let s=this.makePeer(n);(r=this.listener)==null||r.onPeerUpdate(yt.PEER_JOINED,s),this.trackManager.processPendingTracks()},this.handlePeerLeave=n=>{var r,s,o,a;let l=this.store.getPeerById(n.peer_id);this.store.removePeer(n.peer_id),b.d(this.TAG,"PEER_LEAVE",n.peer_id,`remainingPeers=${this.store.getPeers().length}`),l&&(l.audioTrack&&((r=this.listener)==null||r.onTrackUpdate(Ye.TRACK_REMOVED,l.audioTrack,l)),l.videoTrack&&((s=this.listener)==null||s.onTrackUpdate(Ye.TRACK_REMOVED,l.videoTrack,l)),(o=l.auxiliaryTracks)==null||o.forEach(c=>{var u;(u=this.listener)==null||u.onTrackUpdate(Ye.TRACK_REMOVED,c,l)}),(a=this.listener)==null||a.onPeerUpdate(yt.PEER_LEFT,l))}}handleNotification(e,t){switch(e){case Ge.PEER_JOIN:{let i=t;this.handlePeerJoin(i);break}case Ge.PEER_LEAVE:{let i=t;this.handlePeerLeave(i);break}case Ge.PEER_UPDATE:this.handlePeerUpdate(t);break}}handlePeerUpdate(e){var t;let i=this.store.getPeerById(e.peer_id);if(i){if(i.role&&i.role.name!==e.role){let n=this.store.getPolicyForRole(e.role);i.updateRole(n),this.updateSimulcastLayersForPeer(i),(t=this.listener)==null||t.onPeerUpdate(yt.ROLE_UPDATED,i)}this.handlePeerInfoUpdate(Re({peer:i},e.info))}}handlePeerInfoUpdate({peer:e,name:t,data:i}){var n,r;!e||(t&&e.name!==t&&(e.updateName(t),(n=this.listener)==null||n.onPeerUpdate(yt.NAME_UPDATED,e)),i&&e.metadata!==i&&(e.updateMetadata(i),(r=this.listener)==null||r.onPeerUpdate(yt.METADATA_UPDATED,e)))}makePeer(e){let t=this.store.getPeerById(e.peer_id);t||(t=new eB({peerId:e.peer_id,name:e.info.name,customerUserId:e.info.user_id,metadata:e.info.data,role:this.store.getPolicyForRole(e.role),joinedAt:ti(e.joined_at),fromRoomState:!!e.is_from_room_state}),this.store.addPeer(t),b.d(this.TAG,"adding to the peerList",`${t}`));for(let i in e.tracks)this.store.setTrackState({peerId:e.peer_id,trackInfo:e.tracks[i]});return t}updateSimulcastLayersForPeer(e){this.store.getPeerTracks(e.peerId).forEach(t=>{if(t.type==="video"&&["regular","screen"].includes(t.source)){let i=t,n=this.store.getSimulcastDefinitionsForPeer(e,i.source);i.setSimulcastDefinitons(n)}})}},QB=class{constructor(e,t){this.store=e,this.eventBus=t}handlePolicyChange(e){let t=this.store.getLocalPeer();if(t&&!t.role){let n=e.known_roles[e.name];t.updateRole(n)}this.store.setKnownRoles(e);let i=this.store.getRoom();if(i?i.templateId=e.template_id:b.w("[PolicyChangeManager]","on policy change - room not present"),(t==null?void 0:t.role)&&t.role.name!==e.name){let n=this.store.getPolicyForRole(e.name),r=t.role;t.updateRole(n),this.eventBus.localRoleUpdate.publish({oldRole:r,newRole:n})}this.eventBus.policyChange.publish(e)}},eF=class{constructor(e,t){this.store=e,this.listener=t}handleNotification(e,t){switch(e){case Ge.ROLE_CHANGE_REQUEST:this.handleRoleChangeRequest(t);break;case Ge.TRACK_UPDATE_REQUEST:this.handleTrackUpdateRequest(t);break;case Ge.CHANGE_TRACK_MUTE_STATE_UPDATE:this.handleChangeTrackStateRequest(t);break;default:return}}handleRoleChangeRequest(e){var t;let i={requestedBy:e.requested_by?this.store.getPeerById(e.requested_by):void 0,role:this.store.getPolicyForRole(e.role),token:e.token};(t=this.listener)==null||t.onRoleChangeRequest(i)}handleTrackUpdateRequest(e){let{requested_by:t,track_id:i,mute:n}=e,r=t?this.store.getPeerById(t):void 0,s=this.store.getLocalPeerTracks().find(a=>a.publishedTrackId===i);if(!s)return;let o=()=>{var a;(a=this.listener)==null||a.onChangeTrackStateRequest({requestedBy:r,track:s,enabled:!n})};if(n){if(s.enabled===!n)return;s.setEnabled(!n).then(o)}else o()}handleChangeTrackStateRequest(e){var t;let{type:i,source:n,value:r,requested_by:s}=e,o=s?this.store.getPeerById(s):void 0,a=!r,l=this.getTracksToBeUpdated({type:i,source:n,enabled:a});if(l.length!==0)if(a)(t=this.listener)==null||t.onChangeMultiTrackStateRequest({requestedBy:o,tracks:l,type:i,source:n,enabled:!0});else{let c=[];for(let u of l)c.push(u.setEnabled(!1));Promise.all(c).then(()=>{var u;(u=this.listener)==null||u.onChangeMultiTrackStateRequest({requestedBy:o,tracks:l,enabled:!1})})}}getTracksToBeUpdated({type:e,source:t,enabled:i}){let n=this.store.getLocalPeerTracks();return e&&(n=n.filter(r=>r.type===e)),t&&(n=n.filter(r=>r.source===t)),n.filter(r=>r.enabled!==i)}},tF=class{constructor(e,t){this.store=e,this.listener=t,this.TAG="[RoomUpdateManager]"}handleNotification(e,t){switch(e){case Ge.PEER_LIST:this.onRoomState(t.room);break;case Ge.RTMP_START:this.onRTMPStart(t);break;case Ge.RTMP_STOP:this.onRTMPStop(t);break;case Ge.RECORDING_START:this.onRecordingStart(t);break;case Ge.RECORDING_STOP:this.onRecordingStop(t);break;case Ge.ROOM_STATE:this.handlePreviewRoomState(t);break;default:this.onHLS(e,t);break}}handlePreviewRoomState(e){let{room:t}=e;this.onRoomState(t,e.peer_count)}onRoomState(e,t){var i,n,r;let{recording:s,streaming:o,session_id:a,started_at:l,name:c}=e,u=this.store.getRoom();if(!u){b.w(this.TAG,"on room state - room not present");return}u.peerCount=t,u.name=c,u.recording.server.running=!!(s!=null&&s.sfu.enabled),u.recording.browser.running=!!(s!=null&&s.browser.enabled),u.rtmp.running=!!((i=o==null?void 0:o.rtmp)!=null&&i.enabled),u.rtmp.startedAt=ti((n=o==null?void 0:o.rtmp)==null?void 0:n.started_at),u.recording.server.startedAt=ti(s==null?void 0:s.sfu.started_at),u.recording.browser.startedAt=ti(s==null?void 0:s.browser.started_at),u.recording.hls=this.getPeerListHLSRecording(s),u.hls=this.convertHls(o==null?void 0:o.hls),u.sessionId=a,u.startedAt=ti(l),(r=this.listener)==null||r.onRoomUpdate(Nr.RECORDING_STATE_UPDATED,u)}onRTMPStart(e){var t;this.setRTMPStatus(!((t=e.error)!=null&&t.code),e)}onRTMPStop(e){this.setRTMPStatus(!1,e)}onRecordingStart(e){var t;this.setRecordingStatus(!((t=e.error)!=null&&t.code),e)}onRecordingStop(e){this.setRecordingStatus(!1,e)}onHLS(e,t){var i,n;if(![Ge.HLS_START,Ge.HLS_STOP].includes(e))return;let r=this.store.getRoom();if(!r){b.w(this.TAG,"on hls - room not present");return}t.enabled=e===Ge.HLS_START&&!((i=t.error)!=null&&i.code),r.hls=this.convertHls(t),r.recording.hls=this.getHLSRecording(t),(n=this.listener)==null||n.onRoomUpdate(Nr.HLS_STREAMING_STATE_UPDATED,r)}convertHls(e){var t;let i={running:!!(e!=null&&e.enabled),variants:[],error:this.toSdkError(e==null?void 0:e.error)};return(t=e==null?void 0:e.variants)==null||t.forEach(n=>{i.variants.push({meetingURL:n.meeting_url,url:n.url,metadata:n.metadata,startedAt:ti(n.started_at)})}),i}getHLSRecording(e){var t,i,n;let r={running:!1};return e!=null&&e.hls_recording&&(r={running:!!(e!=null&&e.enabled),singleFilePerLayer:!!((t=e.hls_recording)!=null&&t.single_file_per_layer),hlsVod:!!((i=e.hls_recording)!=null&&i.hls_vod),startedAt:ti((n=e==null?void 0:e.variants)==null?void 0:n[0].started_at),error:this.toSdkError(e.error)}),r}getPeerListHLSRecording(e){var t,i;let n=e==null?void 0:e.hls;return{running:!!(n!=null&&n.enabled),startedAt:ti(n==null?void 0:n.started_at),singleFilePerLayer:!!((t=n==null?void 0:n.config)!=null&&t.single_file_per_layer),hlsVod:!!((i=n==null?void 0:n.config)!=null&&i.hls_vod)}}setRecordingStatus(e,t){var i;let n=this.store.getRoom();if(!n){b.w(this.TAG,`set recording status running=${e} - room not present`);return}let r;t.type==="sfu"?(n.recording.server={running:e,startedAt:e?ti(t.started_at):void 0,error:this.toSdkError(t.error)},r=Nr.SERVER_RECORDING_STATE_UPDATED):(n.recording.browser={running:e,startedAt:e?ti(t.started_at):void 0,error:this.toSdkError(t.error)},r=Nr.BROWSER_RECORDING_STATE_UPDATED),(i=this.listener)==null||i.onRoomUpdate(r,n)}setRTMPStatus(e,t){var i;let n=this.store.getRoom();if(!n){b.w(this.TAG,"on policy change - room not present");return}n.rtmp={running:e,startedAt:e?ti(t.started_at):void 0,error:this.toSdkError(t.error)},(i=this.listener)==null||i.onRoomUpdate(Nr.RTMP_STREAMING_STATE_UPDATED,n)}toSdkError(e){if(!(e!=null&&e.code))return;let t=e.message||"error in streaming/recording",i=new Te(e.code,"ServerErrors",Q.NONE,t,t);return b.e(this.TAG,"error in streaming/recording",i),i}},iF=class{constructor(e,t){this.store=e,this.listener=t}handleNotification(e,t){e===Ge.METADATA_CHANGE&&this.handleMetadataChange(t)}handleMetadataChange(e){var t;let i=e.values.map(n=>({key:n.key,value:n.data,updatedAt:ti(n.updated_at),updatedBy:n.updated_by?this.store.getPeerById(n.updated_by):void 0}));(t=this.listener)==null||t.onSessionStoreUpdate(i)}},nF=class{constructor(e,t,i){this.store=e,this.eventBus=t,this.listener=i,this.TAG="[TrackManager]",this.tracksToProcess=new Map,this.handleTrackAdd=n=>{b.d(this.TAG,"ONTRACKADD",`${n}`),this.store.addTrack(n),this.tracksToProcess.set(n.trackId,n),this.processPendingTracks()},this.handleTrackRemove=n=>{var r;b.d(this.TAG,"ONTRACKREMOVE",`${n}`);let s=this.store.getTrackState(n.trackId);if(!s)return;if(!this.store.hasTrack(n)){b.d(this.TAG,"Track not found in store");return}n.type===wt.AUDIO&&this.eventBus.audioTrackRemoved.publish(n),this.store.removeTrack(n);let o=this.store.getPeerById(s.peerId);!o||(this.removePeerTracks(o,n),(r=this.listener)==null||r.onTrackUpdate(Ye.TRACK_REMOVED,n,o))},this.handleTrackLayerUpdate=n=>{for(let r in n.tracks){let s=n.tracks[r],o=this.store.getTrackById(r);!o||!this.store.getPeerByTrackId(r)||o instanceof Vi&&this.setLayer(o,s)}},this.handleTrackUpdate=n=>{var r,s;let o=this.store.getPeerById(n.peer.peer_id);if(!o){b.d(this.TAG,"Track Update ignored - Peer not added to store");return}for(let a in n.tracks){let l=Object.assign({},(r=this.store.getTrackState(a))==null?void 0:r.trackInfo),c=n.tracks[a],u=this.store.getTrackById(a);if(this.store.setTrackState({peerId:n.peer.peer_id,trackInfo:Re(Re({},l),c)}),!u||this.tracksToProcess.has(a))this.processPendingTracks();else{u.setEnabled(!c.mute);let d=this.processTrackUpdate(u,l,c);d&&((s=this.listener)==null||s.onTrackUpdate(d,u,o))}}}}handleTrackMetadataAdd(e){b.d(this.TAG,"TRACK_METADATA_ADD",JSON.stringify(e,null,2));for(let t in e.tracks)this.store.setTrackState({peerId:e.peer.peer_id,trackInfo:e.tracks[t]});this.processPendingTracks()}processPendingTracks(){new Map(this.tracksToProcess).forEach(e=>{var t;let i=this.store.getTrackState(e.trackId);if(!i){b.d(this.TAG,"TrackState not added to store",`peerId - ${e.peerId}`,`trackId -${e.trackId}`);return}let n=this.store.getPeerById(i.peerId);if(!n){b.d(this.TAG,"Peer not added to store, peerId",i.peerId);return}e.source=i.trackInfo.source,e.peerId=n.peerId,e.logIdentifier=n.name,e.setEnabled(!i.trackInfo.mute),this.addAudioTrack(n,e),this.addVideoTrack(n,e),e.type===wt.AUDIO?this.eventBus.audioTrackAdded.publish({track:e,peer:n}):(t=this.listener)==null||t.onTrackUpdate(Ye.TRACK_ADDED,e,n),this.tracksToProcess.delete(e.trackId)})}setLayer(e,t){var i,n;let r=this.store.getPeerByTrackId(e.trackId);!r||(e.setLayerFromServer(t)?(i=this.listener)==null||i.onTrackUpdate(Ye.TRACK_DEGRADED,e,r):(n=this.listener)==null||n.onTrackUpdate(Ye.TRACK_RESTORED,e,r))}removePeerTracks(e,t){let i=e.auxiliaryTracks.indexOf(t);i>-1?(e.auxiliaryTracks.splice(i,1),b.d(this.TAG,"auxiliary track removed",`${t}`)):t.type===wt.AUDIO&&e.audioTrack===t?(e.audioTrack=void 0,b.d(this.TAG,"audio track removed",`${t}`)):t.type===wt.VIDEO&&e.videoTrack===t&&(e.videoTrack=void 0,b.d(this.TAG,"video track removed",`${t}`))}addAudioTrack(e,t){var i;t.type===wt.AUDIO&&(t.source==="regular"&&(!e.audioTrack||((i=e.audioTrack)==null?void 0:i.trackId)===t.trackId)?e.audioTrack=t:e.auxiliaryTracks.push(t),b.d(this.TAG,"audio track added",`${t}`))}addVideoTrack(e,t){var i;if(t.type!==wt.VIDEO)return;let n=t,r=this.store.getSimulcastDefinitionsForPeer(e,n.source);n.setSimulcastDefinitons(r),t.source==="regular"&&(!e.videoTrack||((i=e.videoTrack)==null?void 0:i.trackId)===t.trackId)?e.videoTrack=n:e.auxiliaryTracks.push(n),b.d(this.TAG,"video track added",`${t}`)}processTrackUpdate(e,t,i){let n;return t.mute!==i.mute?(n=i.mute?Ye.TRACK_MUTED:Ye.TRACK_UNMUTED,e.type===wt.AUDIO&&this.eventBus.audioTrackUpdate.publish({track:e,enabled:!i.mute})):t.description!==i.description&&(n=Ye.TRACK_DESCRIPTION_CHANGED),n}},rF=class{constructor(e,t,i,n,r){this.store=e,this.listener=i,this.audioListener=n,this.connectionQualityListener=r,this.TAG="[HMSNotificationManager]",this.hasConsistentRoomStateArrived=!1,this.ignoreNotification=s=>{if(s===Ge.PEER_LIST)this.hasConsistentRoomStateArrived=!0;else if(s===Ge.ROOM_STATE)return this.hasConsistentRoomStateArrived;return!1},this.handleTrackAdd=s=>{this.trackManager.handleTrackAdd(s)},this.handleTrackRemove=s=>{this.trackManager.handleTrackRemove(s)},this.updateLocalPeer=({name:s,metadata:o})=>{let a=this.store.getLocalPeer();this.peerManager.handlePeerInfoUpdate({peer:a,name:s,data:o})},this.trackManager=new nF(this.store,t,this.listener),this.peerManager=new ZB(this.store,this.trackManager,this.listener),this.peerListManager=new XB(this.store,this.peerManager,this.trackManager,this.listener),this.broadcastManager=new JB(this.store,this.listener),this.policyChangeManager=new QB(this.store,t),this.requestManager=new eF(this.store,this.listener),this.activeSpeakerManager=new zB(this.store,this.listener,this.audioListener),this.connectionQualityManager=new YB(this.connectionQualityListener),this.roomUpdateManager=new tF(this.store,this.listener),this.sessionMetadataManager=new iF(this.store,this.listener)}setListener(e){this.listener=e,this.trackManager.listener=e,this.peerManager.listener=e,this.peerListManager.listener=e,this.broadcastManager.listener=e,this.requestManager.listener=e,this.activeSpeakerManager.listener=e,this.roomUpdateManager.listener=e,this.sessionMetadataManager.listener=e}setAudioListener(e){this.audioListener=e,this.activeSpeakerManager.audioListener=e}setConnectionQualityListener(e){this.connectionQualityListener=e,this.connectionQualityManager.listener=e}handleNotification(e,t=!1){var i,n;let r=e.method,s=e.params;[Ge.ACTIVE_SPEAKERS,Ge.SFU_STATS,Ge.CONNECTION_QUALITY,void 0].includes(r)||b.d(this.TAG,`Received notification - ${r}`,{notification:s}),r===Ge.SFU_STATS&&((i=window.HMS)==null?void 0:i.ON_SFU_STATS)&&typeof((n=window.HMS)==null?void 0:n.ON_SFU_STATS)=="function"&&window.HMS.ON_SFU_STATS(e.params),!this.ignoreNotification(r)&&(this.roomUpdateManager.handleNotification(r,s),this.peerManager.handleNotification(r,s),this.requestManager.handleNotification(r,s),this.peerListManager.handleNotification(r,s,t),this.broadcastManager.handleNotification(r,s),this.sessionMetadataManager.handleNotification(r,s),this.handleIsolatedMethods(r,s))}handleIsolatedMethods(e,t){switch(e){case Ge.TRACK_METADATA_ADD:{this.trackManager.handleTrackMetadataAdd(t);break}case Ge.TRACK_UPDATE:{this.trackManager.handleTrackUpdate(t);break}case Ge.ON_SFU_TRACK_LAYER_UPDATE:{this.trackManager.handleTrackLayerUpdate(t);break}case Ge.ACTIVE_SPEAKERS:this.activeSpeakerManager.handleActiveSpeakers(t);break;case Ge.CONNECTION_QUALITY:this.connectionQualityManager.handleQualityUpdate(t);break;case Ge.POLICY_CHANGE:this.policyChangeManager.handlePolicyChange(t);break}}},Zy=class{constructor(e){this.type=e.type,this.source=e.source||"regular",this.description="",e instanceof vp?(this.mute=!e.enabled,this.track_id=e.publishedTrackId,this.stream_id=e.stream.id):(this.mute=e.mute,this.track_id=e.track_id,this.stream_id=e.stream_id)}},z0=class{constructor(e){this.TAG="[AudioContextManager]",this.audioContext=new AudioContext,this.source=this.audioContext.createMediaElementSource(e),this.source.connect(this.audioContext.destination)}resumeContext(){return _(this,null,function*(){this.audioContext.state==="suspended"&&(yield this.audioContext.resume(),b.d(this.TAG,"AudioContext is resumed"))})}getAudioTrack(){return this.destinationNode&&this.source.disconnect(this.destinationNode),this.destinationNode=this.audioContext.createMediaStreamDestination(),this.source.connect(this.destinationNode),this.destinationNode.stream.getAudioTracks()[0]}cleanup(){this.audioContext.state!=="closed"&&this.audioContext.close().catch(e=>{b.d(this.TAG,"AudioContext close error",e.message)})}},Ep=class extends Pa.exports.EventEmitter2{on(e,t){return super.on(e,t)}off(e,t){return super.off(e,t)}emit(e,t){return super.emit(e,t)}listeners(e){return super.listeners(e)}},sF=class extends Ep{constructor(){super(...arguments),this.audioElement=null,this.TAG="[PlaylistAudioManager]",this.seeked=!1}play(e){return _(this,null,function*(){return this.audioElement=this.getAudioElement(),new Promise((t,i)=>{this.audioElement=this.getAudioElement(),this.audioElement.src=e,this.seeked=!1,this.audioElement.onerror=()=>{let n=`Error loading ${e}`;b.e(this.TAG,n),this.stop(),i(n)},this.audioElement.oncanplaythrough=()=>_(this,null,function*(){try{if(!this.audioElement)return;if(this.audioContextManager.resumeContext(),this.track)this.seeked?this.seeked=!1:(yield this.audioElement.play(),t([this.track]));else{yield this.audioElement.play();let n=this.audioContextManager.getAudioTrack();this.track=n,t([n])}}catch(n){b.e(this.TAG,"Error playing audio",e,n.message),i(n)}}),this.audioElement.onseeked=()=>{this.seeked=!0}})})}getTracks(){return this.track?[this.track.id]:[]}getElement(){return this.audioElement}stop(){var e,t,i;(e=this.audioElement)==null||e.pause(),(t=this.audioElement)==null||t.removeAttribute("src"),this.audioElement=null,(i=this.audioContextManager)==null||i.cleanup(),this.track=void 0}getAudioElement(){if(this.audioElement)return this.audioElement;let e=document.createElement("audio");return e.crossOrigin="anonymous",e.addEventListener("timeupdate",t=>this.emit("progress",t)),e.addEventListener("ended",()=>{this.emit("ended",null)}),this.audioContextManager=new z0(e),e}},oF=class extends Ep{constructor(){super(...arguments),this.TAG="[PlaylistVideoManager]",this.videoElement=null,this.canvasContext=null,this.tracks=[],this.DEFAUL_FPS=24,this.seeked=!1,this.drawImage=()=>{var e,t,i;this.videoElement&&!this.videoElement.paused&&!this.videoElement.ended&&((i=this.canvasContext)==null||i.drawImage(this.videoElement,0,0,(e=this.canvas)==null?void 0:e.width,(t=this.canvas)==null?void 0:t.height),this.timer=setTimeout(()=>{this.drawImage()},1e3/this.DEFAUL_FPS))}}play(e){return this.videoElement=this.getVideoElement(),this.createCanvas(),new Promise((t,i)=>{this.videoElement=this.getVideoElement(),this.videoElement.src=e,this.seeked=!1,this.videoElement.onerror=()=>{let n=`Error loading ${e}`;b.e(this.TAG,n),this.stop(),i(n)},this.videoElement.oncanplaythrough=()=>_(this,null,function*(){var n,r,s;try{if(!this.videoElement)return;if(this.canvas.width=this.videoElement.videoWidth,this.canvas.height=this.videoElement.videoHeight,this.tracks.length===0){this.clearCanvasAndTracks();let o=this.canvas.captureStream();if(!o){b.e(this.TAG,"Browser does not support captureStream");return}this.videoElement.onplay=this.drawImage,yield this.audioContextManager.resumeContext(),yield this.videoElement.play();let a=this.audioContextManager.getAudioTrack();o.addTrack(a),o.getTracks().forEach(l=>{this.tracks.push(l)}),t(this.tracks)}else this.seeked?(this.seeked=!1,(s=this.canvasContext)==null||s.drawImage(this.videoElement,0,0,(n=this.canvas)==null?void 0:n.width,(r=this.canvas)==null?void 0:r.height)):(yield this.videoElement.play(),t(this.tracks))}catch(o){b.e(this.TAG,"Error playing video",e,o.message),i(o)}}),this.videoElement.onseeked=()=>{this.seeked=!0}})}getTracks(){return this.tracks.map(e=>e.id)}getElement(){return this.videoElement}stop(){var e,t,i;(e=this.videoElement)==null||e.pause(),(t=this.videoElement)==null||t.removeAttribute("src"),this.videoElement=null,(i=this.audioContextManager)==null||i.cleanup(),this.clearCanvasAndTracks()}clearCanvasAndTracks(){var e;this.tracks=[],(e=this.canvasContext)==null||e.clearRect(0,0,this.canvas.width,this.canvas.height),clearTimeout(this.timer)}getVideoElement(){if(this.videoElement)return this.videoElement;let e=document.createElement("video");return e.crossOrigin="anonymous",e.addEventListener("timeupdate",t=>this.emit("progress",t)),e.addEventListener("ended",()=>{this.emit("ended",null)}),this.audioContextManager=new z0(e),e}createCanvas(){this.canvas||(this.canvas=document.createElement("canvas"),this.canvasContext=this.canvas.getContext("2d"))}},ul={audio:{list:[],currentIndex:-1,isAutoplayOn:!0},video:{list:[],currentIndex:-1,isAutoplayOn:!0}},aF=class extends Ep{constructor(e,t){super(),this.sdk=e,this.eventBus=t,this.state={audio:Re({},ul.audio),video:Re({},ul.video)},this.TAG="[PlaylistManager]",this.handlePausePlaylist=i=>_(this,[i],function*({enabled:n,track:r}){var s;if(n)return;let o;r.source==="audioplaylist"&&(o=$e.audio),r.source==="videoplaylist"&&(o=$e.video),o&&((s=this.getElement(o))==null||s.pause())}),this.addTrack=(i,n)=>_(this,null,function*(){yield this.sdk.addTrack(i,n),b.d(this.TAG,"Playlist track added",Qo(i))}),this.removeTrack=i=>_(this,null,function*(){yield this.sdk.removeTrack(i,!0),b.d(this.TAG,"Playlist track removed",i)}),this.audioManager=new sF,this.videoManager=new oF,this.addListeners()}getList(e=$e.audio){return this.state[e].list}setList(e){if(!e||e.length===0){b.w(this.TAG,"Please pass in a list of HMSPlaylistItem's");return}e.forEach(t=>{this.state[t.type].list.includes(t)||this.state[t.type].list.push(t)})}clearList(e){return _(this,null,function*(){this.isPlaying(e)&&(yield this.stop(e)),this.state[e].list=[]})}removeItem(e,t){return _(this,null,function*(){let{list:i,currentIndex:n}=this.state[t],r=i.findIndex(s=>e===s.id);return r>-1?(n===r&&this.isPlaying(t)&&(yield this.stop(t)),i.splice(r,1),!0):!1})}seek(e,t=$e.audio){let{currentIndex:i}=this.state[t];if(i===-1)throw te.PlaylistErrors.NoEntryToPlay(Q.PLAYLIST,"No item is currently playing");let n=this.getElement(t);if(n){let r=Math.max(n.currentTime+e,0);n.currentTime=Math.min(r,n.duration)}}seekTo(e,t=$e.audio){let{currentIndex:i}=this.state[t];if(i===-1)throw te.PlaylistErrors.NoEntryToPlay(Q.PLAYLIST,"No item is currently playing");if(e<0)throw Error("value cannot be negative");let n=this.getElement(t);n&&(n.currentTime=Math.min(e,n.duration))}setVolume(e,t=$e.audio){if(e<0||e>100)throw Error("Please pass a valid number between 0-100");let i=this.getElement(t);i&&(i.volume=e*.01)}getVolume(e=$e.audio){let t=this.getElement(e);return t?t.volume*100:0}getCurrentTime(e=$e.audio){let t=this.getElement(e);return(t==null?void 0:t.currentTime)||0}getCurrentIndex(e=$e.audio){return this.state[e].currentIndex}getCurrentProgress(e=$e.audio){var t;let{list:i,currentIndex:n}=this.state[e],r=(t=i[n])==null?void 0:t.url,s=this.getElement(e);return!r||!s?0:Math.floor(100*(s.currentTime/s.duration))}getCurrentSelection(e=$e.audio){let{list:t,currentIndex:i}=this.state[e];if(i!==-1)return t[i]}isPlaying(e=$e.audio){let t=this.getElement(e);return!!t&&!t.paused}setIsAutoplayOn(e=$e.audio,t){this.state[e].isAutoplayOn=t}getPlaybackRate(e=$e.audio){let t=this.getElement(e);return t?t.playbackRate:1}setPlaybackRate(e=$e.audio,t){if(t<.25||t>2)throw Error("Please pass a value between 0.25 and 2.0");let i=this.getElement(e);i&&(i.playbackRate=t)}setEnabled(e,t){return _(this,arguments,function*(i,{id:n,type:r=$e.audio}){let s=this.state[r].list.findIndex(a=>a.id===n);if(!n||s===-1){b.w(this.TAG,"Pass a valid id");return}let o=this.state[r].list[s].url;i?yield this.play(o,r):yield this.pause(o,r),this.state[r].currentIndex=s,this.setDuration(r)})}playNext(){return _(this,arguments,function*(e=$e.audio){let{list:t,currentIndex:i}=this.state[e];if(i>=t.length-1)throw te.PlaylistErrors.NoEntryToPlay(Q.PLAYLIST,"Reached end of playlist");yield this.play(t[i+1].url,e),this.state[e].currentIndex=i+1,this.setDuration(e)})}playPrevious(){return _(this,arguments,function*(e=$e.audio){let{list:t,currentIndex:i}=this.state[e];if(i<=0)throw te.PlaylistErrors.NoEntryToPlay(Q.PLAYLIST,"Reached start of playlist");yield this.play(t[i-1].url,e),this.state[e].currentIndex=i-1,this.setDuration(e)})}stop(){return _(this,arguments,function*(e=$e.audio){var t;let i=e===$e.audio?this.audioManager:this.videoManager;(t=i.getElement())==null||t.pause(),yield this.removeTracks(e),i.stop(),this.state[e].currentIndex=-1})}cleanup(){this.state={audio:Re({},ul.audio),video:Re({},ul.video)},this.eventBus.localAudioEnabled.unsubscribe(this.handlePausePlaylist),this.eventBus.localVideoEnabled.unsubscribe(this.handlePausePlaylist),this.audioManager.stop(),this.videoManager.stop()}onProgress(e){this.videoManager.on("progress",()=>{try{e({type:$e.video,progress:this.getCurrentProgress($e.video)})}catch{b.e(this.TAG,"Error in onProgress callback")}}),this.audioManager.on("progress",()=>{try{e({type:$e.audio,progress:this.getCurrentProgress($e.audio)})}catch{b.e(this.TAG,"Error in onProgress callback")}})}onNewTrackStart(e){this.on("newTrackStart",e)}onPlaylistEnded(e){this.on("playlistEnded",e)}onCurrentTrackEnded(e){this.on("currentTrackEnded",e)}getElement(e=$e.audio){return e===$e.audio?this.audioManager.getElement():this.videoManager.getElement()}removeTracks(){return _(this,arguments,function*(e=$e.audio){let t=(e===$e.audio?this.audioManager:this.videoManager).getTracks();for(let i of t)yield this.removeTrack(i)})}play(e){return _(this,arguments,function*(t,i=$e.audio){let n=i===$e.audio?this.audioManager:this.videoManager,r=n.getElement();if(this.isItemCurrentlyPlaying(t,i)){b.w(this.TAG,`The ${i} is currently playing`);return}if(r!=null&&r.src.includes(t))yield r.play();else{r==null||r.pause();let s=yield n.play(t);for(let o of s)yield this.addTrack(o,i===$e.audio?"audioplaylist":"videoplaylist")}})}isItemCurrentlyPlaying(e,t){let i=this.getElement(t);return!!(i&&!i.paused&&i.src.includes(e))}setDuration(e=$e.audio){let t=this.getElement(e),{list:i,currentIndex:n}=this.state[e];i[n]&&(i[n].duration=(t==null?void 0:t.duration)||0),this.emit("newTrackStart",i[n])}pause(e){return _(this,arguments,function*(t,i=$e.audio){let n=this.getElement(i);n&&!n.paused&&n.src.includes(t)?(n.pause(),b.d(this.TAG,"paused url",t)):b.w(this.TAG,"The passed in url is not currently playing")})}addListeners(){this.audioManager.on("ended",()=>this.handleEnded($e.audio)),this.videoManager.on("ended",()=>this.handleEnded($e.video)),this.eventBus.localAudioEnabled.subscribe(this.handlePausePlaylist),this.eventBus.localVideoEnabled.subscribe(this.handlePausePlaylist)}handleEnded(){return _(this,arguments,function*(e=$e.audio){let{list:t,currentIndex:i,isAutoplayOn:n}=this.state[e];i===t.length-1?(yield this.stop(e),this.emit("playlistEnded",e)):n?this.playNext(e):yield this.pause(t[i].url,e),this.emit("currentTrackEnded",t[i])})}},lF=class{constructor(e){this.transport=e,this.observedKeys=new Set}get(e){return _(this,null,function*(){let{data:t,updated_at:i}=yield this.transport.getSessionMetadata(e);return{value:t,updatedAt:ti(i)}})}set(e,t){return _(this,null,function*(){let{data:i,updated_at:n}=yield this.transport.setSessionMetadata({key:e,data:t}),r=ti(n);return{value:i,updatedAt:r}})}observe(e){return _(this,null,function*(){let t=new Set(this.observedKeys);if(e.forEach(i=>this.observedKeys.add(i)),this.observedKeys.size!==t.size)try{yield this.transport.listenMetadataChange(Array.from(this.observedKeys))}catch(i){throw this.observedKeys=t,i}})}unobserve(e){return _(this,null,function*(){let t=new Set(this.observedKeys);if(this.observedKeys=new Set([...this.observedKeys].filter(i=>!e.includes(i))),this.observedKeys.size!==t.size)try{yield this.transport.listenMetadataChange(Array.from(this.observedKeys))}catch(i){throw this.observedKeys=t,i}})}},cF=class{constructor(e,t,i="",n="",r="https://prod-init.100ms.live/init",s=!1){this.authToken=e,this.peerId=t,this.peerName=i,this.data=n,this.endpoint=r,this.autoSubscribeVideo=s}},Ze;(function(e){e[e.ConnectFailed=0]="ConnectFailed",e[e.SignalDisconnect=1]="SignalDisconnect",e[e.JoinWSMessageFailed=2]="JoinWSMessageFailed",e[e.PublishIceConnectionFailed=3]="PublishIceConnectionFailed",e[e.SubscribeIceConnectionFailed=4]="SubscribeIceConnectionFailed"})(Ze||(Ze={}));var uF={[0]:[],[1]:[],[2]:[1],[3]:[1],[4]:[1]},qe;(function(e){e.Disconnected="Disconnected",e.Connecting="Connecting",e.Joined="Joined",e.Preview="Preview",e.Failed="Failed",e.Reconnecting="Reconnecting",e.Leaving="Leaving"})(qe||(qe={}));var dF=class{constructor(e){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i,e(t,i)})}},hF=class{constructor(e,t){this.onStateChange=e,this.sendEvent=t,this.TAG="[RetryScheduler]",this.inProgress=new Map,this.retryTaskIds=[]}schedule(e){return _(this,arguments,function*({category:t,error:i,task:n,originalState:r,maxFailedRetries:s=Dh,changeState:o=!0}){yield this.scheduleTask({category:t,error:i,changeState:o,task:n,originalState:r,maxFailedRetries:s})})}reset(){this.retryTaskIds.forEach(e=>clearTimeout(e)),this.retryTaskIds=[],this.inProgress.clear()}isTaskInProgress(e){return!!this.inProgress.get(e)}scheduleTask(e){return _(this,arguments,function*({category:t,error:i,changeState:n,task:r,originalState:s,maxFailedRetries:o=Dh,failedRetryCount:a=0}){if(b.d(this.TAG,"schedule: ",{category:Ze[t],error:i}),a===0){let h=this.inProgress.get(t);if(h){b.d(this.TAG,`schedule: Already a task for ${Ze[t]} scheduled, waiting for its completion`),yield h.promise;return}let m=new dF((v,y)=>{});this.inProgress.set(t,m),this.sendEvent(i,t)}let l=!1,c=uF[t];for(let h in c){let m=c[parseInt(h)];try{let v=this.inProgress.get(m);v&&(b.d(this.TAG,`schedule: Suspending retry task of ${Ze[t]}, waiting for ${Ze[m]} to recover`),yield v.promise,b.d(this.TAG,`schedule: Resuming retry task ${Ze[t]} as it's dependency ${Ze[m]} is recovered`))}catch{b.d(this.TAG,`schedule: Stopping retry task of ${Ze[t]} as it's dependency ${Ze[m]} failed to recover`),l=!0;break}}if(a>=o||l){if(i.description+=`. [${Ze[t]}] Could not recover after ${a} tries`,l&&(i.description+=` Could not recover all of it's required dependencies - [${c.map(h=>Ze[h]).toString()}]`),i.isTerminal=!0,this.inProgress.delete(t),this.sendEvent(i,t),this.reset(),n)this.onStateChange(qe.Failed,i);else throw i;return}n&&this.onStateChange(qe.Reconnecting,i);let u=this.getDelayForRetryCount(t,a);b.i(this.TAG,`schedule: [${Ze[t]}] [failedRetryCount=${a}] Scheduling retry task in ${u}ms`);let d;try{d=yield this.setTimeoutPromise(r,u)}catch(h){d=!1,b.w(this.TAG,`[${Ze[t]}] Un-caught exception ${h.name} in retry-task, initiating retry`,h)}if(d){let h=this.inProgress.get(t);this.inProgress.delete(t),h==null||h.resolve(a),n&&this.inProgress.size===0&&this.onStateChange(s),b.i(this.TAG,`schedule: [${Ze[t]}] [failedRetryCount=${a}] Recovered \u267B\uFE0F`)}else yield this.scheduleTask({category:t,error:i,changeState:n,task:r,originalState:s,maxFailedRetries:o,failedRetryCount:a+1})})}getBaseDelayForTask(e,t){return e===Ze.JoinWSMessageFailed?2:Math.pow(2,t)}getDelayForRetryCount(e,t){let i=this.getBaseDelayForTask(e,t),n=e===Ze.JoinWSMessageFailed?Math.random()*2:Math.random();return Math.round(Math.min(i+n,RB)*1e3)}setTimeoutPromise(e,t){return _(this,null,function*(){return new Promise((i,n)=>{let r=window.setTimeout(()=>_(this,null,function*(){try{let s=yield e();s&&this.retryTaskIds.splice(this.retryTaskIds.indexOf(r),1),i(s)}catch(s){n(s)}}),t);this.retryTaskIds.push(r)})})}},fF=class extends bp{constructor(){super(q0),this.localStorage=new jc("hms-analytics"),this.localStorage.clear(),this.initLocalStorageQueue()}enqueue(e){super.enqueue(e),this.localStorage.set(this.storage)}dequeue(){let e=super.dequeue();return this.localStorage.set(this.storage),e}initLocalStorageQueue(){var e;(e=this.localStorage.get())==null||e.forEach(t=>{let i=new mt(t);super.enqueue(i)})}},pF=class{constructor(){this.TAG="[AnalyticsTransport]"}sendEvent(e){try{this.sendSingleEvent(e),this.flushFailedEvents()}catch(t){b.w(this.TAG,"sendEvent failed",t)}}flushFailedEvents(e){var t;try{for(b.d(this.TAG,"Flushing failed events",this.failedEvents);this.failedEvents.size()>0;){let i=this.failedEvents.dequeue();i&&(((t=i.metadata)==null?void 0:t.peer.peer_id)===e||!i.metadata.peer.peer_id?this.sendSingleEvent(i):va.sendEvent(i))}}catch(i){b.w(this.TAG,"flushFailedEvents failed",i)}}sendSingleEvent(e){try{this.transportProvider.sendEvent(e),b.d(this.TAG,"Sent event",e.name,e)}catch(t){throw b.w(this.TAG,`${this.transportProvider.TAG}.sendEvent failed, adding to local storage events`,{event:e,error:t}),this.failedEvents.enqueue(e),t}}},mF=class extends pF{constructor(e){super(),this.transportProvider=e,this.failedEvents=new fF}},Wt;(function(e){e[e.Publish=0]="Publish",e[e.Subscribe=1]="Subscribe"})(Wt||(Wt={}));var J0="[VALIDATIONS]";function Yr(e){return e!=null}var Qy=()=>{if(!Yr(RTCPeerConnection)){let e=te.GenericErrors.MissingRTCPeerConnection();throw b.e(J0,e),e}},eb=()=>{if(!Yr(navigator.mediaDevices)){let e=te.GenericErrors.MissingMediaDevices();throw b.e(J0,e),e}};function gF(e,t){var i;let n=M0(e.sdp);if(!((i=n.origin)!=null&&i.username.startsWith("mozilla")))return e;let r=t?Array.from(t.values()):[];return n.media.forEach(s=>{var o,a,l;let c=(o=s.msid)==null?void 0:o.split(" ")[0],u=(a=r.find(d=>d.type===s.type&&d.stream_id===c))==null?void 0:a.track_id;u&&(s.msid=(l=s.msid)==null?void 0:l.replace(/\s(.+)/,` ${u}`))}),{type:e.type,sdp:FU(n)}}function vF(e,t){var i;if(!(e!=null&&e.sdp)||!t)return;let n=M0(e.sdp).media.find(r=>Yr(r.mid)&&parseInt(r.mid)===parseInt(t));return(i=n==null?void 0:n.msid)==null?void 0:i.split(" ")[1]}function yF(e){return e.sdp.includes("usedtx=1")?e:{type:e.type,sdp:e.sdp.replace("useinbandfec=1","useinbandfec=1;usedtx=1")}}var vn="[HMSConnection]",Y0=class{constructor(e,t){this.candidates=new Array,this.role=e,this.signal=t}get iceConnectionState(){return this.nativeConnection.iceConnectionState}get connectionState(){return this.nativeConnection.connectionState}get action(){return this.role===Wt.Publish?Q.PUBLISH:Q.SUBSCRIBE}addTransceiver(e,t){return this.nativeConnection.addTransceiver(e,t)}createOffer(e,t){return _(this,null,function*(){try{let i=yield this.nativeConnection.createOffer(t);return b.d(vn,`[role=${this.role}] createOffer offer=${JSON.stringify(i,null,1)}`),yF(gF(i,e))}catch(i){throw te.WebrtcErrors.CreateOfferFailed(this.action,i.message)}})}createAnswer(e=void 0){return _(this,null,function*(){try{let t=yield this.nativeConnection.createAnswer(e);return b.d(vn,`[role=${this.role}] createAnswer answer=${JSON.stringify(t,null,1)}`),t}catch(t){throw te.WebrtcErrors.CreateAnswerFailed(this.action,t.message)}})}setLocalDescription(e){return _(this,null,function*(){try{b.d(vn,`[role=${this.role}] setLocalDescription description=${JSON.stringify(e,null,1)}`),yield this.nativeConnection.setLocalDescription(e)}catch(t){throw te.WebrtcErrors.SetLocalDescriptionFailed(this.action,t.message)}})}setRemoteDescription(e){return _(this,null,function*(){try{b.d(vn,`[role=${this.role}] setRemoteDescription description=${JSON.stringify(e,null,1)}`),yield this.nativeConnection.setRemoteDescription(e)}catch(t){throw te.WebrtcErrors.SetRemoteDescriptionFailed(this.action,t.message)}})}addIceCandidate(e){return _(this,null,function*(){if(this.nativeConnection.signalingState==="closed"){b.d(vn,`[role=${this.role}] addIceCandidate signalling state closed`);return}b.d(vn,`[role=${this.role}] addIceCandidate candidate=${JSON.stringify(e,null,1)}`),yield this.nativeConnection.addIceCandidate(e)})}get remoteDescription(){return this.nativeConnection.remoteDescription}getSenders(){return this.nativeConnection.getSenders()}logSelectedIceCandidatePairs(){try{(this.role===Wt.Publish?this.getSenders():this.getReceivers()).forEach(e=>{var t;let i=(t=e.track)==null?void 0:t.kind;if(e.transport){let n=e.transport.iceTransport,r=()=>{typeof n.getSelectedCandidatePair=="function"&&(this.selectedCandidatePair=n.getSelectedCandidatePair(),b.d(vn,`${Wt[this.role]} connection`,`selected ${i||"unknown"} candidate pair`,JSON.stringify(this.selectedCandidatePair,null,2)))};typeof n.onselectedcandidatepairchange=="function"&&(n.onselectedcandidatepairchange=r),r()}})}catch(e){b.w(vn,`Error in logging selected ice candidate pair for ${Wt[this.role]} connection`,e)}}removeTrack(e){this.nativeConnection.signalingState!=="closed"&&this.nativeConnection.removeTrack(e)}setMaxBitrateAndFramerate(e){return _(this,null,function*(){let t=e.settings.maxBitrate,i=e instanceof Li&&e.settings.maxFramerate,n=this.getSenders().find(r=>{var s;return((s=r==null?void 0:r.track)==null?void 0:s.id)===e.getTrackIDBeingSent()});if(n){let r=n.getParameters();r.encodings.length>0&&(t&&(r.encodings[0].maxBitrate=t*1e3),i&&(r.encodings[0].maxFramerate=i)),yield n.setParameters(r)}else b.w(vn,`no sender found to setMaxBitrate for track - ${e.trackId}, sentTrackId - ${e.getTrackIDBeingSent()}`)})}getStats(){return _(this,null,function*(){return yield this.nativeConnection.getStats()})}close(){return _(this,null,function*(){this.nativeConnection.close()})}getReceivers(){return this.nativeConnection.getReceivers()}},bF=class extends Y0{constructor(e,t,i){super(Wt.Publish,e),this.TAG="[HMSPublishConnection]",this.observer=i,this.nativeConnection=new RTCPeerConnection(t),this.nativeConnection.createDataChannel(W0,{protocol:"SCTP"}),this.nativeConnection.onicecandidate=({candidate:n})=>{n&&e.trickle(this.role,n)},this.nativeConnection.oniceconnectionstatechange=()=>{this.observer.onIceConnectionChange(this.nativeConnection.iceConnectionState)},this.nativeConnection.onconnectionstatechange=()=>{this.observer.onConnectionStateChange(this.nativeConnection.connectionState)}}initAfterJoin(){this.nativeConnection.onnegotiationneeded=()=>_(this,null,function*(){b.d(this.TAG,"onnegotiationneeded"),yield this.observer.onRenegotiationNeeded()})}},EF=class{constructor(e,t,i=""){this.TAG="[HMSDataChannel]",this.nativeChannel=e,this.observer=t,this.metadata=i,e.onmessage=n=>{this.observer.onMessage(n.data)}}get id(){return this.nativeChannel.id}get label(){return this.nativeChannel.label}get readyState(){return this.nativeChannel.readyState}send(e){b.d(this.TAG,`[${this.metadata}] Sending [size=${e.length}] message=${e}`),this.nativeChannel.send(e)}close(){this.nativeChannel.close()}},TF=class extends Y0{constructor(e,t,i){super(Wt.Subscribe,e),this.TAG="[HMSSubscribeConnection]",this.remoteStreams=new Map,this.MAX_RETRIES=3,this.pendingMessageQueue=[],this.eventEmitter=new NU({maxListeners:60}),this.handlePendingApiMessages=()=>{this.eventEmitter.emit("open",!0),this.pendingMessageQueue.length>0&&(b.d(this.TAG,"Found pending message queue, sending messages"),this.pendingMessageQueue.forEach(n=>this.sendOverApiDataChannel(n)),this.pendingMessageQueue.length=0)},this.sendMessage=(n,r)=>_(this,null,function*(){var s;((s=this.apiChannel)==null?void 0:s.readyState)!=="open"&&(yield this.eventEmitter.waitFor("open"));let o;for(let a=0;a<this.MAX_RETRIES;a++){this.apiChannel.send(n),o=yield this.waitForResponse(r);let l=o.error;if(l){if(l.code===404){b.d(this.TAG,`Track not found ${r}`,{request:n,try:a+1,error:l});break}if(b.e(this.TAG,`Failed sending ${r}`,{request:n,try:a+1,error:l}),!(l.code/100==5||l.code===429))throw Error(`code=${l.code}, message=${l.message}`);let c=(2+Math.random()*2)*1e3;yield ji(c)}else break}return o}),this.waitForResponse=n=>_(this,null,function*(){let r=yield this.eventEmitter.waitFor("message",function(o){return o.includes(n)}),s=JSON.parse(r[0]);return b.d(this.TAG,`response for ${n} -`,JSON.stringify(s,null,2)),s}),this.observer=i,this.nativeConnection=new RTCPeerConnection(t),this.initNativeConnectionCallbacks()}initNativeConnectionCallbacks(){this.nativeConnection.oniceconnectionstatechange=()=>{this.observer.onIceConnectionChange(this.nativeConnection.iceConnectionState)},this.nativeConnection.onconnectionstatechange=()=>{this.observer.onConnectionStateChange(this.nativeConnection.connectionState)},this.nativeConnection.ondatachannel=e=>{e.channel.label===W0&&(this.apiChannel=new EF(e.channel,{onMessage:t=>{this.eventEmitter.emit("message",t),this.observer.onApiChannelMessage(t)}},`role=${this.role}`),e.channel.onopen=this.handlePendingApiMessages)},this.nativeConnection.onicecandidate=e=>{e.candidate!==null&&this.signal.trickle(this.role,e.candidate)},this.nativeConnection.ontrack=e=>{var t;let i=e.streams[0],n=i.id;if(!this.remoteStreams.has(n)){let l=new V0(i,this);this.remoteStreams.set(n,l)}i.addEventListener("removetrack",l=>{if(l.track.id!==e.track.id)return;let c=r.tracks.findIndex(u=>{var d;return u.nativeTrack.id===l.track.id&&e.transceiver.mid===((d=u.transceiver)==null?void 0:d.mid)});if(c>=0){let u=r.tracks[c];this.observer.onTrackRemove(u),r.tracks.splice(c,1),r.tracks.length===0&&this.remoteStreams.delete(n)}});let r=this.remoteStreams.get(n),s=e.track.kind==="audio"?Ia:Vi,o=new s(r,e.track);o.transceiver=e.transceiver;let a=vF(this.remoteDescription,(t=e.transceiver)==null?void 0:t.mid);a&&o.setSdpTrackId(a),r.tracks.push(o),this.observer.onTrackAdd(o)}}sendOverApiDataChannel(e){this.apiChannel&&this.apiChannel.readyState==="open"?this.apiChannel.send(e):(b.w(this.TAG,`API Data channel not ${this.apiChannel?"open":"present"}, queueing`,e),this.pendingMessageQueue.push(e))}sendOverApiDataChannelWithResponse(e,t){return _(this,null,function*(){let i=vr(),n=JSON.stringify(Re({id:t||i,jsonrpc:"2.0"},e));return this.sendMessage(n,i)})}close(){var e=t=>super[t];return _(this,null,function*(){var t;yield e("close").call(this),(t=this.apiChannel)==null||t.close()})}},_F=(e,t,i)=>_(void 0,null,function*(){var n;let r,s={};if((n=e.transceiver)!=null&&n.sender.track){try{r=yield e.transceiver.sender.getStats();let o={},a={},l={};r==null||r.forEach(c=>{switch(c.type){case"outbound-rtp":a[c.id]=c;break;case"remote-inbound-rtp":l[c.ssrc]=c;break;case"codec":o[c.id]=c.mimeType;break;default:break}}),Object.keys(Re({},a)).forEach(c=>{var u;let d=(u=a[c])==null?void 0:u.codecId,h=d?o[d]:void 0,m;h&&(m=h.substring(h.indexOf("/")+1));let v=a[c],y=l[v.ssrc];s[c]=Ot(Re({},v),{bitrate:Tp("bytesSent",v,i==null?void 0:i[c]),packetsLost:y==null?void 0:y.packetsLost,jitter:y==null?void 0:y.jitter,roundTripTime:y==null?void 0:y.roundTripTime,totalRoundTripTime:y==null?void 0:y.totalRoundTripTime,peerName:t,peerID:e.peerId,codec:m})})}catch(o){b.w("[HMSWebrtcStats]","Error in getting local track stats",e,o,o.name)}return s}}),wF=(e,t,i)=>_(void 0,null,function*(){var n;let r;try{r=yield(n=e.transceiver)==null?void 0:n.receiver.getStats()}catch(l){b.w("[HMSWebrtcStats]","Error in getting remote track stats",e,l)}let s=SF(r),o=Tp("bytesReceived",s,i),a=Lh("packetsLost",s,i);return s!=null&&s.remote&&Object.assign(s.remote,{packetsLostRate:Lh("packetsLost",s.remote,i==null?void 0:i.remote)}),s&&Object.assign(s,{bitrate:o,packetsLostRate:a,peerId:e.peerId,peerName:t,codec:s.codec})}),SF=e=>{let t,i,n={};e==null||e.forEach(o=>{switch(o.type){case"inbound-rtp":t=o;break;case"outbound-rtp":t=o;break;case"remote-inbound-rtp":i=o;break;case"codec":n[o.id]=o.mimeType;break}});let r=t!=null&&t.codecId?n[t.codecId]:void 0,s;return r&&(s=r.substring(r.indexOf("/")+1)),t&&Object.assign(t,{remote:i,codec:s})},tb=(e,t,i)=>{let n=kF(t),r=Tp(e==="publish"?"bytesSent":"bytesReceived",n,i&&i[e]);return n&&Object.assign(n,{bitrate:r})},kF=e=>{let t;return e.forEach(i=>{i.type==="transport"&&(t=e.get(i.selectedCandidatePairId))}),t||e.forEach(i=>{i.type==="candidate-pair"&&i.selected&&(t=i)}),t},CF=e=>{let t={packetsLost:0,jitter:0};return e==null||e.forEach(i=>{i.packetsLost&&(t.packetsLost+=i.packetsLost),i.jitter>t.jitter&&(t.jitter=i.jitter)}),t},AF=(e,t)=>Array.from(new Set(e.concat(t))),Tp=(e,t,i)=>Lh(e,t,i)*8,Lh=(e,t,i)=>{let n=t&&t[e],r=i?i[e]:null;return[t,i,Yr(n),Yr(r)].every(s=>!!s)?X0(n,r,t==null?void 0:t.timestamp,i==null?void 0:i.timestamp)*1e3:0},X0=(e,t,i,n)=>Yr(e)&&Yr(t)&&i&&n?(e-t)/(i-n):0,RF=class{constructor(e,t){this.getStats=e,this.store=t,this.TAG="[HMSWebrtcStats]",this.peerStats={},this.remoteTrackStats={},this.localTrackStats={};var i;this.localPeerID=(i=this.store.getLocalPeer())==null?void 0:i.peerId}getLocalPeerStats(){return this.peerStats[this.localPeerID]}getRemoteTrackStats(e){return this.remoteTrackStats[e]}getLocalTrackStats(){return this.localTrackStats}updateStats(){return _(this,null,function*(){yield this.updateLocalPeerStats(),yield this.updateLocalTrackStats(),yield this.updateRemoteTrackStats()})}updateLocalPeerStats(){return _(this,null,function*(){var e,t,i,n,r,s;let o=this.getLocalPeerStats(),a;try{a=yield(t=(e=this.getStats).publish)==null?void 0:t.call(e)}catch(y){b.w(this.TAG,"Error in getting publish stats",y)}let l=a&&tb("publish",a,o),c;try{c=yield(n=(i=this.getStats).subscribe)==null?void 0:n.call(i)}catch(y){b.w(this.TAG,"Error in getting subscribe stats",y)}let u=c&&tb("subscribe",c,o),{packetsLost:d,jitter:h}=CF(c),m=X0(d,(r=o==null?void 0:o.subscribe)==null?void 0:r.packetsLost,u==null?void 0:u.timestamp,(s=o==null?void 0:o.subscribe)==null?void 0:s.timestamp),v=u&&Object.assign(u,{packetsLostRate:m,jitter:h,packetsLost:d});this.peerStats[this.localPeerID]={publish:l,subscribe:v}})}updateRemoteTrackStats(){return _(this,null,function*(){var e;let t=Array.from(this.store.getTracksMap().values()).filter(n=>n instanceof Vi||n instanceof Ia),i=t.map(n=>n.trackId);Object.keys(this.remoteTrackStats).forEach(n=>{i.includes(n)||delete this.remoteTrackStats[n]});for(let n of t){let r=n.peerId&&((e=this.store.getPeerById(n.peerId))==null?void 0:e.name),s=this.getRemoteTrackStats(n.trackId),o=yield wF(n,r,s);o&&(this.remoteTrackStats[n.trackId]=o)}})}updateLocalTrackStats(){return _(this,null,function*(){var e;let t=this.store.getLocalPeerTracks().reduce((n,r)=>(n[r.getTrackIDBeingSent()]=r,n),{}),i=AF(Object.keys(this.localTrackStats),Object.keys(t));for(let n of i){let r=t[n];if(r){let s=(e=this.store.getLocalPeer())==null?void 0:e.name,o=yield _F(r,s,this.localTrackStats[n]);o&&(this.localTrackStats[n]=o)}else delete this.localTrackStats[n]}})}},PF=class{constructor(e,t,i,n){this.store=e,this.eventBus=t,this.publishConnection=i,this.subscribeConnection=n,this.TAG="[HMSWebrtcInternals]",this.interval=NB,this.isMonitored=!1,this.handleStatsUpdate=()=>_(this,null,function*(){var r;yield(r=this.hmsStats)==null?void 0:r.updateStats(),this.eventBus.statsUpdate.publish(this.hmsStats)})}getPublishPeerConnection(){return this.publishConnection}getSubscribePeerConnection(){return this.subscribeConnection}getCurrentStats(){return this.hmsStats}onStatsChange(e){return this.eventBus.statsUpdate.subscribe(e),()=>{this.eventBus.statsUpdate.unsubscribe(e)}}setPeerConnections({publish:e,subscribe:t}){var i,n;this.publishConnection=e,this.subscribeConnection=t,this.hmsStats=new RF({publish:(i=this.publishConnection)==null?void 0:i.getStats.bind(this.publishConnection),subscribe:(n=this.subscribeConnection)==null?void 0:n.getStats.bind(this.subscribeConnection)},this.store)}start(){return _(this,null,function*(){if(this.isMonitored){b.d(this.TAG,"Already started");return}this.stop(),this.isMonitored=!0,b.d(this.TAG,"Starting Webrtc Stats Monitor"),this.startLoop().then(()=>b.d(this.TAG,"Stopping Webrtc Stats Monitor")).catch(e=>b.e(this.TAG,e.message))})}stop(){this.isMonitored=!1}startLoop(){return _(this,null,function*(){for(;this.isMonitored;)yield this.handleStatsUpdate(),yield ji(this.interval)})}cleanUp(){this.stop(),this.eventBus.statsUpdate.removeAllListeners()}},Dl="[InitService]",IF=class{static handleError(e,t){switch(e.status){case 404:throw te.APIErrors.EndpointUnreachable(Q.INIT,t.message||e.statusText);case 200:break;default:throw te.APIErrors.ServerErrors(t.code||e.status,Q.INIT,t.message||(e==null?void 0:e.statusText))}}static fetchInitConfig(e){return _(this,arguments,function*({token:t,peerId:i,userAgent:n,initEndpoint:r="https://prod-init.100ms.live",region:s=""}){b.d(Dl,`fetchInitConfig: initEndpoint=${r} token=${t} peerId=${i} region=${s} `);let o=OF(r,i,n,s);try{let a=yield fetch(o,{headers:{Authorization:`Bearer ${t}`}});try{let l=yield a.clone().json();return this.handleError(a,l),b.d(Dl,`config is ${JSON.stringify(l,null,2)}`),DF(l)}catch(l){let c=yield a.text();throw b.e(Dl,"json error",l.message,c),te.APIErrors.ServerErrors(a.status,Q.INIT,c)}}catch(a){let l=a;throw["Failed to fetch","NetworkError","ECONNRESET"].some(c=>l.message.includes(c))?te.APIErrors.EndpointUnreachable(Q.INIT,l.message):l}})}};function OF(e,t,i,n){try{let r=new URL("/init",e);return n&&n.trim().length>0&&r.searchParams.set("region",n.trim()),r.searchParams.set("peer_id",t),r.searchParams.set("user_agent_v2",i),r.toString()}catch(r){let s=r;throw b.e(Dl,s.name,s.message),s}}function DF(e){var t;return Ot(Re({},e),{rtcConfiguration:Ot(Re({},e.rtcConfiguration),{iceServers:(t=e.rtcConfiguration)==null?void 0:t.ice_servers})})}var Jn;(function(e){e.FLAG_SERVER_SUB_DEGRADATION="subscribeDegradation",e.FLAG_SERVER_SIMULCAST="simulcast",e.FLAG_NON_WEBRTC_DISABLE_OFFER="nonWebRTCDisableOffer"})(Jn||(Jn={}));var NF=class{constructor(e){this.TAG="[SIGNAL]: ",this.pongResponseTimes=new bp(OB),this.isJoinCompleted=!1,this.pendingTrickle=[],this.socket=null,this.callbacks=new Map,this._isConnected=!1,this.id=0,this.onCloseHandler=()=>{},this.offlineListener=()=>{b.d(this.TAG,"Window network offline"),this.setIsConnected(!1,"Window network offline")},this.onlineListener=()=>{b.d(this.TAG,"Window network online"),this.observer.onNetworkOnline()},this.observer=e,window.addEventListener("offline",this.offlineListener),window.addEventListener("online",this.onlineListener),this.onMessageHandler=this.onMessageHandler.bind(this)}get isConnected(){return this._isConnected}setIsConnected(e,t=""){b.d(this.TAG,`isConnected set id: ${this.id}, oldValue: ${this._isConnected}, newValue: ${e}`),this._isConnected!==e&&(this._isConnected&&!e?(this._isConnected=e,this.rejectPendingCalls(t),this.observer.onOffline(t)):!this._isConnected&&e&&(this._isConnected=e,this.observer.onOnline()))}getPongResponseTimes(){return this.pongResponseTimes.toList()}internalCall(e,t){return _(this,null,function*(){var i;let n=vr(),r={method:e,params:t,id:n,jsonrpc:"2.0"};(i=this.socket)==null||i.send(JSON.stringify(r));try{return yield new Promise((s,o)=>{this.callbacks.set(n,{resolve:s,reject:o,metadata:{method:e}})})}catch(s){if(s instanceof Te)throw s;let o=s;throw te.WebsocketMethodErrors.ServerErrors(Number(o.code),Vy(e),o.message)}})}notify(e,t){var i,n;let r={method:e,params:t};((i=this.socket)==null?void 0:i.readyState)===WebSocket.OPEN&&((n=this.socket)==null||n.send(JSON.stringify(r)))}open(e){return new Promise((t,i)=>{let n=!1;this.socket&&(this.socket.close(),this.socket.removeEventListener("close",this.onCloseHandler),this.socket.removeEventListener("message",this.onMessageHandler)),this.socket=new WebSocket(e);let r=o=>{b.e(this.TAG,"Error from websocket",o),n=!0,i(te.WebSocketConnectionErrors.FailedToConnect(Q.JOIN,"Error opening websocket connection"))};this.onCloseHandler=o=>{b.e(`Websocket closed code=${o.code}`),n?this.setIsConnected(!1,`code: ${o.code}${o.code!==1e3?", unexpected websocket close":""}`):(n=!0,i(te.WebSocketConnectionErrors.AbnormalClose(Q.JOIN,`Error opening websocket connection - websocket closed unexpectedly with code=${o.code}`)))},this.socket.addEventListener("error",r);let s=()=>{var o,a;n=!0,t(),this.setIsConnected(!0),this.id++,(o=this.socket)==null||o.removeEventListener("open",s),(a=this.socket)==null||a.removeEventListener("error",r),this.pingPongLoop(this.id)};this.socket.addEventListener("open",s),this.socket.addEventListener("close",this.onCloseHandler),this.socket.addEventListener("message",this.onMessageHandler)})}close(){return _(this,null,function*(){window.removeEventListener("offline",this.offlineListener),window.removeEventListener("online",this.onlineListener),this.socket?(this.socket.close(1e3,"Normal Close"),this.setIsConnected(!1,"code: 1000, normal websocket close"),this.socket.removeEventListener("close",this.onCloseHandler),this.socket.removeEventListener("message",this.onMessageHandler)):this.setIsConnected(!1,"websocket not connected yet")})}join(e,t,i,n,r,s){return _(this,null,function*(){if(!this.isConnected)throw te.WebSocketConnectionErrors.WebSocketConnectionLost(Q.JOIN,"Failed to send join over WS connection");let o={name:e,disableVidAutoSub:i,data:t,offer:s,server_sub_degrade:n,simulcast:r},a=yield this.internalCall(Ue.JOIN,o);return this.isJoinCompleted=!0,this.pendingTrickle.forEach(({target:l,candidate:c})=>this.trickle(l,c)),this.pendingTrickle.length=0,b.d(this.TAG,`join: response=${JSON.stringify(a,null,1)}`),a})}trickle(e,t){this.isJoinCompleted?this.notify(Ue.TRICKLE,{target:e,candidate:t}):this.pendingTrickle.push({target:e,candidate:t})}offer(e,t){return _(this,null,function*(){return yield this.call(Ue.OFFER,{desc:e,tracks:Object.fromEntries(t)})})}answer(e){this.notify(Ue.ANSWER,{desc:e})}trackUpdate(e){this.notify(Ue.TRACK_UPDATE,{version:"1.0",tracks:Object.fromEntries(e)})}broadcast(e){return _(this,null,function*(){return yield this.call(Ue.BROADCAST,Re({version:"1.0"},e.toSignalParams()))})}leave(){this.notify(Ue.LEAVE,{version:"1.0"})}endRoom(e,t){return _(this,null,function*(){yield this.call(Ue.END_ROOM,{lock:e,reason:t})})}sendEvent(e){if(!this.isConnected)throw Error(`${this.TAG} not connected. Could not send event ${e}`);this.notify(Ue.ANALYTICS,e.toSignalParams())}ping(e){let t=Date.now(),i=new Promise(r=>{setTimeout(()=>{r(Date.now()-t)},e+1)}),n=this.internalCall(Ue.PING,{timestamp:t}).then(()=>Date.now()-t).catch(()=>Date.now()-t);return Promise.race([i,n])}requestRoleChange(e){return _(this,null,function*(){yield this.call(Ue.ROLE_CHANGE_REQUEST,e)})}requestBulkRoleChange(e){return _(this,null,function*(){yield this.call(Ue.ROLE_CHANGE_REQUEST,e)})}acceptRoleChangeRequest(e){return _(this,null,function*(){yield this.call(Ue.ROLE_CHANGE,e)})}requestTrackStateChange(e){return _(this,null,function*(){yield this.call(Ue.TRACK_UPDATE_REQUEST,e)})}requestMultiTrackStateChange(e){return _(this,null,function*(){yield this.call(Ue.CHANGE_TRACK_MUTE_STATE_REQUEST,e)})}removePeer(e){return _(this,null,function*(){yield this.call(Ue.PEER_LEAVE_REQUEST,e)})}startRTMPOrRecording(e){return _(this,null,function*(){yield this.call(Ue.START_RTMP_OR_RECORDING_REQUEST,Re({version:"1.0"},e))})}stopRTMPAndRecording(){return _(this,null,function*(){yield this.call(Ue.STOP_RTMP_AND_RECORDING_REQUEST,{version:"1.0"})})}startHLSStreaming(e){return _(this,null,function*(){yield this.call(Ue.START_HLS_STREAMING,Re({version:"1.0"},e))})}stopHLSStreaming(e){return _(this,null,function*(){yield this.call(Ue.STOP_HLS_STREAMING,Re({version:"1.0"},e))})}sendHLSTimedMetadata(e){return _(this,null,function*(){yield this.call(Ue.HLS_TIMED_METADATA,Re({version:"1.0"},e))})}updatePeer(e){return _(this,null,function*(){yield this.call(Ue.UPDATE_PEER_METADATA,Re({version:"1.0"},e))})}setSessionMetadata(e){if(!this.isConnected)throw te.WebSocketConnectionErrors.WebSocketConnectionLost(Q.RECONNECT_SIGNAL,"Failed to set session store value due to network disconnection");return this.call(Ue.SET_METADATA,Re({version:"1.1"},e))}listenMetadataChange(e){if(!this.isConnected)throw te.WebSocketConnectionErrors.WebSocketConnectionLost(Q.RECONNECT_SIGNAL,"Failed to observe session store key due to network disconnection");return this.call(Ue.LISTEN_METADATA_CHANGE,{version:"1.1",keys:e})}getSessionMetadata(e){if(!this.isConnected)throw te.WebSocketConnectionErrors.WebSocketConnectionLost(Q.RECONNECT_SIGNAL,"Failed to set session store value due to network disconnection");return this.call(Ue.GET_METADATA,{key:e,version:"1.1"})}onMessageHandler(e){let t=e.data,i=JSON.parse(t);if(i.id)this.handleResponseWithId(i);else if(i.method)this.handleResponseWithMethod(i);else throw Error(`WebSocket message has no 'method' or 'id' field, message=${i}`)}handleResponseWithId(e){let t=e,i=t.id;if(this.callbacks.has(i)){let n=this.callbacks.get(i);this.callbacks.delete(i),t.result?n.resolve(t.result):n.reject(t.error)}else this.observer.onNotification(t)}handleResponseWithMethod(e){switch(e.method){case Ue.OFFER:this.observer.onOffer(e.params);break;case Ue.TRICKLE:this.observer.onTrickle(e.params);break;case Ue.SERVER_ERROR:this.observer.onServerError(te.WebsocketMethodErrors.ServerErrors(Number(e.params.code),Q.NONE,e.params.message));break;case Ue.SERVER_WARNING:b.w(this.TAG,e.params);break;default:this.observer.onNotification(e);break}}rejectPendingCalls(e=""){this.callbacks.forEach((t,i)=>{var n,r,s,o;((n=t.metadata)==null?void 0:n.method)!==Ue.PING&&(b.e(this.TAG,`rejecting pending callback ${(r=t.metadata)==null?void 0:r.method}, id=${i}`),t.reject(te.WebSocketConnectionErrors.WebSocketConnectionLost((s=t.metadata)!=null&&s.method?Vy((o=t.metadata)==null?void 0:o.method):Q.RECONNECT_SIGNAL,e)),this.callbacks.delete(i))})}pingPongLoop(e){return _(this,null,function*(){var t,i;let n=((t=window.HMS)==null?void 0:t.PING_TIMEOUT)||PB;if(this.isConnected){let r=yield this.ping(n);this.pongResponseTimes.enqueue(r),r>n?(b.d(this.TAG,`Pong timeout ${e}, pageHidden=${zU()}`),this.id===e&&this.setIsConnected(!1,"ping pong failure")):setTimeout(()=>this.pingPongLoop(e),((i=window.HMS)==null?void 0:i.PING_INTERVAL)||IB)}})}call(e,t){return _(this,null,function*(){let i=3,n=te.WebsocketMethodErrors.ServerErrors(500,e,`Default ${e} error`),r;for(r=1;r<=i;r++)try{return b.d(this.TAG,`Try number ${r} sending ${e}`,t),yield this.internalCall(e,t)}catch(s){if(n=s,b.e(this.TAG,`Failed sending ${e} try: ${r}`,{method:e,params:t,error:n}),!(parseInt(`${n.code/100}`)===5||n.code===429))break;let o=(2+Math.random()*2)*1e3;yield ji(o)}throw b.e(`Sending ${e} over WS failed after ${Math.min(r,i)} retries`,{method:e,params:t,error:n}),n})}},LF=()=>{if(!ki||typeof navigator.connection>"u")return;let e=navigator.connection;return{downlink:e.downlink,downlinkMax:e.downlinkMax,effectiveType:e.effectiveType,rtt:e.rtt,saveData:e.saveData,type:e.type}},De="[HMSTransport]:",xF=class{constructor(e,t,i,n,r,s){this.observer=e,this.deviceManager=t,this.store=i,this.eventBus=n,this.analyticsEventsService=r,this.analyticsTimer=s,this.state=qe.Disconnected,this.trackStates=new Map,this.publishConnection=null,this.subscribeConnection=null,this.maxSubscribeBitrate=0,this.joinRetryCount=0,this.callbacks=new Map,this.signalObserver={onOffer:c=>_(this,null,function*(){try{if(!this.subscribeConnection)return;yield this.subscribeConnection.setRemoteDescription(c),b.d(De,`[SUBSCRIBE] Adding ${this.subscribeConnection.candidates.length} ice-candidates`,this.subscribeConnection.candidates);for(let d of this.subscribeConnection.candidates)yield this.subscribeConnection.addIceCandidate(d);this.subscribeConnection.candidates.length=0;let u=yield this.subscribeConnection.createAnswer();yield this.subscribeConnection.setLocalDescription(u),this.signal.answer(u),b.d(De,"[role=SUBSCRIBE] onOffer renegotiation DONE \u2705")}catch(u){b.d(De,"[role=SUBSCRIBE] onOffer renegotiation FAILED \u274C",u),this.state=qe.Failed;let d;u instanceof Te?d=u:d=te.GenericErrors.Unknown(Q.PUBLISH,u.message),this.observer.onFailure(d),this.eventBus.analytics.publish(it.subscribeFail(d))}}),onTrickle:c=>_(this,null,function*(){let u=c.target===Wt.Publish?this.publishConnection:this.subscribeConnection;u!=null&&u.remoteDescription?yield u.addIceCandidate(c.candidate):u==null||u.candidates.push(c.candidate)}),onNotification:c=>this.observer.onNotification(c),onServerError:c=>_(this,null,function*(){yield this.observer.onStateChange(qe.Failed,c)}),onFailure:c=>{this.joinParameters&&this.retryScheduler.schedule({category:Ze.SignalDisconnect,error:c,task:this.retrySignalDisconnectTask,originalState:this.state})},onOffline:c=>_(this,null,function*(){b.d(De,"socket offline",qe[this.state]);try{this.state!==qe.Leaving&&this.joinParameters&&this.retryScheduler.schedule({category:Ze.SignalDisconnect,error:te.WebSocketConnectionErrors.WebSocketConnectionLost(Q.RECONNECT_SIGNAL,c),task:this.retrySignalDisconnectTask,originalState:this.state})}catch(u){console.error(u)}}),onOnline:()=>{var c;b.d(De,"socket online",qe[this.state]),this.analyticsSignalTransport.flushFailedEvents((c=this.store.getLocalPeer())==null?void 0:c.peerId)},onNetworkOnline:()=>{this.analyticsEventsService.flushFailedClientEvents()}},this.signal=new NF(this.signalObserver),this.analyticsSignalTransport=new mF(this.signal),this.publishConnectionObserver={onRenegotiationNeeded:()=>_(this,null,function*(){yield this.performPublishRenegotiation()}),onIceConnectionChange:c=>_(this,null,function*(){(c==="disconnected"?b.w.bind(b):b.d.bind(b))(De,`Publish ice connection state change: ${c}`)}),onConnectionStateChange:c=>_(this,null,function*(){var u,d,h,m,v;(c==="disconnected"?b.w.bind(b):b.d.bind(b))(De,`Publish connection state change: ${c}`),c==="connected"&&((u=this.publishConnection)==null||u.logSelectedIceCandidatePairs()),c==="disconnected"&&setTimeout(()=>{var y,T,S,R,O;((y=this.publishConnection)==null?void 0:y.connectionState)==="disconnected"&&this.handleIceConnectionFailure(Wt.Publish,te.WebrtcErrors.ICEDisconnected(Q.PUBLISH,`local candidate - ${(S=(T=this.publishConnection)==null?void 0:T.selectedCandidatePair)==null?void 0:S.local.candidate}; remote candidate - ${(O=(R=this.publishConnection)==null?void 0:R.selectedCandidatePair)==null?void 0:O.remote.candidate}`))},Yy),c==="failed"&&(yield this.handleIceConnectionFailure(Wt.Publish,te.WebrtcErrors.ICEFailure(Q.PUBLISH,`local candidate - ${(h=(d=this.publishConnection)==null?void 0:d.selectedCandidatePair)==null?void 0:h.local.candidate}; remote candidate - ${(v=(m=this.publishConnection)==null?void 0:m.selectedCandidatePair)==null?void 0:v.remote.candidate}`)))})},this.subscribeConnectionObserver={onApiChannelMessage:c=>{this.observer.onNotification(JSON.parse(c))},onTrackAdd:c=>{b.d(De,"[Subscribe] onTrackAdd",`${c}`),this.observer.onTrackAdd(c)},onTrackRemove:c=>{b.d(De,"[Subscribe] onTrackRemove",`${c}`),this.observer.onTrackRemove(c)},onIceConnectionChange:c=>_(this,null,function*(){if((c==="disconnected"?b.w.bind(b):b.d.bind(b))(De,`Subscribe ice connection state change: ${c}`),c==="connected"){let u=this.callbacks.get(Uo);this.callbacks.delete(Uo),u&&u.promise.resolve(!0)}}),onConnectionStateChange:c=>_(this,null,function*(){var u,d,h,m;(c==="disconnected"?b.w.bind(b):b.d.bind(b))(De,`Subscribe connection state change: ${c}`),c==="failed"&&(yield this.handleIceConnectionFailure(Wt.Subscribe,te.WebrtcErrors.ICEFailure(Q.SUBSCRIBE,`local candidate - ${(d=(u=this.subscribeConnection)==null?void 0:u.selectedCandidatePair)==null?void 0:d.local.candidate}; remote candidate - ${(m=(h=this.subscribeConnection)==null?void 0:h.selectedCandidatePair)==null?void 0:m.remote.candidate}`))),c==="disconnected"&&setTimeout(()=>{var v,y,T,S,R;((v=this.subscribeConnection)==null?void 0:v.connectionState)==="disconnected"&&this.handleIceConnectionFailure(Wt.Subscribe,te.WebrtcErrors.ICEDisconnected(Q.SUBSCRIBE,`local candidate - ${(T=(y=this.subscribeConnection)==null?void 0:y.selectedCandidatePair)==null?void 0:T.local.candidate}; remote candidate - ${(R=(S=this.subscribeConnection)==null?void 0:S.selectedCandidatePair)==null?void 0:R.remote.candidate}`))},Yy),c==="connected"&&this.handleSubscribeConnectionConnected()})},this.handleLocalRoleUpdate=c=>_(this,[c],function*({oldRole:u,newRole:d}){!(!this.doesRoleNeedWebRTC(u)&&this.doesRoleNeedWebRTC(d))||(b.d(De,"Local peer role updated to webrtc role, creating PeerConnections and performing inital publish negotiation \u23F3"),this.createPeerConnections(),yield this.negotiateOnFirstPublish())}),this.retryPublishIceFailedTask=()=>_(this,null,function*(){if(this.publishConnection){let c=new Promise((u,d)=>{this.callbacks.set($o,{promise:{resolve:u,reject:d},action:Q.RESTART_ICE,extra:{}})});yield this.performPublishRenegotiation({iceRestart:this.publishConnection.connectionState!=="connected"}),yield c}return!0}),this.retrySubscribeIceFailedTask=()=>_(this,null,function*(){if(this.subscribeConnection&&this.subscribeConnection.connectionState!=="connected"){let c=new Promise((d,h)=>{this.callbacks.set(Uo,{promise:{resolve:d,reject:h},action:Q.RESTART_ICE,extra:{}})}),u=new Promise(d=>{setTimeout(d,DB,!1)});return Promise.race([c,u])}return!0}),this.retrySignalDisconnectTask=()=>_(this,null,function*(){var c;b.d(De,"retrySignalDisconnectTask",{signalConnected:this.signal.isConnected}),this.signal.isConnected||(yield this.internalConnect(this.joinParameters.authToken,this.joinParameters.endpoint,this.joinParameters.peerId));let u=(c=this.store.getRoom())!=null&&c.joinedAt?this.signal.isConnected&&(yield this.retryPublishIceFailedTask()):this.signal.isConnected;return this.signal.trackUpdate(this.trackStates),u});var o,a;this.webrtcInternals=new PF(this.store,this.eventBus,(o=this.publishConnection)==null?void 0:o.nativeConnection,(a=this.subscribeConnection)==null?void 0:a.nativeConnection);let l=(c,u)=>_(this,null,function*(){c!==this.state&&(this.state=c,yield this.observer.onStateChange(this.state,u))});this.retryScheduler=new hF(l,this.sendErrorAnalyticsEvent.bind(this)),this.eventBus.statsUpdate.subscribe(c=>{var u,d;let h=((d=(u=c.getLocalPeerStats())==null?void 0:u.subscribe)==null?void 0:d.bitrate)||0;this.maxSubscribeBitrate=Math.max(this.maxSubscribeBitrate,h)}),this.eventBus.localAudioEnabled.subscribe(({track:c})=>this.trackUpdate(c)),this.eventBus.localVideoEnabled.subscribe(({track:c})=>this.trackUpdate(c))}getWebrtcInternals(){return this.webrtcInternals}isFlagEnabled(e){var t;let i=(t=this.initConfig)==null?void 0:t.config;return((i==null?void 0:i.enabledFlags)||[]).includes(e)}preview(e,t,i,n,r=!1){return _(this,null,function*(){let s=yield this.connect(e,t,i,n,r);return this.state=qe.Preview,this.observer.onStateChange(this.state),s})}join(e,t,i,n,r=!1){return _(this,null,function*(){b.d(De,"join: started \u23F0");try{(!this.signal.isConnected||!this.initConfig)&&(yield this.connect(e,n,t,i,r)),this.validateNotDisconnected("connect"),this.initConfig&&(yield this.waitForLocalRoleAvailability(),yield this.createConnectionsAndNegotiateJoin(i,r),yield this.initRtcStatsMonitor(),b.d(De,"\u2705 join: Negotiated over PUBLISH connection"))}catch(s){b.e(De,`join: failed \u274C [token=${e}]`,s),this.state=qe.Failed;let o=s;throw o.isTerminal=o.isTerminal||o.code===500,yield this.observer.onStateChange(this.state,o),o}b.i(De,"\u2705 join: successful"),this.state=qe.Joined,this.observer.onStateChange(this.state)})}connect(e,t,i,n,r=!1){return _(this,null,function*(){this.setTransportStateForConnect(),this.joinParameters=new cF(e,i,n.name,n.metaData,t,r);try{return yield this.internalConnect(e,t,i)}catch(s){if(s instanceof Te&&([Ce.WebSocketConnectionErrors.WEBSOCKET_CONNECTION_LOST,Ce.WebSocketConnectionErrors.FAILED_TO_CONNECT,Ce.WebSocketConnectionErrors.ABNORMAL_CLOSE,Ce.APIErrors.ENDPOINT_UNREACHABLE].includes(s.code)||s.code.toString().startsWith("5")||s.code.toString().startsWith("429"))){let o=()=>_(this,null,function*(){return yield this.internalConnect(e,t,i),Boolean(this.initConfig&&this.initConfig.endpoint)});yield this.retryScheduler.schedule({category:Ze.ConnectFailed,error:s,task:o,originalState:this.state,maxFailedRetries:Dh,changeState:!1})}else throw s}})}leave(e){return _(this,null,function*(){var t,i,n;this.retryScheduler.reset(),this.joinParameters=void 0,b.d(De,"leaving in transport");try{if(this.state=qe.Leaving,(t=this.webrtcInternals)==null||t.cleanUp(),yield(i=this.publishConnection)==null?void 0:i.close(),yield(n=this.subscribeConnection)==null?void 0:n.close(),e)try{this.signal.leave(),b.d(De,"signal leave done")}catch(r){b.w(De,"failed to send leave on websocket to server",r)}this.analyticsEventsService.flushFailedClientEvents(),this.analyticsEventsService.reset(),yield this.signal.close()}catch(r){this.eventBus.analytics.publish(it.disconnect(r)),b.e(De,"leave: FAILED \u274C",r)}finally{this.state=qe.Disconnected,this.observer.onStateChange(this.state)}})}publish(e){return _(this,null,function*(){for(let t of e)try{yield this.publishTrack(t)}catch(i){this.eventBus.analytics.publish(it.publish({devices:this.deviceManager.getDevices(),error:i}))}})}unpublish(e){return _(this,null,function*(){for(let t of e)yield this.unpublishTrack(t)})}sendMessage(e){return _(this,null,function*(){return yield this.signal.broadcast(e)})}trackUpdate(e){let t=Array.from(this.trackStates.values()).find(i=>e.type===i.type&&e.source===i.source);if(t){let i=new Zy(Ot(Re({},t),{mute:!e.enabled}));this.trackStates.set(t.track_id,i),b.d(De,"Track Update",this.trackStates,e),this.signal.trackUpdate(new Map([[t.track_id,i]]))}}changeRole(e,t,i=!1){return _(this,null,function*(){yield this.signal.requestRoleChange({requested_for:e.peerId,role:t,force:i})})}changeRoleOfPeer(e,t,i){return _(this,null,function*(){yield this.signal.requestRoleChange({requested_for:e.peerId,role:t,force:i})})}changeRoleOfPeersWithRoles(e,t){return _(this,null,function*(){yield this.signal.requestBulkRoleChange({roles:e.map(i=>i.name),role:t,force:!0})})}acceptRoleChange(e){return _(this,null,function*(){var t;yield this.signal.acceptRoleChangeRequest({requested_by:(t=e.requestedBy)==null?void 0:t.peerId,role:e.role.name,token:e.token})})}endRoom(e,t){return _(this,null,function*(){yield this.signal.endRoom(e,t)})}removePeer(e,t){return _(this,null,function*(){yield this.signal.removePeer({requested_for:e,reason:t})})}startRTMPOrRecording(e){return _(this,null,function*(){var t;let i={meeting_url:e.meetingURL,record:e.record};(t=e.rtmpURLs)!=null&&t.length&&(i.rtmp_urls=e.rtmpURLs),e.resolution&&(i.resolution=e.resolution),yield this.signal.startRTMPOrRecording(i)})}stopRTMPOrRecording(){return _(this,null,function*(){yield this.signal.stopRTMPAndRecording()})}startHLSStreaming(e){return _(this,null,function*(){let t={};e&&e.variants&&e.variants.length>0&&(t.variants=e.variants.map(i=>{let n={meeting_url:i.meetingURL};return i.metadata&&(n.metadata=i.metadata),n})),e!=null&&e.recording&&(t.hls_recording={single_file_per_layer:e.recording.singleFilePerLayer,hls_vod:e.recording.hlsVod}),yield this.signal.startHLSStreaming(t)})}stopHLSStreaming(e){return _(this,null,function*(){var t;if(e){let i={variants:(t=e==null?void 0:e.variants)==null?void 0:t.map(n=>{let r={meeting_url:n.meetingURL};return n.metadata&&(r.metadata=n.metadata),r})};yield this.signal.stopHLSStreaming(i)}yield this.signal.stopHLSStreaming()})}sendHLSTimedMetadata(e){return _(this,null,function*(){if(e.length>0){let t={metadata_objs:e};yield this.signal.sendHLSTimedMetadata(t)}})}changeName(e){return _(this,null,function*(){let t=this.store.getLocalPeer();t&&t.name!==e&&(yield this.signal.updatePeer({name:e}))})}changeMetadata(e){return _(this,null,function*(){yield this.signal.updatePeer({data:e})})}getSessionMetadata(e){return this.signal.getSessionMetadata(e)}setSessionMetadata(e){return this.signal.setSessionMetadata(e)}listenMetadataChange(e){return this.signal.listenMetadataChange(e)}changeTrackState(e){return _(this,null,function*(){yield this.signal.requestTrackStateChange(e)})}changeMultiTrackState(e){return _(this,null,function*(){yield this.signal.requestMultiTrackStateChange(e)})}publishTrack(e){return _(this,null,function*(){e.publishedTrackId=e.getTrackIDBeingSent(),b.d(De,`\u23F3 publishTrack: trackId=${e.trackId}, toPublishTrackId=${e.publishedTrackId}`,`${e}`),this.trackStates.set(e.publishedTrackId,new Zy(e));let t=new Promise((r,s)=>{this.callbacks.set($o,{promise:{resolve:r,reject:s},action:Q.PUBLISH,extra:{}})}),i=e.stream;i.setConnection(this.publishConnection);let n=this.store.getSimulcastLayers(e.source);i.addTransceiver(e,n),b.time(`publish-${e.trackId}-${e.type}`),yield t,b.timeEnd(`publish-${e.trackId}-${e.type}`),this.store.addTrack(e),yield i.setMaxBitrateAndFramerate(e).then(()=>{b.d(De,`Setting maxBitrate=${e.settings.maxBitrate} kpbs${e instanceof Li?` and maxFramerate=${e.settings.maxFramerate}`:""} for ${e.source} ${e.type} ${e.trackId}`)}).catch(r=>b.w(De,"Failed setting maxBitrate and maxFramerate",r)),e.isPublished=!0,b.d(De,`\u2705 publishTrack: trackId=${e.trackId}`,`${e}`,this.callbacks)})}unpublishTrack(e){return _(this,null,function*(){if(b.d(De,`\u23F3 unpublishTrack: trackId=${e.trackId}`,`${e}`),e.publishedTrackId&&this.trackStates.has(e.publishedTrackId))this.trackStates.delete(e.publishedTrackId);else{let i=Array.from(this.trackStates.values()).find(n=>e.type===n.type&&e.source===n.source);i&&this.trackStates.delete(i.track_id)}let t=new Promise((i,n)=>{this.callbacks.set($o,{promise:{resolve:i,reject:n},action:Q.UNPUBLISH,extra:{}})});e.stream.removeSender(e),yield t,yield e.cleanup(),this.store.removeTrack(e),b.d(De,`\u2705 unpublishTrack: trackId=${e.trackId}`,this.callbacks)})}waitForLocalRoleAvailability(){if(!this.store.hasRoleDetailsArrived())return new Promise(e=>{this.eventBus.policyChange.subscribeOnce(()=>e())})}createConnectionsAndNegotiateJoin(e,t=!1){return _(this,null,function*(){let i=this.doesLocalPeerNeedWebRTC();i&&this.createPeerConnections(),this.analyticsTimer.start(Le.JOIN_RESPONSE),yield this.negotiateJoinWithRetry({name:e.name,data:e.metaData,autoSubscribeVideo:t,isWebRTC:i}),this.analyticsTimer.end(Le.JOIN_RESPONSE)})}createPeerConnections(){this.initConfig&&(this.publishConnection||(this.publishConnection=new bF(this.signal,this.initConfig.rtcConfiguration,this.publishConnectionObserver)),this.subscribeConnection||(this.subscribeConnection=new TF(this.signal,this.initConfig.rtcConfiguration,this.subscribeConnectionObserver)))}negotiateJoinWithRetry(e){return _(this,arguments,function*({name:t,data:i,autoSubscribeVideo:n,isWebRTC:r=!0}){try{yield this.negotiateJoin({name:t,data:i,autoSubscribeVideo:n,isWebRTC:r})}catch(s){b.e(De,"Join negotiation failed \u274C",s);let o=s instanceof Te?s:te.WebsocketMethodErrors.ServerErrors(500,Q.JOIN,`Websocket join error - ${s.message}`);if(parseInt(`${o.code/100}`)===5||[Ce.WebSocketConnectionErrors.WEBSOCKET_CONNECTION_LOST,429].includes(o.code)){this.joinRetryCount=0,o.isTerminal=!1;let a=()=>_(this,null,function*(){return this.joinRetryCount++,yield this.negotiateJoin({name:t,data:i,autoSubscribeVideo:n,isWebRTC:r})});yield this.retryScheduler.schedule({category:Ze.JoinWSMessageFailed,error:o,task:a,originalState:qe.Joined,maxFailedRetries:3,changeState:!1})}else throw s}})}negotiateJoin(e){return _(this,arguments,function*({name:t,data:i,autoSubscribeVideo:n,isWebRTC:r=!0}){return r?yield this.negotiateJoinWebRTC({name:t,data:i,autoSubscribeVideo:n}):yield this.negotiateJoinNonWebRTC({name:t,data:i,autoSubscribeVideo:n})})}negotiateJoinWebRTC(e){return _(this,arguments,function*({name:t,data:i,autoSubscribeVideo:n}){if(b.d(De,"\u23F3 join: Negotiating over PUBLISH connection"),!this.publishConnection)return b.e(De,"Publish peer connection not found, cannot negotiate"),!1;let r=yield this.publishConnection.createOffer();yield this.publishConnection.setLocalDescription(r);let s=this.isFlagEnabled(Jn.FLAG_SERVER_SUB_DEGRADATION),o=this.isFlagEnabled(Jn.FLAG_SERVER_SIMULCAST),a=yield this.signal.join(t,i,!n,s,o,r);yield this.publishConnection.setRemoteDescription(a);for(let l of this.publishConnection.candidates)yield this.publishConnection.addIceCandidate(l);return this.publishConnection.initAfterJoin(),!!a})}negotiateJoinNonWebRTC(e){return _(this,arguments,function*({name:t,data:i,autoSubscribeVideo:n}){b.d(De,"\u23F3 join: Negotiating Non-WebRTC");let r=this.isFlagEnabled(Jn.FLAG_SERVER_SUB_DEGRADATION),s=this.isFlagEnabled(Jn.FLAG_SERVER_SIMULCAST);return!!(yield this.signal.join(t,i,!n,r,s))})}negotiateOnFirstPublish(){return _(this,null,function*(){if(b.d(De,"\u23F3 Negotiating offer over PUBLISH connection"),!this.publishConnection)return b.e(De,"Publish peer connection not found, cannot negotiate"),!1;let e=yield this.publishConnection.createOffer(this.trackStates);yield this.publishConnection.setLocalDescription(e);let t=yield this.signal.offer(e,this.trackStates);yield this.publishConnection.setRemoteDescription(t);for(let i of this.publishConnection.candidates)yield this.publishConnection.addIceCandidate(i);return this.publishConnection.initAfterJoin(),!!t})}performPublishRenegotiation(e){return _(this,null,function*(){b.d(De,"\u23F3 [role=PUBLISH] onRenegotiationNeeded START",this.trackStates);let t=this.callbacks.get($o);if(t){if(!this.publishConnection){b.e(De,"Publish peer connection not found, cannot renegotiate");return}try{let i=yield this.publishConnection.createOffer(this.trackStates,e);yield this.publishConnection.setLocalDescription(i),b.time("renegotiation-offer-exchange");let n=yield this.signal.offer(i,this.trackStates);this.callbacks.delete($o),b.timeEnd("renegotiation-offer-exchange"),yield this.publishConnection.setRemoteDescription(n),t.promise.resolve(!0),b.d(De,"[role=PUBLISH] onRenegotiationNeeded DONE \u2705")}catch(i){let n;i instanceof Te?n=i:n=te.GenericErrors.Unknown(Q.PUBLISH,i.message),t.promise.reject(n),b.d(De,"[role=PUBLISH] onRenegotiationNeeded FAILED \u274C")}}})}handleIceConnectionFailure(e,t){return _(this,null,function*(){this.retryScheduler.isTaskInProgress(Wt.Publish?Ze.PublishIceConnectionFailed:Ze.SubscribeIceConnectionFailed)||(e===Wt.Publish?this.retryScheduler.schedule({category:Ze.PublishIceConnectionFailed,error:t,task:this.retryPublishIceFailedTask,originalState:qe.Joined}):this.retryScheduler.schedule({category:Ze.SubscribeIceConnectionFailed,error:t,task:this.retrySubscribeIceFailedTask,originalState:qe.Joined,maxFailedRetries:1}))})}internalConnect(e,t,i){return _(this,null,function*(){b.d(De,"connect: started \u23F0");let n=new Date;try{return this.analyticsTimer.start(Le.INIT),this.initConfig=yield IF.fetchInitConfig({token:e,peerId:i,userAgent:this.store.getUserAgent(),initEndpoint:t}),this.analyticsTimer.end(Le.INIT),va.setWebsocketEndpoint(this.initConfig.endpoint),this.validateNotDisconnected("post init"),yield this.openSignal(e,i),this.store.setSimulcastEnabled(this.isFlagEnabled(Jn.FLAG_SERVER_SIMULCAST)),b.d(De,"Adding Analytics Transport: JsonRpcSignal"),this.analyticsEventsService.setTransport(this.analyticsSignalTransport),this.analyticsEventsService.flush(),this.initConfig}catch(r){throw this.state!==qe.Reconnecting&&this.eventBus.analytics.publish(it.connect(r,this.getAdditionalAnalyticsProperties(),n,new Date,t)),b.e(De,"\u274C internal connect: failed",r),r}})}validateNotDisconnected(e){if(this.state===qe.Disconnected)throw b.w(De,"aborting join as transport state is disconnected"),te.GenericErrors.ValidationFailed(`leave called before join could complete - stage=${e}`)}openSignal(e,t){return _(this,null,function*(){if(!this.initConfig)throw te.APIErrors.InitConfigNotAvailable(Q.INIT,"Init Config not found");b.d(De,"\u23F3 internal connect: connecting to ws endpoint",this.initConfig.endpoint);let i=new URL(this.initConfig.endpoint);i.searchParams.set("peer",t),i.searchParams.set("token",e),i.searchParams.set("user_agent_v2",this.store.getUserAgent()),this.endpoint=i.toString(),this.analyticsTimer.start(Le.WEBSOCKET_CONNECT),yield this.signal.open(this.endpoint),this.analyticsTimer.end(Le.WEBSOCKET_CONNECT),this.analyticsTimer.start(Le.ON_POLICY_CHANGE),this.analyticsTimer.start(Le.ROOM_STATE),b.d(De,"\u2705 internal connect: connected to ws endpoint")})}initRtcStatsMonitor(){return _(this,null,function*(){var e,t,i;(i=this.webrtcInternals)==null||i.setPeerConnections({publish:(e=this.publishConnection)==null?void 0:e.nativeConnection,subscribe:(t=this.subscribeConnection)==null?void 0:t.nativeConnection})})}doesRoleNeedWebRTC(e){var t,i;if(!this.isFlagEnabled(Jn.FLAG_NON_WEBRTC_DISABLE_OFFER))return!0;let n=Boolean(e.publishParams.allowed&&((t=e.publishParams.allowed)==null?void 0:t.length)>0),r=Boolean(e.subscribeParams.subscribeToRoles&&((i=e.subscribeParams.subscribeToRoles)==null?void 0:i.length)>0);return n||r}doesLocalPeerNeedWebRTC(){var e;let t=(e=this.store.getLocalPeer())==null?void 0:e.role;return t?this.doesRoleNeedWebRTC(t):!0}handleSubscribeConnectionConnected(){var e;(e=this.subscribeConnection)==null||e.logSelectedIceCandidatePairs();let t=this.callbacks.get(Uo);this.callbacks.delete(Uo),t&&t.promise.resolve(!0)}setTransportStateForConnect(){if(this.state===qe.Failed&&(this.state=qe.Disconnected),this.state!==qe.Disconnected&&this.state!==qe.Reconnecting)throw te.WebsocketMethodErrors.AlreadyJoined(Q.JOIN,`Cannot join a meeting in ${this.state} state`);this.state===qe.Disconnected&&(this.state=qe.Connecting,this.observer.onStateChange(this.state))}sendErrorAnalyticsEvent(e,t){let i=this.getAdditionalAnalyticsProperties(),n;switch(t){case Ze.ConnectFailed:n=it.connect(e,i);break;case Ze.SignalDisconnect:n=it.disconnect(e,i);break;case Ze.JoinWSMessageFailed:n=it.join({error:e,time:this.analyticsTimer.getTimeTaken(Le.JOIN),init_response_time:this.analyticsTimer.getTimeTaken(Le.INIT),ws_connect_time:this.analyticsTimer.getTimeTaken(Le.WEBSOCKET_CONNECT),on_policy_change_time:this.analyticsTimer.getTimeTaken(Le.ON_POLICY_CHANGE),local_audio_track_time:this.analyticsTimer.getTimeTaken(Le.LOCAL_AUDIO_TRACK),local_video_track_time:this.analyticsTimer.getTimeTaken(Le.LOCAL_VIDEO_TRACK),retries_join:this.joinRetryCount});break;case Ze.PublishIceConnectionFailed:n=it.publish({error:e});break;case Ze.SubscribeIceConnectionFailed:n=it.subscribeFail(e);break}this.eventBus.analytics.publish(n)}getAdditionalAnalyticsProperties(){var e,t,i,n,r,s,o,a;let l=LF(),c=typeof document<"u"&&document.hidden,u=this.store.getRemoteVideoTracks().filter(m=>m.degraded).length,d=(n=(i=(t=(e=this.getWebrtcInternals())==null?void 0:e.getCurrentStats())==null?void 0:t.getLocalPeerStats())==null?void 0:i.publish)==null?void 0:n.bitrate,h=(a=(o=(s=(r=this.getWebrtcInternals())==null?void 0:r.getCurrentStats())==null?void 0:s.getLocalPeerStats())==null?void 0:o.subscribe)==null?void 0:a.bitrate;return{network_info:l,document_hidden:c,num_degraded_tracks:u,bitrate:{publish:d,subscribe:h},max_sub_bitrate:this.maxSubscribeBitrate,recent_pong_response_times:this.signal.getPongResponseTimes(),transport_state:this.state}}},MF=(e,t,i)=>_(void 0,null,function*(){let n=4,r=Error("something went wrong during fetch");for(let s=0;s<n;s++)try{let o=yield fetch(e,t),a=yield o.clone().json();if(i&&i.length&&!o.ok&&i.includes(a.code))throw te.APIErrors.ServerErrors(a.code,Q.GET_TOKEN,a.message,!1);return o}catch(o){r=o}throw["Failed to fetch","NetworkError"].some(s=>r.message.includes(s))?te.APIErrors.EndpointUnreachable(Q.GET_TOKEN,r.message):r});function ib(e){if(!e||e.length===0)throw te.APIErrors.InvalidTokenFormat(Q.INIT,"Token cannot be an empty string or undefined or null");let t=e.split(".");if(t.length!==3)throw te.APIErrors.InvalidTokenFormat(Q.INIT,"Expected 3 '.' separate fields - header, payload and signature respectively");let i=atob(t[1]);try{let n=JSON.parse(i);return{roomId:n.room_id,userId:n.user_id,role:n.role}}catch(n){throw te.APIErrors.InvalidTokenFormat(Q.INIT,`couldn't parse to json - ${n.message}`)}}var nb={published:!1,isInitialised:!1,isReconnecting:!1,isPreviewInProgress:!1,isPreviewCalled:!1,isJoinInProgress:!1,deviceManagersInitialised:!1},$F=class{constructor(){this.TAG="[HMSSdk]:",this.transportState=qe.Disconnected,this.analyticsTimer=new nB,this.sdkState=Re({},nb),this.handleAutoplayError=e=>{var t,i;(i=(t=this.errorListener)==null?void 0:t.onError)==null||i.call(t,e)},this.observer={onNotification:e=>{if(e.method===Ge.PEER_LEAVE_REQUEST){this.handlePeerLeaveRequest(e.params);return}switch(e.method){case Ge.POLICY_CHANGE:this.analyticsTimer.end(Le.ON_POLICY_CHANGE);break;case Ge.PEER_LIST:this.analyticsTimer.end(Le.PEER_LIST),this.sendJoinAnalyticsEvent(this.sdkState.isPreviewCalled);break;case Ge.ROOM_STATE:this.analyticsTimer.end(Le.ROOM_STATE);break}this.notificationManager.handleNotification(e,this.sdkState.isReconnecting)},onTrackAdd:e=>{this.notificationManager.handleTrackAdd(e)},onTrackRemove:e=>{this.notificationManager.handleTrackRemove(e)},onFailure:e=>{var t;(t=this.errorListener)==null||t.onError(e)},onStateChange:(e,t)=>_(this,null,function*(){var i,n;let r=s=>_(this,null,function*(){var o,a;yield this.internalLeave(!0,s),!this.sdkState.isPreviewInProgress&&!this.sdkState.isJoinInProgress&&((a=(o=this.errorListener)==null?void 0:o.onError)==null||a.call(o,s)),this.sdkState.isReconnecting=!1});switch(e){case qe.Preview:case qe.Joined:this.transportState===qe.Reconnecting&&((i=this.listener)==null||i.onReconnected());break;case qe.Failed:yield r(t);break;case qe.Reconnecting:this.sdkState.isReconnecting=!0,(n=this.listener)==null||n.onReconnecting(t);break}this.transportState=e,b.d(this.TAG,"Transport State Change",this.transportState)})},this.handlePeerLeaveRequest=e=>{var t;let i=e.requested_by?this.store.getPeerById(e.requested_by):void 0,n={roomEnded:e.room_end,reason:e.reason,requestedBy:i};(t=this.listener)==null||t.onRemovedFromRoom(n),this.internalLeave(!1)},this.handleDeviceChange=e=>{var t,i,n,r,s,o;if(b.d(this.TAG,"Device Change event",e),(i=(t=this.deviceChangeListener)==null?void 0:t.onDeviceChange)==null||i.call(t,e),e.error&&e.type){let a=e.type.includes("audio")?(n=this.localPeer)==null?void 0:n.audioTrack:(r=this.localPeer)==null?void 0:r.videoTrack;(s=this.errorListener)==null||s.onError(e.error),[Ce.TracksErrors.CANT_ACCESS_CAPTURE_DEVICE,Ce.TracksErrors.DEVICE_IN_USE,Ce.TracksErrors.DEVICE_NOT_AVAILABLE].includes(e.error.code)&&a&&(a.setEnabled(!1),(o=this.listener)==null||o.onTrackUpdate(Ye.TRACK_MUTED,a,this.localPeer))}},this.handleAudioPluginError=e=>{var t;b.e(this.TAG,"Audio Plugin Error event",e),(t=this.errorListener)==null||t.onError(e)},this.handleLocalRoleUpdate=e=>_(this,[e],function*({oldRole:t,newRole:i}){var n;yield this.transport.handleLocalRoleUpdate({oldRole:t,newRole:i}),yield(n=this.roleChangeManager)==null?void 0:n.handleLocalPeerRoleUpdate({oldRole:t,newRole:i})}),this.sendAudioPresenceFailed=()=>{let e=te.TracksErrors.NoAudioDetected(Q.PREVIEW);b.w(this.TAG,"Audio Presence Failure",this.transportState,e)},this.sendJoinAnalyticsEvent=(e=!1,t)=>{this.eventBus.analytics.publish(it.join(Ot(Re({error:t},this.analyticsTimer.getTimes()),{time:this.analyticsTimer.getTimeTaken(Le.JOIN),is_preview_called:e,retries_join:this.transport.joinRetryCount})))},this.sendPreviewAnalyticsEvent=e=>{this.eventBus.analytics.publish(it.preview(Ot(Re({error:e},this.analyticsTimer.getTimes()),{time:this.analyticsTimer.getTimeTaken(Le.PREVIEW)})))},this.sendAnalyticsEvent=e=>{this.analyticsEventsService.queue(e).flush()}}initStoreAndManagers(){if(this.sdkState.isInitialised){this.notificationManager.setListener(this.listener),this.audioSinkManager.setListener(this.listener);return}this.sdkState.isInitialised=!0,this.store=new jB,this.eventBus=new qB,this.wakeLockManager=new VB,this.networkTestManager=new UB(this.eventBus,this.listener),this.playlistManager=new aF(this,this.eventBus),this.notificationManager=new rF(this.store,this.eventBus,this.listener,this.audioListener),this.deviceManager=new KB(this.store,this.eventBus),this.audioSinkManager=new HB(this.store,this.deviceManager,this.eventBus),this.audioOutput=new WB(this.deviceManager,this.audioSinkManager),this.audioSinkManager.setListener(this.listener),this.eventBus.autoplayError.subscribe(this.handleAutoplayError),this.localTrackManager=new lc(this.store,this.observer,this.deviceManager,this.eventBus,this.analyticsTimer),this.analyticsEventsService=new GB(this.store),this.transport=new xF(this.observer,this.deviceManager,this.store,this.eventBus,this.analyticsEventsService,this.analyticsTimer),this.sessionStore=new lF(this.transport),this.eventBus.analytics.subscribe(this.sendAnalyticsEvent),this.eventBus.deviceChange.subscribe(this.handleDeviceChange),this.eventBus.audioPluginFailed.subscribe(this.handleAudioPluginError)}validateJoined(e){if(!this.localPeer)throw te.GenericErrors.NotConnected(Q.VALIDATION,`Not connected - ${e}`)}sendHLSAnalytics(e){this.sendAnalyticsEvent(it.hlsPlayerError(e))}refreshDevices(){return _(this,null,function*(){this.validateJoined("refreshDevices"),yield this.deviceManager.init(!0)})}getWebrtcInternals(){var e;return(e=this.transport)==null?void 0:e.getWebrtcInternals()}getSessionStore(){return this.sessionStore}getPlaylistManager(){return this.playlistManager}getRecordingState(){var e;return(e=this.store.getRoom())==null?void 0:e.recording}getRTMPState(){var e;return(e=this.store.getRoom())==null?void 0:e.rtmp}getHLSState(){var e;return(e=this.store.getRoom())==null?void 0:e.hls}getTemplateAppData(){return this.store.getTemplateAppData()}get localPeer(){var e;return(e=this.store)==null?void 0:e.getLocalPeer()}preview(e,t){return _(this,null,function*(){if(eb(),Qy(),this.sdkState.isPreviewInProgress)return Promise.reject(te.GenericErrors.PreviewAlreadyInProgress(Q.PREVIEW,"Preview already called"));this.analyticsTimer.start(Le.PREVIEW),this.setUpPreview(e,t),e.alwaysRequestPermissions&&this.localTrackManager.requestPermissions().then(()=>_(this,null,function*(){yield this.initDeviceManagers()}));let i=!1,n=!1,r=setTimeout(()=>{var s,o;(!i||!n)&&((o=(s=this.listener)==null?void 0:s.onNetworkQuality)==null||o.call(s,-1))},3e3);return new Promise((s,o)=>{let a=()=>_(this,null,function*(){var c;if(this.localPeer){let h=e.asRole&&this.store.getPolicyForRole(e.asRole);this.localPeer.asRole=h||this.localPeer.role}let u=yield this.localTrackManager.getTracksToPublish(e.settings);u.forEach(h=>this.setLocalPeerTrack(h)),(c=this.localPeer)!=null&&c.audioTrack&&this.initPreviewTrackAudioLevelMonitor(),yield this.initDeviceManagers(),this.sdkState.isPreviewInProgress=!1,this.analyticsTimer.end(Le.PREVIEW);let d=this.store.getRoom();d&&t.onPreview(d,u),this.sendPreviewAnalyticsEvent(),s()}),l=c=>{var u;this.analyticsTimer.end(Le.PREVIEW),c&&((u=this.errorListener)==null||u.onError(c)),this.sendPreviewAnalyticsEvent(c),this.sdkState.isPreviewInProgress=!1,o(c)};this.eventBus.policyChange.subscribeOnce(a),this.eventBus.leave.subscribeOnce(l),this.transport.preview(e.authToken,e.initEndpoint,this.localPeer.peerId,{name:e.userName,metaData:e.metaData||""},e.autoVideoSubscribe).then(c=>{var u;i=!0,clearTimeout(r),c&&e.captureNetworkQualityInPreview&&this.networkTestManager.start((u=c.config)==null?void 0:u.networkHealth).then(()=>{n=!0})}).catch(l)})})}join(e,t){return _(this,null,function*(){var i,n,r,s,o,a;if(eb(),Qy(),this.sdkState.isPreviewInProgress)throw te.GenericErrors.NotReady(Q.JOIN,"Preview is in progress, can't join");this.analyticsTimer.start(Le.JOIN),this.sdkState.isJoinInProgress=!0;let{roomId:l,userId:c,role:u}=ib(e.authToken),d=((n=(i=this.localPeer)==null?void 0:i.asRole)==null?void 0:n.name)||((s=(r=this.localPeer)==null?void 0:r.role)==null?void 0:s.name);(o=this.networkTestManager)==null||o.stop(),this.listener=t,this.commonSetup(e,l,t),this.removeDevicesFromConfig(e),this.store.setConfig(e),this.store.createAndSetUserAgent(this.frameworkInfo),Vc.resumeContext();let h=this.store.getConfig();h!=null&&h.autoManageWakeLock&&this.wakeLockManager.acquireLock(),this.localPeer?(this.localPeer.name=e.userName,this.localPeer.role=this.store.getPolicyForRole(u),this.localPeer.customerUserId=c,this.localPeer.metadata=e.metaData,delete this.localPeer.asRole):this.createAndAddLocalPeerToStore(e,u,c),this.roleChangeManager=new BB(this.store,this.transport,this.getAndPublishTracks.bind(this),this.removeTrack.bind(this),this.listener),this.eventBus.localRoleUpdate.subscribe(this.handleLocalRoleUpdate),b.d(this.TAG,"SDK Store",this.store),b.d(this.TAG,`\u23F3 Joining room ${l}`),b.time(`join-room-${l}`);try{yield this.transport.join(e.authToken,this.localPeer.peerId,{name:e.userName,metaData:e.metaData},e.initEndpoint,e.autoVideoSubscribe),b.d(this.TAG,`\u2705 Joined room ${l}`),this.analyticsTimer.start(Le.PEER_LIST),yield this.notifyJoin(),this.sdkState.isJoinInProgress=!1,yield this.publish(e.settings,d)}catch(m){throw this.analyticsTimer.end(Le.JOIN),this.sdkState.isJoinInProgress=!1,(a=this.listener)==null||a.onError(m),this.sendJoinAnalyticsEvent(this.sdkState.isPreviewCalled,m),b.e(this.TAG,"Unable to join room",m),m}b.timeEnd(`join-room-${l}`)})}stringifyMetadata(e){e.metaData&&typeof e.metaData!="string"?e.metaData=JSON.stringify(e.metaData):e.metaData||(e.metaData="")}cleanUp(){var e,t,i;this.cleanDeviceManagers(),this.eventBus.analytics.unsubscribe(this.sendAnalyticsEvent),this.analyticsTimer.cleanUp(),Mn.cleanup(),this.playlistManager.cleanup(),(e=this.wakeLockManager)==null||e.cleanup(),b.cleanUp(),this.sdkState=Re({},nb),this.localPeer&&((t=this.localPeer.audioTrack)==null||t.cleanup(),this.localPeer.audioTrack=void 0,(i=this.localPeer.videoTrack)==null||i.cleanup(),this.localPeer.videoTrack=void 0),this.store.cleanUp(),this.listener=void 0,this.roleChangeManager&&this.eventBus.localRoleUpdate.unsubscribe(this.handleLocalRoleUpdate)}leave(e){return this.internalLeave(e)}internalLeave(e=!0,t){return _(this,null,function*(){var i,n;let r=this.store.getRoom();if(r){let s=r.id;(i=this.networkTestManager)==null||i.stop(),this.eventBus.leave.publish(t),b.d(this.TAG,`\u23F3 Leaving room ${s}`),yield(n=this.transport)==null?void 0:n.leave(e),this.cleanUp(),b.d(this.TAG,`\u2705 Left room ${s}`)}})}getAuthTokenByRoomCode(e,t){return _(this,null,function*(){let i=(t||{}).endpoint||"https://auth.100ms.live/v2/token";this.analyticsTimer.start(Le.GET_TOKEN);let n=yield MF(i,{method:"POST",body:JSON.stringify({code:e.roomCode,user_id:e.userId})},[429,500,501,502,503,504,505,506,507,508,509,510,511]),r=yield n.json();if(this.analyticsTimer.end(Le.GET_TOKEN),!n.ok)throw te.APIErrors.ServerErrors(r.code,Q.GET_TOKEN,r.message,!1);let{token:s}=r;if(!s)throw Error(r.message);return s})}getLocalPeer(){return this.store.getLocalPeer()}getPeers(){return this.store.getPeers()}getAudioOutput(){return this.audioOutput}sendMessage(e,t){this.sendMessageInternal({message:t,type:e})}sendBroadcastMessage(e,t){return _(this,null,function*(){return yield this.sendMessageInternal({message:e,type:t})})}sendGroupMessage(e,t,i){return _(this,null,function*(){let n=this.store.getKnownRoles();if((t.filter(r=>n[r.name])||[]).length===0)throw te.GenericErrors.ValidationFailed("No valid role is present",t);return yield this.sendMessageInternal({message:e,recipientRoles:t,type:i})})}sendDirectMessage(e,t,i){return _(this,null,function*(){var n;if(!this.store.getPeerById(t.peerId))throw te.GenericErrors.ValidationFailed("Invalid peer - peer not present in the room",t);if(((n=this.localPeer)==null?void 0:n.peerId)===t.peerId)throw te.GenericErrors.ValidationFailed("Cannot send message to self");return yield this.sendMessageInternal({message:e,recipientPeer:t,type:i})})}sendMessageInternal(e){return _(this,arguments,function*({recipientRoles:t,recipientPeer:i,type:n="chat",message:r}){if(r.replace(/\u200b/g," ").trim()==="")throw b.w(this.TAG,"sendMessage","Ignoring empty message send"),te.GenericErrors.ValidationFailed("Empty message not allowed");let s=new B0({sender:this.localPeer,type:n,message:r,recipientPeer:i,recipientRoles:t,time:new Date});b.d(this.TAG,"Sending Message: ",s);let o=yield this.transport.sendMessage(s);return s.time=new Date(o.timestamp),s})}startScreenShare(e,t){return _(this,null,function*(){var i,n,r;let s=this.store.getPublishParams();if(!s)return;let{allowed:o}=s;if(!(o&&o.includes("screen"))){b.e(this.TAG,`Role ${(i=this.localPeer)==null?void 0:i.role} cannot share screen`);return}if((r=(n=this.localPeer)==null?void 0:n.auxiliaryTracks)!=null&&r.find(l=>l.source==="screen"))throw Error("Cannot share multiple screens");let a=yield this.getScreenshareTracks(e,t);if(!this.localPeer){b.d(this.TAG,"Screenshared when not connected"),a.forEach(l=>{l.cleanup()});return}yield this.transport.publish(a),a.forEach(l=>{var c,u,d;l.peerId=(c=this.localPeer)==null?void 0:c.peerId,(u=this.localPeer)==null||u.auxiliaryTracks.push(l),(d=this.listener)==null||d.onTrackUpdate(Ye.TRACK_ADDED,l,this.localPeer)})})}stopEndedScreenshare(e){return _(this,null,function*(){b.d(this.TAG,"\u2705 Screenshare ended natively"),yield this.stopScreenShare(),e()})}stopScreenShare(){return _(this,null,function*(){var e;b.d(this.TAG,"\u2705 Screenshare ended from app");let t=(e=this.localPeer)==null?void 0:e.auxiliaryTracks.filter(i=>i.source==="screen");if(t)for(let i of t)yield this.removeTrack(i.trackId)})}addTrack(e,t="regular"){return _(this,null,function*(){var i,n,r,s;if(!e){b.w(this.TAG,"Please pass a valid MediaStreamTrack");return}if(!this.localPeer)throw te.GenericErrors.NotConnected(Q.VALIDATION,"No local peer present, cannot addTrack");if(this.localPeer.auxiliaryTracks.find(d=>d.trackId===e.id))return;let o=e.kind,a=new MediaStream([e]),l=new Nh(a),c=o==="audio"?$s:Li,u=new c(l,e,t,this.eventBus);this.setPlaylistSettings({track:e,hmsTrack:u,source:t}),yield(i=this.transport)==null?void 0:i.publish([u]),u.peerId=(n=this.localPeer)==null?void 0:n.peerId,(r=this.localPeer)==null||r.auxiliaryTracks.push(u),(s=this.listener)==null||s.onTrackUpdate(Ye.TRACK_ADDED,u,this.localPeer)})}removeTrack(e,t=!1){return _(this,null,function*(){var i;if(!this.localPeer)throw te.GenericErrors.NotConnected(Q.VALIDATION,"No local peer present, cannot removeTrack");let n=this.localPeer.auxiliaryTracks.findIndex(r=>r.trackId===e);if(n>-1){let r=this.localPeer.auxiliaryTracks[n];r.isPublished?yield this.transport.unpublish([r]):yield r.cleanup(),t||this.stopPlaylist(r),this.localPeer.auxiliaryTracks.splice(n,1),(i=this.listener)==null||i.onTrackUpdate(Ye.TRACK_REMOVED,r,this.localPeer)}else b.w(this.TAG,`No track found for ${e}`)})}setAnalyticsLevel(e){this.analyticsEventsService.level=e}setLogLevel(e){b.level=e}addAudioListener(e){this.audioListener=e,this.notificationManager.setAudioListener(e)}addConnectionQualityListener(e){this.notificationManager.setConnectionQualityListener(e)}changeRole(e,t,i=!1){return _(this,null,function*(){var n;!e.role||e.role.name===t||(yield(n=this.transport)==null?void 0:n.changeRoleOfPeer(e,t,i))})}changeRoleOfPeer(e,t,i=!1){return _(this,null,function*(){var n;!e.role||e.role.name===t||(yield(n=this.transport)==null?void 0:n.changeRoleOfPeer(e,t,i))})}changeRoleOfPeersWithRoles(e,t){return _(this,null,function*(){var i;e.length<=0||!t||(yield(i=this.transport)==null?void 0:i.changeRoleOfPeersWithRoles(e,t))})}acceptChangeRole(e){return _(this,null,function*(){var t;yield(t=this.transport)==null?void 0:t.acceptRoleChange(e)})}endRoom(e,t){return _(this,null,function*(){var i;if(!this.localPeer)throw te.GenericErrors.NotConnected(Q.VALIDATION,"No local peer present, cannot end room");yield(i=this.transport)==null?void 0:i.endRoom(e,t),yield this.leave()})}removePeer(e,t){return _(this,null,function*(){var i;if(!this.localPeer)throw te.GenericErrors.NotConnected(Q.VALIDATION,"No local peer present, cannot remove peer");if(!this.store.getPeerById(e.peerId))throw te.GenericErrors.ValidationFailed("Invalid peer, given peer not present in room",e);yield(i=this.transport)==null?void 0:i.removePeer(e.peerId,t)})}startRTMPOrRecording(e){return _(this,null,function*(){var t;if(!this.localPeer)throw te.GenericErrors.NotConnected(Q.VALIDATION,"No local peer present, cannot start streaming or recording");yield(t=this.transport)==null?void 0:t.startRTMPOrRecording(e)})}stopRTMPAndRecording(){return _(this,null,function*(){var e;if(!this.localPeer)throw te.GenericErrors.NotConnected(Q.VALIDATION,"No local peer present, cannot stop streaming or recording");yield(e=this.transport)==null?void 0:e.stopRTMPOrRecording()})}startHLSStreaming(e){return _(this,null,function*(){var t;if(!this.localPeer)throw te.GenericErrors.NotConnected(Q.VALIDATION,"No local peer present, cannot start HLS streaming");yield(t=this.transport)==null?void 0:t.startHLSStreaming(e)})}stopHLSStreaming(e){return _(this,null,function*(){var t;if(!this.localPeer)throw te.GenericErrors.NotConnected(Q.VALIDATION,"No local peer present, cannot stop HLS streaming");yield(t=this.transport)==null?void 0:t.stopHLSStreaming(e)})}sendHLSTimedMetadata(e){return _(this,null,function*(){var t;this.validateJoined("sendHLSTimedMetadata"),yield(t=this.transport)==null?void 0:t.sendHLSTimedMetadata(e)})}changeName(e){return _(this,null,function*(){var t;this.validateJoined("changeName"),yield(t=this.transport)==null?void 0:t.changeName(e),this.notificationManager.updateLocalPeer({name:e})})}changeMetadata(e){return _(this,null,function*(){var t;this.validateJoined("changeMetadata"),yield(t=this.transport)==null?void 0:t.changeMetadata(e),this.notificationManager.updateLocalPeer({metadata:e})})}setSessionMetadata(e){return _(this,null,function*(){yield this.transport.setSessionMetadata({key:"default",data:e})})}getSessionMetadata(){return _(this,null,function*(){return(yield this.transport.getSessionMetadata("default")).data})}getRoles(){return Object.values(this.store.getKnownRoles())}changeTrackState(e,t){return _(this,null,function*(){var i;if(e.type===wt.VIDEO&&e.source!=="regular"){b.w(this.TAG,"Muting non-regular video tracks is currently not supported");return}if(e.enabled===t){b.w(this.TAG,`Aborting change track state, track already has enabled - ${t}`,e);return}if(!this.store.getTrackById(e.trackId))throw te.GenericErrors.ValidationFailed("No track found for change track state",e);let n=this.store.getPeerByTrackId(e.trackId);if(!n)throw te.GenericErrors.ValidationFailed("No peer found for change track state",e);yield(i=this.transport)==null?void 0:i.changeTrackState({requested_for:n.peerId,track_id:e.trackId,stream_id:e.stream.id,mute:!t})})}changeMultiTrackState(e){return _(this,null,function*(){var t;if(typeof e.enabled!="boolean")throw te.GenericErrors.ValidationFailed("Pass a boolean for enabled");let{enabled:i,roles:n,type:r,source:s}=e;yield(t=this.transport)==null?void 0:t.changeMultiTrackState({value:!i,type:r,source:s,roles:n==null?void 0:n.map(o=>o==null?void 0:o.name)})})}setFrameworkInfo(e){this.frameworkInfo=e}attachVideo(e,t){return _(this,null,function*(){let i=this.store.getConfig();i!=null&&i.autoManageVideo?e.attach(t):yield e.addSink(t)})}detachVideo(e,t){return _(this,null,function*(){let i=this.store.getConfig();i!=null&&i.autoManageVideo?e.detach(t):yield e.removeSink(t)})}publish(e,t){return _(this,null,function*(){var i,n,r;if([this.store.getPublishParams(),!this.sdkState.published,!fp].every(s=>!!s)){let s=t&&t!==((n=(i=this.localPeer)==null?void 0:i.role)==null?void 0:n.name)?()=>{var o;return(o=this.roleChangeManager)==null?void 0:o.diffRolesAndPublishTracks({oldRole:this.store.getPolicyForRole(t),newRole:this.localPeer.role})}:()=>this.getAndPublishTracks(e);yield(r=s==null?void 0:s())==null?void 0:r.catch(o=>{var a;b.e(this.TAG,"Error in publish",o),(a=this.listener)==null||a.onError(o)})}})}getAndPublishTracks(e){return _(this,null,function*(){var t,i;let n=yield this.localTrackManager.getTracksToPublish(e);yield this.setAndPublishTracks(n),(i=(t=this.localPeer)==null?void 0:t.audioTrack)==null||i.initAudioLevelMonitor(),this.sdkState.published=!0})}setAndPublishTracks(e){return _(this,null,function*(){var t;for(let i of e)yield this.transport.publish([i]),this.setLocalPeerTrack(i),(t=this.listener)==null||t.onTrackUpdate(Ye.TRACK_ADDED,i,this.localPeer);yield this.initDeviceManagers()})}setLocalPeerTrack(e){var t;switch(e.peerId=(t=this.localPeer)==null?void 0:t.peerId,e.type){case wt.AUDIO:this.localPeer.audioTrack=e;break;case wt.VIDEO:this.localPeer.videoTrack=e;break}}initDeviceManagers(){return _(this,null,function*(){var e,t,i,n,r;this.sdkState.deviceManagersInitialised||(this.sdkState.deviceManagersInitialised=!0,yield this.deviceManager.init(),(yield this.deviceManager.updateOutputDevice((t=(e=this.store.getConfig())==null?void 0:e.settings)==null?void 0:t.audioOutputDeviceId))||(yield this.deviceManager.updateOutputDevice((n=(i=Mn.getSelection())==null?void 0:i.audioOutput)==null?void 0:n.deviceId)),this.audioSinkManager.init((r=this.store.getConfig())==null?void 0:r.audioSinkElementId))})}cleanDeviceManagers(){this.eventBus.deviceChange.unsubscribe(this.handleDeviceChange),this.eventBus.audioPluginFailed.unsubscribe(this.handleAudioPluginError),this.eventBus.autoplayError.unsubscribe(this.handleAutoplayError),this.deviceManager.cleanUp(),this.audioSinkManager.cleanUp()}initPreviewTrackAudioLevelMonitor(){var e;let t=(e=this.localPeer)==null?void 0:e.audioTrack;t==null||t.initAudioLevelMonitor(),this.eventBus.trackAudioLevelUpdate.subscribe(i=>{var n;let r=i&&i.track.trackId===(t==null?void 0:t.trackId)?[{audioLevel:i.audioLevel,peer:this.localPeer,track:t}]:[];this.store.updateSpeakers(r),(n=this.audioListener)==null||n.onAudioLevelUpdate(r)}),this.eventBus.localAudioSilence.subscribe(this.sendAudioPresenceFailed)}notifyJoin(){var e;let t=this.store.getLocalPeer(),i=this.store.getRoom();if(!i){b.w(this.TAG,"notify join - room not present");return}if(i.joinedAt=new Date,t&&(t.joinedAt=i.joinedAt),t==null?void 0:t.role){this.analyticsTimer.end(Le.JOIN),(e=this.listener)==null||e.onJoin(i);return}return new Promise((n,r)=>{this.eventBus.policyChange.subscribeOnce(()=>{var s;this.analyticsTimer.end(Le.JOIN),(s=this.listener)==null||s.onJoin(i),n()}),this.eventBus.leave.subscribeOnce(s=>{r(s)})})}setUpPreview(e,t){this.listener=t,this.sdkState.isPreviewCalled=!0,this.sdkState.isPreviewInProgress=!0;let{roomId:i,userId:n,role:r}=ib(e.authToken);this.commonSetup(e,i,t),this.store.setConfig(e),this.store.createAndSetUserAgent(this.frameworkInfo),this.createAndAddLocalPeerToStore(e,r,n,e.asRole),b.d(this.TAG,"SDK Store",this.store)}setPlaylistSettings(e){return _(this,arguments,function*({track:t,hmsTrack:i,source:n}){if(n==="videoplaylist"){let r={};if(t.kind==="audio")r.maxBitrate=64;else{r.maxBitrate=1e3;let{width:s,height:o}=t.getSettings();r.width=s,r.height=o}yield i.setSettings(r)}else n==="audioplaylist"&&(yield i.setSettings({maxBitrate:64}))})}createAndAddLocalPeerToStore(e,t,i,n){let r=this.store.getPolicyForRole(t),s=n?this.store.getPolicyForRole(n):void 0,o=new QU({name:e.userName||"",customerUserId:i,metadata:e.metaData||"",role:r,asRole:s||r});this.store.addPeer(o)}commonSetup(e,t,i){this.stringifyMetadata(e),e.initEndpoint||(e.initEndpoint="https://prod-init.100ms.live"),this.errorListener=i,this.deviceChangeListener=i,this.initStoreAndManagers(),this.store.setErrorListener(this.errorListener),this.store.getRoom()||this.store.setRoom(new ZU(t,this.store))}removeDevicesFromConfig(e){this.store.getConfig()&&e.settings&&(delete e.settings.audioOutputDeviceId,delete e.settings.videoDeviceId,delete e.settings.audioInputDeviceId)}getScreenshareTracks(e,t){return _(this,null,function*(){let[i,n]=yield this.localTrackManager.getLocalScreen(t),r=()=>{this.stopEndedScreenshare(e)},s=[];if(t!=null&&t.audioOnly){if(i.nativeTrack.stop(),!n)throw te.TracksErrors.NothingToReturn(Q.TRACK,"Select share audio when sharing screen","No audio found");s.push(n),n.nativeTrack.onended=r}else s.push(i),i.nativeTrack.onended=r,n&&s.push(n);return s})}stopPlaylist(e){e.source==="audioplaylist"?this.playlistManager.stop($e.audio):e.source==="videoplaylist"&&this.playlistManager.stop($e.video)}};b.i("adapter",`${ic.browserDetails.browser} v${ic.browserDetails.version}`);function UF(e,t){return e===t}function BF(e,t,i){if(t===null||i===null||t.length!==i.length)return!1;for(var n=t.length,r=0;r<n;r++)if(!e(t[r],i[r]))return!1;return!0}function FF(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:UF,i=null,n=null;return function(){return BF(t,i,arguments)||(n=e.apply(null,arguments)),i=arguments,n}}function jF(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(n){return typeof n=="function"})){var i=t.map(function(n){return typeof n}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+i+"]"))}return t}function VF(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return function(){for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];var a=0,l=s.pop(),c=jF(s),u=e.apply(void 0,[function(){return a++,l.apply(null,arguments)}].concat(i)),d=e(function(){for(var h=[],m=c.length,v=0;v<m;v++)h.push(c[v].apply(null,arguments));return u.apply(null,h)});return d.resultFunc=l,d.dependencies=c,d.recomputations=function(){return a},d.resetRecomputations=function(){return a=0},d}}var re=VF(FF),GF=Object.defineProperty,HF=Object.defineProperties,KF=Object.getOwnPropertyDescriptors,rb=Object.getOwnPropertySymbols,WF=Object.prototype.hasOwnProperty,qF=Object.prototype.propertyIsEnumerable,sb=(e,t,i)=>t in e?GF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Lr=(e,t)=>{for(var i in t||(t={}))WF.call(t,i)&&sb(e,i,t[i]);if(rb)for(var i of rb(t))qF.call(t,i)&&sb(e,i,t[i]);return e},_p=(e,t)=>HF(e,KF(t)),zF=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),fe=(e,t,i)=>new Promise((n,r)=>{var s=l=>{try{a(i.next(l))}catch(c){r(c)}},o=l=>{try{a(i.throw(l))}catch(c){r(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);a((i=i.apply(e,t)).next())}),JF=zF((e,t)=>{t.exports={version:"0.10.2",license:"MIT",main:"dist/index.cjs.js",module:"dist/index.js",typings:"dist/index.d.ts",files:["dist","src"],engines:{node:">=12"},exports:{".":{require:"./dist/index.cjs.js",import:"./dist/index.js",default:"./dist/index.js"}},scripts:{prestart:"rm -rf dist && yarn types:build",start:'concurrently "yarn dev" "yarn types"',dev:"node ../../scripts/dev","build:only":"node ../../scripts/build",build:"yarn build:only && yarn types:build",types:"tsc -w","types:build":"tsc -p tsconfig.json",format:"prettier --write src/**/*.ts",test:"jest --maxWorkers=1","test:watch":"jest --watch","test:coverage":"jest --coverage",lint:"eslint -c ../../.eslintrc .","lint:fix":"yarn lint --fix",prepare:"yarn build",size:"size-limit",analyze:"size-limit --why",docs:"rm -rf ./docs && typedoc && rm -f ./docs/README.md && mkdir ./docs/home &&mv ./docs/modules.md ./docs/home/content.md && node ../../scripts/docs-store && npx prettier --write './docs/**/*'"},name:"@100mslive/hms-video-store",author:"100ms",sideEffects:!1,dependencies:{"@100mslive/hms-video":"0.9.2",eventemitter2:"^6.4.7",immer:"^9.0.6",reselect:"4.0.0",zustand:"3.5.7"},devDependencies:{"ts-node":"^10.4.0",tslib:"^2.2.0"},description:"This is an addon to the core sdk provided by 100ms. It abstracts away the intricacies of data management and provides a flux based reactive data store where data flows in only one direction.",repository:{type:"git",url:"git+https://github.com/100mslive/hms-video-store.git"},keywords:["video","webrtc","conferencing","100ms"],bugs:{url:"https://github.com/100mslive/hms-video-store/issues"},homepage:"https://github.com/100mslive/hms-video-store#readme",gitHead:"4e000fbf8980a6815e2b0c50e0b287472ee22fd5"}}),ht;(function(e){e.Disconnected="Disconnected",e.Preview="Preview",e.Connecting="Connecting",e.Connected="Connected",e.Reconnecting="Reconnecting",e.Disconnecting="Disconnecting",e.Failed="Failed"})(ht||(ht={}));var Z0=()=>({room:{id:"",isConnected:!1,name:"",peers:[],localPeer:"",roomState:ht.Disconnected,recording:{browser:{running:!1},server:{running:!1},hls:{running:!1}},rtmp:{running:!1},hls:{running:!1,variants:[]},sessionId:""},peers:{},tracks:{},playlist:{audio:{list:{},selection:{id:"",hasPrevious:!1,hasNext:!1},progress:0,volume:0,currentTime:0,playbackRate:1},video:{list:{},selection:{id:"",hasPrevious:!1,hasNext:!1},progress:0,volume:0,currentTime:0,playbackRate:1}},messages:{byID:{},allIDs:[]},speakers:{},connectionQualities:{},settings:{audioInputDeviceId:"",audioOutputDeviceId:"",videoInputDeviceId:""},devices:{audioInput:[],audioOutput:[],videoInput:[]},roles:{},roleChangeRequests:[],errors:[],sessionStore:{},templateAppData:{}}),Q0=()=>({peerStats:{},remoteTrackStats:{},localTrackStats:{},localPeer:{id:""}}),ob;(function(e){e.CHAT="chat"})(ob||(ob={}));var Kt;(function(e){e.INFO="info",e.ERROR="error"})(Kt||(Kt={}));var st;(function(e){e.PEER_JOINED="PEER_JOINED",e.PEER_LEFT="PEER_LEFT",e.PEER_LIST="PEER_LIST",e.NEW_MESSAGE="NEW_MESSAGE",e.ERROR="ERROR",e.RECONNECTING="RECONNECTING",e.RECONNECTED="RECONNECTED",e.TRACK_ADDED="TRACK_ADDED",e.TRACK_REMOVED="TRACK_REMOVED",e.TRACK_MUTED="TRACK_MUTED",e.TRACK_UNMUTED="TRACK_UNMUTED",e.TRACK_DEGRADED="TRACK_DEGRADED",e.TRACK_RESTORED="TRACK_RESTORED",e.TRACK_DESCRIPTION_CHANGED="TRACK_DESCRIPTION_CHANGED",e.ROLE_UPDATED="ROLE_UPDATED",e.CHANGE_TRACK_STATE_REQUEST="CHANGE_TRACK_STATE_REQUEST",e.CHANGE_MULTI_TRACK_STATE_REQUEST="CHANGE_MULTI_TRACK_STATE_REQUEST",e.ROOM_ENDED="ROOM_ENDED",e.REMOVED_FROM_ROOM="REMOVED_FROM_ROOM",e.DEVICE_CHANGE_UPDATE="DEVICE_CHANGE_UPDATE",e.PLAYLIST_TRACK_ENDED="PLAYLIST_TRACK_ENDED",e.NAME_UPDATED="NAME_UPDATED",e.METADATA_UPDATED="METADATA_UPDATED"})(st||(st={}));var tt;(function(e){e.audio="audio",e.video="video"})(tt||(tt={}));var ew={[yt.PEER_JOINED]:st.PEER_JOINED,[yt.PEER_LEFT]:st.PEER_LEFT,[yt.ROLE_UPDATED]:st.ROLE_UPDATED,[yt.NAME_UPDATED]:st.NAME_UPDATED,[yt.METADATA_UPDATED]:st.METADATA_UPDATED},tw={[Ye.TRACK_ADDED]:st.TRACK_ADDED,[Ye.TRACK_REMOVED]:st.TRACK_REMOVED,[Ye.TRACK_MUTED]:st.TRACK_MUTED,[Ye.TRACK_UNMUTED]:st.TRACK_UNMUTED,[Ye.TRACK_DEGRADED]:st.TRACK_DEGRADED,[Ye.TRACK_RESTORED]:st.TRACK_RESTORED,[Ye.TRACK_DESCRIPTION_CHANGED]:st.TRACK_DESCRIPTION_CHANGED};function Oa(e,t){let i,n;if(t)for(let r of t.auxiliaryTracks){let s=e[r];YF(s)&&(n=wp(s)?s:n,i=Sp(s)?s:i)}return{video:i,audio:n}}function wp(e){return e&&e.type==="audio"}function Sp(e){return e&&e.type==="video"}function YF(e){return e&&e.source==="screen"}function iw(e){return e&&e.source==="audioplaylist"}function kp(e){return e&&e.source==="videoplaylist"}function XF(e){return e?Boolean(e==null?void 0:e.degraded):!1}function ZF(e,t){return t&&e.tracks[t]?e.tracks[t].enabled:!1}function QF(e,t){return t&&e.tracks[t]?e.tracks[t].displayEnabled:!1}function nw(e){var t;let i=!1,n=!1,r=!1;return(t=e==null?void 0:e.publishParams)!=null&&t.allowed&&(i=e.publishParams.allowed.includes("video"),n=e.publishParams.allowed.includes("audio"),r=e.publishParams.allowed.includes("screen")),{video:i,audio:n,screen:r}}var pi=e=>e.room,e4=e=>e.errors;re(e4,e=>e.length===0?null:e.at(-1));re(pi,e=>e.id);var Ri=e=>e.peers,rw=e=>e.messages.byID,sw=e=>e.messages.allIDs,vt=e=>e.tracks,t4=e=>e.settings,i4=e=>e.appData,n4=e=>e.speakers,Us=re([pi],e=>e&&e.isConnected);re([Us,pi],(e,t)=>e?t.peerCount!==void 0?t.peerCount||1:t.peers.length:Math.max(t.peerCount!==void 0?t.peerCount:t.peers.length-1,0));var cc=re([pi,Ri],(e,t)=>e.peers.map(i=>t[i])),r4=re(vt,e=>Object.values(e)),Hi=re(pi,Ri,(e,t)=>t[e.localPeer]),ea=re(pi,e=>e.localPeer);re(Hi,e=>e==null?void 0:e.name);re(Hi,e=>e==null?void 0:e.roleName);var Sn=re(Hi,e=>e==null?void 0:e.audioTrack),tn=re(Hi,e=>e==null?void 0:e.videoTrack),s4=re(Hi,e=>e==null?void 0:e.auxiliaryTracks),o4=re([Sn,tn,s4],(e,t,i)=>{let n=i?[...i]:[];return e&&n.unshift(e),t&&n.unshift(t),n});re(cc,e=>e.filter(t=>!t.isLocal));re(Ri,n4,(e,t)=>{let i=Object.entries(t).sort((n,r)=>{var s,o;let a=((s=n[1])==null?void 0:s.audioLevel)||0;return(((o=r[1])==null?void 0:o.audioLevel)||0)>a?1:-1});if(i.length>0&&i[0][1].audioLevel&&i[0][1].audioLevel>0){let n=i[0][1].peerID;if(n in e)return e[n]}return null});var ab=e=>{let t=Hi(e);return ZF(e,t==null?void 0:t.videoTrack)},a4=e=>{let t=Hi(e);return QF(e,t==null?void 0:t.videoTrack)},lb=re(Hi,vt,(e,t)=>{let{video:i,audio:n}=Oa(t,e);return!!(i||n)}),l4=re(Ri,vt,(e,t)=>{let i;for(let n in e){let r=e[n],{video:s,audio:o}=Oa(t,r);if(s)return r;o&&!i&&(i=r)}return i});re(l4,e=>!!e);re(Ri,vt,(e,t)=>{for(let i in e){let n=e[i],{audio:r,video:s}=Oa(t,n);if(!s&&!!r)return n}});re(Ri,vt,(e,t)=>{let i=[],n=[];for(let r in e){let s=e[r],{video:o,audio:a}=Oa(t,s);o?i.push(s):a&&n.push(s)}return i.concat(n)});re(Ri,vt,(e,t)=>{for(let i in t){let n=t[i];if(kp(n)&&Sp(n)&&n.peerId)return e[n.peerId]}});re(Ri,vt,(e,t)=>{for(let i in t){let n=t[i];if(iw(n)&&n.peerId)return e[n.peerId]}});re(r4,e=>e.filter(XF));var c4=re(sw,e=>e.length);re(rw,e=>Object.values(e).filter(t=>!t.read).length);var Cp=re(sw,rw,(e,t)=>{let i=[];return e.forEach(n=>{i.push(t[n])}),i}),rn=re([pi],e=>e&&e.roomState);re(rn,e=>e===ht.Preview);re(pi,e=>e.roomState!==ht.Disconnected);var so=e=>e.roles;re([so],e=>Object.keys(e));var Ap=re([Hi,so],(e,t)=>e!=null&&e.roleName?t[e.roleName]:null),u4=e=>{var t;return(t=e.preview)==null?void 0:t.asRole},d4=re([u4,so],(e,t)=>e?t[e]:null);re([Ap],e=>{var t;return(t=e==null?void 0:e.subscribeParams)!=null&&t.subscribeToRoles?e.subscribeParams.subscribeToRoles.length>0:!1});var h4=re(Ap,e=>e==null?void 0:e.permissions);re(pi,e=>e.recording);re(pi,e=>e.rtmp);re(pi,e=>e.hls);re(pi,e=>e.sessionId);re(pi,e=>e.startedAt);var ow=(e=tt.audio)=>t=>t.playlist[e].list,Rp=(e=tt.audio)=>t=>t.playlist[e].selection,aw=(e=tt.audio)=>t=>t.playlist[e].progress,lw=(e=tt.audio)=>t=>t.playlist[e].currentTime,cw=(e=tt.audio)=>t=>t.playlist[e].playbackRate,uw=(e=tt.audio)=>t=>t.playlist[e].volume,dw=(e=tt.audio)=>re(ow(e),t=>Object.values(t)),hw=(e=tt.audio)=>re(ow(e),Rp(e),(t,i)=>{if(i.id)return t[i.id]}),f4={selection:Rp(tt.audio),progress:aw(tt.audio),currentTime:lw(tt.audio),playbackRate:cw(tt.audio),volume:uw(tt.audio),list:dw(tt.audio),selectedItem:hw(tt.audio)},p4={selection:Rp(tt.video),progress:aw(tt.video),currentTime:lw(tt.video),playbackRate:cw(tt.video),volume:uw(tt.video),list:dw(tt.video),selectedItem:hw(tt.video)};function oi(e){return t=>i=>e(i,t)}var Bo="HMS-Store:",Ne=class{static v(e,...t){this.log(Tt.VERBOSE,e,...t)}static d(...e){this.log(Tt.DEBUG,...e)}static i(...e){this.log(Tt.INFO,...e)}static w(...e){this.log(Tt.WARN,...e)}static e(...e){this.log(Tt.ERROR,...e)}static time(e){this.log(Tt.TIME,"[HMSPerformanceTiming]",e)}static timeEnd(e){this.log(Tt.TIMEEND,"[HMSPerformanceTiming]",e,e)}static cleanUp(){performance.clearMarks(),performance.clearMeasures()}static log(e,...t){if(!(this.level.valueOf()>e.valueOf()))switch(e){case Tt.VERBOSE:{console.log(Bo,...t);break}case Tt.DEBUG:{console.debug(Bo,...t);break}case Tt.INFO:{console.info(Bo,...t);break}case Tt.WARN:{console.warn(Bo,...t);break}case Tt.ERROR:{console.error(Bo,...t);break}case Tt.TIME:{performance.mark(t[1]);break}case Tt.TIMEEND:{let i=t[0],n=t[1];try{let r=performance.measure(n,n);this.log(Tt.DEBUG,i,n,r==null?void 0:r.duration),performance.clearMarks(n),performance.clearMeasures(n)}catch(r){this.log(Tt.DEBUG,i,n,r)}break}}}};Ne.level=Tt.VERBOSE;var Pp=(e,t)=>t,Da=(e,t)=>t,fw=(e,t)=>t,m4=(e,t)=>t,ss=re([Ri,Pp],(e,t)=>t?e[t]:null),g4=re([vt,Da],(e,t)=>t?e[t]:null),v4=re([vt,Da],(e,t)=>{if(!t)return null;let i=e[t];return(i==null?void 0:i.type)==="video"?i:null});re([vt,Da],(e,t)=>{if(!t)return null;let i=e[t];return(i==null?void 0:i.type)==="audio"?i:null});re([vt,Da],(e,t)=>{if(!t)return null;let i=e[t];return(i==null?void 0:i.type)==="audio"&&(i==null?void 0:i.source)==="screen"?i:null});re([vt,Da],(e,t)=>{if(!t)return null;let i=e[t];return(i==null?void 0:i.type)==="video"&&(i==null?void 0:i.source)==="screen"?i:null});var Kn=oi(ss);oi(re([i4,m4],(e,t)=>{if(e)return t?e[t]:e}));oi(re(ss,e=>e==null?void 0:e.name));var pw=oi(g4),y4=oi(v4),b4=oi((e,t)=>{let i=ss(e,t);if(i&&i.audioTrack&&i.audioTrack!=="")return e.tracks[i.audioTrack]}),mw=(e,t)=>t?e.speakers[t]:null;oi(re(mw,e=>(e==null?void 0:e.audioLevel)||0));var E4=(e,t)=>{let i=b4(t)(e);return mw(e,i==null?void 0:i.id)};oi(re(E4,e=>(e==null?void 0:e.audioLevel)||0));oi(re(vt,ss,(e,t)=>{let i=t==null?void 0:t.auxiliaryTracks.find(n=>{let r=e[n];return kp(r)&&Sp(r)});return i?e[i]:void 0}));oi(re(vt,ss,(e,t)=>{let i=t==null?void 0:t.auxiliaryTracks.find(n=>{let r=e[n];return kp(r)&&wp(r)});return i?e[i]:void 0}));oi(re(vt,ss,(e,t)=>{let i=t==null?void 0:t.auxiliaryTracks.find(n=>{let r=e[n];return iw(r)&&wp(r)});return i?e[i]:void 0}));var T4=oi(re(vt,ss,(e,t)=>Oa(e,t))),_4=e=>re(T4(e),t=>t.video),w4=re([Cp,ea,Pp],(e,t,i)=>{if(i)return e.filter(n=>{var r;return!n.recipientPeer&&!((r=n.recipientRoles)!=null&&r.length)||n.sender&&![t,i].includes(n.sender)?!1:[t,i].includes(n.recipientPeer)})}),S4=re([Cp,fw],(e,t)=>{if(t)return e.filter(i=>{var n,r;return(n=i.recipientRoles)!=null&&n.length?(r=i.recipientRoles)==null?void 0:r.includes(t):!1})}),k4=re(Cp,e=>e.filter(t=>{var i;return!t.recipientPeer&&!((i=t.recipientRoles)!=null&&i.length)}));re([S4,fw],e=>e?e.filter(t=>!t.read).length:0);re([w4,Pp],e=>e?e.filter(t=>!t.read).length:0);re(k4,e=>e.filter(t=>!t.read).length);re([Ri,vt],(e,t)=>Object.values(e).map(i=>{var n;return{peer:i,isAudioEnabled:i.audioTrack?(n=t[i.audioTrack])==null?void 0:n.enabled:!1}}));var C4=e=>e.roleChangeRequests[0]||null;re([C4,Ri,so],(e,t,i)=>e?{requestedBy:e.requestedBy?t[e.requestedBy]:void 0,role:i[e.roleName],token:e.token}:null);re([Ap],e=>nw(e));re([d4],e=>nw(e));re([tn,vt],(e,t)=>{let i=null;return e&&(i=t[e]),(i==null?void 0:i.plugins)||[]});re([Sn,vt],(e,t)=>{let i=null;return e&&(i=t[e]),(i==null?void 0:i.plugins)||[]});var hd="hmsNotification",A4=class{constructor(e){this.id=0,this.onNotification=(t,i)=>{let n=r=>{if(i){let s;if(Array.isArray(i)?s=i.includes(r.type):s=i===r.type,!s)return}t(r)};return this.eventEmitter.addListener(hd,n),()=>{this.eventEmitter.removeListener(hd,n)}},this.store=e,this.eventEmitter=new Pa.exports.EventEmitter2({maxListeners:Object.keys(st).length})}sendPlaylistTrackEnded(e){let t=this.createNotification(st.PLAYLIST_TRACK_ENDED,e,Kt.INFO);this.emitEvent(t)}sendDeviceChange(e){var t;let i=this.createNotification(st.DEVICE_CHANGE_UPDATE,e,e.error?Kt.ERROR:Kt.INFO,`Selected ${e.type} device - ${(t=e.selection)==null?void 0:t.label}`);this.emitEvent(i)}sendLeaveRoom(e){var t;let i=(t=e.requestedBy)==null?void 0:t.name,n=this.createNotification(e.roomEnded||!i?st.ROOM_ENDED:st.REMOVED_FROM_ROOM,e,Kt.INFO,`${e.roomEnded?"Room ended":"Removed from room"} ${i?`by ${i}`:""}`);this.emitEvent(n)}sendPeerList(e){let t=this.createNotification(st.PEER_LIST,e,Kt.INFO);this.emitEvent(t)}sendPeerUpdate(e,t){let i=this.store.getState(Kn(t==null?void 0:t.id))||t,n=ew[e];if(n){let r=this.createNotification(n,i,Kt.INFO);this.emitEvent(r)}}sendTrackUpdate(e,t){let i=this.store.getState(pw(t)),n=tw[e];if(n){let r=this.createNotification(n,i,Kt.INFO);this.emitEvent(r)}}sendMessageReceived(e){let t=this.createNotification(st.NEW_MESSAGE,e,Kt.INFO);this.emitEvent(t)}sendError(e){let t=this.createNotification(st.ERROR,e,Kt.ERROR);this.emitEvent(t)}sendReconnecting(e){let t=this.createNotification(st.RECONNECTING,e,Kt.ERROR);this.emitEvent(t)}sendReconnected(){let e=this.createNotification(st.RECONNECTED,null,Kt.INFO);this.emitEvent(e)}sendChangeTrackStateRequest(e){let t=this.createNotification(st.CHANGE_TRACK_STATE_REQUEST,e,Kt.INFO);this.emitEvent(t)}sendChangeMultiTrackStateRequest(e){let t=this.createNotification(st.CHANGE_MULTI_TRACK_STATE_REQUEST,e,Kt.INFO);this.emitEvent(t)}emitEvent(e){this.eventEmitter.emit(hd,e)}createNotification(e,t,i,n=""){return this.id++,{id:this.id,type:e,message:n,data:t,severity:i}}};function R4(e){return e instanceof Ia||e instanceof Vi}var P4=(e,t)=>{let i=Gc(Object.keys(e),Object.keys(t));for(let n of i){let r=e[n],s=t[n];Ip(r,s)?(or(r.auxiliaryTracks,s.auxiliaryTracks)&&(s.auxiliaryTracks=r.auxiliaryTracks),Object.assign(r,s)):Op(r,s)?delete e[n]:Dp(r,s)&&(e[n]=s)}},I4=(e,t)=>{let i=Gc(Object.keys(e),Object.keys(t));for(let n of i){let r=e[n],s=t[n];Ip(r,s)?(D4(r,s),Object.assign(r,s)):Op(r,s)?delete e[n]:Dp(r,s)&&(e[n]=s)}},cb=(e,t)=>{let i=Gc(Object.keys(e),Object.keys(t));for(let n of i){let r=e[n],s=t[n];Ip(r,s)?Object.assign(r,s):Op(r,s)?delete e[n]:Dp(r,s)&&(e[n]=s)}},O4=(e,t,i)=>{let n=i.reduce((s,o)=>(s[o.firstTrackId]=Object.values(t[o.getTrackIDBeingSent()]||{}).sort((a,l)=>!a.rid||!l.rid?0:a.rid<l.rid?-1:1),s),{}),r=Gc(Object.keys(e),Object.keys(n));for(let s of r){if(!n[s]){delete e[s];continue}e[s]=n[s]}},D4=(e,t)=>{e.plugins&&or(e.plugins,t.plugins)&&(t.plugins=e.plugins),e.type==="video"&&e.layerDefinitions&&or(e.layerDefinitions,t.layerDefinitions)&&(t.layerDefinitions=e.layerDefinitions)},Ip=(e,t)=>e&&t,Op=(e,t)=>e&&!t,Dp=(e,t)=>!e&&t,or=(e,t)=>{if(e===t||e.length===0&&(t==null?void 0:t.length)===0)return!0;if(!e||!t||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},Gc=(e,t)=>{let i=new Set;for(let n of e)i.add(n);for(let n of t)i.add(n);return Array.from(i)},rt=class{static convertPeer(e){var t,i,n;return{id:e.peerId,name:e.name,roleName:(t=e.role)==null?void 0:t.name,isLocal:e.isLocal,videoTrack:(i=e.videoTrack)==null?void 0:i.trackId,audioTrack:(n=e.audioTrack)==null?void 0:n.trackId,auxiliaryTracks:e.auxiliaryTracks.map(r=>r.trackId),customerUserId:e.customerUserId,metadata:e.metadata,joinedAt:e.joinedAt}}static convertTrack(e,t){let i={id:e.trackId,source:e.source,type:e.type,enabled:e.enabled,displayEnabled:e.enabled,peerId:e.peerId||t};return this.enrichTrack(i,e),i}static enrichTrack(e,t){let i=t.getMediaTrackSettings();t instanceof Ia&&(e.volume=t.getVolume()||0),rt.updateDeviceID(e,t),rt.enrichLocalTrack(e,t),e.type==="video"&&(e.source==="screen"?(e.displaySurface=i.displaySurface,rt.enrichScreenTrack(e,t)):e.source==="regular"&&(e.facingMode=i.facingMode),e.height=i.height,e.width=i.width,rt.enrichVideoTrack(e,t)),rt.enrichPluginsDetails(e,t)}static enrichLocalTrack(e,t){(t instanceof Li||t instanceof $s)&&(e.isPublished=t.isPublished)}static updateDeviceID(e,t){var i;t instanceof Li||t instanceof $s?e.deviceID=t.settings.deviceId:e.deviceID=(i=t.getMediaTrackSettings())==null?void 0:i.deviceId}static enrichVideoTrack(e,t){t instanceof Vi&&(e.layer=t.getLayer(),e.preferredLayer=t.getPreferredLayer(),e.degraded=t.degraded),(t instanceof Vi||t instanceof Li)&&(or(t.getSimulcastDefinitions(),e.layerDefinitions)||(e.layerDefinitions=t.getSimulcastDefinitions()))}static enrichScreenTrack(e,t){var i,n;if(t instanceof Li){let r=(i=t.getCaptureHandle)==null?void 0:i.call(t);(r==null?void 0:r.handle)!==((n=e.captureHandle)==null?void 0:n.handle)&&(e.captureHandle=r),t.isCurrentTab&&(e.displaySurface="selfBrowser")}}static enrichPluginsDetails(e,t){(t instanceof Li||t instanceof $s)&&(or(t.getPlugins(),e.plugins)||(e.plugins=t.getPlugins()))}static convertRoom(e){var t,i;let{recording:n,rtmp:r,hls:s}=rt.convertRecordingStreamingState(e==null?void 0:e.recording,e==null?void 0:e.rtmp,e==null?void 0:e.hls);return{id:e.id,name:e.name,localPeer:(i=(t=e.localPeer)==null?void 0:t.peerId)!=null?i:"",recording:n,rtmp:r,hls:s,sessionId:e.sessionId,startedAt:e.startedAt,joinedAt:e.joinedAt,peerCount:e.peerCount}}static convertMessage(e){var t,i,n,r,s,o,a;return{sender:(t=e.sender)==null?void 0:t.peerId,senderName:(i=e.sender)==null?void 0:i.name,senderRole:(r=(n=e.sender)==null?void 0:n.role)==null?void 0:r.name,senderUserId:(s=e.sender)==null?void 0:s.customerUserId,recipientPeer:(o=e.recipientPeer)==null?void 0:o.peerId,recipientRoles:(a=e.recipientRoles)==null?void 0:a.map(l=>l.name),time:e.time,type:e.type,message:e.message}}static convertRoles(e){let t={};return e&&e.forEach(i=>{t[i.name]=i}),t}static convertRoleChangeRequest(e){var t;return{requestedBy:(t=e.requestedBy)==null?void 0:t.peerId,roleName:e.role.name,token:e.token}}static convertException(e){return{code:e.code,action:e.action,name:e.name,message:e.message,description:e.description,isTerminal:e.isTerminal,nativeError:e.nativeError,timestamp:new Date}}static convertDeviceChangeUpdate(e){let t={devices:e.devices,selection:e.selection,type:e.type};return e.error&&(t.error=this.convertException(e.error)),t}static convertPlaylist(e){let t=this.getConvertedPlaylistType(e,tt.audio),i=this.getConvertedPlaylistType(e,tt.video);return{audio:t,video:i}}static convertPlaylistItem(e,t){let i=t.type,n=e.getCurrentSelection(i),r=e.isPlaying(i),s=t.url===(n==null?void 0:n.url);return _p(Lr({},t),{type:t.type,selected:s,playing:s&&r})}static getConvertedPlaylistType(e,t){let i={},n=e.getCurrentSelection(t),r=e.getCurrentProgress(t),s=e.getVolume(t),o=e.getList(t),a=e.getCurrentIndex(t);return e.getList(t).forEach(l=>{i[l.id]=rt.convertPlaylistItem(e,l)}),{list:i,selection:{id:n==null?void 0:n.id,hasPrevious:a>0,hasNext:a<o.length-1},progress:r,volume:s,currentTime:e.getCurrentTime(t),playbackRate:e.getPlaybackRate(t)}}static convertRecordingStreamingState(e,t,i){var n;return{recording:{browser:Lr({running:!1},e==null?void 0:e.browser),server:Lr({running:!1},e==null?void 0:e.server),hls:Lr({running:!1},e==null?void 0:e.hls)},rtmp:Lr({running:!1},t),hls:{variants:((n=i==null?void 0:i.variants)==null?void 0:n.map(r=>r))||[],running:!!(i!=null&&i.running),error:i==null?void 0:i.error}}}},ub=class{constructor(e,t,i,n){this.playlistManager=e,this.syncPlaylistState=i,this.store=n,this.type=t}play(e){return fe(this,null,function*(){if(!e){Ne.w("Please pass id to play");return}yield this.playlistManager.setEnabled(!0,{id:e,type:this.type})})}pause(){return fe(this,null,function*(){let e=this.type===tt.audio?f4:p4,t=this.store.getState(e.selection);if(!t.id){Ne.w("No item is currently playing to pause");return}yield this.playlistManager.setEnabled(!1,{id:t.id,type:this.type})})}playNext(){return fe(this,null,function*(){yield this.playlistManager.playNext(this.type)})}playPrevious(){return fe(this,null,function*(){yield this.playlistManager.playPrevious(this.type)})}seek(e){this.playlistManager.seek(e,this.type),this.syncPlaylistState(`seekOn${this.type}Playlist`)}seekTo(e){this.playlistManager.seekTo(e,this.type),this.syncPlaylistState(`seekToOn${this.type}Playlist`)}setVolume(e){this.playlistManager.setVolume(e,this.type),this.syncPlaylistState(`setVolumeOn${this.type}Playlist`)}setList(e){this.playlistManager.setList(e),this.syncPlaylistState(`setListOn${this.type}Playlist`)}stop(){return fe(this,null,function*(){yield this.playlistManager.stop(this.type),this.syncPlaylistState(`stop${this.type}Playlist`)})}setIsAutoplayOn(e){this.playlistManager.setIsAutoplayOn(this.type,e)}setPlaybackRate(e){this.playlistManager.setPlaybackRate(this.type,e),this.syncPlaylistState(`set${this.type}PlaybackRate`)}removeItem(e){return fe(this,null,function*(){let t=yield this.playlistManager.removeItem(e,this.type);return t&&this.syncPlaylistState(`remove${this.type}PlaylistItem`),t})}clearList(){return fe(this,null,function*(){yield this.playlistManager.clearList(this.type),this.syncPlaylistState(`clear${this.type}Playlist`)})}},N4=class{constructor(e,t){this.sdk=e,this.setLocally=t}get sdkSessionStore(){return this.sdk.getSessionStore()}set(e,t){return fe(this,null,function*(){let{value:i}=yield this.sdkSessionStore.set(String(e),t);this.setLocally({key:e,value:i})})}observe(e){return fe(this,null,function*(){let t=Array.isArray(e)?e.map(i=>String(i)):[String(e)];yield this.sdkSessionStore.observe(t)})}unobserve(e){return fe(this,null,function*(){let t=Array.isArray(e)?e.map(i=>String(i)):[String(e)];yield this.sdkSessionStore.unobserve(t)})}},L4=class{constructor(e,t){this.intervalMs=100,this.shouldMonitor=!1,this.hasStarted=!1,this.unsubs=[],this.analysers={},this.store=e,this.actions=t}start(){return fe(this,null,function*(){if(this.hasStarted)return;this.hasStarted=!0,Ne.d("starting audio level monitor for remote peers",this.store);let e=this.store.getState(Us);Ne.d("starting audio levels is connected to room",e),e&&(yield this.monitorAudioLevels());let t=this.store.subscribe(this.monitorAudioLevels.bind(this),Us);this.unsubs.push(t)})}stop(){return fe(this,null,function*(){!this.hasStarted||(this.hasStarted=!1,this.shouldMonitor=!1,this.unsubs.forEach(e=>e()),Ne.d("stopped audio level monitor for remote peers"))})}monitorAudioLevels(){return fe(this,null,function*(){if(!this.store.getState(Us)){this.shouldMonitor&&(Ne.i("room no longer connected, stopping audio level monitoring for remote"),this.shouldMonitor=!1);return}if(this.shouldMonitor)return;Ne.i("monitoring audio levels"),this.shouldMonitor=!0;let e=()=>{this.shouldMonitor?(this.logAllPeersAudioLevels(),setTimeout(e,this.intervalMs)):Ne.i("stopped monitoring audio levels")};setTimeout(e,1e3)})}logAllPeersAudioLevels(){return fe(this,null,function*(){var e;if(!window.__triggerBeamEvent__)return;let t=this.store.getState(cc).filter(n=>!!n.audioTrack),i=[];for(let n of t){let r=this.actions.hmsSDKTracks[n.audioTrack],s=(e=r==null?void 0:r.stream)==null?void 0:e.nativeStream;if(!!n.joinedAt&&s){let o=yield this.getAudioLevel(n,s);o.level>0&&i.push(o)}}if(i.length>0){let n={event:"app-audio-level",data:i};window.__triggerBeamEvent__(JSON.stringify(n))}})}getAudioLevel(e,t){return fe(this,null,function*(){this.analysers[t.id]||(this.analysers[t.id]=this.createAnalyserNode(t));let i=this.analysers[t.id],n=this.calculateAudioLevel(i);return{peerId:e.id,peerName:e.name,level:n}})}createAnalyserNode(e){this.audioContext||(this.audioContext=new AudioContext);let t=this.audioContext.createAnalyser();return this.audioContext.createMediaStreamSource(e).connect(t),t}calculateAudioLevel(e){let t=new Uint8Array(e.fftSize);e.getByteTimeDomainData(t);let i=.009,n=i;for(let s of t)n=Math.max(n,(s-128)/128);let r=(Math.log(i)-Math.log(n))/Math.log(i);return Math.ceil(Math.min(Math.max(r*100,0),100))}},x4=class{constructor(e,t,i){this.hmsSDKTracks={},this.hmsSDKPeers={},this.isRoomJoinCalled=!1,this.ignoredMessageTypes=[],this.setProgress=({type:n,progress:r})=>{this.setState(s=>{s.playlist[n].progress=r,s.playlist[n].currentTime=this.sdk.getPlaylistManager().getCurrentTime(n)},"playlistProgress")},this.syncPlaylistState=n=>{this.setState(r=>{Object.assign(r.playlist,rt.convertPlaylist(this.sdk.getPlaylistManager()))},n)},this.sendPeerUpdateNotification=(n,r)=>{let s=this.store.getState(Kn(r.peerId)),o=ew[n]||"peerUpdate";this.syncRoomState(o),s||(s=this.store.getState(Kn(r.peerId))),this.hmsNotifications.sendPeerUpdate(n,s)},this.setState=(n,r)=>this.store.namedSetState(n,r),this.store=e,this.sdk=t,this.hmsNotifications=i,this.sessionStore=new N4(this.sdk,this.setSessionStoreValueLocally.bind(this))}refreshDevices(){return fe(this,null,function*(){yield this.sdk.refreshDevices()})}unblockAudio(){return fe(this,null,function*(){yield this.sdk.getAudioOutput().unblockAutoplay()})}setVolume(e,t){return fe(this,null,function*(){t?yield this.setTrackVolume(e,t):(yield this.sdk.getAudioOutput().setVolume(e),this.syncRoomState("setOutputVolume"))})}setAudioOutputDevice(e){return fe(this,null,function*(){(yield this.sdk.getAudioOutput().setDevice(e))&&this.setState(t=>{t.settings.audioOutputDeviceId=e},"setAudioOutputDevice")})}setPreferredLayer(e,t){return fe(this,null,function*(){var i;let n=this.hmsSDKTracks[e];if(n)if(n instanceof Vi){if(t===St.NONE){Ne.d(`layer ${St.NONE} will be ignored`);return}if(((i=this.store.getState(y4(e)))==null?void 0:i.preferredLayer)===t){Ne.d(`preferred layer is already ${t}`);return}this.setState(r=>{let s=r.tracks[e];s&&(s.preferredLayer=t)},"setPreferredLayer"),yield n.setPreferredLayer(t)}else Ne.d(`track ${e} is not a remote video track`);else this.logPossibleInconsistency(`track ${e} not present, unable to set preffer layer`)})}getAuthTokenByRoomCode(e,t){return this.sdk.getAuthTokenByRoomCode(e,t)}preview(e){return fe(this,null,function*(){if(this.isRoomJoinCalled){this.logPossibleInconsistency("attempting to call preview after join was called");return}let t=this.store.getState(rn);if(t===ht.Preview||t===ht.Connecting){this.logPossibleInconsistency("attempting to call preview while room is in preview/connecting");return}try{this.setState(i=>{i.room.roomState=ht.Connecting},"connecting"),yield this.sdkPreviewWithListeners(e)}catch(i){throw Ne.e("Cannot show preview. Failed to connect to room - ",i),i}})}join(e){return fe(this,null,function*(){if(this.isRoomJoinCalled){this.logPossibleInconsistency("room join is called again");return}try{this.isRoomJoinCalled=!0,this.setState(t=>{t.room.roomState=ht.Connecting},"join"),yield this.sdkJoinWithListeners(e)}catch(t){throw this.isRoomJoinCalled=!1,Ne.e("Failed to connect to room - ",t),t}})}leave(){return fe(this,null,function*(){let e=this.store.getState(Us),t=!0;e||(t=!1,this.logPossibleInconsistency("room leave is called when no room is connected"));let i=this.store.getState(rn);return this.setState(n=>{n.room.roomState=ht.Disconnecting},"leaving"),this.sdk.leave(t).then(()=>{this.resetState("leave"),this.beamSpeakerLabelsLogger&&this.beamSpeakerLabelsLogger.stop().catch(Ne.e),Ne.i("left room")}).catch(n=>{Ne.e("error in leaving room - ",n),this.setState(r=>{r.room.roomState=i},"revertLeave")})})}setScreenShareEnabled(e,t){return fe(this,null,function*(){typeof t=="boolean"&&(t={audioOnly:t});try{e?yield this.startScreenShare(t):yield this.stopScreenShare()}catch(i){throw this.hmsNotifications.sendError(rt.convertException(i)),i}})}addTrack(e,t="regular"){return fe(this,null,function*(){yield this.sdk.addTrack(e,t),this.syncRoomState("addTrack")})}removeTrack(e){return fe(this,null,function*(){yield this.sdk.removeTrack(e),this.syncRoomState("removeTrack")})}setLocalAudioEnabled(e){return fe(this,null,function*(){let t=this.store.getState(Sn);t&&(yield this.setEnabledTrack(t,e))})}setLocalVideoEnabled(e){return fe(this,null,function*(){let t=this.store.getState(tn);t&&(yield this.setEnabledTrack(t,e))})}setEnabledTrack(e,t){return fe(this,null,function*(){var i;if(((i=this.store.getState().tracks[e])==null?void 0:i.enabled)===t){this.logPossibleInconsistency(`local track[${e}] enabled state - ${t}`);return}this.setState(r=>{r.tracks[e]?r.tracks[e].displayEnabled=t:this.logPossibleInconsistency("track id not found for setEnabled")},"displayEnabled");try{yield this.setEnabledSDKTrack(e,t),this.syncRoomState("setEnabled")}catch(r){throw this.setState(s=>{s.tracks[e].displayEnabled=!t},"rollbackDisplayEnabled"),this.hmsNotifications.sendError(rt.convertException(r)),r}let n=t?Ye.TRACK_UNMUTED:Ye.TRACK_MUTED;this.hmsNotifications.sendTrackUpdate(n,e)})}setAudioSettings(e){return fe(this,null,function*(){let t=this.store.getState(Sn);t&&(yield this.setSDKLocalAudioTrackSettings(t,e),this.syncRoomState("setAudioSettings"))})}setVideoSettings(e){return fe(this,null,function*(){let t=this.store.getState(tn);t&&(yield this.setSDKLocalVideoTrackSettings(t,e),this.syncRoomState("setVideoSettings"))})}switchCamera(){return fe(this,null,function*(){let e=this.store.getState(tn);if(e){let t=this.hmsSDKTracks[e];t&&(yield t.switchCamera(),this.syncRoomState("switchCamera"))}})}sendMessage(e){this.sendBroadcastMessage(e)}sendBroadcastMessage(e,t){return fe(this,null,function*(){let i=yield this.sdk.sendBroadcastMessage(e,t);this.updateMessageInStore(i,{message:e,type:t})})}sendGroupMessage(e,t,i){return fe(this,null,function*(){let n=this.store.getState(so),r=t.map(o=>n[o]),s=yield this.sdk.sendGroupMessage(e,r,i);this.updateMessageInStore(s,{message:e,recipientRoles:t,type:i})})}sendDirectMessage(e,t,i){return fe(this,null,function*(){let n=this.hmsSDKPeers[t],r=yield this.sdk.sendDirectMessage(e,n,i);this.updateMessageInStore(r,{message:e,recipientPeer:n.peerId,type:i})})}updateMessageInStore(e,t){if(!e)throw Ne.w("sendMessage","Failed to send message",t),Error(`sendMessage Failed - ${JSON.stringify(t)}`);let i=rt.convertMessage(e);return i.read=!0,i.senderName="You",i.ignored=this.ignoredMessageTypes.includes(i.type),this.putMessageInStore(i),i}setMessageRead(e,t){this.setState(i=>{t?i.messages.byID[t]?i.messages.byID[t].read=e:this.logPossibleInconsistency("no message with id is found"):i.messages.allIDs.forEach(n=>{i.messages.byID[n].read=e})},"setMessageRead")}attachVideo(e,t){return fe(this,null,function*(){if(Ne.d(`[HMSSDKAction] attaching the video element ${e} ${t}`),this.localAndVideoUnmuting(e))return new Promise(i=>{let n=this.store.subscribe(r=>fe(this,null,function*(){r&&(yield this.attachVideoInternal(e,t),n(),i())}),ab)});yield this.attachVideoInternal(e,t)})}detachVideo(e,t){return fe(this,null,function*(){Ne.d(`[HMSSDKAction] detaching the video element ${e} ${t}`);let i=this.hmsSDKTracks[e];(i==null?void 0:i.type)==="video"?yield this.sdk.detachVideo(i,t):(t&&(t.srcObject=null),Ne.d("possible inconsistency detected - no video track found to remove sink"))})}addPluginToVideoTrack(e,t){return fe(this,null,function*(){return this.addRemoveVideoPlugin(e,"add",t)})}addPluginToAudioTrack(e){return fe(this,null,function*(){return this.addRemoveAudioPlugin(e,"add")})}validateVideoPluginSupport(e){let t={};if(t.isSupported=!1,!e)return Ne.w("no plugin passed in for checking support"),t.errMsg="no plugin passed in for checking support",t;let i=this.store.getState(tn);if(!i)return Ne.w("video Track not added to local peer yet"),t.errMsg="call this function only after local peer has video track",t;let n=this.hmsSDKTracks[i];return n?t=n.validatePlugin(e):(Ne.w(`track ${i} not present, unable to validate plugin`),t.errMsg=`track ${i} not present, unable to validate plugin`),t}validateAudioPluginSupport(e){let t={};if(t.isSupported=!1,!e)return Ne.w('no plugin passed in for checking support"'),t.errMsg='no plugin passed in for checking support"',t;let i=this.store.getState(Sn);if(!i)return Ne.w("audio track not added to local peer yet"),t.errMsg="call this function only after local peer has audio track",t;let n=this.hmsSDKTracks[i];return n?t=n.validatePlugin(e):(Ne.w(`track ${i} not present, unable to validate plugin`),t.errMsg=`track ${i} not present, unable to validate plugin`),t}removePluginFromVideoTrack(e){return fe(this,null,function*(){return this.addRemoveVideoPlugin(e,"remove")})}removePluginFromAudioTrack(e){return fe(this,null,function*(){return this.addRemoveAudioPlugin(e,"remove")})}changeRole(e,t,i=!1){return fe(this,null,function*(){let n=this.hmsSDKPeers[e];if(!n){this.logPossibleInconsistency(`Unknown peer ID given ${e} for changerole`);return}yield this.sdk.changeRoleOfPeer(n,t,i)})}changeRoleOfPeer(e,t,i=!1){return fe(this,null,function*(){let n=this.hmsSDKPeers[e];if(!n){this.logPossibleInconsistency(`Unknown peer ID given ${e} for changerole`);return}yield this.sdk.changeRoleOfPeer(n,t,i)})}changeRoleOfPeersWithRoles(e,t){return fe(this,null,function*(){let i=this.sdk.getRoles().filter(n=>e.includes(n.name));yield this.sdk.changeRoleOfPeersWithRoles(i,t)})}acceptChangeRole(e){return fe(this,null,function*(){let t=e.requestedBy?this.hmsSDKPeers[e.requestedBy.id]:void 0;t||Ne.w(`peer for which role change is requested no longer available - ${e.requestedBy}`);let i={requestedBy:t,role:e.role,token:e.token};yield this.sdk.acceptChangeRole(i),this.removeRoleChangeRequest(e)})}initAppData(e){this.setState(t=>{t.appData=e},"initAppData")}setAppData(e,t,i){let n=(t==null?void 0:t.constructor.name)==="Object";this.setState(r=>{if(r.appData)i&&n?Object.assign(r.appData[e],t):r.appData[e]=t;else{let s={[e]:t};r.appData=s}},`setAppData-${e}`)}rejectChangeRole(e){this.removeRoleChangeRequest(e)}endRoom(e,t){return fe(this,null,function*(){let i=this.store.getState(h4);if(!(i!=null&&i.endRoom)){Ne.w("You are not allowed to perform this action - endRoom");return}let n=this.store.getState(rn);this.setState(r=>{r.room.roomState=ht.Disconnecting},"endingRoom");try{yield this.sdk.endRoom(e,t),this.resetState("endRoom")}catch(r){Ne.e("error in ending room - ",r),this.setState(s=>{s.room.roomState=n},"revertEndRoom")}})}removePeer(e,t){return fe(this,null,function*(){let i=this.hmsSDKPeers[e];if(i&&!i.isLocal)yield this.sdk.removePeer(i,t);else{this.logPossibleInconsistency(`No remote peer found for peerID - ${e}`);return}})}startRTMPOrRecording(e){return fe(this,null,function*(){yield this.sdk.startRTMPOrRecording(e)})}stopRTMPAndRecording(){return fe(this,null,function*(){yield this.sdk.stopRTMPAndRecording()})}startHLSStreaming(e){return fe(this,null,function*(){yield this.sdk.startHLSStreaming(e)})}stopHLSStreaming(e){return fe(this,null,function*(){yield this.sdk.stopHLSStreaming(e)})}sendHLSTimedMetadata(e){return fe(this,null,function*(){yield this.sdk.sendHLSTimedMetadata(e)})}changeName(e){return fe(this,null,function*(){yield this.sdk.changeName(e)})}changeMetadata(e){return fe(this,null,function*(){typeof e!="string"&&(e=JSON.stringify(e)),yield this.sdk.changeMetadata(e)})}setSessionMetadata(e){return fe(this,null,function*(){yield this.sdk.setSessionMetadata(e),this.setState(t=>{t.sessionMetadata=e},"setSessionMetadata"),this.setSessionStoreValueLocally({key:"default",value:e},"setSessionMetadata")})}populateSessionMetadata(){return fe(this,null,function*(){let e=yield this.sdk.getSessionMetadata();this.setState(t=>{t.sessionMetadata=e},"populateSessionMetadata"),this.setSessionStoreValueLocally({key:"default",value:e},"populateSessionmetadata")})}setRemoteTrackEnabled(e,t){return fe(this,null,function*(){if(typeof e=="string"){let i=this.hmsSDKTracks[e];i&&R4(i)?yield this.sdk.changeTrackState(i,t):this.logPossibleInconsistency(`No remote track with ID ${e} found for change track state`)}else Array.isArray(e)&&e.forEach(i=>this.setRemoteTrackEnabled(i,t))})}setRemoteTracksEnabled(e){return fe(this,null,function*(){let t={enabled:e.enabled,type:e.type,source:e.source};if(e.roles){let i=this.store.getState(so);t.roles=e.roles.map(n=>i[n])}yield this.sdk.changeMultiTrackState(t)})}setLogLevel(e){Ne.level=e,this.sdk.setLogLevel(e)}setFrameworkInfo(e){this.sdk.setFrameworkInfo(e)}ignoreMessageTypes(e,t=!1){if(t)this.ignoredMessageTypes=e;else for(let i of e)this.ignoredMessageTypes.includes(i)||this.ignoredMessageTypes.push(i)}enableBeamSpeakerLabelsLogging(){return fe(this,null,function*(){this.beamSpeakerLabelsLogger||(Ne.i("enabling beam speaker labels logging"),this.beamSpeakerLabelsLogger=new L4(this.store,this),yield this.beamSpeakerLabelsLogger.start())})}resetState(e="resetState"){this.isRoomJoinCalled=!1,this.hmsSDKTracks={},Ne.cleanUp(),this.setState(t=>{Object.assign(t,Z0())},e)}sdkJoinWithListeners(e){return fe(this,null,function*(){yield this.sdk.join(e,{onJoin:this.onJoin.bind(this),onRoomUpdate:this.onRoomUpdate.bind(this),onPeerUpdate:this.onPeerUpdate.bind(this),onTrackUpdate:this.onTrackUpdate.bind(this),onMessageReceived:this.onMessageReceived.bind(this),onError:this.onError.bind(this),onReconnected:this.onReconnected.bind(this),onReconnecting:this.onReconnecting.bind(this),onRoleChangeRequest:this.onRoleChangeRequest.bind(this),onRoleUpdate:this.onRoleUpdate.bind(this),onDeviceChange:this.onDeviceChange.bind(this),onChangeTrackStateRequest:this.onChangeTrackStateRequest.bind(this),onChangeMultiTrackStateRequest:this.onChangeMultiTrackStateRequest.bind(this),onRemovedFromRoom:this.onRemovedFromRoom.bind(this),onNetworkQuality:this.onNetworkQuality.bind(this),onSessionStoreUpdate:this.onSessionStoreUpdate.bind(this)}),this.sdk.addAudioListener({onAudioLevelUpdate:this.onAudioLevelUpdate.bind(this)}),this.sdk.addConnectionQualityListener({onConnectionQualityUpdate:this.onConnectionQualityUpdate.bind(this)})})}onRemovedFromRoom(e){var t;let i=this.store.getState(Kn((t=e.requestedBy)==null?void 0:t.peerId));this.hmsNotifications.sendLeaveRoom(_p(Lr({},e),{requestedBy:i||void 0}));let n=e.roomEnded||!i?"roomEnded":"removedFromRoom";Ne.i(`resetting state after peer removed ${n}`,e),this.resetState(n)}onDeviceChange(e){let t=e.devices;if(!t)return;let i=this.store.getState(Hi);if(this.setState(n=>{or(n.devices.audioInput,t.audioInput)||(n.devices.audioInput=t.audioInput),or(n.devices.videoInput,t.videoInput)||(n.devices.videoInput=t.videoInput),or(n.devices.audioOutput,t.audioOutput)||(n.devices.audioOutput=t.audioOutput),(i==null?void 0:i.id)&&this.hmsSDKPeers[i.id]&&Object.assign(n.settings,this.getMediaSettings(this.hmsSDKPeers[i.id]))},"deviceChange"),e.selection){let n=rt.convertDeviceChangeUpdate(e);this.hmsNotifications.sendDeviceChange(n)}}sdkPreviewWithListeners(e){return fe(this,null,function*(){yield this.sdk.preview(e,{onPreview:this.onPreview.bind(this),onError:this.onError.bind(this),onReconnected:this.onReconnected.bind(this),onReconnecting:this.onReconnecting.bind(this),onDeviceChange:this.onDeviceChange.bind(this),onRoomUpdate:this.onRoomUpdate.bind(this),onPeerUpdate:this.onPeerUpdate.bind(this),onNetworkQuality:this.onNetworkQuality.bind(this)}),this.sdk.addAudioListener({onAudioLevelUpdate:this.onAudioLevelUpdate.bind(this)})})}onNetworkQuality(e){this.setState(t=>{var i;let n=t.room.localPeer||((i=this.sdk.getLocalPeer())==null?void 0:i.peerId);n&&(t.connectionQualities[n]={peerID:n,downlinkQuality:e})},"ConnectionQuality")}onSessionStoreUpdate(e){this.setSessionStoreValueLocally(e,"sessionStoreUpdate")}startScreenShare(e){return fe(this,null,function*(){this.store.getState(lb)?this.logPossibleInconsistency("start screenshare is called while it's on"):(yield this.sdk.startScreenShare(()=>this.syncRoomState("screenshareStopped"),e),this.syncRoomState("startScreenShare"))})}stopScreenShare(){return fe(this,null,function*(){this.store.getState(lb)?(yield this.sdk.stopScreenShare(),this.syncRoomState("stopScreenShare")):this.logPossibleInconsistency("stop screenshare is called while it's not on")})}attachVideoInternal(e,t){return fe(this,null,function*(){let i=this.hmsSDKTracks[e];i&&i.type==="video"?yield this.sdk.attachVideo(i,t):this.logPossibleInconsistency("no video track found to add sink")})}syncRoomState(e){e=`${e}_fullSync`,Ne.time(`store-sync-${e}`);let t={},i=[],n={},r={},s={},o,a=this.sdk.getPeers();for(let d of a){let h=rt.convertPeer(d);t[h.id]=h,i.push(h.id),this.hmsSDKPeers[h.id]=d;let m=[d.audioTrack,d.videoTrack,...d.auxiliaryTracks];for(let v of m){if(!v)continue;let y=rt.convertTrack(v);n[y.id]=y,r[v.trackId]=v}if(d.isLocal){let v=d;o=this.getPreviewFields(v),Object.assign(s,this.getMediaSettings(v))}}let l=this.sdk.getRecordingState(),c=this.sdk.getRTMPState(),u=this.sdk.getHLSState();this.setState(d=>{var h;d.room.peers=i;let m=d.peers,v=d.tracks;P4(m,t),I4(v,n),Object.assign(d.settings,s),this.hmsSDKTracks=r,((h=d.preview)==null?void 0:h.localPeer)&&(o==null?void 0:o.localPeer)?Object.assign(d.preview,o):d.preview=o,Object.assign(d.roles,rt.convertRoles(this.sdk.getRoles())),Object.assign(d.playlist,rt.convertPlaylist(this.sdk.getPlaylistManager())),Object.assign(d.room,rt.convertRecordingStreamingState(l,c,u)),Object.assign(d.templateAppData,this.sdk.getTemplateAppData())},e),Ne.timeEnd(`store-sync-${e}`)}onPreview(e){this.setState(t=>{Object.assign(t.room,rt.convertRoom(e)),t.room.roomState=ht.Preview},"previewStart"),this.syncRoomState("previewSync")}onJoin(e){let t=this.sdk.getPlaylistManager();this.audioPlaylist=new ub(t,tt.audio,this.syncPlaylistState.bind(this),this.store),this.videoPlaylist=new ub(t,tt.video,this.syncRoomState.bind(this),this.store),this.syncRoomState("joinSync"),this.setState(i=>{Object.assign(i.room,rt.convertRoom(e)),i.room.isConnected=!0,i.room.roomState=ht.Connected},"joined"),t.onProgress(this.setProgress),t.onNewTrackStart(i=>{this.syncPlaylistState(`${i.type}PlaylistUpdate`)}),t.onPlaylistEnded(i=>{this.syncPlaylistState(`${i}PlaylistEnded`)}),t.onCurrentTrackEnded(i=>{this.hmsNotifications.sendPlaylistTrackEnded(rt.convertPlaylistItem(t,i)),this.syncPlaylistState(`${i.type}PlaylistItemEnded`)})}onRoomUpdate(e,t){this.setState(i=>{Object.assign(i.room,rt.convertRoom(t))},e)}onPeerUpdate(e,t){if(![yt.BECAME_DOMINANT_SPEAKER,yt.RESIGNED_DOMINANT_SPEAKER].includes(e)){if(Array.isArray(t)){let i=this.store.getState(Ri),n=t.filter(r=>!i[r.peerId]);if(this.syncRoomState("peersJoined"),this.store.getState(Us)){let r=[];for(let s of t){let o=this.store.getState(Kn(s.peerId));o&&r.push(o)}this.hmsNotifications.sendPeerList(r)}else n.forEach(r=>{let s=this.store.getState(Kn(r.peerId));s&&this.hmsNotifications.sendPeerUpdate(yt.PEER_JOINED,s)});return}this.sendPeerUpdateNotification(e,t)}}onTrackUpdate(e,t,i){if(e===Ye.TRACK_REMOVED)this.hmsNotifications.sendTrackUpdate(e,t.trackId),this.handleTrackRemove(t,i);else{let n=tw[e]||"trackUpdate";this.syncRoomState(n),this.hmsNotifications.sendTrackUpdate(e,t.trackId)}}onMessageReceived(e){let t=rt.convertMessage(e);t.read=!1,t.ignored=this.ignoredMessageTypes.includes(t.type),this.putMessageInStore(t),this.hmsNotifications.sendMessageReceived(t)}putMessageInStore(e){e.ignored||this.setState(t=>{e.id=String(this.store.getState(c4)+1),t.messages.byID[e.id]=e,t.messages.allIDs.push(e.id)},"newMessage")}onAudioLevelUpdate(e){this.setState(t=>{let i={};e.forEach(r=>{if(!r.track||!r.peer)return;let s=r.track.trackId;i[s]=r.audioLevel,t.speakers[s]||(t.speakers[s]={audioLevel:r.audioLevel,peerID:r.peer.peerId,trackID:s})});let n=Object.entries(t.speakers);for(let[r,s]of n)s.audioLevel=i[r]||0,s.audioLevel===0&&delete t.speakers[r]},"audioLevel")}onConnectionQualityUpdate(e){this.setState(t=>{let i=new Set;e.forEach(r=>{let s=r.peerID;!s||(i.add(s),t.connectionQualities[s]?Object.assign(t.connectionQualities[s],r):t.connectionQualities[s]=r)});let n=Object.keys(t.connectionQualities);for(let r of n)i.has(r)||delete t.connectionQualities[r]},"connectionQuality")}onChangeTrackStateRequest(e){var t;let i=this.store.getState(Kn((t=e.requestedBy)==null?void 0:t.peerId)),n=this.getStoreLocalTrackIDfromSDKTrack(e.track),r=this.store.getState(pw(n));if(!r)return this.logPossibleInconsistency(`Not found track for which track state change was requested, ${e.track}`);e.enabled||this.syncRoomState("changeTrackStateRequest"),this.hmsNotifications.sendChangeTrackStateRequest({requestedBy:i||void 0,track:r,enabled:e.enabled})}onChangeMultiTrackStateRequest(e){var t;let i=this.store.getState(Kn((t=e.requestedBy)==null?void 0:t.peerId));e.enabled||this.syncRoomState("changeMultiTrackStateRequest");let n=[],r=this.store.getState(vt);for(let s of e.tracks){let o=this.getStoreLocalTrackIDfromSDKTrack(s);o&&r[o]&&n.push(r[o])}this.hmsNotifications.sendChangeMultiTrackStateRequest({requestedBy:i||void 0,tracks:n,enabled:e.enabled,type:e.type,source:e.source})}onReconnected(){this.syncRoomState("reconnectedSync"),this.hmsNotifications.sendReconnected(),this.setState(e=>{e.room.roomState=e.room.isConnected?ht.Connected:ht.Preview},"reconnected")}onReconnecting(e){let t=rt.convertException(e);Ne.e("Reconnection: received error from sdk",t),this.hmsNotifications.sendReconnecting(t),this.setState(i=>{i.room.roomState=ht.Reconnecting,i.errors.push(t)},"reconnecting")}onError(e){let t=rt.convertException(e);t.isTerminal?(this.leave().then(()=>Ne.e("error from SDK, left room.")),this.setState(i=>{i.room.roomState=ht.Failed,i.errors.push(t)},"errorTerminal")):this.store.getState().errors.length<50&&this.setState(i=>{i.errors.push(t)},"error"),this.syncRoomState("errorSync"),this.hmsNotifications.sendError(t),Ne.e("received error from sdk",t instanceof Te?`${t}`:t)}handleTrackRemove(e,t){this.setState(i=>{let n=i.peers[t.peerId],r=i.tracks,s=e.trackId;if(this.isSameStoreSDKTrack(s,n==null?void 0:n.audioTrack))n==null||delete n.audioTrack;else if(this.isSameStoreSDKTrack(s,n==null?void 0:n.videoTrack))n==null||delete n.videoTrack;else{let o=n==null?void 0:n.auxiliaryTracks.indexOf(s);o>-1&&this.isSameStoreSDKTrack(s,n==null?void 0:n.auxiliaryTracks[o])&&(n==null||n.auxiliaryTracks.splice(o,1))}delete r[s],delete this.hmsSDKTracks[s]},"trackRemoved")}setEnabledSDKTrack(e,t){return fe(this,null,function*(){let i=this.hmsSDKTracks[e];i?yield i.setEnabled(t):this.logPossibleInconsistency(`track ${e} not present, unable to enabled/disable`)})}setSDKLocalVideoTrackSettings(e,t){return fe(this,null,function*(){let i=this.hmsSDKTracks[e];i?yield i.setSettings(t):this.logPossibleInconsistency(`local track ${e} not present, unable to set settings`)})}setSDKLocalAudioTrackSettings(e,t){return fe(this,null,function*(){let i=this.hmsSDKTracks[e];i?yield i.setSettings(t):this.logPossibleInconsistency(`local track ${e} not present, unable to set settings`)})}getMediaSettings(e){var t;let i=this.store.getState(t4),n=e.audioTrack,r=e.videoTrack;return{audioInputDeviceId:(n==null?void 0:n.settings.deviceId)||i.audioInputDeviceId,videoInputDeviceId:(r==null?void 0:r.settings.deviceId)||i.videoInputDeviceId,audioOutputDeviceId:(t=this.sdk.getAudioOutput().getDevice())==null?void 0:t.deviceId}}getPreviewFields(e){var t,i;if(!e.isInPreview())return;let n=rt.convertPeer(e);return{localPeer:n.id,audioTrack:n.audioTrack,videoTrack:n.videoTrack,asRole:((t=e.asRole)==null?void 0:t.name)||((i=e.role)==null?void 0:i.name)}}setTrackVolume(e,t){return fe(this,null,function*(){let i=this.hmsSDKTracks[t];i?i instanceof yp?(yield i.setVolume(e),this.setState(n=>{let r=n.tracks[t];r&&r.type==="audio"&&(r.volume=e)},"trackVolume")):Ne.w(`track ${t} is not an audio track`):this.logPossibleInconsistency(`track ${t} not present, unable to set volume`)})}localAndVideoUnmuting(e){let t=this.store.getState(Hi);if((t==null?void 0:t.videoTrack)!==e)return!1;let i=this.store.getState(a4),n=this.store.getState(ab);return i&&!n}logPossibleInconsistency(e){Ne.w("possible inconsistency detected - ",e)}addRemoveVideoPlugin(e,t,i){return fe(this,null,function*(){if(!e){Ne.w("Invalid plugin received in store");return}let n=this.store.getState(tn);if(n){let r=this.hmsSDKTracks[n];r?(t==="add"?yield r.addPlugin(e,i):t==="remove"&&(yield r.removePlugin(e)),this.syncRoomState(`${t}VideoPlugin`)):this.logPossibleInconsistency(`track ${n} not present, unable to remove plugin`)}})}addRemoveAudioPlugin(e,t){return fe(this,null,function*(){if(!e){Ne.w("Invalid plugin received in store");return}let i=this.store.getState(Sn);if(i){let n=this.hmsSDKTracks[i];n?(t==="add"?yield n.addPlugin(e):t==="remove"&&(yield n.removePlugin(e)),this.syncRoomState(`${t}AudioPlugin`)):this.logPossibleInconsistency(`track ${i} not present, unable to remove plugin`)}})}isSameStoreSDKTrack(e,t){var i;return t?((i=this.hmsSDKTracks[t])==null?void 0:i.trackId)===e:!1}onRoleChangeRequest(e){this.setState(t=>{t.roleChangeRequests.length===0&&t.roleChangeRequests.push(rt.convertRoleChangeRequest(e))},"roleChangeRequest")}removeRoleChangeRequest(e){this.setState(t=>{let i=t.roleChangeRequests.findIndex(n=>n.token===e.token);i!==-1&&t.roleChangeRequests.splice(i,1)},"removeRoleChangeRequest")}onRoleUpdate(){this.syncRoomState("roleUpdate")}getStoreLocalTrackIDfromSDKTrack(e){return this.store.getState(o4).find(t=>this.hmsSDKTracks[t].trackId===e.trackId)}setSessionStoreValueLocally(e,t="setSessionStore"){let i=Array.isArray(e)?e:[e];this.setState(n=>{i.forEach(r=>{n.sessionStore[r.key]=r.value})},t)}},gw=e=>ki?`${e} ${document.title}`:e,M4=class{constructor(e,t,i){this.store=e,this.actions=t,this.notifications=i}getStore(){return this.store}getActions(){return this.actions}getNotifications(){return{onNotification:this.notifications.onNotification}}},$4=(e,t,i)=>{let n;i.getState(rn)===ht.Connected&&(n=db(e,t,i)),i.subscribe(r=>{[ht.Connected,ht.Reconnecting].includes(r)?n||(n=db(e,t,i)):[ht.Disconnected,ht.Failed].includes(r)&&n&&(F4(t,r),n(),n=void 0)},rn)},db=(e,t,i)=>{var n,r;let s=U4(i,t);(n=e.getWebrtcInternals())==null||n.start();let o=(r=e.getWebrtcInternals())==null?void 0:r.onStatsChange(a=>B4(t,a,i,e));return()=>{s(),o&&o()}},U4=(e,t)=>{let i,n,r;return e.getState(ea)?t.namedSetState(s=>{s.localPeer.id=e.getState(ea)},"localpeer-id"):i=e.subscribe(s=>{s&&t.namedSetState(o=>{o.localPeer.id=s},"localpeer-id")},ea),e.getState(tn)?t.namedSetState(s=>{s.localPeer.videoTrack=e.getState(tn)},"localpeer-videotrack-id"):n=e.subscribe(s=>{s&&t.namedSetState(o=>{o.localPeer.videoTrack=s},"localpeer-videotrack-id")},tn),e.getState(Sn)?t.namedSetState(s=>{s.localPeer.audioTrack=e.getState(Sn)},"localpeer-audiotrack-id"):r=e.subscribe(s=>{s&&t.namedSetState(o=>{o.localPeer.audioTrack=s},"localpeer-audiotrack-id")},Sn),()=>{i==null||i(),n==null||n(),r==null||r()}},B4=(e,t,i,n)=>{let r=i.getState(vt);e.namedSetState(s=>{let o=i.getState(ea),a={},l=Object.keys(r).filter(u=>r[u].peerId!==o);for(let u of l){let d=t.getRemoteTrackStats(u);d&&(a[u]=d)}cb(s.remoteTrackStats,a);let c={[o]:t.getLocalPeerStats()};cb(s.peerStats,c),O4(s.localTrackStats,t.getLocalTrackStats(),n.store.getLocalPeerTracks())},"webrtc-stats")},F4=(e,t="resetState")=>{e.namedSetState(i=>{Object.assign(i,Q0())},t)},j4=class{constructor(e,t){this.hmsStore=e,this.sdk=t,this.store=Yn.createNewHMSStore(gw("HMSStatsStore"),Q0),this.getState=this.store.getState,this.subscribe=this.store.subscribe,this.getPublishPeerConnection=()=>new Promise(i=>{var n,r;this.hmsStore.getState(rn)==="Connected"?i((r=(n=this.sdk)==null?void 0:n.getWebrtcInternals())==null?void 0:r.getPublishPeerConnection()):this.hmsStore.subscribe(s=>{var o,a;s==="Connected"&&i((a=(o=this.sdk)==null?void 0:o.getWebrtcInternals())==null?void 0:a.getPublishPeerConnection())},rn)}),this.getSubscribePeerConnection=()=>new Promise(i=>{var n,r;this.hmsStore.getState(rn)==="Connected"?i((r=(n=this.sdk)==null?void 0:n.getWebrtcInternals())==null?void 0:r.getSubscribePeerConnection()):this.hmsStore.subscribe(s=>{var o,a;s==="Connected"&&i((a=(o=this.sdk)==null?void 0:o.getWebrtcInternals())==null?void 0:a.getSubscribePeerConnection())},rn)}),this.sdk&&$4(this.sdk,this.store,this.hmsStore)}},V4=e=>e.localPeer.id,G4=e=>e.localPeer.audioTrack,H4=e=>e.localPeer.videoTrack,K4=(e,t)=>t,vw=(e,t)=>t,W4=e=>e.remoteTrackStats,yw=e=>e.peerStats,Np=e=>e.localTrackStats,yr=re([yw,V4],(e,t)=>e[t]);re(yr,e=>{var t;return(t=e==null?void 0:e.subscribe)==null?void 0:t.packetsLost});re(yr,e=>{var t;return(t=e==null?void 0:e.subscribe)==null?void 0:t.jitter});re(yr,e=>{var t;return(t=e==null?void 0:e.publish)==null?void 0:t.bitrate});re(yr,e=>{var t;return(t=e==null?void 0:e.subscribe)==null?void 0:t.bitrate});re(yr,e=>{var t;return(t=e==null?void 0:e.publish)==null?void 0:t.availableOutgoingBitrate});re(yr,e=>{var t;return(t=e==null?void 0:e.subscribe)==null?void 0:t.availableIncomingBitrate});re(yr,e=>{var t;return(t=e==null?void 0:e.publish)==null?void 0:t.bytesSent});re(yr,e=>{var t;return(t=e==null?void 0:e.subscribe)==null?void 0:t.bytesReceived});re([yw,K4],(e,t)=>t?e[t]:void 0);re([W4,vw],(e,t)=>t?e[t]:void 0);var bw=re([Np,vw],(e,t)=>t?e[t]:void 0);re([Np,G4],(e,t)=>{var i;return t?(i=e[t])==null?void 0:i[0]:void 0});oi(re(bw,e=>e==null?void 0:e[0]));re([Np,H4],(e,t)=>{var i;return t?(i=e[t])==null?void 0:i[0]:void 0});oi(re(bw,e=>e));var Yn=class{constructor(e,t,i){this.getStats=()=>(this.stats||(this.stats=new j4(this.store,this.sdk)),this.stats),e?this.store=e:this.store=Yn.createNewHMSStore(gw("HMSStore"),Z0),i?this.notifications=i:this.notifications=new A4(this.store),t?this.actions=t:(this.sdk=new $F,this.actions=new x4(this.store,this.sdk,this.notifications)),this.actions.setFrameworkInfo({type:"js",sdkVersion:JF().version}),this.initialTriggerOnSubscribe=!1,ki&&(window.__hms=this,window.__beam=new M4(this.store,this.actions,this.notifications))}triggerOnSubscribe(){this.initialTriggerOnSubscribe||(Yn.makeStoreTriggerOnSubscribe(this.store),this.initialTriggerOnSubscribe=!0)}getStore(){return this.store}getHMSActions(){return this.actions}getActions(){return this.actions}getNotifications(){return{onNotification:this.notifications.onNotification}}static createNewHMSStore(e,t){let i=bU(()=>t()),n=i.setState;i.setState=o=>{let a=typeof o=="function"?vU(o):o;n(a)};let r=i.getState;i.getState=o=>o?o(r()):r(),Yn.compareWithShallowCheckInSubscribe(i);let s=Yn.setUpDevtools(i,e);return _p(Lr({},i),{namedSetState:s})}static makeStoreTriggerOnSubscribe(e){let t=e.subscribe;e.subscribe=(i,n,r)=>(i(e.getState(n),void 0),t(i,n,r))}static compareWithShallowCheckInSubscribe(e){let t=e.subscribe;e.subscribe=(i,n,r)=>(n||(n=s=>s),r=r||yU,t(i,n,r))}static setUpDevtools(e,t){let i;try{i=window.__REDUX_DEVTOOLS_EXTENSION__||window.top.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!i)return s=>{e.setState(s)};let n=i.connect(Yn.devtoolsOptions(t));n.prefix=t?`${t} > `:"";let r=e.setState;return e.setState=s=>{r(s),n.send(`${n.prefix}setState`,e.getState())},n.subscribe(Yn.devtoolsSubscribe(n,e,r)),n.send("setUpStore",e.getState()),(s,o)=>{r(s);let a=o||`${n.prefix}action`;n.send(a,e.getState())}}static devtoolsOptions(e){return{name:e,actionsBlacklist:["audioLevel","playlistProgress","connectionQuality"]}}static devtoolsSubscribe(e,t,i){return n=>{var r,s,o,a;if(n.type==="DISPATCH"&&n.state)["JUMP_TO_ACTION","JUMP_TO_STATE"].includes(n.payload.type)?i(JSON.parse(n.state)):t.setState(JSON.parse(n.state));else if(n.type==="DISPATCH"&&((r=n.payload)==null?void 0:r.type)==="COMMIT")e.init(t.getState());else if(n.type==="DISPATCH"&&((s=n.payload)==null?void 0:s.type)==="IMPORT_STATE"){let l=(o=n.payload.nextLiftedState)==null?void 0:o.actionsById;(((a=n.payload.nextLiftedState)==null?void 0:a.computedStates)||[]).forEach(({state:c},u)=>{let d=l[u]||`${e.prefix}setState`;u===0?e.init(c):(i(c),e.send(d,t.getState()))})}}}};const Hc=new Yn;Hc.triggerOnSubscribe();const Fo=Hc.getActions(),fd=Hc.getStore(),q4=Hc.getNotifications();q4.onNotification(e=>{_t.log("\u2728[NOTIFICATION]",e)});class z4{constructor(){fd.subscribe(t=>{_t.log("\u{1F9A7} update peers"),ii.peers=t},cc)}async getRooms(){try{const t=await Ls.get("api/rooms");_t.log("\u{1F9A7}[ROOMS]",t.data),ii.rooms=t.data.data}catch(t){lh.error(t)}}async getOneRoom(t){try{const i=await Ls.get(`api/rooms/${t}`);_t.log("\u{1F9A7}[ONE ROOM]",i.data),ii.activeRoom=i.data}catch(i){lh.error(i)}}async getTokenForRoomAndRole(t,i){const n=await Ls.get(`api/rooms/${t}/auth`);return _t.log("\u{1F9A7}[HMS TOKEN]",n.data),n.data.token}async joinRoom(t,i){try{ii.peers=[],_t.log(i.name,"joining video call");const n=await this.getTokenForRoomAndRole(t,"instructor");await Fo.join({userName:i.name,authToken:n,settings:{isAudioMuted:!1,isVideoMuted:!1},metaData:{...i},rememberDeviceSelection:!0,alwaysRequestPermissions:!0}),this.getPeers()}catch(n){_t.error(n)}}async leaveRoom(){await Fo.leaveRoom()}async getPeers(){try{const t=fd.getState(cc);ii.peers=t}catch(t){_t.error(t)}}async loadStream(t,i){try{_t.log(t,i),await Fo.attachVideo(t,i)}catch(n){_t.error(n)}}async screenShare(t,i){try{await Fo.setScreenShareEnabled(!0);const n=fd.getState(_4(t));_t.log("\u{1F9A7}",n),this.loadStream(n.id,i)}catch(n){_t.error(n)}}async kick(t,i="You've been given the boot\u{1F97E}"){try{await Fo.removePeer(t,i);let n=ii.peers.findIndex(r=>r.id==t);ii.peers.splice(n,1)}catch(n){_t.error(n)}}}const Ew=new z4,yi=zx({domain:Jx,clientId:Yx,audience:Xx,useRefreshTokens:!0,onRedirectCallback:e=>{T_.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}});yi.on(yi.AUTH_EVENTS.AUTHENTICATED,async function(){Ls.defaults.headers.authorization=yi.bearer,Ls.interceptors.request.use(J4),ii.user=yi.user});async function J4(e){if(!yi.isAuthenticated)return e;const t=yi.identity.exp*1e3,i=t<Date.now(),n=t<Date.now()+1e3*60*60*12;return i?await yi.loginWithPopup():n&&(await yi.getTokenSilently(),Ls.defaults.headers.authorization=yi.bearer,rU.authenticate(yi.bearer)),e}const Na=(e,t)=>{const i=e.__vccOpts||e;for(const[n,r]of t)i[n]=r;return i},Y4={setup(){return{user:Rt(()=>ii.user),account:Rt(()=>ii.account),async login(){yi.loginWithPopup()},async logout(){yi.logout({returnTo:window.location.origin})}}}},X4={class:"navbar-text"},Z4={key:1},Q4={class:"dropdown dropstart my-2 my-lg-0"},ej={type:"button",class:"bg-dark border-0 selectable no-select","data-bs-toggle":"dropdown","aria-expanded":"false"},tj={key:0},ij=["src"],nj={class:"dropdown-menu dropdown-menu-lg-left p-0","aria-labelledby":"authDropdown"},rj={class:"list-group"},sj=nt("div",{class:"list-group-item dropdown-item list-group-item-action"}," Manage Account ",-1),oj=nt("i",{class:"mdi mdi-logout"},null,-1),aj=wa(" logout "),lj=[oj,aj];function cj(e,t,i,n,r,s){const o=qs("router-link");return Ei(),$i("span",X4,[n.user.isAuthenticated?(Ei(),$i("div",Z4,[nt("div",Q4,[nt("div",ej,[n.account.picture||n.user.picture?(Ei(),$i("div",tj,[nt("img",{src:n.account.picture||n.user.picture,alt:"account photo",height:"40",class:"rounded"},null,8,ij)])):Pc("",!0)]),nt("div",nj,[nt("div",rj,[bt(o,{to:{name:"Account"}},{default:oa(()=>[sj]),_:1}),nt("div",{class:"list-group-item dropdown-item list-group-item-action text-danger selectable",onClick:t[1]||(t[1]=(...a)=>n.logout&&n.logout(...a))},lj)])])])])):(Ei(),$i("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:t[0]||(t[0]=(...a)=>n.login&&n.login(...a))}," Login "))])}const Tw=Na(Y4,[["render",cj]]),uj=Object.freeze(Object.defineProperty({__proto__:null,default:Tw},Symbol.toStringTag,{value:"Module"})),dj="/assets/cw-logo.71baeadb.png";const hj={setup(){return{}},components:{Login:Tw}},_w=e=>(VE("data-v-d53feed1"),e=e(),GE(),e),fj={class:"navbar navbar-expand-lg navbar-dark bg-dark px-3"},pj=_w(()=>nt("div",{class:"d-flex flex-column align-items-center"},[nt("img",{alt:"logo",src:dj,height:"45"})],-1)),mj=_w(()=>nt("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[nt("span",{class:"navbar-toggler-icon"})],-1)),gj={class:"collapse navbar-collapse",id:"navbarText"},vj={class:"navbar-nav me-auto"},yj=wa(" About ");function bj(e,t,i,n,r,s){const o=qs("router-link"),a=qs("Login");return Ei(),$i("nav",fj,[bt(o,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:oa(()=>[pj]),_:1}),mj,nt("div",gj,[nt("ul",vj,[nt("li",null,[bt(o,{to:{name:"About"},class:"btn text-success lighten-30 selectable text-uppercase"},{default:oa(()=>[yj]),_:1})])]),bt(a)])])}const ww=Na(hj,[["render",bj],["__scopeId","data-v-d53feed1"]]),Ej=Object.freeze(Object.defineProperty({__proto__:null,default:ww},Symbol.toStringTag,{value:"Module"}));const Tj={setup(){function e(t){return t.preventDefault(),t.returnValue="are you sure? this will end the call"}return vf(()=>{document.addEventListener("beforeunload",e,{capture:!0})}),{appState:Rt(()=>ii)}},components:{Navbar:ww}},_j=nt("footer",{class:"bg-dark text-light"}," Made with \u{1F496} by CodeWorks ",-1);function wj(e,t,i,n,r,s){const o=qs("Navbar"),a=qs("router-view");return Ei(),$i(Oi,null,[nt("header",null,[bt(o)]),nt("main",null,[bt(a)]),_j],64)}const Sj=Na(Tj,[["render",wj]]);const kj=e=>(VE("data-v-b5d34beb"),e=e(),GE(),e),Cj={class:"d-flex justify-content-center"},Aj={class:"wrapper"},Rj=kj(()=>nt("video",{id:"large-stream",autoplay:"",muted:"",playsinline:""},null,-1)),Pj={key:0,class:"profile-name"},Ij={__name:"MainVideo",setup(e){const t=Rt(()=>ii.activePeer),i=Rt(()=>JSON.parse(ii.activePeer.metadata));return qo(t,()=>{const n=t.value.videoTrack,r=document.getElementById("large-stream");Ew.loadStream(n,r)}),(n,r)=>(Ei(),$i("div",Cj,[nt("div",Aj,[Rj,bi(t)?(Ei(),$i("div",Pj,nf(bi(i).name),1)):Pc("",!0)])]))}},Oj=Na(Ij,[["__scopeId","data-v-b5d34beb"]]),Dj=Object.freeze(Object.defineProperty({__proto__:null,default:Oj},Symbol.toStringTag,{value:"Module"}));const Nj=["src"],Lj={__name:"Peoples",props:{peer:Object,num:Number},setup(e){const t=e,i=Rt(()=>{var r;return t.peer.metadata?JSON.parse((r=t.peer)==null?void 0:r.metadata):null});function n(){ii.activePeer=t.peer}return(r,s)=>bi(i)?(Ei(),$i("div",{key:0,class:"peer",onClick:n},[nt("img",{src:bi(i).picture,alt:""},null,8,Nj),wa(" "+nf(bi(i).name)+" ",1),nt("button",{class:"btn btn-danger",onClick:s[0]||(s[0]=SD(o=>bi(Ew).kick(e.peer.id),["stop"]))},"\u{1F97E}")])):Pc("",!0)}},xj=Na(Lj,[["__scopeId","data-v-4923a27e"]]),Mj=Object.freeze(Object.defineProperty({__proto__:null,default:xj},Symbol.toStringTag,{value:"Module"})),$j={class:"room bg-dark text-info rounded p-2 d-flex justify-content-between align-items-center"},Uj={class:"text-light"},Bj={key:0,class:"mdi mdi-circle-outline ms-1"},Fj=nt("button",{class:"btn btn-info bg-info"},[wa("enter"),nt("i",{class:"mdi mdi-arrow-right"})],-1),jj={__name:"Room",props:{room:Object},setup(e){return(t,i)=>{const n=qs("router-link");return Ei(),$i("div",$j,[nt("div",null,[nt("span",Uj,nf(e.room.name),1),e.room.enabled?(Ei(),$i("i",Bj)):Pc("",!0)]),bt(n,{to:{name:"Room",params:{roomId:e.room.id}}},{default:oa(()=>[Fj]),_:1},8,["to"])])}}},Vj=Object.freeze(Object.defineProperty({__proto__:null,default:jj},Symbol.toStringTag,{value:"Module"}));function Gj(e){Object.entries(Object.assign({"./components/Login.vue":uj,"./components/MainVideo.vue":Dj,"./components/Navbar.vue":Ej,"./components/Peoples.vue":Mj,"./components/Room.vue":Vj})).forEach(([i,n])=>{const r=n.name||i.substring(i.lastIndexOf("/")+1).replace(/\.\w+$/,"");e.component(r,n.default)})}const Sw=AD(Sj);Gj(Sw);Sw.use(T_).mount("#app");export{ii as A,Oi as F,xj as P,Na as _,nt as a,Rt as b,$i as c,vf as d,bt as e,GE as f,qs as g,Ew as h,YE as i,Pc as j,Kj as k,Ei as o,VE as p,Hj as r,nf as t,bi as u};
